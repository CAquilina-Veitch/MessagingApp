(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var yg={exports:{}},ju={};var ww;function xD(){if(ww)return ju;ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=n,ju.jsxs=n,ju}var bw;function ID(){return bw||(bw=1,yg.exports=xD()),yg.exports}var O=ID(),vg={exports:{}},Ce={};var Sw;function DD(){if(Sw)return Ce;Sw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function A(z){return z===null||typeof z!="object"?null:(z=E&&z[E]||z["@@iterator"],typeof z=="function"?z:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function k(z,K,ne){this.props=z,this.context=K,this.refs=x,this.updater=ne||D}k.prototype.isReactComponent={},k.prototype.setState=function(z,K){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,K,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=k.prototype;function U(z,K,ne){this.props=z,this.context=K,this.refs=x,this.updater=ne||D}var X=U.prototype=new L;X.constructor=U,b(X,k.prototype),X.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function M(z,K,ne){var se=ne.ref;return{$$typeof:t,type:z,key:K,ref:se!==void 0?se:null,props:ne}}function P(z,K){return M(z.type,K,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function H(z){var K={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ne){return K[ne]})}var V=/\/+/g;function Qe(z,K){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):K.toString(36)}function st(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Y,Y):(z.status="pending",z.then(function(K){z.status==="pending"&&(z.status="fulfilled",z.value=K)},function(K){z.status==="pending"&&(z.status="rejected",z.reason=K)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function te(z,K,ne,se,he){var pe=typeof z;(pe==="undefined"||pe==="boolean")&&(z=null);var Te=!1;if(z===null)Te=!0;else switch(pe){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(z.$$typeof){case t:case e:Te=!0;break;case y:return Te=z._init,te(Te(z._payload),K,ne,se,he)}}if(Te)return he=he(z),Te=se===""?"."+Qe(z,0):se,G(he)?(ne="",Te!=null&&(ne=Te.replace(V,"$&/")+"/"),te(he,K,ne,"",function(Vn){return Vn})):he!=null&&(B(he)&&(he=P(he,ne+(he.key==null||z&&z.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+Te)),K.push(he)),1;Te=0;var He=se===""?".":se+":";if(G(z))for(var Pe=0;Pe<z.length;Pe++)se=z[Pe],pe=He+Qe(se,Pe),Te+=te(se,K,ne,pe,he);else if(Pe=A(z),typeof Pe=="function")for(z=Pe.call(z),Pe=0;!(se=z.next()).done;)se=se.value,pe=He+Qe(se,Pe++),Te+=te(se,K,ne,pe,he);else if(pe==="object"){if(typeof z.then=="function")return te(st(z),K,ne,se,he);throw K=String(z),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ue(z,K,ne){if(z==null)return z;var se=[],he=0;return te(z,se,"","",function(pe){return K.call(ne,pe,he++)}),se}function de(z){if(z._status===-1){var K=z._result;K=K(),K.then(function(ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=ne)},function(ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=ne)}),z._status===-1&&(z._status=0,z._result=K)}if(z._status===1)return z._result.default;throw z._result}var Re=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},De={map:ue,forEach:function(z,K,ne){ue(z,function(){K.apply(this,arguments)},ne)},count:function(z){var K=0;return ue(z,function(){K++}),K},toArray:function(z){return ue(z,function(K){return K})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ce.Activity=_,Ce.Children=De,Ce.Component=k,Ce.Fragment=n,Ce.Profiler=a,Ce.PureComponent=U,Ce.StrictMode=r,Ce.Suspense=d,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},Ce.cache=function(z){return function(){return z.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(z,K,ne){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var se=b({},z.props),he=z.key;if(K!=null)for(pe in K.key!==void 0&&(he=""+K.key),K)!S.call(K,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&K.ref===void 0||(se[pe]=K[pe]);var pe=arguments.length-2;if(pe===1)se.children=ne;else if(1<pe){for(var Te=Array(pe),He=0;He<pe;He++)Te[He]=arguments[He+2];se.children=Te}return M(z.type,he,se)},Ce.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Ce.createElement=function(z,K,ne){var se,he={},pe=null;if(K!=null)for(se in K.key!==void 0&&(pe=""+K.key),K)S.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=K[se]);var Te=arguments.length-2;if(Te===1)he.children=ne;else if(1<Te){for(var He=Array(Te),Pe=0;Pe<Te;Pe++)He[Pe]=arguments[Pe+2];he.children=He}if(z&&z.defaultProps)for(se in Te=z.defaultProps,Te)he[se]===void 0&&(he[se]=Te[se]);return M(z,pe,he)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(z){return{$$typeof:f,render:z}},Ce.isValidElement=B,Ce.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:de}},Ce.memo=function(z,K){return{$$typeof:p,type:z,compare:K===void 0?null:K}},Ce.startTransition=function(z){var K=R.T,ne={};R.T=ne;try{var se=z(),he=R.S;he!==null&&he(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Y,Re)}catch(pe){Re(pe)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),R.T=K}},Ce.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ce.use=function(z){return R.H.use(z)},Ce.useActionState=function(z,K,ne){return R.H.useActionState(z,K,ne)},Ce.useCallback=function(z,K){return R.H.useCallback(z,K)},Ce.useContext=function(z){return R.H.useContext(z)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(z,K){return R.H.useDeferredValue(z,K)},Ce.useEffect=function(z,K){return R.H.useEffect(z,K)},Ce.useEffectEvent=function(z){return R.H.useEffectEvent(z)},Ce.useId=function(){return R.H.useId()},Ce.useImperativeHandle=function(z,K,ne){return R.H.useImperativeHandle(z,K,ne)},Ce.useInsertionEffect=function(z,K){return R.H.useInsertionEffect(z,K)},Ce.useLayoutEffect=function(z,K){return R.H.useLayoutEffect(z,K)},Ce.useMemo=function(z,K){return R.H.useMemo(z,K)},Ce.useOptimistic=function(z,K){return R.H.useOptimistic(z,K)},Ce.useReducer=function(z,K,ne){return R.H.useReducer(z,K,ne)},Ce.useRef=function(z){return R.H.useRef(z)},Ce.useState=function(z){return R.H.useState(z)},Ce.useSyncExternalStore=function(z,K,ne){return R.H.useSyncExternalStore(z,K,ne)},Ce.useTransition=function(){return R.H.useTransition()},Ce.version="19.2.0",Ce}var Aw;function nv(){return Aw||(Aw=1,vg.exports=DD()),vg.exports}var N=nv(),_g={exports:{}},Bu={},Tg={exports:{}},Eg={};var Rw;function ND(){return Rw||(Rw=1,(function(t){function e(te,ue){var de=te.length;te.push(ue);e:for(;0<de;){var Re=de-1>>>1,De=te[Re];if(0<a(De,ue))te[Re]=ue,te[de]=De,de=Re;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ue=te[0],de=te.pop();if(de!==ue){te[0]=de;e:for(var Re=0,De=te.length,z=De>>>1;Re<z;){var K=2*(Re+1)-1,ne=te[K],se=K+1,he=te[se];if(0>a(ne,de))se<De&&0>a(he,ne)?(te[Re]=he,te[se]=de,Re=se):(te[Re]=ne,te[K]=de,Re=K);else if(se<De&&0>a(he,de))te[Re]=he,te[se]=de,Re=se;else break e}}return ue}function a(te,ue){var de=te.sortIndex-ue.sortIndex;return de!==0?de:te.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var d=[],p=[],y=1,_=null,E=3,A=!1,D=!1,b=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function X(te){for(var ue=n(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=te)r(p),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(p)}}function G(te){if(b=!1,X(te),!D)if(n(d)!==null)D=!0,Y||(Y=!0,H());else{var ue=n(p);ue!==null&&st(G,ue.startTime-te)}}var Y=!1,R=-1,S=5,M=-1;function P(){return x?!0:!(t.unstable_now()-M<S)}function B(){if(x=!1,Y){var te=t.unstable_now();M=te;var ue=!0;try{e:{D=!1,b&&(b=!1,L(R),R=-1),A=!0;var de=E;try{t:{for(X(te),_=n(d);_!==null&&!(_.expirationTime>te&&P());){var Re=_.callback;if(typeof Re=="function"){_.callback=null,E=_.priorityLevel;var De=Re(_.expirationTime<=te);if(te=t.unstable_now(),typeof De=="function"){_.callback=De,X(te),ue=!0;break t}_===n(d)&&r(d),X(te)}else r(d);_=n(d)}if(_!==null)ue=!0;else{var z=n(p);z!==null&&st(G,z.startTime-te),ue=!1}}break e}finally{_=null,E=de,A=!1}ue=void 0}}finally{ue?H():Y=!1}}}var H;if(typeof U=="function")H=function(){U(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Qe=V.port2;V.port1.onmessage=B,H=function(){Qe.postMessage(null)}}else H=function(){k(B,0)};function st(te,ue){R=k(function(){te(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(te){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var de=E;E=ue;try{return te()}finally{E=de}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var de=E;E=te;try{return ue()}finally{E=de}},t.unstable_scheduleCallback=function(te,ue,de){var Re=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Re+de:Re):de=Re,te){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=de+De,te={id:y++,callback:ue,priorityLevel:te,startTime:de,expirationTime:De,sortIndex:-1},de>Re?(te.sortIndex=de,e(p,te),n(d)===null&&te===n(p)&&(b?(L(R),R=-1):b=!0,st(G,de-Re))):(te.sortIndex=De,e(d,te),D||A||(D=!0,Y||(Y=!0,H()))),te},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(te){var ue=E;return function(){var de=E;E=ue;try{return te.apply(this,arguments)}finally{E=de}}}})(Eg)),Eg}var Cw;function MD(){return Cw||(Cw=1,Tg.exports=ND()),Tg.exports}var wg={exports:{}},an={};var xw;function OD(){if(xw)return an;xw=1;var t=nv();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,y)},an.flushSync=function(d){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=p,r.p=y,r.d.f()}},an.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},an.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},an.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:_,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},an.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},an.requestFormReset=function(d){r.d.r(d)},an.unstable_batchedUpdates=function(d,p){return d(p)},an.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var Iw;function kD(){if(Iw)return wg.exports;Iw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wg.exports=OD(),wg.exports}var Dw;function VD(){if(Dw)return Bu;Dw=1;var t=MD(),e=nv(),n=kD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),i;if(g===u)return d(m),s;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=g;else{for(var T=!1,C=m.child;C;){if(C===o){T=!0,o=m,u=g;break}if(C===u){T=!0,u=m,o=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===o){T=!0,o=g,u=m;break}if(C===u){T=!0,u=g,o=m;break}C=C.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),U=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Qe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case k:return"Profiler";case x:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case D:return"Portal";case U:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case X:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:Qe(i.type)||"Memo";case S:s=i._payload,i=i._init;try{return Qe(i(s))}catch{}}return null}var st=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Re=[],De=-1;function z(i){return{current:i}}function K(i){0>De||(i.current=Re[De],Re[De]=null,De--)}function ne(i,s){De++,Re[De]=i.current,i.current=s}var se=z(null),he=z(null),pe=z(null),Te=z(null);function He(i,s){switch(ne(pe,s),ne(he,i),ne(se,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?GE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=GE(s),i=KE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(se),ne(se,i)}function Pe(){K(se),K(he),K(pe)}function Vn(i){i.memoizedState!==null&&ne(Te,i);var s=se.current,o=KE(s,i.type);s!==o&&(ne(he,i),ne(se,o))}function Wn(i){he.current===i&&(K(se),K(he)),Te.current===i&&(K(Te),Vu._currentValue=de)}var gi,yi;function mn(i){if(gi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);gi=s&&s[1]||"",yi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gi+i+yi}var Mi=!1;function rr(i,s){if(!i||Mi)return"";Mi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var Z=J}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(J){Z=J}i.call(oe.prototype)}}else{try{throw Error()}catch(J){Z=J}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var j=T.split(`
`),W=C.split(`
`);for(m=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(u===j.length||m===W.length)for(u=j.length-1,m=W.length-1;1<=u&&0<=m&&j[u]!==W[m];)m--;for(;1<=u&&0<=m;u--,m--)if(j[u]!==W[m]){if(u!==1||m!==1)do if(u--,m--,0>m||j[u]!==W[m]){var ie=`
`+j[u].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=u&&0<=m);break}}}finally{Mi=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?mn(o):""}function go(i,s){switch(i.tag){case 26:case 27:case 5:return mn(i.type);case 16:return mn("Lazy");case 13:return i.child!==s&&s!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return rr(i.type,!1);case 11:return rr(i.type.render,!1);case 1:return rr(i.type,!0);case 31:return mn("Activity");default:return""}}function yo(i){try{var s="",o=null;do s+=go(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Yr=Object.prototype.hasOwnProperty,sr=t.unstable_scheduleCallback,Qr=t.unstable_cancelCallback,ha=t.unstable_shouldYield,Xr=t.unstable_requestPaint,ze=t.unstable_now,Pn=t.unstable_getCurrentPriorityLevel,yt=t.unstable_ImmediatePriority,Rt=t.unstable_UserBlockingPriority,ar=t.unstable_NormalPriority,Qc=t.unstable_LowPriority,jl=t.unstable_IdlePriority,gm=t.log,fa=t.unstable_setDisableYieldValue,Wr=null,rn=null;function Zn(i){if(typeof gm=="function"&&fa(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Wr,i)}catch{}}var pn=Math.clz32?Math.clz32:Xc,ym=Math.log,Bl=Math.LN2;function Xc(i){return i>>>=0,i===0?32:31-(ym(i)/Bl|0)|0}var da=256,Oi=262144,Zr=4194304;function vi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Jn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=vi(u):(T&=C,T!==0?m=vi(T):o||(o=C&~i,o!==0&&(m=vi(o))))):(C=u&~g,C!==0?m=vi(C):T!==0?m=vi(T):o||(o=u&~i,o!==0&&(m=vi(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function Jr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function vo(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zl(){var i=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),i}function or(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function es(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function $t(i,s,o,u,m,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var C=i.entanglements,j=i.expirationTimes,W=i.hiddenUpdates;for(o=T&~o;0<o;){var ie=31-pn(o),oe=1<<ie;C[ie]=0,j[ie]=-1;var Z=W[ie];if(Z!==null)for(W[ie]=null,ie=0;ie<Z.length;ie++){var J=Z[ie];J!==null&&(J.lane&=-536870913)}o&=~oe}u!==0&&Fl(i,u,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Fl(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-pn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function ts(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-pn(o),m=1<<u;m&s|i[u]&s&&(i[u]|=s),o&=~m}}function ns(i,s){var o=s&-s;return o=(o&42)!==0?1:Hl(o),(o&(i.suspendedLanes|s))!==0?0:o}function Hl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ql(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function lr(){var i=ue.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function Wc(i,s){var o=ue.p;try{return ue.p=i,s()}finally{ue.p=o}}var ki=Math.random().toString(36).slice(2),vt="__reactFiber$"+ki,Yt="__reactProps$"+ki,Vi="__reactContainer$"+ki,is="__reactEvents$"+ki,Pi="__reactListeners$"+ki,Zc="__reactHandles$"+ki,Gl="__reactResources$"+ki,ur="__reactMarker$"+ki;function ma(i){delete i[vt],delete i[Yt],delete i[is],delete i[Pi],delete i[Zc]}function cr(i){var s=i[vt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Vi]||o[vt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=JE(i);i!==null;){if(o=i[vt])return o;i=JE(i)}return s}i=o,o=i.parentNode}return null}function hr(i){if(i=i[vt]||i[Vi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function pa(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function _i(i){var s=i[Gl];return s||(s=i[Gl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(i){i[ur]=!0}var _o=new Set,rs={};function gn(i,s){Li(i,s),Li(i+"Capture",s)}function Li(i,s){for(rs[i]=s,i=0;i<s.length;i++)_o.add(s[i])}var vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kl={},$l={};function Jc(i){return Yr.call($l,i)?!0:Yr.call(Kl,i)?!1:vm.test(i)?$l[i]=!0:(Kl[i]=!0,!1)}function ss(i,s,o){if(Jc(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function as(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function ei(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function eh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _m(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function To(i){if(!i._valueTracker){var s=eh(i)?"checked":"value";i._valueTracker=_m(i,s,""+i[s])}}function Yl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=eh(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Eo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fr=/[\n"\\]/g;function _t(i){return i.replace(fr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function os(i,s,o,u,m,g,T,C){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+yn(s)):i.value!==""+yn(s)&&(i.value=""+yn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?wo(i,T,yn(s)):o!=null?wo(i,T,yn(o)):u!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+yn(C):i.removeAttribute("name")}function ga(i,s,o,u,m,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){To(i);return}o=o!=null?""+yn(o):"",s=s!=null?""+yn(s):o,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),To(i)}function wo(i,s,o){s==="number"&&Eo(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ge(i,s,o,u){if(i=i.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=s.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&u&&(i[o].defaultSelected=!0)}else{for(o=""+yn(o),s=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function ya(i,s,o){if(s!=null&&(s=""+yn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+yn(o):""}function ls(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(st(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=yn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),To(i)}function ti(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Tm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Tm.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function th(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Ql(i,m,u)}else for(var g in s)s.hasOwnProperty(g)&&Ql(i,g,s[g])}function Xl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(i){return wm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ft(){}var bo=null;function So(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var dr=null,Ln=null;function nh(i){var s=hr(i);if(s&&(i=s.stateNode)){var o=i[Yt]||null;e:switch(i=s.stateNode,s.type){case"input":if(os(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+_t(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var m=u[Yt]||null;if(!m)throw Error(r(90));os(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Yl(u)}break e;case"textarea":ya(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ge(i,!!o.multiple,s,!1)}}}var Wl=!1;function ih(i,s,o){if(Wl)return i(s,o);Wl=!0;try{var u=i(s);return u}finally{if(Wl=!1,(dr!==null||Ln!==null)&&(Jh(),dr&&(s=dr,i=Ln,Ln=dr=null,nh(s),i)))for(s=0;s<i.length;s++)nh(i[s])}}function bn(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=!1;if(Ti)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Zl=!1}var Un=null,Ao=null,Bi=null;function us(){if(Bi)return Bi;var i,s=Ao,o=s.length,u,m="value"in Un?Un.value:Un.textContent,g=m.length;for(i=0;i<o&&s[i]===m[i];i++);var T=o-i;for(u=1;u<=T&&s[o-u]===m[g-u];u++);return Bi=m.slice(i,1<u?1-u:void 0)}function va(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function cs(){return!0}function at(){return!1}function sn(i){function s(o,u,m,g,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(o=i[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?cs:at,this.isPropagationStopped=at,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),s}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=sn(mr),hs=_({},mr,{view:0,detail:0}),rh=sn(hs),fs,Ro,vn,Ta=_({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vn&&(vn&&i.type==="mousemove"?(fs=i.screenX-vn.screenX,Ro=i.screenY-vn.screenY):Ro=fs=0,vn=i),fs)},movementY:function(i){return"movementY"in i?i.movementY:Ro}}),sh=sn(Ta),Ea=_({},Ta,{dataTransfer:0}),ah=sn(Ea),Jl=_({},hs,{relatedTarget:0}),ds=sn(Jl),oh=_({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=sn(oh),bm=_({},mr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lh=sn(bm),wa=_({},mr,{data:0}),eu=sn(wa),uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=nu[i])?!!s[i]:!1}function ms(){return ch}var hh=_({},hs,{key:function(i){if(i.key){var s=uh[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=va(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(i){return i.type==="keypress"?va(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?va(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fh=sn(hh),pr=_({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=sn(pr),dh=_({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),mh=sn(dh),ph=_({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xo=sn(ph),_n=_({},Ta,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gh=sn(_n),yh=_({},mr,{newState:0,oldState:0}),ps=sn(yh),h=[9,13,27,32],v=Ti&&"CompositionEvent"in window,w=null;Ti&&"documentMode"in document&&(w=document.documentMode);var I=Ti&&"TextEvent"in window&&!w,$=Ti&&(!v||w&&8<w&&11>=w),ee=" ",ce=!1;function Xe(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Me=!1;function Ht(i,s){switch(i){case"compositionend":return Mt(s);case"keypress":return s.which!==32?null:(ce=!0,ee);case"textInput":return i=s.data,i===ee&&ce?null:i;default:return null}}function qt(i,s){if(Me)return i==="compositionend"||!v&&Xe(i,s)?(i=us(),Bi=Ao=Un=null,Me=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $&&s.locale!=="ko"?null:s.data;default:return null}}var gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!gs[i.type]:s==="textarea"}function ba(i,s,o,u){dr?Ln?Ln.push(u):Ln=[u]:dr=u,s=of(s,"onChange"),0<s.length&&(o=new _a("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var gr=null,ru=null;function tI(i){jE(i,0)}function vh(i){var s=pa(i);if(Yl(s))return i}function r_(i,s){if(i==="change")return s}var s_=!1;if(Ti){var Sm;if(Ti){var Am="oninput"in document;if(!Am){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),Am=typeof a_.oninput=="function"}Sm=Am}else Sm=!1;s_=Sm&&(!document.documentMode||9<document.documentMode)}function o_(){gr&&(gr.detachEvent("onpropertychange",l_),ru=gr=null)}function l_(i){if(i.propertyName==="value"&&vh(ru)){var s=[];ba(s,ru,i,So(i)),ih(tI,s)}}function nI(i,s,o){i==="focusin"?(o_(),gr=s,ru=o,gr.attachEvent("onpropertychange",l_)):i==="focusout"&&o_()}function iI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vh(ru)}function rI(i,s){if(i==="click")return vh(s)}function sI(i,s){if(i==="input"||i==="change")return vh(s)}function aI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:aI;function su(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Yr.call(s,m)||!jn(i[m],s[m]))return!1}return!0}function u_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function c_(i,s){var o=u_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=u_(o)}}function h_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?h_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function f_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Eo(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Eo(i.document)}return s}function Rm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var oI=Ti&&"documentMode"in document&&11>=document.documentMode,Io=null,Cm=null,au=null,xm=!1;function d_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xm||Io==null||Io!==Eo(u)||(u=Io,"selectionStart"in u&&Rm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),au&&su(au,u)||(au=u,u=of(Cm,"onSelect"),0<u.length&&(s=new _a("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=Io)))}function Sa(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Do={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Im={},m_={};Ti&&(m_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Aa(i){if(Im[i])return Im[i];if(!Do[i])return i;var s=Do[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in m_)return Im[i]=s[o];return i}var p_=Aa("animationend"),g_=Aa("animationiteration"),y_=Aa("animationstart"),lI=Aa("transitionrun"),uI=Aa("transitionstart"),cI=Aa("transitioncancel"),v_=Aa("transitionend"),__=new Map,Dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dm.push("scrollEnd");function Ei(i,s){__.set(i,s),gn(s,[i])}var _h=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ni=[],No=0,Nm=0;function Th(){for(var i=No,s=Nm=No=0;s<i;){var o=ni[s];ni[s++]=null;var u=ni[s];ni[s++]=null;var m=ni[s];ni[s++]=null;var g=ni[s];if(ni[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}g!==0&&T_(o,m,g)}}function Eh(i,s,o,u){ni[No++]=i,ni[No++]=s,ni[No++]=o,ni[No++]=u,Nm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Mm(i,s,o,u){return Eh(i,s,o,u),wh(i)}function Ra(i,s){return Eh(i,null,null,s),wh(i)}function T_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&s!==null&&(m=31-pn(o),i=g.hiddenUpdates,u=i[m],u===null?i[m]=[s]:u.push(s),s.lane=o|536870912),g):null}function wh(i){if(50<xu)throw xu=0,zp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Mo={};function hI(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(i,s,o,u){return new hI(i,s,o,u)}function Om(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yr(i,s){var o=i.alternate;return o===null?(o=Bn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function E_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function bh(i,s,o,u,m,g){var T=0;if(u=i,typeof i=="function")Om(i)&&(T=1);else if(typeof i=="string")T=gD(i,o,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=Bn(31,o,s,m),i.elementType=M,i.lanes=g,i;case b:return Ca(o.children,m,g,s);case x:T=8,m|=24;break;case k:return i=Bn(12,o,s,m|2),i.elementType=k,i.lanes=g,i;case G:return i=Bn(13,o,s,m),i.elementType=G,i.lanes=g,i;case Y:return i=Bn(19,o,s,m),i.elementType=Y,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:T=10;break e;case L:T=9;break e;case X:T=11;break e;case R:T=14;break e;case S:T=16,u=null;break e}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Bn(T,o,s,m),s.elementType=i,s.type=u,s.lanes=g,s}function Ca(i,s,o,u){return i=Bn(7,i,u,s),i.lanes=o,i}function km(i,s,o){return i=Bn(6,i,null,s),i.lanes=o,i}function w_(i){var s=Bn(18,null,null,0);return s.stateNode=i,s}function Vm(i,s,o){return s=Bn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var b_=new WeakMap;function ii(i,s){if(typeof i=="object"&&i!==null){var o=b_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:yo(s)},b_.set(i,s),s)}return{value:i,source:s,stack:yo(s)}}var Oo=[],ko=0,Sh=null,ou=0,ri=[],si=0,ys=null,zi=1,Fi="";function vr(i,s){Oo[ko++]=ou,Oo[ko++]=Sh,Sh=i,ou=s}function S_(i,s,o){ri[si++]=zi,ri[si++]=Fi,ri[si++]=ys,ys=i;var u=zi;i=Fi;var m=32-pn(u)-1;u&=~(1<<m),o+=1;var g=32-pn(s)+m;if(30<g){var T=m-m%5;g=(u&(1<<T)-1).toString(32),u>>=T,m-=T,zi=1<<32-pn(s)+m|o<<m|u,Fi=g+i}else zi=1<<g|o<<m|u,Fi=i}function Pm(i){i.return!==null&&(vr(i,1),S_(i,1,0))}function Lm(i){for(;i===Sh;)Sh=Oo[--ko],Oo[ko]=null,ou=Oo[--ko],Oo[ko]=null;for(;i===ys;)ys=ri[--si],ri[si]=null,Fi=ri[--si],ri[si]=null,zi=ri[--si],ri[si]=null}function A_(i,s){ri[si++]=zi,ri[si++]=Fi,ri[si++]=ys,zi=s.id,Fi=s.overflow,ys=i}var Qt=null,ot=null,Fe=!1,vs=null,ai=!1,Um=Error(r(519));function _s(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lu(ii(s,i)),Um}function R_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[vt]=i,s[Yt]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<Du.length;o++)Ve(Du[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),ga(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),ls(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||HE(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=Ft),s=!0):s=!1,s||_s(i,!0)}function C_(i){for(Qt=i.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Qt=Qt.return}}function Vo(i){if(i!==Qt)return!1;if(!Fe)return C_(i),Fe=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||ng(i.type,i.memoizedProps)),o=!o),o&&ot&&_s(i),C_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ot=ZE(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ot=ZE(i)}else s===27?(s=ot,Os(i.type)?(i=og,og=null,ot=i):ot=s):ot=Qt?li(i.stateNode.nextSibling):null;return!0}function xa(){ot=Qt=null,Fe=!1}function jm(){var i=vs;return i!==null&&(xn===null?xn=i:xn.push.apply(xn,i),vs=null),i}function lu(i){vs===null?vs=[i]:vs.push(i)}var Bm=z(null),Ia=null,_r=null;function Ts(i,s,o){ne(Bm,s._currentValue),s._currentValue=o}function Tr(i){i._currentValue=Bm.current,K(Bm)}function zm(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Fm(i,s,o,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var j=0;j<s.length;j++)if(C.context===s[j]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),zm(g.return,o,i),u||(T=null);break e}g=C.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),zm(T,o,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Po(i,s,o,u){i=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var C=m.type;jn(m.pendingProps.value,T.value)||(i!==null?i.push(C):i=[C])}}else if(m===Te.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Vu):i=[Vu])}m=m.return}i!==null&&Fm(s,i,o,u),s.flags|=262144}function Ah(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Da(i){Ia=i,_r=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xt(i){return x_(Ia,i)}function Rh(i,s){return Ia===null&&Da(i),x_(i,s)}function x_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},_r===null){if(i===null)throw Error(r(308));_r=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else _r=_r.next=s;return o}var fI=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},dI=t.unstable_scheduleCallback,mI=t.unstable_NormalPriority,Ot={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hm(){return{controller:new fI,data:new Map,refCount:0}}function uu(i){i.refCount--,i.refCount===0&&dI(mI,function(){i.controller.abort()})}var cu=null,qm=0,Lo=0,Uo=null;function pI(i,s){if(cu===null){var o=cu=[];qm=0,Lo=$p(),Uo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qm++,s.then(I_,I_),s}function I_(){if(--qm===0&&cu!==null){Uo!==null&&(Uo.status="fulfilled");var i=cu;cu=null,Lo=0,Uo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function gI(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var D_=te.S;te.S=function(i,s){dE=ze(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pI(i,s),D_!==null&&D_(i,s)};var Na=z(null);function Gm(){var i=Na.current;return i!==null?i:it.pooledCache}function Ch(i,s){s===null?ne(Na,Na.current):ne(Na,s.pool)}function N_(){var i=Gm();return i===null?null:{parent:Ot._currentValue,pool:i}}var jo=Error(r(460)),Km=Error(r(474)),xh=Error(r(542)),Ih={then:function(){}};function M_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function O_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Ft,Ft),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,V_(i),i;default:if(typeof s.status=="string")s.then(Ft,Ft);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,V_(i),i}throw Oa=s,jo}}function Ma(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Oa=o,jo):o}}var Oa=null;function k_(){if(Oa===null)throw Error(r(459));var i=Oa;return Oa=null,i}function V_(i){if(i===jo||i===xh)throw Error(r(483))}var Bo=null,hu=0;function Dh(i){var s=hu;return hu+=1,Bo===null&&(Bo=[]),O_(Bo,i,s)}function fu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Nh(i,s){throw s.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function P_(i){function s(q,F){if(i){var Q=q.deletions;Q===null?(q.deletions=[F],q.flags|=16):Q.push(F)}}function o(q,F){if(!i)return null;for(;F!==null;)s(q,F),F=F.sibling;return null}function u(q){for(var F=new Map;q!==null;)q.key!==null?F.set(q.key,q):F.set(q.index,q),q=q.sibling;return F}function m(q,F){return q=yr(q,F),q.index=0,q.sibling=null,q}function g(q,F,Q){return q.index=Q,i?(Q=q.alternate,Q!==null?(Q=Q.index,Q<F?(q.flags|=67108866,F):Q):(q.flags|=67108866,F)):(q.flags|=1048576,F)}function T(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function C(q,F,Q,ae){return F===null||F.tag!==6?(F=km(Q,q.mode,ae),F.return=q,F):(F=m(F,Q),F.return=q,F)}function j(q,F,Q,ae){var _e=Q.type;return _e===b?ie(q,F,Q.props.children,ae,Q.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Ma(_e)===F.type)?(F=m(F,Q.props),fu(F,Q),F.return=q,F):(F=bh(Q.type,Q.key,Q.props,null,q.mode,ae),fu(F,Q),F.return=q,F)}function W(q,F,Q,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==Q.containerInfo||F.stateNode.implementation!==Q.implementation?(F=Vm(Q,q.mode,ae),F.return=q,F):(F=m(F,Q.children||[]),F.return=q,F)}function ie(q,F,Q,ae,_e){return F===null||F.tag!==7?(F=Ca(Q,q.mode,ae,_e),F.return=q,F):(F=m(F,Q),F.return=q,F)}function oe(q,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=km(""+F,q.mode,Q),F.return=q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return Q=bh(F.type,F.key,F.props,null,q.mode,Q),fu(Q,F),Q.return=q,Q;case D:return F=Vm(F,q.mode,Q),F.return=q,F;case S:return F=Ma(F),oe(q,F,Q)}if(st(F)||H(F))return F=Ca(F,q.mode,Q,null),F.return=q,F;if(typeof F.then=="function")return oe(q,Dh(F),Q);if(F.$$typeof===U)return oe(q,Rh(q,F),Q);Nh(q,F)}return null}function Z(q,F,Q,ae){var _e=F!==null?F.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return _e!==null?null:C(q,F,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===_e?j(q,F,Q,ae):null;case D:return Q.key===_e?W(q,F,Q,ae):null;case S:return Q=Ma(Q),Z(q,F,Q,ae)}if(st(Q)||H(Q))return _e!==null?null:ie(q,F,Q,ae,null);if(typeof Q.then=="function")return Z(q,F,Dh(Q),ae);if(Q.$$typeof===U)return Z(q,F,Rh(q,Q),ae);Nh(q,Q)}return null}function J(q,F,Q,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Q)||null,C(F,q,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return q=q.get(ae.key===null?Q:ae.key)||null,j(F,q,ae,_e);case D:return q=q.get(ae.key===null?Q:ae.key)||null,W(F,q,ae,_e);case S:return ae=Ma(ae),J(q,F,Q,ae,_e)}if(st(ae)||H(ae))return q=q.get(Q)||null,ie(F,q,ae,_e,null);if(typeof ae.then=="function")return J(q,F,Q,Dh(ae),_e);if(ae.$$typeof===U)return J(q,F,Q,Rh(F,ae),_e);Nh(F,ae)}return null}function ge(q,F,Q,ae){for(var _e=null,Ke=null,ye=F,Ne=F=0,Ue=null;ye!==null&&Ne<Q.length;Ne++){ye.index>Ne?(Ue=ye,ye=null):Ue=ye.sibling;var $e=Z(q,ye,Q[Ne],ae);if($e===null){ye===null&&(ye=Ue);break}i&&ye&&$e.alternate===null&&s(q,ye),F=g($e,F,Ne),Ke===null?_e=$e:Ke.sibling=$e,Ke=$e,ye=Ue}if(Ne===Q.length)return o(q,ye),Fe&&vr(q,Ne),_e;if(ye===null){for(;Ne<Q.length;Ne++)ye=oe(q,Q[Ne],ae),ye!==null&&(F=g(ye,F,Ne),Ke===null?_e=ye:Ke.sibling=ye,Ke=ye);return Fe&&vr(q,Ne),_e}for(ye=u(ye);Ne<Q.length;Ne++)Ue=J(ye,q,Ne,Q[Ne],ae),Ue!==null&&(i&&Ue.alternate!==null&&ye.delete(Ue.key===null?Ne:Ue.key),F=g(Ue,F,Ne),Ke===null?_e=Ue:Ke.sibling=Ue,Ke=Ue);return i&&ye.forEach(function(Us){return s(q,Us)}),Fe&&vr(q,Ne),_e}function Ee(q,F,Q,ae){if(Q==null)throw Error(r(151));for(var _e=null,Ke=null,ye=F,Ne=F=0,Ue=null,$e=Q.next();ye!==null&&!$e.done;Ne++,$e=Q.next()){ye.index>Ne?(Ue=ye,ye=null):Ue=ye.sibling;var Us=Z(q,ye,$e.value,ae);if(Us===null){ye===null&&(ye=Ue);break}i&&ye&&Us.alternate===null&&s(q,ye),F=g(Us,F,Ne),Ke===null?_e=Us:Ke.sibling=Us,Ke=Us,ye=Ue}if($e.done)return o(q,ye),Fe&&vr(q,Ne),_e;if(ye===null){for(;!$e.done;Ne++,$e=Q.next())$e=oe(q,$e.value,ae),$e!==null&&(F=g($e,F,Ne),Ke===null?_e=$e:Ke.sibling=$e,Ke=$e);return Fe&&vr(q,Ne),_e}for(ye=u(ye);!$e.done;Ne++,$e=Q.next())$e=J(ye,q,Ne,$e.value,ae),$e!==null&&(i&&$e.alternate!==null&&ye.delete($e.key===null?Ne:$e.key),F=g($e,F,Ne),Ke===null?_e=$e:Ke.sibling=$e,Ke=$e);return i&&ye.forEach(function(CD){return s(q,CD)}),Fe&&vr(q,Ne),_e}function nt(q,F,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===b&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:e:{for(var _e=Q.key;F!==null;){if(F.key===_e){if(_e=Q.type,_e===b){if(F.tag===7){o(q,F.sibling),ae=m(F,Q.props.children),ae.return=q,q=ae;break e}}else if(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Ma(_e)===F.type){o(q,F.sibling),ae=m(F,Q.props),fu(ae,Q),ae.return=q,q=ae;break e}o(q,F);break}else s(q,F);F=F.sibling}Q.type===b?(ae=Ca(Q.props.children,q.mode,ae,Q.key),ae.return=q,q=ae):(ae=bh(Q.type,Q.key,Q.props,null,q.mode,ae),fu(ae,Q),ae.return=q,q=ae)}return T(q);case D:e:{for(_e=Q.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===Q.containerInfo&&F.stateNode.implementation===Q.implementation){o(q,F.sibling),ae=m(F,Q.children||[]),ae.return=q,q=ae;break e}else{o(q,F);break}else s(q,F);F=F.sibling}ae=Vm(Q,q.mode,ae),ae.return=q,q=ae}return T(q);case S:return Q=Ma(Q),nt(q,F,Q,ae)}if(st(Q))return ge(q,F,Q,ae);if(H(Q)){if(_e=H(Q),typeof _e!="function")throw Error(r(150));return Q=_e.call(Q),Ee(q,F,Q,ae)}if(typeof Q.then=="function")return nt(q,F,Dh(Q),ae);if(Q.$$typeof===U)return nt(q,F,Rh(q,Q),ae);Nh(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,F!==null&&F.tag===6?(o(q,F.sibling),ae=m(F,Q),ae.return=q,q=ae):(o(q,F),ae=km(Q,q.mode,ae),ae.return=q,q=ae),T(q)):o(q,F)}return function(q,F,Q,ae){try{hu=0;var _e=nt(q,F,Q,ae);return Bo=null,_e}catch(ye){if(ye===jo||ye===xh)throw ye;var Ke=Bn(29,ye,null,q.mode);return Ke.lanes=ae,Ke.return=q,Ke}finally{}}}var ka=P_(!0),L_=P_(!1),Es=!1;function $m(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ws(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function bs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=wh(i),T_(i,null,o),s}return Eh(i,u,s,o),wh(i)}function du(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,ts(i,o)}}function Qm(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Xm=!1;function mu(){if(Xm){var i=Uo;if(i!==null)throw i}}function pu(i,s,o,u){Xm=!1;var m=i.updateQueue;Es=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var j=C,W=j.next;j.next=null,T===null?g=W:T.next=W,T=j;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==T&&(C===null?ie.firstBaseUpdate=W:C.next=W,ie.lastBaseUpdate=j))}if(g!==null){var oe=m.baseState;T=0,ie=W=j=null,C=g;do{var Z=C.lane&-536870913,J=Z!==C.lane;if(J?(Le&Z)===Z:(u&Z)===Z){Z!==0&&Z===Lo&&(Xm=!0),ie!==null&&(ie=ie.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=i,Ee=C;Z=s;var nt=o;switch(Ee.tag){case 1:if(ge=Ee.payload,typeof ge=="function"){oe=ge.call(nt,oe,Z);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ee.payload,Z=typeof ge=="function"?ge.call(nt,oe,Z):ge,Z==null)break e;oe=_({},oe,Z);break e;case 2:Es=!0}}Z=C.callback,Z!==null&&(i.flags|=64,J&&(i.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(W=ie=J,j=oe):ie=ie.next=J,T|=Z;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;J=C,C=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);ie===null&&(j=oe),m.baseState=j,m.firstBaseUpdate=W,m.lastBaseUpdate=ie,g===null&&(m.shared.lanes=0),xs|=T,i.lanes=T,i.memoizedState=oe}}function U_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function j_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)U_(o[i],s)}var zo=z(null),Mh=z(0);function B_(i,s){i=Ir,ne(Mh,i),ne(zo,s),Ir=i|s.baseLanes}function Wm(){ne(Mh,Ir),ne(zo,zo.current)}function Zm(){Ir=Mh.current,K(zo),K(Mh)}var zn=z(null),oi=null;function Ss(i){var s=i.alternate;ne(xt,xt.current&1),ne(zn,i),oi===null&&(s===null||zo.current!==null||s.memoizedState!==null)&&(oi=i)}function Jm(i){ne(xt,xt.current),ne(zn,i),oi===null&&(oi=i)}function z_(i){i.tag===22?(ne(xt,xt.current),ne(zn,i),oi===null&&(oi=i)):As()}function As(){ne(xt,xt.current),ne(zn,zn.current)}function Fn(i){K(zn),oi===i&&(oi=null),K(xt)}var xt=z(0);function Oh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||sg(o)||ag(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Er=0,Ie=null,et=null,kt=null,kh=!1,Fo=!1,Va=!1,Vh=0,gu=0,Ho=null,yI=0;function Tt(){throw Error(r(321))}function ep(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!jn(i[o],s[o]))return!1;return!0}function tp(i,s,o,u,m,g){return Er=g,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,te.H=i===null||i.memoizedState===null?ST:gp,Va=!1,g=o(u,m),Va=!1,Fo&&(g=H_(s,o,u,m)),F_(i),g}function F_(i){te.H=_u;var s=et!==null&&et.next!==null;if(Er=0,kt=et=Ie=null,kh=!1,gu=0,Ho=null,s)throw Error(r(300));i===null||Vt||(i=i.dependencies,i!==null&&Ah(i)&&(Vt=!0))}function H_(i,s,o,u){Ie=i;var m=0;do{if(Fo&&(Ho=null),gu=0,Fo=!1,25<=m)throw Error(r(301));if(m+=1,kt=et=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}te.H=AT,g=s(o,u)}while(Fo);return g}function vI(){var i=te.H,s=i.useState()[0];return s=typeof s.then=="function"?yu(s):s,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Ie.flags|=1024),s}function np(){var i=Vh!==0;return Vh=0,i}function ip(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function rp(i){if(kh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}kh=!1}Er=0,kt=et=Ie=null,Fo=!1,gu=Vh=0,Ho=null}function Tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ie.memoizedState=kt=i:kt=kt.next=i,kt}function It(){if(et===null){var i=Ie.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var s=kt===null?Ie.memoizedState:kt.next;if(s!==null)kt=s,et=i;else{if(i===null)throw Ie.alternate===null?Error(r(467)):Error(r(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},kt===null?Ie.memoizedState=kt=i:kt=kt.next=i}return kt}function Ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yu(i){var s=gu;return gu+=1,Ho===null&&(Ho=[]),i=O_(Ho,i,s),s=Ie,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,te.H=s===null||s.memoizedState===null?ST:gp),i}function Lh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return yu(i);if(i.$$typeof===U)return Xt(i)}throw Error(r(438,String(i)))}function sp(i){var s=null,o=Ie.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ph(),Ie.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=P;return s.index++,o}function wr(i,s){return typeof s=="function"?s(i):s}function Uh(i){var s=It();return ap(s,et,i)}function ap(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=i.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}s.baseQueue=m=g,u.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{s=m.next;var C=T=null,j=null,W=s,ie=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Le&oe)===oe:(Er&oe)===oe){var Z=W.revertLane;if(Z===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===Lo&&(ie=!0);else if((Er&Z)===Z){W=W.next,Z===Lo&&(ie=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(C=j=oe,T=g):j=j.next=oe,Ie.lanes|=Z,xs|=Z;oe=W.action,Va&&o(g,oe),g=W.hasEagerState?W.eagerState:o(g,oe)}else Z={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(C=j=Z,T=g):j=j.next=Z,Ie.lanes|=oe,xs|=oe;W=W.next}while(W!==null&&W!==s);if(j===null?T=g:j.next=C,!jn(g,i.memoizedState)&&(Vt=!0,ie&&(o=Uo,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=j,u.lastRenderedState=g}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function op(i){var s=It(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);jn(g,s.memoizedState)||(Vt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function q_(i,s,o){var u=Ie,m=It(),g=Fe;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!jn((et||m).memoizedState,o);if(T&&(m.memoizedState=o,Vt=!0),m=m.queue,cp($_.bind(null,u,m,i),[i]),m.getSnapshot!==s||T||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,qo(9,{destroy:void 0},K_.bind(null,u,m,o,s),null),it===null)throw Error(r(349));g||(Er&127)!==0||G_(u,s,o)}return o}function G_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ie.updateQueue,s===null?(s=Ph(),Ie.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function K_(i,s,o,u){s.value=o,s.getSnapshot=u,Y_(s)&&Q_(i)}function $_(i,s,o){return o(function(){Y_(s)&&Q_(i)})}function Y_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!jn(i,o)}catch{return!0}}function Q_(i){var s=Ra(i,2);s!==null&&In(s,i,2)}function lp(i){var s=Tn();if(typeof i=="function"){var o=i;if(i=o(),Va){Zn(!0);try{o()}finally{Zn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:i},s}function X_(i,s,o,u){return i.baseState=o,ap(i,et,typeof u=="function"?u:wr)}function _I(i,s,o,u,m){if(zh(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};te.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,W_(s,g)):(g.next=o.next,s.pending=o.next=g)}}function W_(i,s){var o=s.action,u=s.payload,m=i.state;if(s.isTransition){var g=te.T,T={};te.T=T;try{var C=o(m,u),j=te.S;j!==null&&j(T,C),Z_(i,s,C)}catch(W){up(i,s,W)}finally{g!==null&&T.types!==null&&(g.types=T.types),te.T=g}}else try{g=o(m,u),Z_(i,s,g)}catch(W){up(i,s,W)}}function Z_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){J_(i,s,u)},function(u){return up(i,s,u)}):J_(i,s,o)}function J_(i,s,o){s.status="fulfilled",s.value=o,eT(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,W_(i,o)))}function up(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,eT(s),s=s.next;while(s!==u)}i.action=null}function eT(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function tT(i,s){return s}function nT(i,s){if(Fe){var o=it.formState;if(o!==null){e:{var u=Ie;if(Fe){if(ot){t:{for(var m=ot,g=ai;m.nodeType!==8;){if(!g){m=null;break t}if(m=li(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){ot=li(m.nextSibling),u=m.data==="F!";break e}}_s(u)}u=!1}u&&(s=o[0])}}return o=Tn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tT,lastRenderedState:s},o.queue=u,o=ET.bind(null,Ie,u),u.dispatch=o,u=lp(!1),g=pp.bind(null,Ie,!1,u.queue),u=Tn(),m={state:s,dispatch:null,action:i,pending:null},u.queue=m,o=_I.bind(null,Ie,m,g,o),m.dispatch=o,u.memoizedState=i,[s,o,!1]}function iT(i){var s=It();return rT(s,et,i)}function rT(i,s,o){if(s=ap(i,s,tT)[0],i=Uh(wr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=yu(s)}catch(T){throw T===jo?xh:T}else u=s;s=It();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(Ie.flags|=2048,qo(9,{destroy:void 0},TI.bind(null,m,o),null)),[u,g,i]}function TI(i,s){i.action=s}function sT(i){var s=It(),o=et;if(o!==null)return rT(s,o,i);It(),s=s.memoizedState,o=It();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function qo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ie.updateQueue,s===null&&(s=Ph(),Ie.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function aT(){return It().memoizedState}function jh(i,s,o,u){var m=Tn();Ie.flags|=i,m.memoizedState=qo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Bh(i,s,o,u){var m=It();u=u===void 0?null:u;var g=m.memoizedState.inst;et!==null&&u!==null&&ep(u,et.memoizedState.deps)?m.memoizedState=qo(s,g,o,u):(Ie.flags|=i,m.memoizedState=qo(1|s,g,o,u))}function oT(i,s){jh(8390656,8,i,s)}function cp(i,s){Bh(2048,8,i,s)}function EI(i){Ie.flags|=4;var s=Ie.updateQueue;if(s===null)s=Ph(),Ie.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function lT(i){var s=It().memoizedState;return EI({ref:s,nextImpl:i}),function(){if((Ye&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function uT(i,s){return Bh(4,2,i,s)}function cT(i,s){return Bh(4,4,i,s)}function hT(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function fT(i,s,o){o=o!=null?o.concat([i]):null,Bh(4,4,hT.bind(null,s,i),o)}function hp(){}function dT(i,s){var o=It();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&ep(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function mT(i,s){var o=It();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&ep(s,u[1]))return u[0];if(u=i(),Va){Zn(!0);try{i()}finally{Zn(!1)}}return o.memoizedState=[u,s],u}function fp(i,s,o){return o===void 0||(Er&1073741824)!==0&&(Le&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=pE(),Ie.lanes|=i,xs|=i,o)}function pT(i,s,o,u){return jn(o,s)?o:zo.current!==null?(i=fp(i,o,u),jn(i,s)||(Vt=!0),i):(Er&42)===0||(Er&1073741824)!==0&&(Le&261930)===0?(Vt=!0,i.memoizedState=o):(i=pE(),Ie.lanes|=i,xs|=i,s)}function gT(i,s,o,u,m){var g=ue.p;ue.p=g!==0&&8>g?g:8;var T=te.T,C={};te.T=C,pp(i,!1,s,o);try{var j=m(),W=te.S;if(W!==null&&W(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ie=gI(j,u);vu(i,s,ie,Gn(i))}else vu(i,s,u,Gn(i))}catch(oe){vu(i,s,{then:function(){},status:"rejected",reason:oe},Gn())}finally{ue.p=g,T!==null&&C.types!==null&&(T.types=C.types),te.T=T}}function wI(){}function dp(i,s,o,u){if(i.tag!==5)throw Error(r(476));var m=yT(i).queue;gT(i,m,s,de,o===null?wI:function(){return vT(i),o(u)})}function yT(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:de},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function vT(i){var s=yT(i);s.next===null&&(s=i.alternate.memoizedState),vu(i,s.next.queue,{},Gn())}function mp(){return Xt(Vu)}function _T(){return It().memoizedState}function TT(){return It().memoizedState}function bI(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Gn();i=ws(o);var u=bs(s,i,o);u!==null&&(In(u,s,o),du(u,s,o)),s={cache:Hm()},i.payload=s;return}s=s.return}}function SI(i,s,o){var u=Gn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},zh(i)?wT(s,o):(o=Mm(i,s,o,u),o!==null&&(In(o,i,u),bT(o,s,u)))}function ET(i,s,o){var u=Gn();vu(i,s,o,u)}function vu(i,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(zh(i))wT(s,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,C=g(T,o);if(m.hasEagerState=!0,m.eagerState=C,jn(C,T))return Eh(i,s,m,0),it===null&&Th(),!1}catch{}finally{}if(o=Mm(i,s,m,u),o!==null)return In(o,i,u),bT(o,s,u),!0}return!1}function pp(i,s,o,u){if(u={lane:2,revertLane:$p(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zh(i)){if(s)throw Error(r(479))}else s=Mm(i,o,u,2),s!==null&&In(s,i,2)}function zh(i){var s=i.alternate;return i===Ie||s!==null&&s===Ie}function wT(i,s){Fo=kh=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function bT(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,ts(i,o)}}var _u={readContext:Xt,use:Lh,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};_u.useEffectEvent=Tt;var ST={readContext:Xt,use:Lh,useCallback:function(i,s){return Tn().memoizedState=[i,s===void 0?null:s],i},useContext:Xt,useEffect:oT,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,jh(4194308,4,hT.bind(null,s,i),o)},useLayoutEffect:function(i,s){return jh(4194308,4,i,s)},useInsertionEffect:function(i,s){jh(4,2,i,s)},useMemo:function(i,s){var o=Tn();s=s===void 0?null:s;var u=i();if(Va){Zn(!0);try{i()}finally{Zn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Tn();if(o!==void 0){var m=o(s);if(Va){Zn(!0);try{o(s)}finally{Zn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=SI.bind(null,Ie,i),[u.memoizedState,i]},useRef:function(i){var s=Tn();return i={current:i},s.memoizedState=i},useState:function(i){i=lp(i);var s=i.queue,o=ET.bind(null,Ie,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:hp,useDeferredValue:function(i,s){var o=Tn();return fp(o,i,s)},useTransition:function(){var i=lp(!1);return i=gT.bind(null,Ie,i.queue,!0,!1),Tn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ie,m=Tn();if(Fe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),it===null)throw Error(r(349));(Le&127)!==0||G_(u,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,oT($_.bind(null,u,g,i),[i]),u.flags|=2048,qo(9,{destroy:void 0},K_.bind(null,u,g,o,s),null),o},useId:function(){var i=Tn(),s=it.identifierPrefix;if(Fe){var o=Fi,u=zi;o=(u&~(1<<32-pn(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Vh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=yI++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:mp,useFormState:nT,useActionState:nT,useOptimistic:function(i){var s=Tn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pp.bind(null,Ie,!0,o),o.dispatch=s,[i,s]},useMemoCache:sp,useCacheRefresh:function(){return Tn().memoizedState=bI.bind(null,Ie)},useEffectEvent:function(i){var s=Tn(),o={impl:i};return s.memoizedState=o,function(){if((Ye&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},gp={readContext:Xt,use:Lh,useCallback:dT,useContext:Xt,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:Uh,useRef:aT,useState:function(){return Uh(wr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=It();return pT(o,et.memoizedState,i,s)},useTransition:function(){var i=Uh(wr)[0],s=It().memoizedState;return[typeof i=="boolean"?i:yu(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:iT,useActionState:iT,useOptimistic:function(i,s){var o=It();return X_(o,et,i,s)},useMemoCache:sp,useCacheRefresh:TT};gp.useEffectEvent=lT;var AT={readContext:Xt,use:Lh,useCallback:dT,useContext:Xt,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:op,useRef:aT,useState:function(){return op(wr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=It();return et===null?fp(o,i,s):pT(o,et.memoizedState,i,s)},useTransition:function(){var i=op(wr)[0],s=It().memoizedState;return[typeof i=="boolean"?i:yu(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:sT,useActionState:sT,useOptimistic:function(i,s){var o=It();return et!==null?X_(o,et,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:sp,useCacheRefresh:TT};AT.useEffectEvent=lT;function yp(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var vp={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Gn(),m=ws(u);m.payload=s,o!=null&&(m.callback=o),s=bs(i,m,u),s!==null&&(In(s,i,u),du(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Gn(),m=ws(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=bs(i,m,u),s!==null&&(In(s,i,u),du(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Gn(),u=ws(o);u.tag=2,s!=null&&(u.callback=s),s=bs(i,u,o),s!==null&&(In(s,i,o),du(s,i,o))}};function RT(i,s,o,u,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,T):s.prototype&&s.prototype.isPureReactComponent?!su(o,u)||!su(m,g):!0}function CT(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&vp.enqueueReplaceState(s,s.state,null)}function Pa(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=_({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}function xT(i){_h(i)}function IT(i){console.error(i)}function DT(i){_h(i)}function Fh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function NT(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _p(i,s,o){return o=ws(o),o.tag=3,o.payload={element:null},o.callback=function(){Fh(i,s)},o}function MT(i){return i=ws(i),i.tag=3,i}function OT(i,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;i.payload=function(){return m(g)},i.callback=function(){NT(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){NT(s,o,u),typeof m!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function AI(i,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Po(s,o,m,!0),o=zn.current,o!==null){switch(o.tag){case 31:case 13:return oi===null?ef():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ih?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),qp(i,u,m)),!1;case 22:return o.flags|=65536,u===Ih?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),qp(i,u,m)),!1}throw Error(r(435,o.tag))}return qp(i,u,m),ef(),!1}if(Fe)return s=zn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Um&&(i=Error(r(422),{cause:u}),lu(ii(i,o)))):(u!==Um&&(s=Error(r(423),{cause:u}),lu(ii(s,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=ii(u,o),m=_p(i.stateNode,u,m),Qm(i,m),Et!==4&&(Et=2)),!1;var g=Error(r(520),{cause:u});if(g=ii(g,o),Cu===null?Cu=[g]:Cu.push(g),Et!==4&&(Et=2),s===null)return!0;u=ii(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=_p(o.stateNode,u,i),Qm(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Is===null||!Is.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=MT(m),OT(m,i,o,u),Qm(o,m),!1}o=o.return}while(o!==null);return!1}var Tp=Error(r(461)),Vt=!1;function Wt(i,s,o,u){s.child=i===null?L_(s,null,o,u):ka(s,i.child,o,u)}function kT(i,s,o,u,m){o=o.render;var g=s.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return Da(s),u=tp(i,s,o,T,g,m),C=np(),i!==null&&!Vt?(ip(i,s,m),br(i,s,m)):(Fe&&C&&Pm(s),s.flags|=1,Wt(i,s,u,m),s.child)}function VT(i,s,o,u,m){if(i===null){var g=o.type;return typeof g=="function"&&!Om(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,PT(i,s,g,u,m)):(i=bh(o.type,null,u,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!xp(i,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:su,o(T,u)&&i.ref===s.ref)return br(i,s,m)}return s.flags|=1,i=yr(g,u),i.ref=s.ref,i.return=s,s.child=i}function PT(i,s,o,u,m){if(i!==null){var g=i.memoizedProps;if(su(g,u)&&i.ref===s.ref)if(Vt=!1,s.pendingProps=u=g,xp(i,m))(i.flags&131072)!==0&&(Vt=!0);else return s.lanes=i.lanes,br(i,s,m)}return Ep(i,s,o,u,m)}function LT(i,s,o,u){var m=u.children,g=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(u=s.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~g}else u=0,s.child=null;return UT(i,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ch(s,g!==null?g.cachePool:null),g!==null?B_(s,g):Wm(),z_(s);else return u=s.lanes=536870912,UT(i,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Ch(s,g.cachePool),B_(s,g),As(),s.memoizedState=null):(i!==null&&Ch(s,null),Wm(),As());return Wt(i,s,m,o),s.child}function Tu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function UT(i,s,o,u,m){var g=Gm();return g=g===null?null:{parent:Ot._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},i!==null&&Ch(s,null),Wm(),z_(s),i!==null&&Po(i,s,u,!0),s.childLanes=m,null}function Hh(i,s){return s=Gh({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function jT(i,s,o){return ka(s,i.child,null,o),i=Hh(s,s.pendingProps),i.flags|=2,Fn(s),s.memoizedState=null,i}function RI(i,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Fe){if(u.mode==="hidden")return i=Hh(s,u),s.lanes=536870912,Tu(null,i);if(Jm(s),(i=ot)?(i=WE(i,ai),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ys!==null?{id:zi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qt=s,ot=null)):i=null,i===null)throw _s(s);return s.lanes=536870912,null}return Hh(s,u)}var g=i.memoizedState;if(g!==null){var T=g.dehydrated;if(Jm(s),m)if(s.flags&256)s.flags&=-257,s=jT(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Vt||Po(i,s,o,!1),m=(o&i.childLanes)!==0,Vt||m){if(u=it,u!==null&&(T=ns(u,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,Ra(i,T),In(u,i,T),Tp;ef(),s=jT(i,s,o)}else i=g.treeContext,ot=li(T.nextSibling),Qt=s,Fe=!0,vs=null,ai=!1,i!==null&&A_(s,i),s=Hh(s,u),s.flags|=4096;return s}return i=yr(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function qh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Ep(i,s,o,u,m){return Da(s),o=tp(i,s,o,u,void 0,m),u=np(),i!==null&&!Vt?(ip(i,s,m),br(i,s,m)):(Fe&&u&&Pm(s),s.flags|=1,Wt(i,s,o,m),s.child)}function BT(i,s,o,u,m,g){return Da(s),s.updateQueue=null,o=H_(s,u,o,m),F_(i),u=np(),i!==null&&!Vt?(ip(i,s,g),br(i,s,g)):(Fe&&u&&Pm(s),s.flags|=1,Wt(i,s,o,g),s.child)}function zT(i,s,o,u,m){if(Da(s),s.stateNode===null){var g=Mo,T=o.contextType;typeof T=="object"&&T!==null&&(g=Xt(T)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},$m(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Xt(T):Mo,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(yp(s,o,T,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&vp.enqueueReplaceState(g,g.state,null),pu(s,u,g,m),mu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){g=s.stateNode;var C=s.memoizedProps,j=Pa(o,C);g.props=j;var W=g.context,ie=o.contextType;T=Mo,typeof ie=="object"&&ie!==null&&(T=Xt(ie));var oe=o.getDerivedStateFromProps;ie=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,ie||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||W!==T)&&CT(s,g,u,T),Es=!1;var Z=s.memoizedState;g.state=Z,pu(s,u,g,m),mu(),W=s.memoizedState,C||Z!==W||Es?(typeof oe=="function"&&(yp(s,o,oe,u),W=s.memoizedState),(j=Es||RT(s,o,j,u,Z,W,T))?(ie||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=W),g.props=u,g.state=W,g.context=T,u=j):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Ym(i,s),T=s.memoizedProps,ie=Pa(o,T),g.props=ie,oe=s.pendingProps,Z=g.context,W=o.contextType,j=Mo,typeof W=="object"&&W!==null&&(j=Xt(W)),C=o.getDerivedStateFromProps,(W=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==oe||Z!==j)&&CT(s,g,u,j),Es=!1,Z=s.memoizedState,g.state=Z,pu(s,u,g,m),mu();var J=s.memoizedState;T!==oe||Z!==J||Es||i!==null&&i.dependencies!==null&&Ah(i.dependencies)?(typeof C=="function"&&(yp(s,o,C,u),J=s.memoizedState),(ie=Es||RT(s,o,ie,u,Z,J,j)||i!==null&&i.dependencies!==null&&Ah(i.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,J,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,J,j)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),g.props=u,g.state=J,g.context=j,u=ie):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(s.flags|=1024),u=!1)}return g=u,qh(i,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&u?(s.child=ka(s,i.child,null,m),s.child=ka(s,null,o,m)):Wt(i,s,o,m),s.memoizedState=g.state,i=s.child):i=br(i,s,m),i}function FT(i,s,o,u){return xa(),s.flags|=256,Wt(i,s,o,u),s.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(i){return{baseLanes:i,cachePool:N_()}}function Sp(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=qn),i}function HT(i,s,o){var u=s.pendingProps,m=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(xt.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Fe){if(m?Ss(s):As(),(i=ot)?(i=WE(i,ai),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ys!==null?{id:zi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qt=s,ot=null)):i=null,i===null)throw _s(s);return ag(i)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,m?(As(),m=s.mode,C=Gh({mode:"hidden",children:C},m),u=Ca(u,m,o,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,Tu(null,u)):(Ss(s),Ap(s,C))}var j=i.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(g)s.flags&256?(Ss(s),s.flags&=-257,s=Rp(i,s,o)):s.memoizedState!==null?(As(),s.child=i.child,s.flags|=128,s=null):(As(),C=u.fallback,m=s.mode,u=Gh({mode:"visible",children:u.children},m),C=Ca(C,m,o,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,ka(s,i.child,null,o),u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,s=Tu(null,u));else if(Ss(s),ag(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var W=T.dgst;T=W,u=Error(r(419)),u.stack="",u.digest=T,lu({value:u,source:null,stack:null}),s=Rp(i,s,o)}else if(Vt||Po(i,s,o,!1),T=(o&i.childLanes)!==0,Vt||T){if(T=it,T!==null&&(u=ns(T,o),u!==0&&u!==j.retryLane))throw j.retryLane=u,Ra(i,u),In(T,i,u),Tp;sg(C)||ef(),s=Rp(i,s,o)}else sg(C)?(s.flags|=192,s.child=i.child,s=null):(i=j.treeContext,ot=li(C.nextSibling),Qt=s,Fe=!0,vs=null,ai=!1,i!==null&&A_(s,i),s=Ap(s,u.children),s.flags|=4096);return s}return m?(As(),C=u.fallback,m=s.mode,j=i.child,W=j.sibling,u=yr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,W!==null?C=yr(W,C):(C=Ca(C,m,o,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,Tu(null,u),u=s.child,C=i.child.memoizedState,C===null?C=bp(o):(m=C.cachePool,m!==null?(j=Ot._currentValue,m=m.parent!==j?{parent:j,pool:j}:m):m=N_(),C={baseLanes:C.baseLanes|o,cachePool:m}),u.memoizedState=C,u.childLanes=Sp(i,T,o),s.memoizedState=wp,Tu(i.child,u)):(Ss(s),o=i.child,i=o.sibling,o=yr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function Ap(i,s){return s=Gh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Gh(i,s){return i=Bn(22,i,null,s),i.lanes=0,i}function Rp(i,s,o){return ka(s,i.child,null,o),i=Ap(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function qT(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),zm(i.return,s,o)}function Cp(i,s,o,u,m,g){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=g)}function GT(i,s,o){var u=s.pendingProps,m=u.revealOrder,g=u.tail;u=u.children;var T=xt.current,C=(T&2)!==0;if(C?(T=T&1|2,s.flags|=128):T&=1,ne(xt,T),Wt(i,s,u,o),u=Fe?ou:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qT(i,o,s);else if(i.tag===19)qT(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)i=o.alternate,i!==null&&Oh(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Cp(s,!1,m,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Oh(i)===null){s.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Cp(s,!0,o,null,g,u);break;case"together":Cp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function br(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),xs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Po(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=yr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=yr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function xp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Ah(i)))}function CI(i,s,o){switch(s.tag){case 3:He(s,s.stateNode.containerInfo),Ts(s,Ot,i.memoizedState.cache),xa();break;case 27:case 5:Vn(s);break;case 4:He(s,s.stateNode.containerInfo);break;case 10:Ts(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Jm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ss(s),s.flags|=128,null):(o&s.child.childLanes)!==0?HT(i,s,o):(Ss(s),i=br(i,s,o),i!==null?i.sibling:null);Ss(s);break;case 19:var m=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Po(i,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return GT(i,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ne(xt,xt.current),u)break;return null;case 22:return s.lanes=0,LT(i,s,o,s.pendingProps);case 24:Ts(s,Ot,i.memoizedState.cache)}return br(i,s,o)}function KT(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Vt=!0;else{if(!xp(i,o)&&(s.flags&128)===0)return Vt=!1,CI(i,s,o);Vt=(i.flags&131072)!==0}else Vt=!1,Fe&&(s.flags&1048576)!==0&&S_(s,ou,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=Ma(s.elementType),s.type=i,typeof i=="function")Om(i)?(u=Pa(i,u),s.tag=1,s=zT(null,s,i,u,o)):(s.tag=0,s=Ep(null,s,i,u,o));else{if(i!=null){var m=i.$$typeof;if(m===X){s.tag=11,s=kT(null,s,i,u,o);break e}else if(m===R){s.tag=14,s=VT(null,s,i,u,o);break e}}throw s=Qe(i)||i,Error(r(306,s,""))}}return s;case 0:return Ep(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Pa(u,s.pendingProps),zT(i,s,u,m,o);case 3:e:{if(He(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var g=s.memoizedState;m=g.element,Ym(i,s),pu(s,u,null,o);var T=s.memoizedState;if(u=T.cache,Ts(s,Ot,u),u!==g.cache&&Fm(s,[Ot],o,!0),mu(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=FT(i,s,u,o);break e}else if(u!==m){m=ii(Error(r(424)),s),lu(m),s=FT(i,s,u,o);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ot=li(i.firstChild),Qt=s,Fe=!0,vs=null,ai=!0,o=L_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(xa(),u===m){s=br(i,s,o);break e}Wt(i,s,u,o)}s=s.child}return s;case 26:return qh(i,s),i===null?(o=iw(s.type,null,s.pendingProps,null))?s.memoizedState=o:Fe||(o=s.type,i=s.pendingProps,u=lf(pe.current).createElement(o),u[vt]=s,u[Yt]=i,Zt(u,o,i),Ct(u),s.stateNode=u):s.memoizedState=iw(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Vn(s),i===null&&Fe&&(u=s.stateNode=ew(s.type,s.pendingProps,pe.current),Qt=s,ai=!0,m=ot,Os(s.type)?(og=m,ot=li(u.firstChild)):ot=m),Wt(i,s,s.pendingProps.children,o),qh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Fe&&((m=u=ot)&&(u=iD(u,s.type,s.pendingProps,ai),u!==null?(s.stateNode=u,Qt=s,ot=li(u.firstChild),ai=!1,m=!0):m=!1),m||_s(s)),Vn(s),m=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,u=g.children,ng(m,g)?u=null:T!==null&&ng(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=tp(i,s,vI,null,null,o),Vu._currentValue=m),qh(i,s),Wt(i,s,u,o),s.child;case 6:return i===null&&Fe&&((i=o=ot)&&(o=rD(o,s.pendingProps,ai),o!==null?(s.stateNode=o,Qt=s,ot=null,i=!0):i=!1),i||_s(s)),null;case 13:return HT(i,s,o);case 4:return He(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=ka(s,null,u,o):Wt(i,s,u,o),s.child;case 11:return kT(i,s,s.type,s.pendingProps,o);case 7:return Wt(i,s,s.pendingProps,o),s.child;case 8:return Wt(i,s,s.pendingProps.children,o),s.child;case 12:return Wt(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Ts(s,s.type,u.value),Wt(i,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,Da(s),m=Xt(m),u=u(m),s.flags|=1,Wt(i,s,u,o),s.child;case 14:return VT(i,s,s.type,s.pendingProps,o);case 15:return PT(i,s,s.type,s.pendingProps,o);case 19:return GT(i,s,o);case 31:return RI(i,s,o);case 22:return LT(i,s,o,s.pendingProps);case 24:return Da(s),u=Xt(Ot),i===null?(m=Gm(),m===null&&(m=it,g=Hm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:u,cache:m},$m(s),Ts(s,Ot,m)):((i.lanes&o)!==0&&(Ym(i,s),pu(s,null,null,o),mu()),m=i.memoizedState,g=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Ts(s,Ot,u)):(u=g.cache,Ts(s,Ot,u),u!==m.cache&&Fm(s,[Ot],o,!0))),Wt(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Sr(i){i.flags|=4}function Ip(i,s,o,u,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(_E())i.flags|=8192;else throw Oa=Ih,Km}else i.flags&=-16777217}function $T(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!lw(s))if(_E())i.flags|=8192;else throw Oa=Ih,Km}function Kh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?zl():536870912,i.lanes|=s,Yo|=s)}function Eu(i,s){if(!Fe)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function lt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function xI(i,s,o){var u=s.pendingProps;switch(Lm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Tr(Ot),Pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Vo(s)?Sr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jm())),lt(s),null;case 26:var m=s.type,g=s.memoizedState;return i===null?(Sr(s),g!==null?(lt(s),$T(s,g)):(lt(s),Ip(s,m,null,u,o))):g?g!==i.memoizedState?(Sr(s),lt(s),$T(s,g)):(lt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Sr(s),lt(s),Ip(s,m,i,u,o)),null;case 27:if(Wn(s),o=pe.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Sr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return lt(s),null}i=se.current,Vo(s)?R_(s):(i=ew(m,u,o),s.stateNode=i,Sr(s))}return lt(s),null;case 5:if(Wn(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Sr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return lt(s),null}if(g=se.current,Vo(s))R_(s);else{var T=lf(pe.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}g[vt]=s,g[Yt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;e:switch(Zt(g,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Sr(s)}}return lt(s),Ip(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Sr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=pe.current,Vo(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,m=Qt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[vt]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||HE(i.nodeValue,o)),i||_s(s,!0)}else i=lf(i).createTextNode(u),i[vt]=s,s.stateNode=i}return lt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=Vo(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[vt]=s}else xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),i=!1}else o=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(Fn(s),s):(Fn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return lt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Vo(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[vt]=s}else xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),m=!1}else m=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Fn(s),s):(Fn(s),null)}return Fn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),Kh(s,s.updateQueue),lt(s),null);case 4:return Pe(),i===null&&Wp(s.stateNode.containerInfo),lt(s),null;case 10:return Tr(s.type),lt(s),null;case 19:if(K(xt),u=s.memoizedState,u===null)return lt(s),null;if(m=(s.flags&128)!==0,g=u.rendering,g===null)if(m)Eu(u,!1);else{if(Et!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Oh(i),g!==null){for(s.flags|=128,Eu(u,!1),i=g.updateQueue,s.updateQueue=i,Kh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)E_(o,i),o=o.sibling;return ne(xt,xt.current&1|2),Fe&&vr(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&ze()>Wh&&(s.flags|=128,m=!0,Eu(u,!1),s.lanes=4194304)}else{if(!m)if(i=Oh(g),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,Kh(s,i),Eu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Fe)return lt(s),null}else 2*ze()-u.renderingStartTime>Wh&&o!==536870912&&(s.flags|=128,m=!0,Eu(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(i=u.last,i!==null?i.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=ze(),i.sibling=null,o=xt.current,ne(xt,m?o&1|2:o&1),Fe&&vr(s,u.treeForkCount),i):(lt(s),null);case 22:case 23:return Fn(s),Zm(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),o=s.updateQueue,o!==null&&Kh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&K(Na),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Tr(Ot),lt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function II(i,s){switch(Lm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Tr(Ot),Pe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Wn(s),null;case 31:if(s.memoizedState!==null){if(Fn(s),s.alternate===null)throw Error(r(340));xa()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Fn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));xa()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return K(xt),null;case 4:return Pe(),null;case 10:return Tr(s.type),null;case 22:case 23:return Fn(s),Zm(),i!==null&&K(Na),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Tr(Ot),null;case 25:return null;default:return null}}function YT(i,s){switch(Lm(s),s.tag){case 3:Tr(Ot),Pe();break;case 26:case 27:case 5:Wn(s);break;case 4:Pe();break;case 31:s.memoizedState!==null&&Fn(s);break;case 13:Fn(s);break;case 19:K(xt);break;case 10:Tr(s.type);break;case 22:case 23:Fn(s),Zm(),i!==null&&K(Na);break;case 24:Tr(Ot)}}function wu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&i)===i){u=void 0;var g=o.create,T=o.inst;u=g(),T.destroy=u}o=o.next}while(o!==m)}}catch(C){Je(s,s.return,C)}}function Rs(i,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&i)===i){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,m=s;var j=o,W=C;try{W()}catch(ie){Je(m,j,ie)}}}u=u.next}while(u!==g)}}catch(ie){Je(s,s.return,ie)}}function QT(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{j_(s,o)}catch(u){Je(i,i.return,u)}}}function XT(i,s,o){o.props=Pa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Je(i,s,u)}}function bu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(m){Je(i,s,m)}}function Hi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Je(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Je(i,s,m)}else o.current=null}function WT(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Je(i,i.return,m)}}function Dp(i,s,o){try{var u=i.stateNode;WI(u,i.type,o,s),u[Yt]=s}catch(m){Je(i,i.return,m)}}function ZT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Os(i.type)||i.tag===4}function Np(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ZT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Os(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mp(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Ft));else if(u!==4&&(u===27&&Os(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Mp(i,s,o),i=i.sibling;i!==null;)Mp(i,s,o),i=i.sibling}function $h(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Os(i.type)&&(o=i.stateNode),i=i.child,i!==null))for($h(i,s,o),i=i.sibling;i!==null;)$h(i,s,o),i=i.sibling}function JT(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Zt(s,u,o),s[vt]=i,s[Yt]=o}catch(g){Je(i,i.return,g)}}var Ar=!1,Pt=!1,Op=!1,eE=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function DI(i,s){if(i=i.containerInfo,eg=pf,i=f_(i),Rm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,C=-1,j=-1,W=0,ie=0,oe=i,Z=null;t:for(;;){for(var J;oe!==o||m!==0&&oe.nodeType!==3||(C=T+m),oe!==g||u!==0&&oe.nodeType!==3||(j=T+u),oe.nodeType===3&&(T+=oe.nodeValue.length),(J=oe.firstChild)!==null;)Z=oe,oe=J;for(;;){if(oe===i)break t;if(Z===o&&++W===m&&(C=T),Z===g&&++ie===u&&(j=T),(J=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=J}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(tg={focusedElem:i,selectionRange:o},pf=!1,Gt=s;Gt!==null;)if(s=Gt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Gt=i;else for(;Gt!==null;){switch(s=Gt,g=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)m=i[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var ge=Pa(o.type,m);i=u.getSnapshotBeforeUpdate(ge,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){Je(o,o.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)rg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Gt=i;break}Gt=s.return}}function tE(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Cr(i,o),u&4&&wu(5,o);break;case 1:if(Cr(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(T){Je(o,o.return,T)}else{var m=Pa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Je(o,o.return,T)}}u&64&&QT(o),u&512&&bu(o,o.return);break;case 3:if(Cr(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{j_(i,s)}catch(T){Je(o,o.return,T)}}break;case 27:s===null&&u&4&&JT(o);case 26:case 5:Cr(i,o),s===null&&u&4&&WT(o),u&512&&bu(o,o.return);break;case 12:Cr(i,o);break;case 31:Cr(i,o),u&4&&rE(i,o);break;case 13:Cr(i,o),u&4&&sE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=jI.bind(null,o),sD(i,o))));break;case 22:if(u=o.memoizedState!==null||Ar,!u){s=s!==null&&s.memoizedState!==null||Pt,m=Ar;var g=Pt;Ar=u,(Pt=s)&&!g?xr(i,o,(o.subtreeFlags&8772)!==0):Cr(i,o),Ar=m,Pt=g}break;case 30:break;default:Cr(i,o)}}function nE(i){var s=i.alternate;s!==null&&(i.alternate=null,nE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ma(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,An=!1;function Rr(i,s,o){for(o=o.child;o!==null;)iE(i,s,o),o=o.sibling}function iE(i,s,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Wr,o)}catch{}switch(o.tag){case 26:Pt||Hi(o,s),Rr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||Hi(o,s);var u=ft,m=An;Os(o.type)&&(ft=o.stateNode,An=!1),Rr(i,s,o),Mu(o.stateNode),ft=u,An=m;break;case 5:Pt||Hi(o,s);case 6:if(u=ft,m=An,ft=null,Rr(i,s,o),ft=u,An=m,ft!==null)if(An)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(g){Je(o,s,g)}else try{ft.removeChild(o.stateNode)}catch(g){Je(o,s,g)}break;case 18:ft!==null&&(An?(i=ft,QE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),nl(i)):QE(ft,o.stateNode));break;case 4:u=ft,m=An,ft=o.stateNode.containerInfo,An=!0,Rr(i,s,o),ft=u,An=m;break;case 0:case 11:case 14:case 15:Rs(2,o,s),Pt||Rs(4,o,s),Rr(i,s,o);break;case 1:Pt||(Hi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&XT(o,s,u)),Rr(i,s,o);break;case 21:Rr(i,s,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,Rr(i,s,o),Pt=u;break;default:Rr(i,s,o)}}function rE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{nl(i)}catch(o){Je(s,s.return,o)}}}function sE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{nl(i)}catch(o){Je(s,s.return,o)}}function NI(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new eE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new eE),s;default:throw Error(r(435,i.tag))}}function Yh(i,s){var o=NI(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=BI.bind(null,i,u);u.then(m,m)}})}function Rn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=i,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Os(C.type)){ft=C.stateNode,An=!1;break e}break;case 5:ft=C.stateNode,An=!1;break e;case 3:case 4:ft=C.stateNode.containerInfo,An=!0;break e}C=C.return}if(ft===null)throw Error(r(160));iE(g,T,m),ft=null,An=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)aE(s,i),s=s.sibling}var wi=null;function aE(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Rn(s,i),Cn(i),u&4&&(Rs(3,i,i.return),wu(3,i),Rs(5,i,i.return));break;case 1:Rn(s,i),Cn(i),u&512&&(Pt||o===null||Hi(o,o.return)),u&64&&Ar&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=wi;if(Rn(s,i),Cn(i),u&512&&(Pt||o===null||Hi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[ur]||g[vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Zt(g,u,o),g[vt]=i,Ct(g),u=g;break e;case"link":var T=aw("link","href",m).get(u+(o.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(C,1);break t}}g=m.createElement(u),Zt(g,u,o),m.head.appendChild(g);break;case"meta":if(T=aw("meta","content",m).get(u+(o.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(C,1);break t}}g=m.createElement(u),Zt(g,u,o),m.head.appendChild(g);break;default:throw Error(r(468,u))}g[vt]=i,Ct(g),u=g}i.stateNode=u}else ow(m,i.type,i.stateNode);else i.stateNode=sw(m,u,i.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ow(m,i.type,i.stateNode):sw(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Dp(i,i.memoizedProps,o.memoizedProps)}break;case 27:Rn(s,i),Cn(i),u&512&&(Pt||o===null||Hi(o,o.return)),o!==null&&u&4&&Dp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Rn(s,i),Cn(i),u&512&&(Pt||o===null||Hi(o,o.return)),i.flags&32){m=i.stateNode;try{ti(m,"")}catch(ge){Je(i,i.return,ge)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Dp(i,m,o!==null?o.memoizedProps:m)),u&1024&&(Op=!0);break;case 6:if(Rn(s,i),Cn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ge){Je(i,i.return,ge)}}break;case 3:if(hf=null,m=wi,wi=uf(s.containerInfo),Rn(s,i),wi=m,Cn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{nl(s.containerInfo)}catch(ge){Je(i,i.return,ge)}Op&&(Op=!1,oE(i));break;case 4:u=wi,wi=uf(i.stateNode.containerInfo),Rn(s,i),Cn(i),wi=u;break;case 12:Rn(s,i),Cn(i);break;case 31:Rn(s,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yh(i,u)));break;case 13:Rn(s,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Xh=ze()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yh(i,u)));break;case 22:m=i.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,W=Ar,ie=Pt;if(Ar=W||m,Pt=ie||j,Rn(s,i),Pt=ie,Ar=W,Cn(i),u&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||j||Ar||Pt||La(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){j=o=s;try{if(g=j.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=j.stateNode;var oe=j.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ge){Je(j,j.return,ge)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(ge){Je(j,j.return,ge)}}}else if(s.tag===18){if(o===null){j=s;try{var J=j.stateNode;m?XE(J,!0):XE(j.stateNode,!1)}catch(ge){Je(j,j.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yh(i,o))));break;case 19:Rn(s,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yh(i,u)));break;case 30:break;case 21:break;default:Rn(s,i),Cn(i)}}function Cn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(ZT(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,g=Np(i);$h(i,g,m);break;case 5:var T=o.stateNode;o.flags&32&&(ti(T,""),o.flags&=-33);var C=Np(i);$h(i,C,T);break;case 3:case 4:var j=o.stateNode.containerInfo,W=Np(i);Mp(i,W,j);break;default:throw Error(r(161))}}catch(ie){Je(i,i.return,ie)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function oE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;oE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Cr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tE(i,s.alternate,s),s=s.sibling}function La(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Rs(4,s,s.return),La(s);break;case 1:Hi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&XT(s,s.return,o),La(s);break;case 27:Mu(s.stateNode);case 26:case 5:Hi(s,s.return),La(s);break;case 22:s.memoizedState===null&&La(s);break;case 30:La(s);break;default:La(s)}i=i.sibling}}function xr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:xr(m,g,o),wu(4,g);break;case 1:if(xr(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){Je(u,u.return,W)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)U_(j[m],C)}catch(W){Je(u,u.return,W)}}o&&T&64&&QT(g),bu(g,g.return);break;case 27:JT(g);case 26:case 5:xr(m,g,o),o&&u===null&&T&4&&WT(g),bu(g,g.return);break;case 12:xr(m,g,o);break;case 31:xr(m,g,o),o&&T&4&&rE(m,g);break;case 13:xr(m,g,o),o&&T&4&&sE(m,g);break;case 22:g.memoizedState===null&&xr(m,g,o),bu(g,g.return);break;case 30:break;default:xr(m,g,o)}s=s.sibling}}function kp(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&uu(o))}function Vp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&uu(i))}function bi(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lE(i,s,o,u),s=s.sibling}function lE(i,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:bi(i,s,o,u),m&2048&&wu(9,s);break;case 1:bi(i,s,o,u);break;case 3:bi(i,s,o,u),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&uu(i)));break;case 12:if(m&2048){bi(i,s,o,u),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){Je(s,s.return,j)}}else bi(i,s,o,u);break;case 31:bi(i,s,o,u);break;case 13:bi(i,s,o,u);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?bi(i,s,o,u):Su(i,s):g._visibility&2?bi(i,s,o,u):(g._visibility|=2,Go(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&kp(T,s);break;case 24:bi(i,s,o,u),m&2048&&Vp(s.alternate,s);break;default:bi(i,s,o,u)}}function Go(i,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=i,T=s,C=o,j=u,W=T.flags;switch(T.tag){case 0:case 11:case 15:Go(g,T,C,j,m),wu(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&2?Go(g,T,C,j,m):Su(g,T):(ie._visibility|=2,Go(g,T,C,j,m)),m&&W&2048&&kp(T.alternate,T);break;case 24:Go(g,T,C,j,m),m&&W&2048&&Vp(T.alternate,T);break;default:Go(g,T,C,j,m)}s=s.sibling}}function Su(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,m=u.flags;switch(u.tag){case 22:Su(o,u),m&2048&&kp(u.alternate,u);break;case 24:Su(o,u),m&2048&&Vp(u.alternate,u);break;default:Su(o,u)}s=s.sibling}}var Au=8192;function Ko(i,s,o){if(i.subtreeFlags&Au)for(i=i.child;i!==null;)uE(i,s,o),i=i.sibling}function uE(i,s,o){switch(i.tag){case 26:Ko(i,s,o),i.flags&Au&&i.memoizedState!==null&&yD(o,wi,i.memoizedState,i.memoizedProps);break;case 5:Ko(i,s,o);break;case 3:case 4:var u=wi;wi=uf(i.stateNode.containerInfo),Ko(i,s,o),wi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Au,Au=16777216,Ko(i,s,o),Au=u):Ko(i,s,o));break;default:Ko(i,s,o)}}function cE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ru(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,fE(u,i)}cE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hE(i),i=i.sibling}function hE(i){switch(i.tag){case 0:case 11:case 15:Ru(i),i.flags&2048&&Rs(9,i,i.return);break;case 3:Ru(i);break;case 12:Ru(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Qh(i)):Ru(i);break;default:Ru(i)}}function Qh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,fE(u,i)}cE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Rs(8,s,s.return),Qh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Qh(s));break;default:Qh(s)}i=i.sibling}}function fE(i,s){for(;Gt!==null;){var o=Gt;switch(o.tag){case 0:case 11:case 15:Rs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:uu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Gt=u;else e:for(o=i;Gt!==null;){u=Gt;var m=u.sibling,g=u.return;if(nE(u),u===o){Gt=null;break e}if(m!==null){m.return=g,Gt=m;break e}Gt=g}}}var MI={getCacheForType:function(i){var s=Xt(Ot),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return Xt(Ot).controller.signal}},OI=typeof WeakMap=="function"?WeakMap:Map,Ye=0,it=null,ke=null,Le=0,Ze=0,Hn=null,Cs=!1,$o=!1,Pp=!1,Ir=0,Et=0,xs=0,Ua=0,Lp=0,qn=0,Yo=0,Cu=null,xn=null,Up=!1,Xh=0,dE=0,Wh=1/0,Zh=null,Is=null,Bt=0,Ds=null,Qo=null,Dr=0,jp=0,Bp=null,mE=null,xu=0,zp=null;function Gn(){return(Ye&2)!==0&&Le!==0?Le&-Le:te.T!==null?$p():lr()}function pE(){if(qn===0)if((Le&536870912)===0||Fe){var i=Oi;Oi<<=1,(Oi&3932160)===0&&(Oi=262144),qn=i}else qn=536870912;return i=zn.current,i!==null&&(i.flags|=32),qn}function In(i,s,o){(i===it&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(Xo(i,0),Ns(i,Le,qn,!1)),es(i,o),((Ye&2)===0||i!==it)&&(i===it&&((Ye&2)===0&&(Ua|=o),Et===4&&Ns(i,Le,qn,!1)),qi(i))}function gE(i,s,o){if((Ye&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Jr(i,s),m=u?PI(i,s):Hp(i,s,!0),g=u;do{if(m===0){$o&&!u&&Ns(i,s,0,!1);break}else{if(o=i.current.alternate,g&&!kI(o)){m=Hp(i,s,!1),g=!1;continue}if(m===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=i;m=Cu;var j=C.current.memoizedState.isDehydrated;if(j&&(Xo(C,T).flags|=256),T=Hp(C,T,!1),T!==2){if(Pp&&!j){C.errorRecoveryDisabledLanes|=g,Ua|=g,m=4;break e}g=xn,xn=m,g!==null&&(xn===null?xn=g:xn.push.apply(xn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){Xo(i,0),Ns(i,s,0,!0);break}e:{switch(u=i,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ns(u,s,qn,!Cs);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Xh+300-ze(),10<m)){if(Ns(u,s,qn,!Cs),Jn(u,0,!0)!==0)break e;Dr=s,u.timeoutHandle=$E(yE.bind(null,u,o,xn,Zh,Up,s,qn,Ua,Yo,Cs,g,"Throttled",-0,0),m);break e}yE(u,o,xn,Zh,Up,s,qn,Ua,Yo,Cs,g,null,-0,0)}}break}while(!0);qi(i)}function yE(i,s,o,u,m,g,T,C,j,W,ie,oe,Z,J){if(i.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},uE(s,g,oe);var ge=(g&62914560)===g?Xh-ze():(g&4194048)===g?dE-ze():0;if(ge=vD(oe,ge),ge!==null){Dr=g,i.cancelPendingCommit=ge(AE.bind(null,i,s,g,o,u,m,T,C,j,ie,oe,null,Z,J)),Ns(i,g,T,!W);return}}AE(i,s,g,o,u,m,T,C,j)}function kI(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!jn(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ns(i,s,o,u){s&=~Lp,s&=~Ua,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var m=s;0<m;){var g=31-pn(m),T=1<<g;u[g]=-1,m&=~T}o!==0&&Fl(i,o,s)}function Jh(){return(Ye&6)===0?(Iu(0),!1):!0}function Fp(){if(ke!==null){if(Ze===0)var i=ke.return;else i=ke,_r=Ia=null,rp(i),Bo=null,hu=0,i=ke;for(;i!==null;)YT(i.alternate,i),i=i.return;ke=null}}function Xo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,eD(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Dr=0,Fp(),it=i,ke=o=yr(i.current,null),Le=s,Ze=0,Hn=null,Cs=!1,$o=Jr(i,s),Pp=!1,Yo=qn=Lp=Ua=xs=Et=0,xn=Cu=null,Up=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var m=31-pn(u),g=1<<m;s|=i[m],u&=~g}return Ir=s,Th(),o}function vE(i,s){Ie=null,te.H=_u,s===jo||s===xh?(s=k_(),Ze=3):s===Km?(s=k_(),Ze=4):Ze=s===Tp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hn=s,ke===null&&(Et=1,Fh(i,ii(s,i.current)))}function _E(){var i=zn.current;return i===null?!0:(Le&4194048)===Le?oi===null:(Le&62914560)===Le||(Le&536870912)!==0?i===oi:!1}function TE(){var i=te.H;return te.H=_u,i===null?_u:i}function EE(){var i=te.A;return te.A=MI,i}function ef(){Et=4,Cs||(Le&4194048)!==Le&&zn.current!==null||($o=!0),(xs&134217727)===0&&(Ua&134217727)===0||it===null||Ns(it,Le,qn,!1)}function Hp(i,s,o){var u=Ye;Ye|=2;var m=TE(),g=EE();(it!==i||Le!==s)&&(Zh=null,Xo(i,s)),s=!1;var T=Et;e:do try{if(Ze!==0&&ke!==null){var C=ke,j=Hn;switch(Ze){case 8:Fp(),T=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(s=!0);var W=Ze;if(Ze=0,Hn=null,Wo(i,C,j,W),o&&$o){T=0;break e}break;default:W=Ze,Ze=0,Hn=null,Wo(i,C,j,W)}}VI(),T=Et;break}catch(ie){vE(i,ie)}while(!0);return s&&i.shellSuspendCounter++,_r=Ia=null,Ye=u,te.H=m,te.A=g,ke===null&&(it=null,Le=0,Th()),T}function VI(){for(;ke!==null;)wE(ke)}function PI(i,s){var o=Ye;Ye|=2;var u=TE(),m=EE();it!==i||Le!==s?(Zh=null,Wh=ze()+500,Xo(i,s)):$o=Jr(i,s);e:do try{if(Ze!==0&&ke!==null){s=ke;var g=Hn;t:switch(Ze){case 1:Ze=0,Hn=null,Wo(i,s,g,1);break;case 2:case 9:if(M_(g)){Ze=0,Hn=null,bE(s);break}s=function(){Ze!==2&&Ze!==9||it!==i||(Ze=7),qi(i)},g.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:M_(g)?(Ze=0,Hn=null,bE(s)):(Ze=0,Hn=null,Wo(i,s,g,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var C=ke;if(T?lw(T):C.stateNode.complete){Ze=0,Hn=null;var j=C.sibling;if(j!==null)ke=j;else{var W=C.return;W!==null?(ke=W,tf(W)):ke=null}break t}}Ze=0,Hn=null,Wo(i,s,g,5);break;case 6:Ze=0,Hn=null,Wo(i,s,g,6);break;case 8:Fp(),Et=6;break e;default:throw Error(r(462))}}LI();break}catch(ie){vE(i,ie)}while(!0);return _r=Ia=null,te.H=u,te.A=m,Ye=o,ke!==null?0:(it=null,Le=0,Th(),Et)}function LI(){for(;ke!==null&&!ha();)wE(ke)}function wE(i){var s=KT(i.alternate,i,Ir);i.memoizedProps=i.pendingProps,s===null?tf(i):ke=s}function bE(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=BT(o,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=BT(o,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:rp(s);default:YT(o,s),s=ke=E_(s,Ir),s=KT(o,s,Ir)}i.memoizedProps=i.pendingProps,s===null?tf(i):ke=s}function Wo(i,s,o,u){_r=Ia=null,rp(s),Bo=null,hu=0;var m=s.return;try{if(AI(i,m,s,o,Le)){Et=1,Fh(i,ii(o,i.current)),ke=null;return}}catch(g){if(m!==null)throw ke=m,g;Et=1,Fh(i,ii(o,i.current)),ke=null;return}s.flags&32768?(Fe||u===1?i=!0:$o||(Le&536870912)!==0?i=!1:(Cs=i=!0,(u===2||u===9||u===3||u===6)&&(u=zn.current,u!==null&&u.tag===13&&(u.flags|=16384))),SE(s,i)):tf(s)}function tf(i){var s=i;do{if((s.flags&32768)!==0){SE(s,Cs);return}i=s.return;var o=xI(s.alternate,s,Ir);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=i}while(s!==null);Et===0&&(Et=5)}function SE(i,s){do{var o=II(i.alternate,i);if(o!==null){o.flags&=32767,ke=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){ke=i;return}ke=i=o}while(i!==null);Et=6,ke=null}function AE(i,s,o,u,m,g,T,C,j){i.cancelPendingCommit=null;do nf();while(Bt!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=Nm,$t(i,o,g,T,C,j),i===it&&(ke=it=null,Le=0),Qo=s,Ds=i,Dr=o,jp=g,Bp=m,mE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zI(ar,function(){return DE(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=te.T,te.T=null,m=ue.p,ue.p=2,T=Ye,Ye|=4;try{DI(i,s,o)}finally{Ye=T,ue.p=m,te.T=u}}Bt=1,RE(),CE(),xE()}}function RE(){if(Bt===1){Bt=0;var i=Ds,s=Qo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=te.T,te.T=null;var u=ue.p;ue.p=2;var m=Ye;Ye|=4;try{aE(s,i);var g=tg,T=f_(i.containerInfo),C=g.focusedElem,j=g.selectionRange;if(T!==C&&C&&C.ownerDocument&&h_(C.ownerDocument.documentElement,C)){if(j!==null&&Rm(C)){var W=j.start,ie=j.end;if(ie===void 0&&(ie=W),"selectionStart"in C)C.selectionStart=W,C.selectionEnd=Math.min(ie,C.value.length);else{var oe=C.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),ge=C.textContent.length,Ee=Math.min(j.start,ge),nt=j.end===void 0?Ee:Math.min(j.end,ge);!J.extend&&Ee>nt&&(T=nt,nt=Ee,Ee=T);var q=c_(C,Ee),F=c_(C,nt);if(q&&F&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var Q=oe.createRange();Q.setStart(q.node,q.offset),J.removeAllRanges(),Ee>nt?(J.addRange(Q),J.extend(F.node,F.offset)):(Q.setEnd(F.node,F.offset),J.addRange(Q))}}}}for(oe=[],J=C;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var ae=oe[C];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}pf=!!eg,tg=eg=null}finally{Ye=m,ue.p=u,te.T=o}}i.current=s,Bt=2}}function CE(){if(Bt===2){Bt=0;var i=Ds,s=Qo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=te.T,te.T=null;var u=ue.p;ue.p=2;var m=Ye;Ye|=4;try{tE(i,s.alternate,s)}finally{Ye=m,ue.p=u,te.T=o}}Bt=3}}function xE(){if(Bt===4||Bt===3){Bt=0,Xr();var i=Ds,s=Qo,o=Dr,u=mE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Bt=5:(Bt=0,Qo=Ds=null,IE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Is=null),ql(o),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Wr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=te.T,m=ue.p,ue.p=2,te.T=null;try{for(var g=i.onRecoverableError,T=0;T<u.length;T++){var C=u[T];g(C.value,{componentStack:C.stack})}}finally{te.T=s,ue.p=m}}(Dr&3)!==0&&nf(),qi(i),m=i.pendingLanes,(o&261930)!==0&&(m&42)!==0?i===zp?xu++:(xu=0,zp=i):xu=0,Iu(0)}}function IE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,uu(s)))}function nf(){return RE(),CE(),xE(),DE()}function DE(){if(Bt!==5)return!1;var i=Ds,s=jp;jp=0;var o=ql(Dr),u=te.T,m=ue.p;try{ue.p=32>o?32:o,te.T=null,o=Bp,Bp=null;var g=Ds,T=Dr;if(Bt=0,Qo=Ds=null,Dr=0,(Ye&6)!==0)throw Error(r(331));var C=Ye;if(Ye|=4,hE(g.current),lE(g,g.current,T,o),Ye=C,Iu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Wr,g)}catch{}return!0}finally{ue.p=m,te.T=u,IE(i,s)}}function NE(i,s,o){s=ii(o,s),s=_p(i.stateNode,s,2),i=bs(i,s,2),i!==null&&(es(i,2),qi(i))}function Je(i,s,o){if(i.tag===3)NE(i,i,o);else for(;s!==null;){if(s.tag===3){NE(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Is===null||!Is.has(u))){i=ii(o,i),o=MT(2),u=bs(s,o,2),u!==null&&(OT(o,u,s,i),es(u,2),qi(u));break}}s=s.return}}function qp(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new OI;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Pp=!0,m.add(o),i=UI.bind(null,i,s,o),s.then(i,i))}function UI(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,it===i&&(Le&o)===o&&(Et===4||Et===3&&(Le&62914560)===Le&&300>ze()-Xh?(Ye&2)===0&&Xo(i,0):Lp|=o,Yo===Le&&(Yo=0)),qi(i)}function ME(i,s){s===0&&(s=zl()),i=Ra(i,s),i!==null&&(es(i,s),qi(i))}function jI(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),ME(i,o)}function BI(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),ME(i,o)}function zI(i,s){return sr(i,s)}var rf=null,Zo=null,Gp=!1,sf=!1,Kp=!1,Ms=0;function qi(i){i!==Zo&&i.next===null&&(Zo===null?rf=Zo=i:Zo=Zo.next=i),sf=!0,Gp||(Gp=!0,HI())}function Iu(i,s){if(!Kp&&sf){Kp=!0;do for(var o=!1,u=rf;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var T=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-pn(42|i)+1)-1,g&=m&~(T&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,PE(u,g))}else g=Le,g=Jn(u,u===it?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Jr(u,g)||(o=!0,PE(u,g));u=u.next}while(o);Kp=!1}}function FI(){OE()}function OE(){sf=Gp=!1;var i=0;Ms!==0&&JI()&&(i=Ms);for(var s=ze(),o=null,u=rf;u!==null;){var m=u.next,g=kE(u,s);g===0?(u.next=null,o===null?rf=m:o.next=m,m===null&&(Zo=o)):(o=u,(i!==0||(g&3)!==0)&&(sf=!0)),u=m}Bt!==0&&Bt!==5||Iu(i),Ms!==0&&(Ms=0)}function kE(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-pn(g),C=1<<T,j=m[T];j===-1?((C&o)===0||(C&u)!==0)&&(m[T]=vo(C,s)):j<=s&&(i.expiredLanes|=C),g&=~C}if(s=it,o=Le,o=Jn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Qr(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Jr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&Qr(u),ql(o)){case 2:case 8:o=Rt;break;case 32:o=ar;break;case 268435456:o=jl;break;default:o=ar}return u=VE.bind(null,i),o=sr(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&Qr(u),i.callbackPriority=2,i.callbackNode=null,2}function VE(i,s){if(Bt!==0&&Bt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(nf()&&i.callbackNode!==o)return null;var u=Le;return u=Jn(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(gE(i,u,s),kE(i,ze()),i.callbackNode!=null&&i.callbackNode===o?VE.bind(null,i):null)}function PE(i,s){if(nf())return null;gE(i,s,!0)}function HI(){tD(function(){(Ye&6)!==0?sr(yt,FI):OE()})}function $p(){if(Ms===0){var i=Lo;i===0&&(i=da,da<<=1,(da&261888)===0&&(da=256)),Ms=i}return Ms}function LE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ui(""+i)}function UE(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function qI(i,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var g=LE((m[Yt]||null).action),T=u.submitter;T&&(s=(s=T[Yt]||null)?LE(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var C=new _a("action","action",null,u,m);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ms!==0){var j=T?UE(m,T):new FormData(m);dp(o,{pending:!0,data:j,method:m.method,action:g},null,j)}}else typeof g=="function"&&(C.preventDefault(),j=T?UE(m,T):new FormData(m),dp(o,{pending:!0,data:j,method:m.method,action:g},g,j))},currentTarget:m}]})}}for(var Yp=0;Yp<Dm.length;Yp++){var Qp=Dm[Yp],GI=Qp.toLowerCase(),KI=Qp[0].toUpperCase()+Qp.slice(1);Ei(GI,"on"+KI)}Ei(p_,"onAnimationEnd"),Ei(g_,"onAnimationIteration"),Ei(y_,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(lI,"onTransitionRun"),Ei(uI,"onTransitionStart"),Ei(cI,"onTransitionCancel"),Ei(v_,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$I=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function jE(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],m=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var T=u.length-1;0<=T;T--){var C=u[T],j=C.instance,W=C.currentTarget;if(C=C.listener,j!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=W;try{g(m)}catch(ie){_h(ie)}m.currentTarget=null,g=j}else for(T=0;T<u.length;T++){if(C=u[T],j=C.instance,W=C.currentTarget,C=C.listener,j!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=W;try{g(m)}catch(ie){_h(ie)}m.currentTarget=null,g=j}}}}function Ve(i,s){var o=s[is];o===void 0&&(o=s[is]=new Set);var u=i+"__bubble";o.has(u)||(BE(s,i,2,!1),o.add(u))}function Xp(i,s,o){var u=0;s&&(u|=4),BE(o,i,u,s)}var af="_reactListening"+Math.random().toString(36).slice(2);function Wp(i){if(!i[af]){i[af]=!0,_o.forEach(function(o){o!=="selectionchange"&&($I.has(o)||Xp(o,!1,i),Xp(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[af]||(s[af]=!0,Xp("selectionchange",!1,s))}}function BE(i,s,o,u){switch(pw(s)){case 2:var m=ED;break;case 8:m=wD;break;default:m=fg}o=m.bind(null,s,o,i),m=void 0,!Zl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(s,o,{capture:!0,passive:m}):i.addEventListener(s,o,!0):m!==void 0?i.addEventListener(s,o,{passive:m}):i.addEventListener(s,o,!1)}function Zp(i,s,o,u,m){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===m)break;if(T===4)for(T=u.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;C!==null;){if(T=cr(C),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){u=g=T;continue e}C=C.parentNode}}u=u.return}ih(function(){var W=g,ie=So(o),oe=[];e:{var Z=__.get(i);if(Z!==void 0){var J=_a,ge=i;switch(i){case"keypress":if(va(o)===0)break e;case"keydown":case"keyup":J=fh;break;case"focusin":ge="focus",J=ds;break;case"focusout":ge="blur",J=ds;break;case"beforeblur":case"afterblur":J=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=mh;break;case p_:case g_:case y_:J=Co;break;case v_:J=xo;break;case"scroll":case"scrollend":J=rh;break;case"wheel":J=gh;break;case"copy":case"cut":case"paste":J=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=iu;break;case"toggle":case"beforetoggle":J=ps}var Ee=(s&4)!==0,nt=!Ee&&(i==="scroll"||i==="scrollend"),q=Ee?Z!==null?Z+"Capture":null:Z;Ee=[];for(var F=W,Q;F!==null;){var ae=F;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||q===null||(ae=bn(F,q),ae!=null&&Ee.push(Nu(F,ae,Q))),nt)break;F=F.return}0<Ee.length&&(Z=new J(Z,ge,null,o,ie),oe.push({event:Z,listeners:Ee}))}}if((s&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Z&&o!==bo&&(ge=o.relatedTarget||o.fromElement)&&(cr(ge)||ge[Vi]))break e;if((J||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(ge=o.relatedTarget||o.toElement,J=W,ge=ge?cr(ge):null,ge!==null&&(nt=l(ge),Ee=ge.tag,ge!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(ge=null)):(J=null,ge=W),J!==ge)){if(Ee=sh,ae="onMouseLeave",q="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=iu,ae="onPointerLeave",q="onPointerEnter",F="pointer"),nt=J==null?Z:pa(J),Q=ge==null?Z:pa(ge),Z=new Ee(ae,F+"leave",J,o,ie),Z.target=nt,Z.relatedTarget=Q,ae=null,cr(ie)===W&&(Ee=new Ee(q,F+"enter",ge,o,ie),Ee.target=Q,Ee.relatedTarget=nt,ae=Ee),nt=ae,J&&ge)t:{for(Ee=YI,q=J,F=ge,Q=0,ae=q;ae;ae=Ee(ae))Q++;ae=0;for(var _e=F;_e;_e=Ee(_e))ae++;for(;0<Q-ae;)q=Ee(q),Q--;for(;0<ae-Q;)F=Ee(F),ae--;for(;Q--;){if(q===F||F!==null&&q===F.alternate){Ee=q;break t}q=Ee(q),F=Ee(F)}Ee=null}else Ee=null;J!==null&&zE(oe,Z,J,Ee,!1),ge!==null&&nt!==null&&zE(oe,nt,ge,Ee,!0)}}e:{if(Z=W?pa(W):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var Ke=r_;else if(Sn(Z))if(s_)Ke=sI;else{Ke=iI;var ye=nI}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&Xl(W.elementType)&&(Ke=r_):Ke=rI;if(Ke&&(Ke=Ke(i,W))){ba(oe,Ke,o,ie);break e}ye&&ye(i,Z,W),i==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&wo(Z,"number",Z.value)}switch(ye=W?pa(W):window,i){case"focusin":(Sn(ye)||ye.contentEditable==="true")&&(Io=ye,Cm=W,au=null);break;case"focusout":au=Cm=Io=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,d_(oe,o,ie);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":d_(oe,o,ie)}var Ne;if(v)e:{switch(i){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Me?Xe(i,o)&&(Ue="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&($&&o.locale!=="ko"&&(Me||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Me&&(Ne=us()):(Un=ie,Ao="value"in Un?Un.value:Un.textContent,Me=!0)),ye=of(W,Ue),0<ye.length&&(Ue=new eu(Ue,i,null,o,ie),oe.push({event:Ue,listeners:ye}),Ne?Ue.data=Ne:(Ne=Mt(o),Ne!==null&&(Ue.data=Ne)))),(Ne=I?Ht(i,o):qt(i,o))&&(Ue=of(W,"onBeforeInput"),0<Ue.length&&(ye=new eu("onBeforeInput","beforeinput",null,o,ie),oe.push({event:ye,listeners:Ue}),ye.data=Ne)),qI(oe,i,W,o,ie)}jE(oe,s)})}function Nu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function of(i,s){for(var o=s+"Capture",u=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=bn(i,o),m!=null&&u.unshift(Nu(i,m,g)),m=bn(i,s),m!=null&&u.push(Nu(i,m,g))),i.tag===3)return u;i=i.return}return[]}function YI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zE(i,s,o,u,m){for(var g=s._reactName,T=[];o!==null&&o!==u;){var C=o,j=C.alternate,W=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||W===null||(j=W,m?(W=bn(o,g),W!=null&&T.unshift(Nu(o,W,j))):m||(W=bn(o,g),W!=null&&T.push(Nu(o,W,j)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var QI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function FE(i){return(typeof i=="string"?i:""+i).replace(QI,`
`).replace(XI,"")}function HE(i,s){return s=FE(s),FE(i)===s}function tt(i,s,o,u,m,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ti(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ti(i,""+u);break;case"className":as(i,"class",u);break;case"tabIndex":as(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":as(i,o,u);break;case"style":th(i,u,g);break;case"data":if(s!=="object"){as(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ui(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&tt(i,s,"name",m.name,m,null),tt(i,s,"formEncType",m.formEncType,m,null),tt(i,s,"formMethod",m.formMethod,m,null),tt(i,s,"formTarget",m.formTarget,m,null)):(tt(i,s,"encType",m.encType,m,null),tt(i,s,"method",m.method,m,null),tt(i,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ui(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Ft);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ui(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),ss(i,"popover",u);break;case"xlinkActuate":ei(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ei(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ei(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ei(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ei(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ei(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ei(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ei(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ei(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ss(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Em.get(o)||o,ss(i,o,u))}}function Jp(i,s,o,u,m,g){switch(o){case"style":th(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ti(i,u):(typeof u=="number"||typeof u=="bigint")&&ti(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=i[Yt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,m);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):ss(i,o,u)}}}function Zt(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(i,s,g,T,o,null)}}m&&tt(i,s,"srcSet",o.srcSet,o,null),u&&tt(i,s,"src",o.src,o,null);return;case"input":Ve("invalid",i);var C=g=T=m=null,j=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":m=ie;break;case"type":T=ie;break;case"checked":j=ie;break;case"defaultChecked":W=ie;break;case"value":g=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:tt(i,s,u,ie,o,null)}}ga(i,g,C,j,W,T,m,!1);return;case"select":Ve("invalid",i),u=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:tt(i,s,m,C,o,null)}s=g,o=T,i.multiple=!!u,s!=null?Ge(i,!!u,s,!1):o!=null&&Ge(i,!!u,o,!0);return;case"textarea":Ve("invalid",i),g=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(C=o[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:tt(i,s,T,C,o,null)}ls(i,u,m,g);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,s,j,u,o,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<Du.length;u++)Ve(Du[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(i,s,W,u,o,null)}return;default:if(Xl(s)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Jp(i,s,ie,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&tt(i,s,C,u,o,null))}function WI(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,C=null,j=null,W=null,ie=null;for(J in o){var oe=o[J];if(o.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=oe;default:u.hasOwnProperty(J)||tt(i,s,J,null,u,oe)}}for(var Z in u){var J=u[Z];if(oe=o[Z],u.hasOwnProperty(Z)&&(J!=null||oe!=null))switch(Z){case"type":g=J;break;case"name":m=J;break;case"checked":W=J;break;case"defaultChecked":ie=J;break;case"value":T=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==oe&&tt(i,s,Z,J,u,oe)}}os(i,T,C,j,W,ie,g,m);return;case"select":J=T=C=Z=null;for(g in o)if(j=o[g],o.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":J=j;default:u.hasOwnProperty(g)||tt(i,s,g,null,u,j)}for(m in u)if(g=u[m],j=o[m],u.hasOwnProperty(m)&&(g!=null||j!=null))switch(m){case"value":Z=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==j&&tt(i,s,m,g,u,j)}s=C,o=T,u=J,Z!=null?Ge(i,!!o,Z,!1):!!u!=!!o&&(s!=null?Ge(i,!!o,s,!0):Ge(i,!!o,o?[]:"",!1));return;case"textarea":J=Z=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:tt(i,s,C,null,u,m)}for(T in u)if(m=u[T],g=o[T],u.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":Z=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&tt(i,s,T,m,u,g)}ya(i,Z,J);return;case"option":for(var ge in o)if(Z=o[ge],o.hasOwnProperty(ge)&&Z!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:tt(i,s,ge,null,u,Z)}for(j in u)if(Z=u[j],J=o[j],u.hasOwnProperty(j)&&Z!==J&&(Z!=null||J!=null))switch(j){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:tt(i,s,j,Z,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)Z=o[Ee],o.hasOwnProperty(Ee)&&Z!=null&&!u.hasOwnProperty(Ee)&&tt(i,s,Ee,null,u,Z);for(W in u)if(Z=u[W],J=o[W],u.hasOwnProperty(W)&&Z!==J&&(Z!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:tt(i,s,W,Z,u,J)}return;default:if(Xl(s)){for(var nt in o)Z=o[nt],o.hasOwnProperty(nt)&&Z!==void 0&&!u.hasOwnProperty(nt)&&Jp(i,s,nt,void 0,u,Z);for(ie in u)Z=u[ie],J=o[ie],!u.hasOwnProperty(ie)||Z===J||Z===void 0&&J===void 0||Jp(i,s,ie,Z,u,J);return}}for(var q in o)Z=o[q],o.hasOwnProperty(q)&&Z!=null&&!u.hasOwnProperty(q)&&tt(i,s,q,null,u,Z);for(oe in u)Z=u[oe],J=o[oe],!u.hasOwnProperty(oe)||Z===J||Z==null&&J==null||tt(i,s,oe,Z,u,J)}function qE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],g=m.transferSize,T=m.initiatorType,C=m.duration;if(g&&C&&qE(T)){for(T=0,C=m.responseEnd,u+=1;u<o.length;u++){var j=o[u],W=j.startTime;if(W>C)break;var ie=j.transferSize,oe=j.initiatorType;ie&&qE(oe)&&(j=j.responseEnd,T+=ie*(j<C?1:(C-W)/(j-W)))}if(--u,s+=8*(g+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var eg=null,tg=null;function lf(i){return i.nodeType===9?i:i.ownerDocument}function GE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function ng(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ig=null;function JI(){var i=window.event;return i&&i.type==="popstate"?i===ig?!1:(ig=i,!0):(ig=null,!1)}var $E=typeof setTimeout=="function"?setTimeout:void 0,eD=typeof clearTimeout=="function"?clearTimeout:void 0,YE=typeof Promise=="function"?Promise:void 0,tD=typeof queueMicrotask=="function"?queueMicrotask:typeof YE<"u"?function(i){return YE.resolve(null).then(i).catch(nD)}:$E;function nD(i){setTimeout(function(){throw i})}function Os(i){return i==="head"}function QE(i,s){var o=s,u=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(m),nl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Mu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Mu(o);for(var g=o.firstChild;g;){var T=g.nextSibling,C=g.nodeName;g[ur]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&Mu(i.ownerDocument.body);o=m}while(o);nl(s)}function XE(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function rg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rg(o),ma(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function iD(i,s,o,u){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ur])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=li(i.nextSibling),i===null)break}return null}function rD(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=li(i.nextSibling),i===null))return null;return i}function WE(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=li(i.nextSibling),i===null))return null;return i}function sg(i){return i.data==="$?"||i.data==="$~"}function ag(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sD(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function li(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var og=null;function ZE(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return li(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function JE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function ew(i,s,o){switch(s=lf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Mu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ma(i)}var ui=new Map,tw=new Set;function uf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Nr=ue.d;ue.d={f:aD,r:oD,D:lD,C:uD,L:cD,m:hD,X:dD,S:fD,M:mD};function aD(){var i=Nr.f(),s=Jh();return i||s}function oD(i){var s=hr(i);s!==null&&s.tag===5&&s.type==="form"?vT(s):Nr.r(i)}var Jo=typeof document>"u"?null:document;function nw(i,s,o){var u=Jo;if(u&&typeof s=="string"&&s){var m=_t(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),tw.has(m)||(tw.add(m),i={rel:i,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),Zt(s,"link",i),Ct(s),u.head.appendChild(s)))}}function lD(i){Nr.D(i),nw("dns-prefetch",i,null)}function uD(i,s){Nr.C(i,s),nw("preconnect",i,s)}function cD(i,s,o){Nr.L(i,s,o);var u=Jo;if(u&&i&&s){var m='link[rel="preload"][as="'+_t(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+_t(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+_t(o.imageSizes)+'"]')):m+='[href="'+_t(i)+'"]';var g=m;switch(s){case"style":g=el(i);break;case"script":g=tl(i)}ui.has(g)||(i=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),ui.set(g,i),u.querySelector(m)!==null||s==="style"&&u.querySelector(Ou(g))||s==="script"&&u.querySelector(ku(g))||(s=u.createElement("link"),Zt(s,"link",i),Ct(s),u.head.appendChild(s)))}}function hD(i,s){Nr.m(i,s);var o=Jo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+_t(u)+'"][href="'+_t(i)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=tl(i)}if(!ui.has(g)&&(i=_({rel:"modulepreload",href:i},s),ui.set(g,i),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ku(g)))return}u=o.createElement("link"),Zt(u,"link",i),Ct(u),o.head.appendChild(u)}}}function fD(i,s,o){Nr.S(i,s,o);var u=Jo;if(u&&i){var m=_i(u).hoistableStyles,g=el(i);s=s||"default";var T=m.get(g);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(Ou(g)))C.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":s},o),(o=ui.get(g))&&lg(i,o);var j=T=u.createElement("link");Ct(j),Zt(j,"link",i),j._p=new Promise(function(W,ie){j.onload=W,j.onerror=ie}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,cf(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:C},m.set(g,T)}}}function dD(i,s){Nr.X(i,s);var o=Jo;if(o&&i){var u=_i(o).hoistableScripts,m=tl(i),g=u.get(m);g||(g=o.querySelector(ku(m)),g||(i=_({src:i,async:!0},s),(s=ui.get(m))&&ug(i,s),g=o.createElement("script"),Ct(g),Zt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function mD(i,s){Nr.M(i,s);var o=Jo;if(o&&i){var u=_i(o).hoistableScripts,m=tl(i),g=u.get(m);g||(g=o.querySelector(ku(m)),g||(i=_({src:i,async:!0,type:"module"},s),(s=ui.get(m))&&ug(i,s),g=o.createElement("script"),Ct(g),Zt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function iw(i,s,o,u){var m=(m=pe.current)?uf(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=el(o.href),o=_i(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=el(o.href);var g=_i(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Ou(i)))&&!g._p&&(T.instance=g,T.state.loading=5),ui.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ui.set(i,o),g||pD(m,i,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=tl(o),o=_i(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function el(i){return'href="'+_t(i)+'"'}function Ou(i){return'link[rel="stylesheet"]['+i+"]"}function rw(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function pD(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Zt(s,"link",o),Ct(s),i.head.appendChild(s))}function tl(i){return'[src="'+_t(i)+'"]'}function ku(i){return"script[async]"+i}function sw(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+_t(o.href)+'"]');if(u)return s.instance=u,Ct(u),u;var m=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ct(u),Zt(u,"style",m),cf(u,o.precedence,i),s.instance=u;case"stylesheet":m=el(o.href);var g=i.querySelector(Ou(m));if(g)return s.state.loading|=4,s.instance=g,Ct(g),g;u=rw(o),(m=ui.get(m))&&lg(u,m),g=(i.ownerDocument||i).createElement("link"),Ct(g);var T=g;return T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Zt(g,"link",u),s.state.loading|=4,cf(g,o.precedence,i),s.instance=g;case"script":return g=tl(o.src),(m=i.querySelector(ku(g)))?(s.instance=m,Ct(m),m):(u=o,(m=ui.get(g))&&(u=_({},o),ug(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),Ct(m),Zt(m,"link",u),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,cf(u,o.precedence,i));return s.instance}function cf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===s)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function lg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ug(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var hf=null;function aw(i,s,o){if(hf===null){var u=new Map,m=hf=new Map;m.set(o,u)}else m=hf,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[ur]||g[vt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var C=u.get(T);C?C.push(g):u.set(T,[g])}}return u}function ow(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function gD(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function yD(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=el(u.href),g=s.querySelector(Ou(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=ff.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=g,Ct(g);return}g=s.ownerDocument||s,u=rw(u),(m=ui.get(m))&&lg(u,m),g=g.createElement("link"),Ct(g);var T=g;T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Zt(g,"link",u),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=ff.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var cg=0;function vD(i,s){return i.stylesheets&&i.count===0&&mf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&mf(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+s);0<i.imgBytes&&cg===0&&(cg=62500*ZI());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&mf(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>cg?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var df=null;function mf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,df=new Map,s.forEach(_D,i),df=null,ff.call(i))}function _D(i,s){if(!(s.state.loading&4)){var o=df.get(i);if(o)var u=o.get(null);else{o=new Map,df.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||u,g===u&&o.set(null,m),o.set(T,m),this.count++,u=ff.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Vu={$$typeof:U,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function TD(i,s,o,u,m,g,T,C,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function uw(i,s,o,u,m,g,T,C,j,W,ie,oe){return i=new TD(i,s,o,T,j,W,ie,oe,C),s=1,g===!0&&(s|=24),g=Bn(3,null,null,s),i.current=g,g.stateNode=i,s=Hm(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},$m(g),i}function cw(i){return i?(i=Mo,i):Mo}function hw(i,s,o,u,m,g){m=cw(m),u.context===null?u.context=m:u.pendingContext=m,u=ws(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=bs(i,u,s),o!==null&&(In(o,i,s),du(o,i,s))}function fw(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function hg(i,s){fw(i,s),(i=i.alternate)&&fw(i,s)}function dw(i){if(i.tag===13||i.tag===31){var s=Ra(i,67108864);s!==null&&In(s,i,67108864),hg(i,67108864)}}function mw(i){if(i.tag===13||i.tag===31){var s=Gn();s=Hl(s);var o=Ra(i,s);o!==null&&In(o,i,s),hg(i,s)}}var pf=!0;function ED(i,s,o,u){var m=te.T;te.T=null;var g=ue.p;try{ue.p=2,fg(i,s,o,u)}finally{ue.p=g,te.T=m}}function wD(i,s,o,u){var m=te.T;te.T=null;var g=ue.p;try{ue.p=8,fg(i,s,o,u)}finally{ue.p=g,te.T=m}}function fg(i,s,o,u){if(pf){var m=dg(u);if(m===null)Zp(i,s,u,gf,o),gw(i,u);else if(SD(m,i,s,o,u))u.stopPropagation();else if(gw(i,u),s&4&&-1<bD.indexOf(i)){for(;m!==null;){var g=hr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=vi(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var j=1<<31-pn(T);C.entanglements[1]|=j,T&=~j}qi(g),(Ye&6)===0&&(Wh=ze()+500,Iu(0))}}break;case 31:case 13:C=Ra(g,2),C!==null&&In(C,g,2),Jh(),hg(g,2)}if(g=dg(u),g===null&&Zp(i,s,u,gf,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else Zp(i,s,u,null,o)}}function dg(i){return i=So(i),mg(i)}var gf=null;function mg(i){if(gf=null,i=cr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=f(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return gf=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pn()){case yt:return 2;case Rt:return 8;case ar:case Qc:return 32;case jl:return 268435456;default:return 32}default:return 32}}var pg=!1,ks=null,Vs=null,Ps=null,Pu=new Map,Lu=new Map,Ls=[],bD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(i,s){switch(i){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Pu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(s.pointerId)}}function Uu(i,s,o,u,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},s!==null&&(s=hr(s),s!==null&&dw(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function SD(i,s,o,u,m){switch(s){case"focusin":return ks=Uu(ks,i,s,o,u,m),!0;case"dragenter":return Vs=Uu(Vs,i,s,o,u,m),!0;case"mouseover":return Ps=Uu(Ps,i,s,o,u,m),!0;case"pointerover":var g=m.pointerId;return Pu.set(g,Uu(Pu.get(g)||null,i,s,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Lu.set(g,Uu(Lu.get(g)||null,i,s,o,u,m)),!0}return!1}function yw(i){var s=cr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Wc(i.priority,function(){mw(o)});return}}else if(s===31){if(s=f(o),s!==null){i.blockedOn=s,Wc(i.priority,function(){mw(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=dg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);bo=u,o.target.dispatchEvent(u),bo=null}else return s=hr(o),s!==null&&dw(s),i.blockedOn=o,!1;s.shift()}return!0}function vw(i,s,o){yf(i)&&o.delete(s)}function AD(){pg=!1,ks!==null&&yf(ks)&&(ks=null),Vs!==null&&yf(Vs)&&(Vs=null),Ps!==null&&yf(Ps)&&(Ps=null),Pu.forEach(vw),Lu.forEach(vw)}function vf(i,s){i.blockedOn===s&&(i.blockedOn=null,pg||(pg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AD)))}var _f=null;function _w(i){_f!==i&&(_f=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){_f===i&&(_f=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],m=i[s+2];if(typeof u!="function"){if(mg(u||o)===null)continue;break}var g=hr(o);g!==null&&(i.splice(s,3),s-=3,dp(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function nl(i){function s(j){return vf(j,i)}ks!==null&&vf(ks,i),Vs!==null&&vf(Vs,i),Ps!==null&&vf(Ps,i),Pu.forEach(s),Lu.forEach(s);for(var o=0;o<Ls.length;o++){var u=Ls[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ls.length&&(o=Ls[0],o.blockedOn===null);)yw(o),o.blockedOn===null&&Ls.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],T=m[Yt]||null;if(typeof g=="function")T||_w(o);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Yt]||null)C=T.formAction;else if(mg(m)!==null)continue}else C=T.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),_w(o)}}}function Tw(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gg(i){this._internalRoot=i}Tf.prototype.render=gg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Gn();hw(o,u,i,s,null,null)},Tf.prototype.unmount=gg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;hw(i.current,2,null,i,null,null),Jh(),s[Vi]=null}};function Tf(i){this._internalRoot=i}Tf.prototype.unstable_scheduleHydration=function(i){if(i){var s=lr();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Ls.length&&s!==0&&s<Ls[o].priority;o++);Ls.splice(o,0,i),o===0&&yw(i)}};var Ew=e.version;if(Ew!=="19.2.0")throw Error(r(527,Ew,"19.2.0"));ue.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var RD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{Wr=Ef.inject(RD),rn=Ef}catch{}}return Bu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",m=xT,g=IT,T=DT;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=uw(i,1,!1,null,null,o,u,null,m,g,T,Tw),i[Vi]=s.current,Wp(i),new gg(s)},Bu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,m="",g=xT,T=IT,C=DT,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),s=uw(i,1,!0,s,o??null,u,m,j,g,T,C,Tw),s.context=cw(null),o=s.current,u=Gn(),u=Hl(u),m=ws(u),m.callback=null,bs(o,m,u),o=u,s.current.lanes=o,es(s,o),qi(s),i[Vi]=s.current,Wp(i),new Tf(s)},Bu.version="19.2.0",Bu}var Nw;function PD(){if(Nw)return _g.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_g.exports=VD(),_g.exports}var LD=PD();var Mw="popstate";function UD(t={}){function e(a,l){let{pathname:c="/",search:f="",hash:d=""}=oo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),oy("",{pathname:c,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");f=p===-1?d:d.slice(0,p)}return f+"#"+(typeof l=="string"?l:uc(l))}function r(a,l){Qn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return BD(e,n,r,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jD(){return Math.random().toString(36).substring(2,10)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function oy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?oo(e):e,state:n,key:e&&e.key||r||jD()}}function uc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function BD(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,f="POP",d=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let x=y(),k=x==null?null:x-p;p=x,d&&d({action:f,location:b.location,delta:k})}function E(x,k){f="PUSH";let L=oy(b.location,x,k);n&&n(L,x),p=y()+1;let U=Ow(L,p),X=b.createHref(L);try{c.pushState(U,"",X)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;a.location.assign(X)}l&&d&&d({action:f,location:b.location,delta:1})}function A(x,k){f="REPLACE";let L=oy(b.location,x,k);n&&n(L,x),p=y();let U=Ow(L,p),X=b.createHref(L);c.replaceState(U,"",X),l&&d&&d({action:f,location:b.location,delta:0})}function D(x){return zD(x)}let b={get action(){return f},get location(){return t(a,c)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Mw,_),d=x,()=>{a.removeEventListener(Mw,_),d=null}},createHref(x){return e(a,x)},createURL:D,encodeLocation(x){let k=D(x);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:E,replace:A,go(x){return c.go(x)}};return b}function zD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:uc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function XA(t,e,n="/"){return FD(t,e,n,!1)}function FD(t,e,n,r){let a=typeof e=="string"?oo(e):e,l=zr(a.pathname||"/",n);if(l==null)return null;let c=WA(t);HD(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let p=eN(l);f=ZD(c[d],p,r)}return f}function WA(t,e=[],n=[],r="",a=!1){let l=(c,f,d=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;mt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let _=Pr([r,y.relativePath]),E=n.concat(y);c.children&&c.children.length>0&&(mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),WA(c.children,e,E,_,d)),!(c.path==null&&!c.index)&&e.push({path:_,score:XD(_,c.index),routesMeta:E})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let d of ZA(c.path))l(c,f,!0,d)}),e}function ZA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=ZA(r.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function HD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qD=/^:[\w-]+$/,GD=3,KD=2,$D=1,YD=10,QD=-2,kw=t=>t==="*";function XD(t,e){let n=t.split("/"),r=n.length;return n.some(kw)&&(r+=QD),e&&(r+=KD),n.filter(a=>!kw(a)).reduce((a,l)=>a+(qD.test(l)?GD:l===""?$D:YD),r)}function WD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function ZD(t,e,n=!1){let{routesMeta:r}=t,a={},l="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],p=f===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=ed({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=ed({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:Pr([l,_.pathname]),pathnameBase:sN(Pr([l,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(l=Pr([l,_.pathnameBase]))}return c}function ed(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JD(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:_},E)=>{if(y==="*"){let D=f[E]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const A=f[E];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:t}}function JD(t,e=!1,n=!0){Qn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function eN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var tN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nN=t=>tN.test(t);function iN(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?oo(t):t,l;if(n)if(nN(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Qn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=Vw(n.substring(1),"/"):l=Vw(n,e)}else l=e;return{pathname:l,search:aN(r),hash:oN(a)}}function Vw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iv(t){let e=rN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function rv(t,e,n,r=!1){let a;typeof t=="string"?a=oo(t):(a={...t},mt(!a.pathname||!a.pathname.includes("?"),bg("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),bg("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),bg("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let _=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),_-=1;a.pathname=E.join("/")}f=_>=0?e[_]:"/"}let d=iN(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Pr=t=>t.join("/").replace(/\/\/+/g,"/"),sN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JA=["POST","PUT","PATCH","DELETE"];new Set(JA);var uN=["GET",...JA];new Set(uN);var Dl=N.createContext(null);Dl.displayName="DataRouter";var Nd=N.createContext(null);Nd.displayName="DataRouterState";N.createContext(!1);var e1=N.createContext({isTransitioning:!1});e1.displayName="ViewTransition";var cN=N.createContext(new Map);cN.displayName="Fetchers";var hN=N.createContext(null);hN.displayName="Await";var Di=N.createContext(null);Di.displayName="Navigation";var Ic=N.createContext(null);Ic.displayName="Location";var nr=N.createContext({outlet:null,matches:[],isDataRoute:!1});nr.displayName="Route";var sv=N.createContext(null);sv.displayName="RouteError";function fN(t,{relative:e}={}){mt(Nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Di),{hash:a,pathname:l,search:c}=Dc(t,{relative:e}),f=l;return n!=="/"&&(f=l==="/"?n:Pr([n,l])),r.createHref({pathname:f,search:c,hash:a})}function Nl(){return N.useContext(Ic)!=null}function aa(){return mt(Nl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ic).location}var t1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n1(t){N.useContext(Di).static||N.useLayoutEffect(t)}function i1(){let{isDataRoute:t}=N.useContext(nr);return t?AN():dN()}function dN(){mt(Nl(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Dl),{basename:e,navigator:n}=N.useContext(Di),{matches:r}=N.useContext(nr),{pathname:a}=aa(),l=JSON.stringify(iv(r)),c=N.useRef(!1);return n1(()=>{c.current=!0}),N.useCallback((d,p={})=>{if(Qn(c.current,t1),!c.current)return;if(typeof d=="number"){n.go(d);return}let y=rv(d,JSON.parse(l),a,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Pr([e,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[e,n,l,a,t])}N.createContext(null);function Dc(t,{relative:e}={}){let{matches:n}=N.useContext(nr),{pathname:r}=aa(),a=JSON.stringify(iv(n));return N.useMemo(()=>rv(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function mN(t,e){return r1(t,e)}function r1(t,e,n,r,a){mt(Nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(Di),{matches:c}=N.useContext(nr),f=c[c.length-1],d=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let L=_&&_.path||"";s1(p,!_||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let E=aa(),A;if(e){let L=typeof e=="string"?oo(e):e;mt(y==="/"||L.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${L.pathname}" was given in the \`location\` prop.`),A=L}else A=E;let D=A.pathname||"/",b=D;if(y!=="/"){let L=y.replace(/^\//,"").split("/");b="/"+D.replace(/^\//,"").split("/").slice(L.length).join("/")}let x=XA(t,{pathname:b});Qn(_||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Qn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=_N(x&&x.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Pr([y,l.encodeLocation?l.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:Pr([y,l.encodeLocation?l.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,n,r,a);return e&&k?N.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},k):k}function pN(){let t=SN(),e=lN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:a},n):null,c)}var gN=N.createElement(pN,null),yN=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?N.createElement(nr.Provider,{value:this.props.routeContext},N.createElement(sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vN({routeContext:t,match:e,children:n}){let r=N.useContext(Dl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(nr.Provider,{value:t},n)}function _N(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);mt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,d=-1;if(n)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:E,errors:A}=n,D=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||D){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=n&&r?(y,_)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,E)=>{let A,D=!1,b=null,x=null;n&&(A=c&&_.route.id?c[_.route.id]:void 0,b=_.route.errorElement||gN,f&&(d<0&&E===0?(s1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,x=null):d===E&&(D=!0,x=_.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,E+1)),L=()=>{let U;return A?U=b:D?U=x:_.route.Component?U=N.createElement(_.route.Component,null):_.route.element?U=_.route.element:U=y,N.createElement(vN,{match:_,routeContext:{outlet:y,matches:k,isDataRoute:n!=null},children:U})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?N.createElement(yN,{location:n.location,revalidation:n.revalidation,component:b,error:A,children:L(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:p}):L()},null)}function av(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TN(t){let e=N.useContext(Dl);return mt(e,av(t)),e}function EN(t){let e=N.useContext(Nd);return mt(e,av(t)),e}function wN(t){let e=N.useContext(nr);return mt(e,av(t)),e}function ov(t){let e=wN(t),n=e.matches[e.matches.length-1];return mt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function bN(){return ov("useRouteId")}function SN(){let t=N.useContext(sv),e=EN("useRouteError"),n=ov("useRouteError");return t!==void 0?t:e.errors?.[n]}function AN(){let{router:t}=TN("useNavigate"),e=ov("useNavigate"),n=N.useRef(!1);return n1(()=>{n.current=!0}),N.useCallback(async(a,l={})=>{Qn(n.current,t1),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var Pw={};function s1(t,e,n){!e&&!Pw[t]&&(Pw[t]=!0,Qn(!1,n))}N.memo(RN);function RN({routes:t,future:e,state:n,unstable_onError:r}){return r1(t,void 0,n,r,e)}function lv({to:t,replace:e,state:n,relative:r}){mt(Nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=N.useContext(Di);Qn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(nr),{pathname:c}=aa(),f=i1(),d=rv(t,iv(l),c,r==="path"),p=JSON.stringify(d);return N.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:r})},[f,p,r,e,n]),null}function Uf(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:l=!1}){mt(!Nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=oo(n));let{pathname:d="/",search:p="",hash:y="",state:_=null,key:E="default"}=n,A=N.useMemo(()=>{let D=zr(d,c);return D==null?null:{location:{pathname:D,search:p,hash:y,state:_,key:E},navigationType:r}},[c,d,p,y,_,E,r]);return Qn(A!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:N.createElement(Di.Provider,{value:f},N.createElement(Ic.Provider,{children:e,value:A}))}function xN({children:t,location:e}){return mN(ly(t),e)}function ly(t,e=[]){let n=[];return N.Children.forEach(t,(r,a)=>{if(!N.isValidElement(r))return;let l=[...e,a];if(r.type===N.Fragment){n.push.apply(n,ly(r.props.children,l));return}mt(r.type===Uf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ly(r.props.children,l)),n.push(c)}),n}var jf="get",Bf="application/x-www-form-urlencoded";function Md(t){return t!=null&&typeof t.tagName=="string"}function IN(t){return Md(t)&&t.tagName.toLowerCase()==="button"}function DN(t){return Md(t)&&t.tagName.toLowerCase()==="form"}function NN(t){return Md(t)&&t.tagName.toLowerCase()==="input"}function MN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ON(t,e){return t.button===0&&(!e||e==="_self")&&!MN(t)}var wf=null;function kN(){if(wf===null)try{new FormData(document.createElement("form"),0),wf=!1}catch{wf=!0}return wf}var VN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(t){return t!=null&&!VN.has(t)?(Qn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bf}"`),null):t}function PN(t,e){let n,r,a,l,c;if(DN(t)){let f=t.getAttribute("action");r=f?zr(f,e):null,n=t.getAttribute("method")||jf,a=Sg(t.getAttribute("enctype"))||Bf,l=new FormData(t)}else if(IN(t)||NN(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||f.getAttribute("action");if(r=d?zr(d,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||jf,a=Sg(t.getAttribute("formenctype"))||Sg(f.getAttribute("enctype"))||Bf,l=new FormData(f,t),!kN()){let{name:p,type:y,value:_}=t;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,_)}}else{if(Md(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=jf,r=null,a=Bf,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&zr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function UN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function BN(t,e,n){let r=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await UN(l,n);return c.links?c.links():[]}return[]}));return qN(r.flat(1).filter(jN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Lw(t,e,n,r,a,l){let c=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,f=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,p)=>c(d,p)||f(d,p)):l==="data"?e.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function zN(t,e,{includeHydrateFallback:n}={}){return FN(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function FN(t){return[...new Set(t)]}function HN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function qN(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let l=JSON.stringify(HN(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function a1(){let t=N.useContext(Dl);return uv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function GN(){let t=N.useContext(Nd);return uv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cv=N.createContext(void 0);cv.displayName="FrameworkContext";function o1(){let t=N.useContext(cv);return uv(t,"You must render this element inside a <HydratedRouter> element"),t}function KN(t,e){let n=N.useContext(cv),[r,a]=N.useState(!1),[l,c]=N.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,E=N.useRef(null);N.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let b=k=>{k.forEach(L=>{c(L.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return E.current&&x.observe(E.current),()=>{x.disconnect()}}},[t]),N.useEffect(()=>{if(r){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[r]);let A=()=>{a(!0)},D=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,E,{}]:[l,E,{onFocus:zu(f,A),onBlur:zu(d,D),onMouseEnter:zu(p,A),onMouseLeave:zu(y,D),onTouchStart:zu(_,A)}]:[!1,E,{}]}function zu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $N({page:t,...e}){let{router:n}=a1(),r=N.useMemo(()=>XA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(QN,{page:t,matches:r,...e}):null}function YN(t){let{manifest:e,routeModules:n}=o1(),[r,a]=N.useState([]);return N.useEffect(()=>{let l=!1;return BN(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),r}function QN({page:t,matches:e,...n}){let r=aa(),{manifest:a,routeModules:l}=o1(),{basename:c}=a1(),{loaderData:f,matches:d}=GN(),p=N.useMemo(()=>Lw(t,e,d,a,r,"data"),[t,e,d,a,r]),y=N.useMemo(()=>Lw(t,e,d,a,r,"assets"),[t,e,d,a,r]),_=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let D=new Set,b=!1;if(e.forEach(k=>{let L=a.routes[k.route.id];!L||!L.hasLoader||(!p.some(U=>U.route.id===k.route.id)&&k.route.id in f&&l[k.route.id]?.shouldRevalidate||L.hasClientLoader?b=!0:D.add(k.route.id))}),D.size===0)return[];let x=LN(t,c,"data");return b&&D.size>0&&x.searchParams.set("_routes",e.filter(k=>D.has(k.route.id)).map(k=>k.route.id).join(",")),[x.pathname+x.search]},[c,f,r,a,p,e,t,l]),E=N.useMemo(()=>zN(y,a),[y,a]),A=YN(y);return N.createElement(N.Fragment,null,_.map(D=>N.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),E.map(D=>N.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),A.map(({key:D,link:b})=>N.createElement("link",{key:D,nonce:n.nonce,...b})))}function XN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l1&&(window.__reactRouterVersion="7.9.6")}catch{}function WN({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=UD({window:n,v5Compat:!0}));let a=r.current,[l,c]=N.useState({action:a.action,location:a.location}),f=N.useCallback(d=>{N.startTransition(()=>c(d))},[c]);return N.useLayoutEffect(()=>a.listen(f),[a,f]),N.createElement(CN,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c1=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:f,target:d,to:p,preventScrollReset:y,viewTransition:_,...E},A){let{basename:D}=N.useContext(Di),b=typeof p=="string"&&u1.test(p),x,k=!1;if(typeof p=="string"&&b&&(x=p,l1))try{let M=new URL(window.location.href),P=p.startsWith("//")?new URL(M.protocol+p):new URL(p),B=zr(P.pathname,D);P.origin===M.origin&&B!=null?p=B+P.search+P.hash:k=!0}catch{Qn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=fN(p,{relative:a}),[U,X,G]=KN(r,E),Y=tM(p,{replace:c,state:f,target:d,preventScrollReset:y,relative:a,viewTransition:_});function R(M){e&&e(M),M.defaultPrevented||Y(M)}let S=N.createElement("a",{...E,...G,href:x||L,onClick:k||l?e:R,ref:XN(A,X),target:d,"data-discover":!b&&n==="render"?"true":void 0});return U&&!b?N.createElement(N.Fragment,null,S,N.createElement($N,{page:L})):S});c1.displayName="Link";var ZN=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:f,children:d,...p},y){let _=Dc(c,{relative:p.relative}),E=aa(),A=N.useContext(Nd),{navigator:D,basename:b}=N.useContext(Di),x=A!=null&&aM(_)&&f===!0,k=D.encodeLocation?D.encodeLocation(_).pathname:_.pathname,L=E.pathname,U=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(L=L.toLowerCase(),U=U?U.toLowerCase():null,k=k.toLowerCase()),U&&b&&(U=zr(U,b)||U);const X=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let G=L===k||!a&&L.startsWith(k)&&L.charAt(X)==="/",Y=U!=null&&(U===k||!a&&U.startsWith(k)&&U.charAt(k.length)==="/"),R={isActive:G,isPending:Y,isTransitioning:x},S=G?e:void 0,M;typeof r=="function"?M=r(R):M=[r,G?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(R):l;return N.createElement(c1,{...p,"aria-current":S,className:M,ref:y,style:P,to:c,viewTransition:f},typeof d=="function"?d(R):d)});ZN.displayName="NavLink";var JN=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:l,method:c=jf,action:f,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,...E},A)=>{let D=rM(),b=sM(f,{relative:p}),x=c.toLowerCase()==="get"?"get":"post",k=typeof f=="string"&&u1.test(f),L=U=>{if(d&&d(U),U.defaultPrevented)return;U.preventDefault();let X=U.nativeEvent.submitter,G=X?.getAttribute("formmethod")||c;D(X||U.currentTarget,{fetcherKey:e,method:G,navigate:n,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:_})};return N.createElement("form",{ref:A,method:x,action:b,onSubmit:r?d:L,...E,"data-discover":!k&&t==="render"?"true":void 0})});JN.displayName="Form";function eM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h1(t){let e=N.useContext(Dl);return mt(e,eM(t)),e}function tM(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=i1(),d=aa(),p=Dc(t,{relative:l});return N.useCallback(y=>{if(ON(y,e)){y.preventDefault();let _=n!==void 0?n:uc(d)===uc(p);f(t,{replace:_,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[d,f,p,n,r,e,t,a,l,c])}var nM=0,iM=()=>`__${String(++nM)}__`;function rM(){let{router:t}=h1("useSubmit"),{basename:e}=N.useContext(Di),n=bN();return N.useCallback(async(r,a={})=>{let{action:l,method:c,encType:f,formData:d,body:p}=PN(r,e);if(a.navigate===!1){let y=a.fetcherKey||iM();await t.fetch(y,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function sM(t,{relative:e}={}){let{basename:n}=N.useContext(Di),r=N.useContext(nr);mt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Dc(t||".",{relative:e})},c=aa();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Pr([n,l.pathname])),uc(l)}function aM(t,{relative:e}={}){let n=N.useContext(e1);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=h1("useViewTransitionState"),a=Dc(t,{relative:e});if(!n.isTransitioning)return!1;let l=zr(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=zr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ed(a.pathname,c)!=null||ed(a.pathname,l)!=null}const oM=()=>{};var Uw={};const f1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},lM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],f=t[n++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],c=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},d1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,f=c?t[a+1]:0,d=a+2<t.length,p=d?t[a+2]:0,y=l>>2,_=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,A=p&63;d||(A=64,c||(E=64)),r.push(n[y],n[_],n[E],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],f=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||f==null||p==null||_==null)throw new uM;const E=l<<2|f>>4;if(r.push(E),p!==64){const A=f<<4&240|p>>2;if(r.push(A),_!==64){const D=p<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cM=function(t){const e=f1(t);return d1.encodeByteArray(e,!0)},td=function(t){return cM(t).replace(/\./g,"")},m1=function(t){try{return d1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fM=()=>hM().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof Uw>"u")return;const t=Uw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m1(t[1]);return e&&JSON.parse(e)},Od=()=>{try{return oM()||fM()||dM()||mM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p1=t=>{var e,n;return(n=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},g1=t=>{const e=p1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},y1=()=>{var t;return(t=Od())===null||t===void 0?void 0:t.config},v1=t=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${t}`]};class pM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function oa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hv(t){return(await fetch(t,{credentials:"include"})).ok}function _1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[td(JSON.stringify(n)),td(JSON.stringify(c)),""].join(".")}const Ju={};function gM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ju))Ju[e]?t.emulator.push(e):t.prod.push(e);return t}function yM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jw=!1;function fv(t,e){if(typeof window>"u"||typeof document>"u"||!oa(window.location.host)||Ju[t]===e||Ju[t]||jw)return;Ju[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=gM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{jw=!0,c()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=yM(r),A=n("text"),D=document.getElementById(A)||document.createElement("span"),b=n("learnmore"),x=document.getElementById(b)||document.createElement("a"),k=n("preprendIcon"),L=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const U=E.element;f(U),y(x,b);const X=p();d(L,k),U.append(L,D,x,X),document.body.appendChild(U)}l?(D.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function _M(){var t;const e=(t=Od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bM(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SM(){return!_M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T1(){try{return typeof indexedDB=="object"}catch{return!1}}function E1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}function AM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const RM="FirebaseError";class Ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RM,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?CM(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ni(a,f,r)}}function CM(t,e){return t.replace(xM,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const xM=/\{\$([^}]+)}/g;function IM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const l=t[a],c=e[a];if(Bw(l)&&Bw(c)){if(!eo(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}function Nc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DM(t,e){const n=new NM(t,e);return n.subscribe.bind(n)}class NM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=Ag),a.error===void 0&&(a.error=Ag),a.complete===void 0&&(a.complete=Ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ag(){}function ht(t){return t&&t._delegate?t._delegate:t}class pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ba="[DEFAULT]";class OM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VM(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kM(t){return t===Ba?void 0:t}function VM(t){return t.instantiationMode==="EAGER"}class PM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const LM={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},UM=je.INFO,jM={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},BM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=jM[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=UM,this._logHandler=BM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const zM=(t,e)=>e.some(n=>t instanceof n);let zw,Fw;function FM(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HM(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w1=new WeakMap,uy=new WeakMap,b1=new WeakMap,Rg=new WeakMap,mv=new WeakMap;function qM(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Lr(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&w1.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function GM(t){if(uy.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});uy.set(t,e)}let cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KM(t){cy=t(cy)}function $M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cg(this),e,...n);return b1.set(r,e.sort?e.sort():[e]),Lr(r)}:HM().includes(t)?function(...e){return t.apply(Cg(this),e),Lr(w1.get(this))}:function(...e){return Lr(t.apply(Cg(this),e))}}function YM(t){return typeof t=="function"?$M(t):(t instanceof IDBTransaction&&GM(t),zM(t,FM())?new Proxy(t,cy):t)}function Lr(t){if(t instanceof IDBRequest)return qM(t);if(Rg.has(t))return Rg.get(t);const e=YM(t);return e!==t&&(Rg.set(t,e),mv.set(e,t)),e}const Cg=t=>mv.get(t);function kd(t,e,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),f=Lr(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Lr(c.result),d.oldVersion,d.newVersion,Lr(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}function xg(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Lr(n).then(()=>{})}const QM=["get","getKey","getAll","getAllKeys","count"],XM=["put","add","delete","clear"],Ig=new Map;function Hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=XM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||QM.includes(n)))return;const l=async function(c,...f){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),a&&d.done]))[0]};return Ig.set(e,l),l}KM(t=>({...t,get:(e,n,r)=>Hw(e,n)||t.get(e,n,r),has:(e,n)=>!!Hw(e,n)||t.has(e,n)}));class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZM(t){const e=t.getComponent();return e?.type==="VERSION"}const hy="@firebase/app",qw="0.13.2";const Fr=new dv("@firebase/app"),JM="@firebase/app-compat",eO="@firebase/analytics-compat",tO="@firebase/analytics",nO="@firebase/app-check-compat",iO="@firebase/app-check",rO="@firebase/auth",sO="@firebase/auth-compat",aO="@firebase/database",oO="@firebase/data-connect",lO="@firebase/database-compat",uO="@firebase/functions",cO="@firebase/functions-compat",hO="@firebase/installations",fO="@firebase/installations-compat",dO="@firebase/messaging",mO="@firebase/messaging-compat",pO="@firebase/performance",gO="@firebase/performance-compat",yO="@firebase/remote-config",vO="@firebase/remote-config-compat",_O="@firebase/storage",TO="@firebase/storage-compat",EO="@firebase/firestore",wO="@firebase/ai",bO="@firebase/firestore-compat",SO="firebase",AO="11.10.0";const fy="[DEFAULT]",RO={[hy]:"fire-core",[JM]:"fire-core-compat",[tO]:"fire-analytics",[eO]:"fire-analytics-compat",[iO]:"fire-app-check",[nO]:"fire-app-check-compat",[rO]:"fire-auth",[sO]:"fire-auth-compat",[aO]:"fire-rtdb",[oO]:"fire-data-connect",[lO]:"fire-rtdb-compat",[uO]:"fire-fn",[cO]:"fire-fn-compat",[hO]:"fire-iid",[fO]:"fire-iid-compat",[dO]:"fire-fcm",[mO]:"fire-fcm-compat",[pO]:"fire-perf",[gO]:"fire-perf-compat",[yO]:"fire-rc",[vO]:"fire-rc-compat",[_O]:"fire-gcs",[TO]:"fire-gcs-compat",[EO]:"fire-fst",[bO]:"fire-fst-compat",[wO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};const nd=new Map,CO=new Map,dy=new Map;function Gw(t,e){try{t.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xi(t){const e=t.name;if(dy.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;dy.set(e,t);for(const n of nd.values())Gw(n,t);for(const n of CO.values())Gw(n,t);return!0}function uo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fi(t){return t==null?!1:t.settings!==void 0}const xO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new lo("app","Firebase",xO);class IO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}const co=AO;function S1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fy,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw Ys.create("bad-app-name",{appName:String(a)});if(n||(n=y1()),!n)throw Ys.create("no-options");const l=nd.get(a);if(l){if(eo(n,l.options)&&eo(r,l.config))return l;throw Ys.create("duplicate-app",{appName:a})}const c=new PM(a);for(const d of dy.values())c.addComponent(d);const f=new IO(n,r,c);return nd.set(a,f),f}function Vd(t=fy){const e=nd.get(t);if(!e&&t===fy&&y1())return S1();if(!e)throw Ys.create("no-app",{appName:t});return e}function On(t,e,n){var r;let a=(r=RO[t])!==null&&r!==void 0?r:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(f.join(" "));return}xi(new pi(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const DO="firebase-heartbeat-database",NO=1,cc="firebase-heartbeat-store";let Dg=null;function A1(){return Dg||(Dg=kd(DO,NO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),Dg}async function MO(t){try{const n=(await A1()).transaction(cc),r=await n.objectStore(cc).get(R1(t));return await n.done,r}catch(e){if(e instanceof Ni)Fr.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});Fr.warn(n.message)}}}async function Kw(t,e){try{const r=(await A1()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,R1(t)),await r.done}catch(n){if(n instanceof Ni)Fr.warn(n.message);else{const r=Ys.create("idb-set",{originalErrorMessage:n?.message});Fr.warn(r.message)}}}function R1(t){return`${t.name}!${t.options.appId}`}const OO=1024,kO=30;class VO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$w();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>kO){const c=UO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:a}=PO(this._heartbeatsCache.heartbeats),l=td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Fr.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function PO(t,e=OO){const n=[];let r=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Yw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Yw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T1()?E1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return td(JSON.stringify({version:2,heartbeats:t})).length}function UO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function jO(t){xi(new pi("platform-logger",e=>new WM(e),"PRIVATE")),xi(new pi("heartbeat",e=>new VO(e),"PRIVATE")),On(hy,qw,t),On(hy,qw,"esm2017"),On("fire-js","")}jO("");function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function C1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BO=C1,x1=new lo("auth","Firebase",C1());const id=new dv("@firebase/auth");function zO(t,...e){id.logLevel<=je.WARN&&id.warn(`Auth (${co}): ${t}`,...e)}function zf(t,...e){id.logLevel<=je.ERROR&&id.error(`Auth (${co}): ${t}`,...e)}function er(t,...e){throw yv(t,...e)}function Ci(t,...e){return yv(t,...e)}function gv(t,e,n){const r=Object.assign(Object.assign({},BO()),{[e]:n});return new lo("auth","Firebase",r).create(e,{appName:t.name})}function Ya(t){return gv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&er(t,"argument-error"),gv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x1.create(t,...e)}function Se(t,e,...n){if(!t)throw yv(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zf(e),new Error(e)}function Hr(t,e){t||kr(e)}function my(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HO(){return Qw()==="http:"||Qw()==="https:"}function Qw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HO()||EM()||"connection"in navigator)?navigator.onLine:!0}function GO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=vM()||wM()}get(){return qO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vv(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class I1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YO=new Mc(3e4,6e4);function _v(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ml(t,e,n,r,a={}){return D1(t,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=Nc(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},l);return TM()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&oa(t.emulatorConfig.host)&&(p.credentials="include"),I1.fetch()(await N1(t,t.config.apiHost,n,f),p)})}async function D1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KO),e);try{const a=new XO(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw bf(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw bf(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw bf(t,"user-disabled",c);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gv(t,y,p);er(t,y)}}catch(a){if(a instanceof Ni)throw a;er(t,"network-request-failed",{message:String(a)})}}async function QO(t,e,n,r,a={}){const l=await Ml(t,e,n,r,a);return"mfaPendingCredential"in l&&er(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function N1(t,e,n,r){const a=`${e}${n}?${r}`,l=t,c=l.config.emulator?vv(t.config,a):`${t.config.apiScheme}://${a}`;return $O.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class XO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ci(this.auth,"network-request-failed")),YO.get())})}}function bf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Ci(t,e,r);return a.customData._tokenResponse=n,a}async function WO(t,e){return Ml(t,"POST","/v1/accounts:delete",e)}async function rd(t,e){return Ml(t,"POST","/v1/accounts:lookup",e)}function ec(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZO(t,e=!1){const n=ht(t),r=await n.getIdToken(e),a=Tv(r);Se(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:ec(Ng(a.auth_time)),issuedAtTime:ec(Ng(a.iat)),expirationTime:ec(Ng(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ng(t){return Number(t)*1e3}function Tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{const a=m1(n);return a?JSON.parse(a):(zf("Failed to decode base64 JWT payload"),null)}catch(a){return zf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Xw(t){const e=Tv(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ni&&JO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class py{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sd(t){var e;const n=t.auth,r=await t.getIdToken(),a=await hc(t,rd(n,{idToken:r}));Se(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?M1(l.providerUserInfo):[],f=nk(t.providerData,c),d=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!f?.length,y=d?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new py(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function tk(t){const e=ht(t);await sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nk(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function M1(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function ik(t,e){const n=await D1(t,{},async()=>{const r=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await N1(t,a,"/v1/token",`key=${l}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return t.emulatorConfig&&oa(t.emulatorConfig.host)&&(d.credentials="include"),I1.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rk(t,e){return Ml(t,"POST","/v2/accounts:revokeToken",_v(t,e))}class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=Xw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await ik(e,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new pl;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return kr("not implemented")}}function js(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ri{constructor(e){var{uid:n,auth:r,stsTokenManager:a}=e,l=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new py(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await hc(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZO(this,e)}reload(){return tk(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(Ya(this.auth));const e=await this.getIdToken();return await hc(this,WO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,a,l,c,f,d,p,y;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,A=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,D=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(f=n.tenantId)!==null&&f!==void 0?f:void 0,x=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(p=n.createdAt)!==null&&p!==void 0?p:void 0,L=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:U,emailVerified:X,isAnonymous:G,providerData:Y,stsTokenManager:R}=n;Se(U&&R,e,"internal-error");const S=pl.fromJSON(this.name,R);Se(typeof U=="string",e,"internal-error"),js(_,e.name),js(E,e.name),Se(typeof X=="boolean",e,"internal-error"),Se(typeof G=="boolean",e,"internal-error"),js(A,e.name),js(D,e.name),js(b,e.name),js(x,e.name),js(k,e.name),js(L,e.name);const M=new Ri({uid:U,auth:e,email:E,emailVerified:X,displayName:_,isAnonymous:G,photoURL:D,phoneNumber:A,tenantId:b,stsTokenManager:S,createdAt:k,lastLoginAt:L});return Y&&Array.isArray(Y)&&(M.providerData=Y.map(P=>Object.assign({},P))),x&&(M._redirectEventId=x),M}static async _fromIdTokenResponse(e,n,r=!1){const a=new pl;a.updateFromServerResponse(n);const l=new Ri({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await sd(l),l}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?M1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new pl;f.updateFromIdToken(r);const d=new Ri({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new py(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}const Ww=new Map;function Vr(t){Hr(t instanceof Function,"Expected a class definition");let e=Ww.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ww.set(t,e),e)}class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O1.type="NONE";const Zw=O1;function Ff(t,e,n){return`firebase:${t}:${e}:${n}`}class gl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Ff(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ff("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rd(this.auth,{idToken:e}).catch(()=>{});return n?Ri._fromGetAccountInfoResponse(this.auth,n,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gl(Vr(Zw),e,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Vr(Zw);const c=Ff(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const E=await rd(e,{idToken:y}).catch(()=>{});if(!E)break;_=await Ri._fromGetAccountInfoResponse(e,E,y)}else _=Ri._fromJSON(e,y);p!==l&&(f=_),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new gl(l,e,r):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new gl(l,e,r))}}function Jw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j1(e))return"Blackberry";if(B1(e))return"Webos";if(V1(e))return"Safari";if((e.includes("chrome/")||P1(e))&&!e.includes("edge/"))return"Chrome";if(U1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function k1(t=dn()){return/firefox\//i.test(t)}function V1(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P1(t=dn()){return/crios\//i.test(t)}function L1(t=dn()){return/iemobile/i.test(t)}function U1(t=dn()){return/android/i.test(t)}function j1(t=dn()){return/blackberry/i.test(t)}function B1(t=dn()){return/webos/i.test(t)}function Ev(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sk(t=dn()){var e;return Ev(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ak(){return bM()&&document.documentMode===10}function z1(t=dn()){return Ev(t)||U1(t)||B1(t)||j1(t)||/windows phone/i.test(t)||L1(t)}function F1(t,e=[]){let n;switch(t){case"Browser":n=Jw(dn());break;case"Worker":n=`${Jw(dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}class ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((c,f)=>{try{const d=e(l);c(d)}catch(d){f(d)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function lk(t,e={}){return Ml(t,"GET","/v2/passwordPolicy",_v(t,e))}const uk=6;class ck{constructor(e){var n,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:uk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,a,l,c,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class hk{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eb(this),this.idTokenSubscription=new eb(this),this.beforeStateQueue=new ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rd(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===f)&&d?.user&&(a=d.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(Ya(this));const n=e?ht(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(Ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(Ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lk(this),n=new ck(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,a);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&zO(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Pd(t){return ht(t)}class eb{constructor(e){this.auth=e,this.observer=null,this.addObserver=DM(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fk(t){wv=t}function dk(t){return wv.loadJS(t)}function mk(){return wv.gapiScript}function pk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function gk(t,e){const n=uo(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(eo(l,e??{}))return a;er(a,"already-initialized")}return n.initialize({options:e})}function yk(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Vr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function vk(t,e,n){const r=Pd(t);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=H1(e),{host:c,port:f}=_k(e),d=f===null?"":`:${f}`,p={url:`${l}//${c}${d}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(eo(p,r.config.emulator)&&eo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,oa(c)?(hv(`${l}//${c}${d}`),fv("Auth",!0)):Tk()}function H1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _k(t){const e=H1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:tb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:tb(c)}}}function tb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class q1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function yl(t,e){return QO(t,"POST","/v1/accounts:signInWithIdp",_v(t,e))}const Ek="http://localhost";class to extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=n,l=pv(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new to(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return yl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yl(e,n)}buildRequest(){const e={requestUri:Ek,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nc(n)}return e}}class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Oc extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hs extends Oc{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";class Or extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return to._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";class qs extends Oc{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";class Gs extends Oc{constructor(){super("twitter.com")}static credential(e,n){return to._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";class Tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const l=await Ri._fromIdTokenResponse(e,r,a),c=nb(r);return new Tl({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=nb(r);return new Tl({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function nb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ad extends Ni{constructor(e,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,ad.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new ad(e,n,r,a)}}function G1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ad._fromErrorAndOperation(t,l,e,r):l})}async function wk(t,e,n=!1){const r=await hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Tl._forOperation(t,"link",r)}async function bk(t,e,n=!1){const{auth:r}=t;if(fi(r.app))return Promise.reject(Ya(r));const a="reauthenticate";try{const l=await hc(t,G1(r,a,e,t),n);Se(l.idToken,r,"internal-error");const c=Tv(l.idToken);Se(c,r,"internal-error");const{sub:f}=c;return Se(t.uid===f,r,"user-mismatch"),Tl._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&er(r,"user-mismatch"),l}}async function Sk(t,e,n=!1){if(fi(t.app))return Promise.reject(Ya(t));const r="signIn",a=await G1(t,r,e),l=await Tl._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(l.user),l}function Ak(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function Rk(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function Ck(t,e,n,r){return ht(t).onAuthStateChanged(e,n,r)}function Mg(t){return ht(t).signOut()}const od="__sak";class K1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(od,"1"),this.storage.removeItem(od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xk=1e3,Ik=10;class $1 extends K1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);ak()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ik):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$1.type="LOCAL";const Dk=$1;class Y1 extends K1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Y1.type="SESSION";const Q1=Y1;function Nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async p=>p(n.origin,l)),d=await Nk(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];function Sv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Mk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const p=Sv("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function $i(){return window}function Ok(t){$i().location.href=t}function X1(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function kk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vk(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Pk(){return X1()?self:null}const W1="firebaseLocalStorageDb",Lk=1,ld="firebaseLocalStorage",Z1="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([ld],e?"readwrite":"readonly").objectStore(ld)}function Uk(){const t=indexedDB.deleteDatabase(W1);return new kc(t).toPromise()}function gy(){const t=indexedDB.open(W1,Lk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ld,{keyPath:Z1})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ld)?e(r):(r.close(),await Uk(),e(await gy()))})})}async function ib(t,e,n){const r=Ud(t,!0).put({[Z1]:e,value:n});return new kc(r).toPromise()}async function jk(t,e){const n=Ud(t,!1).get(e),r=await new kc(n).toPromise();return r===void 0?null:r.value}function rb(t,e){const n=Ud(t,!0).delete(e);return new kc(n).toPromise()}const Bk=800,zk=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(Pk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kk(),!this.activeServiceWorker)return;this.sender=new Mk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gy();return await ib(e,od,"1"),await rb(e,od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ib(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ud(a,!1).getAll();return new kc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const Fk=J1;new Mc(3e4,6e4);function eR(t,e){return e?Vr(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Av extends q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Hk(t){return Sk(t.auth,new Av(t),t.bypassAuthState)}function qk(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),bk(n,new Av(t),t.bypassAuthState)}async function Gk(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),wk(n,new Av(t),t.bypassAuthState)}class tR{constructor(e,n,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hk;case"linkViaPopup":case"linkViaRedirect":return Gk;case"reauthViaPopup":case"reauthViaRedirect":return qk;default:er(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kk=new Mc(2e3,1e4);async function $k(t,e,n){if(fi(t.app))return Promise.reject(Ci(t,"operation-not-supported-in-this-environment"));const r=Pd(t);FO(t,e,bv);const a=eR(r,n);return new qa(r,"signInViaPopup",e,a).executeNotNull()}class qa extends tR{constructor(e,n,r,a,l){super(e,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kk.get())};e()}}qa.currentPopupAction=null;const Yk="pendingRedirect",Hf=new Map;class Qk extends tR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hf.get(this.auth._key());if(!e){try{const r=await Xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hf.set(this.auth._key(),e)}return this.bypassAuthState||Hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xk(t,e){const n=Jk(e),r=Zk(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function Wk(t,e){Hf.set(t._key(),e)}function Zk(t){return Vr(t._redirectPersistence)}function Jk(t){return Ff(Yk,t.config.apiKey,t.name)}async function eV(t,e,n=!1){if(fi(t.app))return Promise.reject(Ya(t));const r=Pd(t),a=eR(r,e),c=await new Qk(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const tV=600*1e3;class nV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nR(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ci(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tV&&this.cachedEventUids.clear(),this.cachedEventUids.has(sb(e))}saveEventToCache(e){this.cachedEventUids.add(sb(e)),this.lastProcessedEventTime=Date.now()}}function sb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nR(t);default:return!1}}async function rV(t,e={}){return Ml(t,"GET","/v1/projects",e)}const sV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aV=/^https?/;async function oV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rV(t);for(const n of e)try{if(lV(n))return}catch{}er(t,"unauthorized-domain")}function lV(t){const e=my(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!aV.test(n))return!1;if(sV.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const uV=new Mc(3e4,6e4);function ab(){const t=$i().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cV(t){return new Promise((e,n)=>{var r,a,l;function c(){ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ab(),n(Ci(t,"network-request-failed"))},timeout:uV.get()})}if(!((a=(r=$i().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=$i().gapi)===null||l===void 0)&&l.load)c();else{const f=pk("iframefcb");return $i()[f]=()=>{gapi.load?c():n(Ci(t,"network-request-failed"))},dk(`${mk()}?onload=${f}`).catch(d=>n(d))}}).catch(e=>{throw qf=null,e})}let qf=null;function hV(t){return qf=qf||cV(t),qf}const fV=new Mc(5e3,15e3),dV="__/auth/iframe",mV="emulator/auth/iframe",pV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yV(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vv(e,mV):`https://${t.config.authDomain}/${dV}`,r={apiKey:e.apiKey,appName:t.name,v:co},a=gV.get(t.config.apiHost);a&&(r.eid=a);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Nc(r).slice(1)}`}async function vV(t){const e=await hV(t),n=$i().gapi;return Se(n,t,"internal-error"),e.open({where:document.body,url:yV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pV,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ci(t,"network-request-failed"),f=$i().setTimeout(()=>{l(c)},fV.get());function d(){$i().clearTimeout(f),a(r)}r.ping(d).then(d,()=>{l(c)})}))}const _V={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TV=500,EV=600,wV="_blank",bV="http://localhost";class ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SV(t,e,n,r=TV,a=EV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},_V),{width:r.toString(),height:a.toString(),top:l,left:c}),p=dn().toLowerCase();n&&(f=P1(p)?wV:n),k1(p)&&(e=e||bV,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(sk(p)&&f!=="_self")return AV(e||"",f),new ob(null);const _=window.open(e||"",f,y);Se(_,t,"popup-blocked");try{_.focus()}catch{}return new ob(_)}function AV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const RV="__/auth/handler",CV="emulator/auth/handler",xV=encodeURIComponent("fac");async function lb(t,e,n,r,a,l){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:a};if(e instanceof bv){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",IM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Oc){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await t._getAppCheckToken(),p=d?`#${xV}=${encodeURIComponent(d)}`:"";return`${IV(t)}?${Nc(f).slice(1)}${p}`}function IV({config:t}){return t.emulator?vv(t,CV):`https://${t.authDomain}/${RV}`}const Og="webStorageSupport";class DV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=eV,this._overrideRedirectResult=Wk}async _openPopup(e,n,r,a){var l;Hr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await lb(e,n,r,my(),a);return SV(e,c,Sv())}async _openRedirect(e,n,r,a){await this._originValidation(e);const l=await lb(e,n,r,my(),a);return Ok(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Hr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vV(e),r=new nV(e);return n.register("authEvent",a=>(Se(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Og,{type:Og},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Og];c!==void 0&&n(!!c),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z1()||V1()||Ev()}}const NV=DV;var ub="@firebase/auth",cb="1.10.8";class MV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function OV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kV(t){xi(new pi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},p=new hk(r,a,l,d);return yk(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xi(new pi("auth-internal",e=>{const n=Pd(e.getProvider("auth").getImmediate());return(r=>new MV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(ub,cb,OV(t)),On(ub,cb,"esm2017")}const VV=300,PV=v1("authIdTokenMaxAge")||VV;let hb=null;const LV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PV)return;const a=n?.token;hb!==a&&(hb=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function UV(t=Vd()){const e=uo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gk(t,{popupRedirectResolver:NV,persistence:[Fk,Dk,Q1]}),r=v1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=LV(l.toString());Rk(n,c,()=>c(n.currentUser)),Ak(n,f=>c(f))}}const a=p1("auth");return a&&vk(n,`http://${a}`),n}function jV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const l=Ci("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",jV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kV("Browser");var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qs,iR;(function(){var t;function e(R,S){function M(){}M.prototype=S.prototype,R.D=S.prototype,R.prototype=new M,R.prototype.constructor=R,R.C=function(P,B,H){for(var V=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)V[Qe-2]=arguments[Qe];return S.prototype[B].apply(P,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,M){M||(M=0);var P=Array(16);if(typeof S=="string")for(var B=0;16>B;++B)P[B]=S.charCodeAt(M++)|S.charCodeAt(M++)<<8|S.charCodeAt(M++)<<16|S.charCodeAt(M++)<<24;else for(B=0;16>B;++B)P[B]=S[M++]|S[M++]<<8|S[M++]<<16|S[M++]<<24;S=R.g[0],M=R.g[1],B=R.g[2];var H=R.g[3],V=S+(H^M&(B^H))+P[0]+3614090360&4294967295;S=M+(V<<7&4294967295|V>>>25),V=H+(B^S&(M^B))+P[1]+3905402710&4294967295,H=S+(V<<12&4294967295|V>>>20),V=B+(M^H&(S^M))+P[2]+606105819&4294967295,B=H+(V<<17&4294967295|V>>>15),V=M+(S^B&(H^S))+P[3]+3250441966&4294967295,M=B+(V<<22&4294967295|V>>>10),V=S+(H^M&(B^H))+P[4]+4118548399&4294967295,S=M+(V<<7&4294967295|V>>>25),V=H+(B^S&(M^B))+P[5]+1200080426&4294967295,H=S+(V<<12&4294967295|V>>>20),V=B+(M^H&(S^M))+P[6]+2821735955&4294967295,B=H+(V<<17&4294967295|V>>>15),V=M+(S^B&(H^S))+P[7]+4249261313&4294967295,M=B+(V<<22&4294967295|V>>>10),V=S+(H^M&(B^H))+P[8]+1770035416&4294967295,S=M+(V<<7&4294967295|V>>>25),V=H+(B^S&(M^B))+P[9]+2336552879&4294967295,H=S+(V<<12&4294967295|V>>>20),V=B+(M^H&(S^M))+P[10]+4294925233&4294967295,B=H+(V<<17&4294967295|V>>>15),V=M+(S^B&(H^S))+P[11]+2304563134&4294967295,M=B+(V<<22&4294967295|V>>>10),V=S+(H^M&(B^H))+P[12]+1804603682&4294967295,S=M+(V<<7&4294967295|V>>>25),V=H+(B^S&(M^B))+P[13]+4254626195&4294967295,H=S+(V<<12&4294967295|V>>>20),V=B+(M^H&(S^M))+P[14]+2792965006&4294967295,B=H+(V<<17&4294967295|V>>>15),V=M+(S^B&(H^S))+P[15]+1236535329&4294967295,M=B+(V<<22&4294967295|V>>>10),V=S+(B^H&(M^B))+P[1]+4129170786&4294967295,S=M+(V<<5&4294967295|V>>>27),V=H+(M^B&(S^M))+P[6]+3225465664&4294967295,H=S+(V<<9&4294967295|V>>>23),V=B+(S^M&(H^S))+P[11]+643717713&4294967295,B=H+(V<<14&4294967295|V>>>18),V=M+(H^S&(B^H))+P[0]+3921069994&4294967295,M=B+(V<<20&4294967295|V>>>12),V=S+(B^H&(M^B))+P[5]+3593408605&4294967295,S=M+(V<<5&4294967295|V>>>27),V=H+(M^B&(S^M))+P[10]+38016083&4294967295,H=S+(V<<9&4294967295|V>>>23),V=B+(S^M&(H^S))+P[15]+3634488961&4294967295,B=H+(V<<14&4294967295|V>>>18),V=M+(H^S&(B^H))+P[4]+3889429448&4294967295,M=B+(V<<20&4294967295|V>>>12),V=S+(B^H&(M^B))+P[9]+568446438&4294967295,S=M+(V<<5&4294967295|V>>>27),V=H+(M^B&(S^M))+P[14]+3275163606&4294967295,H=S+(V<<9&4294967295|V>>>23),V=B+(S^M&(H^S))+P[3]+4107603335&4294967295,B=H+(V<<14&4294967295|V>>>18),V=M+(H^S&(B^H))+P[8]+1163531501&4294967295,M=B+(V<<20&4294967295|V>>>12),V=S+(B^H&(M^B))+P[13]+2850285829&4294967295,S=M+(V<<5&4294967295|V>>>27),V=H+(M^B&(S^M))+P[2]+4243563512&4294967295,H=S+(V<<9&4294967295|V>>>23),V=B+(S^M&(H^S))+P[7]+1735328473&4294967295,B=H+(V<<14&4294967295|V>>>18),V=M+(H^S&(B^H))+P[12]+2368359562&4294967295,M=B+(V<<20&4294967295|V>>>12),V=S+(M^B^H)+P[5]+4294588738&4294967295,S=M+(V<<4&4294967295|V>>>28),V=H+(S^M^B)+P[8]+2272392833&4294967295,H=S+(V<<11&4294967295|V>>>21),V=B+(H^S^M)+P[11]+1839030562&4294967295,B=H+(V<<16&4294967295|V>>>16),V=M+(B^H^S)+P[14]+4259657740&4294967295,M=B+(V<<23&4294967295|V>>>9),V=S+(M^B^H)+P[1]+2763975236&4294967295,S=M+(V<<4&4294967295|V>>>28),V=H+(S^M^B)+P[4]+1272893353&4294967295,H=S+(V<<11&4294967295|V>>>21),V=B+(H^S^M)+P[7]+4139469664&4294967295,B=H+(V<<16&4294967295|V>>>16),V=M+(B^H^S)+P[10]+3200236656&4294967295,M=B+(V<<23&4294967295|V>>>9),V=S+(M^B^H)+P[13]+681279174&4294967295,S=M+(V<<4&4294967295|V>>>28),V=H+(S^M^B)+P[0]+3936430074&4294967295,H=S+(V<<11&4294967295|V>>>21),V=B+(H^S^M)+P[3]+3572445317&4294967295,B=H+(V<<16&4294967295|V>>>16),V=M+(B^H^S)+P[6]+76029189&4294967295,M=B+(V<<23&4294967295|V>>>9),V=S+(M^B^H)+P[9]+3654602809&4294967295,S=M+(V<<4&4294967295|V>>>28),V=H+(S^M^B)+P[12]+3873151461&4294967295,H=S+(V<<11&4294967295|V>>>21),V=B+(H^S^M)+P[15]+530742520&4294967295,B=H+(V<<16&4294967295|V>>>16),V=M+(B^H^S)+P[2]+3299628645&4294967295,M=B+(V<<23&4294967295|V>>>9),V=S+(B^(M|~H))+P[0]+4096336452&4294967295,S=M+(V<<6&4294967295|V>>>26),V=H+(M^(S|~B))+P[7]+1126891415&4294967295,H=S+(V<<10&4294967295|V>>>22),V=B+(S^(H|~M))+P[14]+2878612391&4294967295,B=H+(V<<15&4294967295|V>>>17),V=M+(H^(B|~S))+P[5]+4237533241&4294967295,M=B+(V<<21&4294967295|V>>>11),V=S+(B^(M|~H))+P[12]+1700485571&4294967295,S=M+(V<<6&4294967295|V>>>26),V=H+(M^(S|~B))+P[3]+2399980690&4294967295,H=S+(V<<10&4294967295|V>>>22),V=B+(S^(H|~M))+P[10]+4293915773&4294967295,B=H+(V<<15&4294967295|V>>>17),V=M+(H^(B|~S))+P[1]+2240044497&4294967295,M=B+(V<<21&4294967295|V>>>11),V=S+(B^(M|~H))+P[8]+1873313359&4294967295,S=M+(V<<6&4294967295|V>>>26),V=H+(M^(S|~B))+P[15]+4264355552&4294967295,H=S+(V<<10&4294967295|V>>>22),V=B+(S^(H|~M))+P[6]+2734768916&4294967295,B=H+(V<<15&4294967295|V>>>17),V=M+(H^(B|~S))+P[13]+1309151649&4294967295,M=B+(V<<21&4294967295|V>>>11),V=S+(B^(M|~H))+P[4]+4149444226&4294967295,S=M+(V<<6&4294967295|V>>>26),V=H+(M^(S|~B))+P[11]+3174756917&4294967295,H=S+(V<<10&4294967295|V>>>22),V=B+(S^(H|~M))+P[2]+718787259&4294967295,B=H+(V<<15&4294967295|V>>>17),V=M+(H^(B|~S))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+H&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var M=S-this.blockSize,P=this.B,B=this.h,H=0;H<S;){if(B==0)for(;H<=M;)a(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<S;)if(P[B++]=R.charCodeAt(H++),B==this.blockSize){a(this,P),B=0;break}}else for(;H<S;)if(P[B++]=R[H++],B==this.blockSize){a(this,P),B=0;break}}this.h=B,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var M=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=M&255,M/=256;for(this.u(R),R=Array(16),S=M=0;4>S;++S)for(var P=0;32>P;P+=8)R[M++]=this.g[S]>>>P&255;return R};function l(R,S){var M=f;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=S(R)}function c(R,S){this.h=S;for(var M=[],P=!0,B=R.length-1;0<=B;B--){var H=R[B]|0;P&&H==S||(M[B]=H,P=!1)}this.g=M}var f={};function d(R){return-128<=R&&128>R?l(R,function(S){return new c([S|0],0>S?-1:0)}):new c([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return x(p(-R));for(var S=[],M=1,P=0;R>=M;P++)S[P]=R/M|0,M*=4294967296;return new c(S,0)}function y(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return x(y(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=p(Math.pow(S,8)),P=_,B=0;B<R.length;B+=8){var H=Math.min(8,R.length-B),V=parseInt(R.substring(B,B+H),S);8>H?(H=p(Math.pow(S,H)),P=P.j(H).add(p(V))):(P=P.j(M),P=P.add(p(V)))}return P}var _=d(0),E=d(1),A=d(16777216);t=c.prototype,t.m=function(){if(b(this))return-x(this).m();for(var R=0,S=1,M=0;M<this.g.length;M++){var P=this.i(M);R+=(0<=P?P:4294967296+P)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(b(this))return"-"+x(this).toString(R);for(var S=p(Math.pow(R,6)),M=this,P="";;){var B=X(M,S).g;M=k(M,B.j(S));var H=((0<M.g.length?M.g[0]:M.h)>>>0).toString(R);if(M=B,D(M))return H+P;for(;6>H.length;)H="0"+H;P=H+P}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=k(this,R),b(R)?-1:D(R)?0:1};function x(R){for(var S=R.g.length,M=[],P=0;P<S;P++)M[P]=~R.g[P];return new c(M,~R.h).add(E)}t.abs=function(){return b(this)?x(this):this},t.add=function(R){for(var S=Math.max(this.g.length,R.g.length),M=[],P=0,B=0;B<=S;B++){var H=P+(this.i(B)&65535)+(R.i(B)&65535),V=(H>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);P=V>>>16,H&=65535,V&=65535,M[B]=V<<16|H}return new c(M,M[M.length-1]&-2147483648?-1:0)};function k(R,S){return R.add(x(S))}t.j=function(R){if(D(this)||D(R))return _;if(b(this))return b(R)?x(this).j(x(R)):x(x(this).j(R));if(b(R))return x(this.j(x(R)));if(0>this.l(A)&&0>R.l(A))return p(this.m()*R.m());for(var S=this.g.length+R.g.length,M=[],P=0;P<2*S;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(var B=0;B<R.g.length;B++){var H=this.i(P)>>>16,V=this.i(P)&65535,Qe=R.i(B)>>>16,st=R.i(B)&65535;M[2*P+2*B]+=V*st,L(M,2*P+2*B),M[2*P+2*B+1]+=H*st,L(M,2*P+2*B+1),M[2*P+2*B+1]+=V*Qe,L(M,2*P+2*B+1),M[2*P+2*B+2]+=H*Qe,L(M,2*P+2*B+2)}for(P=0;P<S;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=S;P<2*S;P++)M[P]=0;return new c(M,0)};function L(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function U(R,S){this.g=R,this.h=S}function X(R,S){if(D(S))throw Error("division by zero");if(D(R))return new U(_,_);if(b(R))return S=X(x(R),S),new U(x(S.g),x(S.h));if(b(S))return S=X(R,x(S)),new U(x(S.g),S.h);if(30<R.g.length){if(b(R)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var M=E,P=S;0>=P.l(R);)M=G(M),P=G(P);var B=Y(M,1),H=Y(P,1);for(P=Y(P,2),M=Y(M,2);!D(P);){var V=H.add(P);0>=V.l(R)&&(B=B.add(M),H=V),P=Y(P,1),M=Y(M,1)}return S=k(R,B.j(S)),new U(B,S)}for(B=_;0<=R.l(S);){for(M=Math.max(1,Math.floor(R.m()/S.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),H=p(M),V=H.j(S);b(V)||0<V.l(R);)M-=P,H=p(M),V=H.j(S);D(H)&&(H=E),B=B.add(H),R=k(R,V)}return new U(B,R)}t.A=function(R){return X(this,R).h},t.and=function(R){for(var S=Math.max(this.g.length,R.g.length),M=[],P=0;P<S;P++)M[P]=this.i(P)&R.i(P);return new c(M,this.h&R.h)},t.or=function(R){for(var S=Math.max(this.g.length,R.g.length),M=[],P=0;P<S;P++)M[P]=this.i(P)|R.i(P);return new c(M,this.h|R.h)},t.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),M=[],P=0;P<S;P++)M[P]=this.i(P)^R.i(P);return new c(M,this.h^R.h)};function G(R){for(var S=R.g.length+1,M=[],P=0;P<S;P++)M[P]=R.i(P)<<1|R.i(P-1)>>>31;return new c(M,R.h)}function Y(R,S){var M=S>>5;S%=32;for(var P=R.g.length-M,B=[],H=0;H<P;H++)B[H]=0<S?R.i(H+M)>>>S|R.i(H+M+1)<<32-S:R.i(H+M);return new c(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Qs=c}).apply(typeof fb<"u"?fb:typeof self<"u"?self:typeof window<"u"?window:{});var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rR,Gu,sR,Gf,yy,aR,oR,lR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,w){return h==Array.prototype||h==Object.prototype||(h[v]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sf=="object"&&Sf];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function a(h,v){if(v)e:{var w=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var $=h[I];if(!($ in w))break e;w=w[$]}h=h[h.length-1],I=w[h],v=v(I),v!=I&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var w=0,I=!1,$={next:function(){if(!I&&w<h.length){var ee=w++;return{value:v(ee,h[ee]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,w){return w})}});var c=c||{},f=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,w){return h.call.apply(h.bind,arguments)}function _(h,v,w){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),h.apply(v,$)}}return function(){return h.apply(v,arguments)}}function E(h,v,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,E.apply(null,arguments)}function A(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function D(h,v){function w(){}w.prototype=v.prototype,h.aa=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(I,$,ee){for(var ce=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ce[Xe-2]=arguments[Xe];return v.prototype[$].apply(I,ce)}}function b(h){const v=h.length;if(0<v){const w=Array(v);for(let I=0;I<v;I++)w[I]=h[I];return w}return[]}function x(h,v){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(d(I)){const $=h.length||0,ee=I.length||0;h.length=$+ee;for(let ce=0;ce<ee;ce++)h[$+ce]=I[ce]}else h.push(I)}}class k{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){return/^[\s\xa0]*$/.test(h)}function U(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function X(h){return X[" "](h),h}X[" "]=function(){};var G=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function Y(h,v,w){for(const I in h)v.call(w,h[I],I,h)}function R(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function S(h){const v={};for(const w in h)v[w]=h[w];return v}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,v){let w,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(w in I)h[w]=I[w];for(let ee=0;ee<M.length;ee++)w=M[ee],Object.prototype.hasOwnProperty.call(I,w)&&(h[w]=I[w])}}function B(h){var v=1;h=h.split(":");const w=[];for(;0<v&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function H(h){f.setTimeout(()=>{throw h},0)}function V(){var h=Re;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Qe{constructor(){this.h=this.g=null}add(v,w){const I=st.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var st=new k(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,de=!1,Re=new Qe,De=()=>{const h=f.Promise.resolve(void 0);ue=()=>{h.then(z)}};var z=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(w){H(w)}var v=st;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}de=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};f.addEventListener("test",w,v),f.removeEventListener("test",w,v)}catch{}return h})();function he(h,v){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(G){e:{try{X(v.nodeName);var $=!0;break e}catch{}$=!1}$||(v=null)}}else w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&he.aa.h.call(this)}}D(he,ne);var pe={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),He=0;function Pe(h,v,w,I,$){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=$,this.key=++He,this.da=this.fa=!1}function Vn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Wn(h){this.src=h,this.g={},this.h=0}Wn.prototype.add=function(h,v,w,I,$){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var ce=yi(h,v,I,$);return-1<ce?(v=h[ce],w||(v.fa=!1)):(v=new Pe(v,this.src,ee,!!I,$),v.fa=w,h.push(v)),v};function gi(h,v){var w=v.type;if(w in h.g){var I=h.g[w],$=Array.prototype.indexOf.call(I,v,void 0),ee;(ee=0<=$)&&Array.prototype.splice.call(I,$,1),ee&&(Vn(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function yi(h,v,w,I){for(var $=0;$<h.length;++$){var ee=h[$];if(!ee.da&&ee.listener==v&&ee.capture==!!w&&ee.ha==I)return $}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),Mi={};function rr(h,v,w,I,$){if(Array.isArray(v)){for(var ee=0;ee<v.length;ee++)rr(h,v[ee],w,I,$);return null}return w=Pn(w),h&&h[Te]?h.K(v,w,p(I)?!!I.capture:!1,$):go(h,v,w,!1,I,$)}function go(h,v,w,I,$,ee){if(!v)throw Error("Invalid event type");var ce=p($)?!!$.capture:!!$,Xe=Xr(h);if(Xe||(h[mn]=Xe=new Wn(h)),w=Xe.add(v,w,I,ce,ee),w.proxy)return w;if(I=yo(),w.proxy=I,I.src=h,I.listener=w,h.addEventListener)se||($=ce),$===void 0&&($=!1),h.addEventListener(v.toString(),I,$);else if(h.attachEvent)h.attachEvent(Qr(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yo(){function h(w){return v.call(h.src,h.listener,w)}const v=ha;return h}function Yr(h,v,w,I,$){if(Array.isArray(v))for(var ee=0;ee<v.length;ee++)Yr(h,v[ee],w,I,$);else I=p(I)?!!I.capture:!!I,w=Pn(w),h&&h[Te]?(h=h.i,v=String(v).toString(),v in h.g&&(ee=h.g[v],w=yi(ee,w,I,$),-1<w&&(Vn(ee[w]),Array.prototype.splice.call(ee,w,1),ee.length==0&&(delete h.g[v],h.h--)))):h&&(h=Xr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=yi(v,w,I,$)),(w=-1<h?v[h]:null)&&sr(w))}function sr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Te])gi(v.i,h);else{var w=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(w,I,h.capture):v.detachEvent?v.detachEvent(Qr(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Xr(v))?(gi(w,h),w.h==0&&(w.src=null,v[mn]=null)):Vn(h)}}}function Qr(h){return h in Mi?Mi[h]:Mi[h]="on"+h}function ha(h,v){if(h.da)h=!0;else{v=new he(v,this);var w=h.listener,I=h.ha||h.src;h.fa&&sr(h),h=w.call(I,v)}return h}function Xr(h){return h=h[mn],h instanceof Wn?h:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(h){return typeof h=="function"?h:(h[ze]||(h[ze]=function(v){return h.handleEvent(v)}),h[ze])}function yt(){K.call(this),this.i=new Wn(this),this.M=this,this.F=null}D(yt,K),yt.prototype[Te]=!0,yt.prototype.removeEventListener=function(h,v,w,I){Yr(this,h,v,w,I)};function Rt(h,v){var w,I=h.F;if(I)for(w=[];I;I=I.F)w.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new ne(v,h);else if(v instanceof ne)v.target=v.target||h;else{var $=v;v=new ne(I,h),P(v,$)}if($=!0,w)for(var ee=w.length-1;0<=ee;ee--){var ce=v.g=w[ee];$=ar(ce,I,!0,v)&&$}if(ce=v.g=h,$=ar(ce,I,!0,v)&&$,$=ar(ce,I,!1,v)&&$,w)for(ee=0;ee<w.length;ee++)ce=v.g=w[ee],$=ar(ce,I,!1,v)&&$}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var w=h.g[v],I=0;I<w.length;I++)Vn(w[I]);delete h.g[v],h.h--}}this.F=null},yt.prototype.K=function(h,v,w,I){return this.i.add(String(h),v,!1,w,I)},yt.prototype.L=function(h,v,w,I){return this.i.add(String(h),v,!0,w,I)};function ar(h,v,w,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,ee=0;ee<v.length;++ee){var ce=v[ee];if(ce&&!ce.da&&ce.capture==w){var Xe=ce.listener,Mt=ce.ha||ce.src;ce.fa&&gi(h.i,ce),$=Xe.call(Mt,I)!==!1&&$}}return $&&!I.defaultPrevented}function Qc(h,v,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:f.setTimeout(h,v||0)}function jl(h){h.g=Qc(()=>{h.g=null,h.i&&(h.i=!1,jl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class gm extends K{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:jl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fa(h){K.call(this),this.h=h,this.g={}}D(fa,K);var Wr=[];function rn(h){Y(h.g,function(v,w){this.g.hasOwnProperty(w)&&sr(v)},h),h.g={}}fa.prototype.N=function(){fa.aa.N.call(this),rn(this)},fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=f.JSON.stringify,pn=f.JSON.parse,ym=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Bl(){}Bl.prototype.h=null;function Xc(h){return h.h||(h.h=h.i())}function da(){}var Oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){ne.call(this,"d")}D(Zr,ne);function vi(){ne.call(this,"c")}D(vi,ne);var Jn={},Jr=null;function vo(){return Jr=Jr||new yt}Jn.La="serverreachability";function zl(h){ne.call(this,Jn.La,h)}D(zl,ne);function or(h){const v=vo();Rt(v,new zl(v))}Jn.STAT_EVENT="statevent";function es(h,v){ne.call(this,Jn.STAT_EVENT,h),this.stat=v}D(es,ne);function $t(h){const v=vo();Rt(v,new es(v,h))}Jn.Ma="timingevent";function Fl(h,v){ne.call(this,Jn.Ma,h),this.size=v}D(Fl,ne);function ts(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},v)}function ns(){this.g=!0}ns.prototype.xa=function(){this.g=!1};function Hl(h,v,w,I,$,ee){h.info(function(){if(h.g)if(ee)for(var ce="",Xe=ee.split("&"),Mt=0;Mt<Xe.length;Mt++){var Me=Xe[Mt].split("=");if(1<Me.length){var Ht=Me[0];Me=Me[1];var qt=Ht.split("_");ce=2<=qt.length&&qt[1]=="type"?ce+(Ht+"="+Me+"&"):ce+(Ht+"=redacted&")}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+v+`
`+w+`
`+ce})}function ql(h,v,w,I,$,ee,ce){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+v+`
`+w+`
`+ee+" "+ce})}function lr(h,v,w,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ki(h,w)+(I?" "+I:"")})}function Wc(h,v){h.info(function(){return"TIMEOUT: "+v})}ns.prototype.info=function(){};function ki(h,v){if(!h.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var I=w[h];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var ee=$[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ce=1;ce<$.length;ce++)$[ce]=""}}}}return Zn(w)}catch{return v}}var vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vi;function is(){}D(is,Bl),is.prototype.g=function(){return new XMLHttpRequest},is.prototype.i=function(){return{}},Vi=new is;function Pi(h,v,w,I){this.j=h,this.i=v,this.l=w,this.R=I||1,this.U=new fa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zc}function Zc(){this.i=null,this.g="",this.h=!1}var Gl={},ur={};function ma(h,v,w){h.L=1,h.v=ya(_t(v)),h.m=w,h.P=!0,cr(h,null)}function cr(h,v){h.F=Date.now(),_i(h),h.A=_t(h.v);var w=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),dr(w.i,"t",I),h.C=0,w=h.j.J,h.h=new Zc,h.g=mh(h.j,w?v:null,!h.m),0<h.O&&(h.M=new gm(E(h.Y,h,h.g),h.O)),v=h.U,w=h.g,I=h.ca;var $="readystatechange";Array.isArray($)||($&&(Wr[0]=$.toString()),$=Wr);for(var ee=0;ee<$.length;ee++){var ce=rr(w,$[ee],I||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),or(),Hl(h.i,h.u,h.A,h.l,h.R,h.m)}Pi.prototype.ca=function(h){h=h.target;const v=this.M;v&&vn(h)==3?v.j():this.Y(h)},Pi.prototype.Y=function(h){try{if(h==this.g)e:{const qt=vn(this.g);var v=this.g.Ba();const gs=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Ta(this.g)))){this.J||qt!=4||v==7||(v==8||0>=gs?or(3):or(2)),_o(this);var w=this.g.Z();this.X=w;t:if(hr(this)){var I=Ta(this.g);h="";var $=I.length,ee=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),rs(this);var ce="";break t}this.h.i=new f.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,h+=this.h.i.decode(I[v],{stream:!(ee&&v==$-1)});I.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=w==200,ql(this.i,this.u,this.A,this.l,this.R,qt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Mt=this.g;if((Xe=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Xe)){var Me=Xe;break t}}Me=null}if(w=Me)lr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,w);else{this.o=!1,this.s=3,$t(12),gn(this),rs(this);break e}}if(this.P){w=!0;let Sn;for(;!this.J&&this.C<ce.length;)if(Sn=pa(this,ce),Sn==ur){qt==4&&(this.s=4,$t(14),w=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Gl){this.s=4,$t(15),lr(this.i,this.l,ce,"[Invalid Chunk]"),w=!1;break}else lr(this.i,this.l,Sn,null),Li(this,Sn);if(hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ce.length!=0||this.h.h||(this.s=1,$t(16),w=!1),this.o=this.o&&w,!w)lr(this.i,this.l,ce,"[Invalid Chunked Response]"),gn(this),rs(this);else if(0<ce.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),nu(Ht),Ht.M=!0,$t(11))}}else lr(this.i,this.l,ce,null),Li(this,ce);qt==4&&gn(this),this.o&&!this.J&&(qt==4?hh(this.j,this):(this.o=!1,_i(this)))}else sh(this.g),w==400&&0<ce.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),gn(this),rs(this)}}}catch{}finally{}};function hr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function pa(h,v){var w=h.C,I=v.indexOf(`
`,w);return I==-1?ur:(w=Number(v.substring(w,I)),isNaN(w)?Gl:(I+=1,I+w>v.length?ur:(v=v.slice(I,I+w),h.C=I+w,v)))}Pi.prototype.cancel=function(){this.J=!0,gn(this)};function _i(h){h.S=Date.now()+h.I,Ct(h,h.I)}function Ct(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ts(E(h.ba,h),v)}function _o(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Pi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Wc(this.i,this.A),this.L!=2&&(or(),$t(17)),gn(this),this.s=2,rs(this)):Ct(this,this.S-h)};function rs(h){h.j.G==0||h.J||hh(h.j,h)}function gn(h){_o(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,rn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Li(h,v){try{var w=h.j;if(w.G!=0&&(w.g==h||ss(w.h,h))){if(!h.K&&ss(w.h,h)&&w.G==3){try{var I=w.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)ms(w),ds(w);else break e;tu(w),$t(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=ts(E(w.Za,w),6e3));if(1>=Jc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else pr(w,11)}else if((h.K||w.g==h)&&ms(w),!L(v))for($=w.Da.g.parse(v),v=0;v<$.length;v++){let Me=$[v];if(w.T=Me[0],Me=Me[1],w.G==2)if(Me[0]=="c"){w.K=Me[1],w.ia=Me[2];const Ht=Me[3];Ht!=null&&(w.la=Ht,w.j.info("VER="+w.la));const qt=Me[4];qt!=null&&(w.Aa=qt,w.j.info("SVER="+w.Aa));const gs=Me[5];gs!=null&&typeof gs=="number"&&0<gs&&(I=1.5*gs,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Sn=h.g;if(Sn){const ba=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var ee=I.h;ee.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(as(ee,ee.h),ee.h=null))}if(I.D){const gr=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;gr&&(I.ya=gr,Ge(I.I,I.D,gr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ce=h;if(I.qa=dh(I,I.J?I.ia:null,I.W),ce.K){ei(I.h,ce);var Xe=ce,Mt=I.L;Mt&&(Xe.I=Mt),Xe.B&&(_o(Xe),_i(Xe)),I.g=ce}else uh(I);0<w.i.length&&Co(w)}else Me[0]!="stop"&&Me[0]!="close"||pr(w,7);else w.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?pr(w,7):Jl(w):Me[0]!="noop"&&w.l&&w.l.ta(Me),w.v=0)}}or(4)}catch{}}var vm=class{constructor(h,v){this.g=h,this.map=v}};function Kl(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $l(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Jc(h){return h.h?1:h.g?h.g.size:0}function ss(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function as(h,v){h.g?h.g.add(v):h.h=v}function ei(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Kl.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function yn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.D);return v}return b(h.i)}function eh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],w=h.length,I=0;I<w;I++)v.push(h[I]);return v}v=[],w=0;for(I in h)v[w++]=h[I];return v}function _m(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var w=0;w<h;w++)v.push(w);return v}v=[],w=0;for(const I in h)v[w++]=I;return v}}}function To(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var w=_m(h),I=eh(h),$=I.length,ee=0;ee<$;ee++)v.call(void 0,I[ee],w&&w[ee],h)}var Yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eo(h,v){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var I=h[w].indexOf("="),$=null;if(0<=I){var ee=h[w].substring(0,I);$=h[w].substring(I+1)}else ee=h[w];v(ee,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function fr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof fr){this.h=h.h,os(this,h.j),this.o=h.o,this.g=h.g,ga(this,h.s),this.l=h.l;var v=h.i,w=new Ui;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),wo(this,w),this.m=h.m}else h&&(v=String(h).match(Yl))?(this.h=!1,os(this,v[1]||"",!0),this.o=ls(v[2]||""),this.g=ls(v[3]||"",!0),ga(this,v[4]),this.l=ls(v[5]||"",!0),wo(this,v[6]||"",!0),this.m=ls(v[7]||"")):(this.h=!1,this.i=new Ui(null,this.h))}fr.prototype.toString=function(){var h=[],v=this.j;v&&h.push(ti(v,Ql,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ti(v,Ql,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(ti(w,w.charAt(0)=="/"?Xl:th,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",ti(w,wm)),h.join("")};function _t(h){return new fr(h)}function os(h,v,w){h.j=w?ls(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ga(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function wo(h,v,w){v instanceof Ui?(h.i=v,nh(h.i,h.h)):(w||(v=ti(v,Em)),h.i=new Ui(v,h.h))}function Ge(h,v,w){h.i.set(v,w)}function ya(h){return Ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ls(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ti(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Tm),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ql=/[#\/\?@]/g,th=/[#\?:]/g,Xl=/[#\?]/g,Em=/[#\?@]/g,wm=/#/g;function Ui(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ft(h){h.g||(h.g=new Map,h.h=0,h.i&&Eo(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=Ui.prototype,t.add=function(h,v){Ft(this),this.i=null,h=Ln(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function bo(h,v){Ft(h),v=Ln(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function So(h,v){return Ft(h),v=Ln(h,v),h.g.has(v)}t.forEach=function(h,v){Ft(this),this.g.forEach(function(w,I){w.forEach(function($){h.call(v,$,I,this)},this)},this)},t.na=function(){Ft(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let I=0;I<v.length;I++){const $=h[I];for(let ee=0;ee<$.length;ee++)w.push(v[I])}return w},t.V=function(h){Ft(this);let v=[];if(typeof h=="string")So(this,h)&&(v=v.concat(this.g.get(Ln(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)v=v.concat(h[w])}return v},t.set=function(h,v){return Ft(this),this.i=null,h=Ln(this,h),So(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function dr(h,v,w){bo(h,v),0<w.length&&(h.i=null,h.g.set(Ln(h,v),b(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var I=v[w];const ee=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var $=ee;ce[I]!==""&&($+="="+encodeURIComponent(String(ce[I]))),h.push($)}}return this.i=h.join("&")};function Ln(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function nh(h,v){v&&!h.j&&(Ft(h),h.i=null,h.g.forEach(function(w,I){var $=I.toLowerCase();I!=$&&(bo(this,I),dr(this,$,w))},h)),h.j=v}function Wl(h,v){const w=new ns;if(f.Image){const I=new Image;I.onload=A(bn,w,"TestLoadImage: loaded",!0,v,I),I.onerror=A(bn,w,"TestLoadImage: error",!1,v,I),I.onabort=A(bn,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=A(bn,w,"TestLoadImage: timeout",!1,v,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function ih(h,v){const w=new ns,I=new AbortController,$=setTimeout(()=>{I.abort(),bn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(ee=>{clearTimeout($),ee.ok?bn(w,"TestPingServer: ok",!0,v):bn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),bn(w,"TestPingServer: error",!1,v)})}function bn(h,v,w,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(w)}catch{}}function Ti(){this.g=new ym}function Zl(h,v,w){const I=w||"";try{To(h,function($,ee){let ce=$;p($)&&(ce=Zn($)),v.push(I+ee+"="+encodeURIComponent(ce))})}catch($){throw v.push(I+"type="+encodeURIComponent("_badmap")),$}}function ji(h){this.l=h.Ub||null,this.j=h.eb||!1}D(ji,Bl),ji.prototype.g=function(){return new Un(this.l,this.j)},ji.prototype.i=(function(h){return function(){return h}})({});function Un(h,v){yt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Un,yt),t=Un.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,us(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||f).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Bi(this):us(this),this.readyState==3&&Ao(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Bi(this))},t.Qa=function(h){this.g&&(this.response=h,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,us(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function us(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function va(h){let v="";return Y(h,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function cs(h,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=va(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):Ge(h,v,w))}function at(h){yt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(at,yt);var sn=/^https?$/i,mr=["POST","PUT"];t=at.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vi.g(),this.v=this.o?Xc(this.o):Xc(Vi),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ee){_a(this,ee);return}if(h=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)w.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ee of I.keys())w.set(ee,I.get(ee));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(ee=>ee.toLowerCase()=="content-type"),$=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(mr,v,void 0))||I||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of w)this.g.setRequestHeader(ee,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){_a(this,ee)}};function _a(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,hs(h),fs(h)}function hs(h){h.A||(h.A=!0,Rt(h,"complete"),Rt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Rt(this,"complete"),Rt(this,"abort"),fs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rh(this):this.bb())},t.bb=function(){rh(this)};function rh(h){if(h.h&&typeof c<"u"&&(!h.v[1]||vn(h)!=4||h.Z()!=2)){if(h.u&&vn(h)==4)Qc(h.Ea,0,h);else if(Rt(h,"readystatechange"),vn(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=ce===0){var $=String(h.D).match(Yl)[1]||null;!$&&f.self&&f.self.location&&($=f.self.location.protocol.slice(0,-1)),I=!sn.test($?$.toLowerCase():"")}w=I}if(w)Rt(h,"complete"),Rt(h,"success");else{h.m=6;try{var ee=2<vn(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",hs(h)}}finally{fs(h)}}}}function fs(h,v){if(h.g){Ro(h);const w=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Rt(h,"ready");try{w.onreadystatechange=I}catch{}}}function Ro(h){h.I&&(f.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function vn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),pn(v)}};function Ta(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function sh(h){const v={};h=(h.g&&2<=vn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(L(h[I]))continue;var w=B(h[I]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ee=v[$]||[];v[$]=ee,ee.push(w)}R(v,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function ah(h){this.Aa=0,this.i=[],this.j=new ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,h),this.cb=Ea("retryDelaySeedMs",1e4,h),this.Wa=Ea("forwardChannelMaxRetries",2,h),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Kl(h&&h.concurrentRequestLimit),this.Da=new Ti,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ah.prototype,t.la=8,t.G=1,t.connect=function(h,v,w,I){$t(0),this.W=h,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=dh(this,null,this.W),Co(this)};function Jl(h){if(oh(h),h.G==3){var v=h.U++,w=_t(h.I);if(Ge(w,"SID",h.K),Ge(w,"RID",v),Ge(w,"TYPE","terminate"),wa(h,w),v=new Pi(h,h.j,v),v.L=2,v.v=ya(_t(w)),w=!1,f.navigator&&f.navigator.sendBeacon)try{w=f.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&f.Image&&(new Image().src=v.v,w=!0),w||(v.g=mh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_i(v)}iu(h)}function ds(h){h.g&&(nu(h),h.g.cancel(),h.g=null)}function oh(h){ds(h),h.u&&(f.clearTimeout(h.u),h.u=null),ms(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Co(h){if(!$l(h.h)&&!h.s){h.s=!0;var v=h.Ga;ue||De(),de||(ue(),de=!0),Re.add(v,h),h.B=0}}function bm(h,v){return Jc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ts(E(h.Ga,h,v),fh(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new Pi(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=S(ee),P(ee,this.S)):ee=this.S),this.m!==null||this.O||($.H=ee,ee=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=eu(this,$,v),w=_t(this.I),Ge(w,"RID",h),Ge(w,"CVER",22),this.D&&Ge(w,"X-HTTP-Session-Id",this.D),wa(this,w),ee&&(this.O?v="headers="+encodeURIComponent(String(va(ee)))+"&"+v:this.m&&cs(w,this.m,ee)),as(this.h,$),this.Ua&&Ge(w,"TYPE","init"),this.P?(Ge(w,"$req",v),Ge(w,"SID","null"),$.T=!0,ma($,w,null)):ma($,w,v),this.G=2}}else this.G==3&&(h?lh(this,h):this.i.length==0||$l(this.h)||lh(this))};function lh(h,v){var w;v?w=v.l:w=h.U++;const I=_t(h.I);Ge(I,"SID",h.K),Ge(I,"RID",w),Ge(I,"AID",h.T),wa(h,I),h.m&&h.o&&cs(I,h.m,h.o),w=new Pi(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),v&&(h.i=v.D.concat(h.i)),v=eu(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),as(h.h,w),ma(w,I,v)}function wa(h,v){h.H&&Y(h.H,function(w,I){Ge(v,I,w)}),h.l&&To({},function(w,I){Ge(v,I,w)})}function eu(h,v,w){w=Math.min(h.i.length,w);var I=h.l?E(h.l.Na,h.l,h):null;e:{var $=h.i;let ee=-1;for(;;){const ce=["count="+w];ee==-1?0<w?(ee=$[0].g,ce.push("ofs="+ee)):ee=0:ce.push("ofs="+ee);let Xe=!0;for(let Mt=0;Mt<w;Mt++){let Me=$[Mt].g;const Ht=$[Mt].map;if(Me-=ee,0>Me)ee=Math.max(0,$[Mt].g-100),Xe=!1;else try{Zl(Ht,ce,"req"+Me+"_")}catch{I&&I(Ht)}}if(Xe){I=ce.join("&");break e}}}return h=h.i.splice(0,w),v.D=h,I}function uh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ue||De(),de||(ue(),de=!0),Re.add(v,h),h.v=0}}function tu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ts(E(h.Fa,h),fh(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ch(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ts(E(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),ds(this),ch(this))};function nu(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function ch(h){h.g=new Pi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=_t(h.qa);Ge(v,"RID","rpc"),Ge(v,"SID",h.K),Ge(v,"AID",h.T),Ge(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ge(v,"TO",h.ja),Ge(v,"TYPE","xmlhttp"),wa(h,v),h.m&&h.o&&cs(v,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=ya(_t(v)),w.m=null,w.P=!0,cr(w,h)}t.Za=function(){this.C!=null&&(this.C=null,ds(this),tu(this),$t(19))};function ms(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function hh(h,v){var w=null;if(h.g==v){ms(h),nu(h),h.g=null;var I=2}else if(ss(h.h,v))w=v.D,ei(h.h,v),I=1;else return;if(h.G!=0){if(v.o)if(I==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var $=h.B;I=vo(),Rt(I,new Fl(I,w)),Co(h)}else uh(h);else if($=v.s,$==3||$==0&&0<v.X||!(I==1&&bm(h,v)||I==2&&tu(h)))switch(w&&0<w.length&&(v=h.h,v.i=v.i.concat(w)),$){case 1:pr(h,5);break;case 4:pr(h,10);break;case 3:pr(h,6);break;default:pr(h,2)}}}function fh(h,v){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*v}function pr(h,v){if(h.j.info("Error code "+v),v==2){var w=E(h.fb,h),I=h.Xa;const $=!I;I=new fr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||os(I,"https"),ya(I),$?Wl(I.toString(),w):ih(I.toString(),w)}else $t(2);h.G=0,h.l&&h.l.sa(v),iu(h),oh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function iu(h){if(h.G=0,h.ka=[],h.l){const v=yn(h.h);(v.length!=0||h.i.length!=0)&&(x(h.ka,v),x(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function dh(h,v,w){var I=w instanceof fr?_t(w):new fr(w);if(I.g!="")v&&(I.g=v+"."+I.g),ga(I,I.s);else{var $=f.location;I=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var ee=new fr(null);I&&os(ee,I),v&&(ee.g=v),$&&ga(ee,$),w&&(ee.l=w),I=ee}return w=h.D,v=h.ya,w&&v&&Ge(I,w,v),Ge(I,"VER",h.la),wa(h,I),I}function mh(h,v,w){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new at(new ji({eb:w})):new at(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ph(){}t=ph.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xo(){}xo.prototype.g=function(h,v){return new _n(h,v)};function _n(h,v){yt.call(this),this.g=new ah(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!L(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!L(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ps(this)}D(_n,yt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Jl(this.g)},_n.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Zn(h),h=w);v.i.push(new vm(v.Ya++,h)),v.G==3&&Co(v)},_n.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,_n.aa.N.call(this)};function gh(h){Zr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}D(gh,Zr);function yh(){vi.call(this),this.status=1}D(yh,vi);function ps(h){this.g=h}D(ps,ph),ps.prototype.ua=function(){Rt(this.g,"a")},ps.prototype.ta=function(h){Rt(this.g,new gh(h))},ps.prototype.sa=function(h){Rt(this.g,new yh)},ps.prototype.ra=function(){Rt(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,lR=function(){return new xo},oR=function(){return vo()},aR=Jn,yy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Gf=vt,Yt.COMPLETE="complete",sR=Yt,da.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Gu=da,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,rR=at}).apply(typeof Sf<"u"?Sf:typeof self<"u"?self:typeof window<"u"?window:{});const db="@firebase/firestore",mb="4.8.0";class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Ol="11.10.0";const no=new dv("@firebase/firestore");function sl(){return no.logLevel}function me(t,...e){if(no.logLevel<=je.DEBUG){const n=e.map(Rv);no.debug(`Firestore (${Ol}): ${t}`,...n)}}function qr(t,...e){if(no.logLevel<=je.ERROR){const n=e.map(Rv);no.error(`Firestore (${Ol}): ${t}`,...n)}}function Ws(t,...e){if(no.logLevel<=je.WARN){const n=e.map(Rv);no.warn(`Firestore (${Ol}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uR(t,r,n)}function uR(t,e,n){let r=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function We(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||uR(e,a,r)}function xe(t,e){return t}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class cR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class zV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FV{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const a=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let l=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ur,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ur)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new cR(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class HV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new HV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function hR(){return new TextEncoder}class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=KV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=e.charAt(a[l]%62))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function vy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),a=e.codePointAt(n);if(r!==a){if(r<128&&a<128)return Oe(r,a);{const l=hR(),c=$V(l.encode(gb(t,n)),l.encode(gb(e,n)));return c!==0?c:Oe(r,a)}}n+=r>65535?2:1}return Oe(t.length,e.length)}function gb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $V(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Oe(t[n],e[n]);return Oe(t.length,e.length)}function El(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const yb="__name__";class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const l=Gi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Oe(e.length,n.length)}static compareSegments(e,n){const r=Gi.isNumericId(e),a=Gi.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):vy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class rt extends Gi{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new rt(n)}static emptyPath(){return new rt([])}}const YV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Gi{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return YV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yb}static keyField(){return new tn([yb])}static fromServerFormat(e){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(rt.fromString(e))}static fromName(e){return new ve(rt.fromString(e).popFirst(5))}static empty(){return new ve(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new rt(e.slice()))}}function fR(t,e,n){if(!n)throw new fe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QV(t,e,n,r){if(e===!0&&r===!0)throw new fe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vb(t){if(!ve.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _b(t){if(ve.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be(12329,{type:typeof t})}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jd(t);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vc(t,e){if(!dR(t))throw new fe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new fe(re.INVALID_ARGUMENT,n);return!0}const Tb=-62135596800,Eb=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Eb);return new ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tb)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Eb}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:jt("string",ut._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ut(0,0))}static max(){return new Ae(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fc=-1;function XV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new Zs(a,ve.empty(),e)}function WV(t){return new Zs(t.readTime,t.key,fc)}class Zs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zs(Ae.min(),ve.empty(),fc)}static max(){return new Zs(Ae.max(),ve.empty(),fc)}}function ZV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}const JV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function kl(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==JV)throw t;me("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,r)=>{n(e)}))}static reject(e){return new le(((n,r)=>{r(e)}))}static waitFor(e){return new le(((n,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&n()}),(d=>r(d)))})),c=!0,l===a&&n()}))}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next((a=>a?le.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(e,n){return new le(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next((y=>{c[p]=y,++f,f===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,n){return new le(((r,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):r()};l()}))}}function tP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vl(t){return t.name==="IndexedDbTransactionError"}class Bd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Bd.ue=-1;const xv=-1;function zd(t){return t==null}function ud(t){return t===0&&1/t==-1/0}function nP(t){return typeof t=="number"&&Number.isInteger(t)&&!ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const mR="";function iP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wb(e)),e=rP(t.get(n),e);return wb(e)}function rP(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case mR:n+="";break;default:n+=l}}return n}function wb(t){return t+mR+""}function bb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class gt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Af(this.root,e,this.comparator,!1)}getReverseIterator(){return new Af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Af(this.root,e,this.comparator,!0)}}class Af{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,r,a,l){this.key=e,this.value=n,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,l){return new en(e??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,r,a,l){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sb(this.data.getIterator())}getIteratorFrom(e){return new Sb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class Sb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new zt(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gR("Invalid base64 string: "+l):l}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=sP.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}const yR="server_timestamp",vR="__type__",_R="__previous_value__",TR="__local_write_time__";function Fd(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vR])===null||n===void 0?void 0:n.stringValue)===yR}function Hd(t){const e=t.mapValue.fields[_R];return Fd(e)?Hd(e):e}function dc(t){const e=Js(t.mapValue.fields[TR].timestampValue);return new ut(e.seconds,e.nanos)}class aP{constructor(e,n,r,a,l,c,f,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const cd="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||cd}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}const ER="__type__",oP="__max__",Rf={mapValue:{}},wR="__vector__",hd="value";function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fd(t)?4:uP(t)?9007199254740991:lP(t)?10:11:be(28295,{value:t})}function tr(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dc(t).isEqual(dc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Js(a.timestampValue),f=Js(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return ea(a.bytesValue).isEqual(ea(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Nt(a.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(a.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Nt(a.integerValue)===Nt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Nt(a.doubleValue),f=Nt(l.doubleValue);return c===f?ud(c)===ud(f):isNaN(c)&&isNaN(f)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(bb(c)!==bb(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!tr(c[d],f[d])))return!1;return!0})(t,e);default:return be(52216,{left:t})}}function pc(t,e){return(t.values||[]).find((n=>tr(n,e)))!==void 0}function wl(t,e){if(t===e)return 0;const n=ta(t),r=ta(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Nt(l.integerValue||l.doubleValue),d=Nt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(t,e);case 3:return Ab(t.timestampValue,e.timestampValue);case 4:return Ab(dc(t),dc(e));case 5:return vy(t.stringValue,e.stringValue);case 6:return(function(l,c){const f=ea(l),d=ea(c);return f.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let p=0;p<f.length&&p<d.length;p++){const y=Oe(f[p],d[p]);if(y!==0)return y}return Oe(f.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Oe(Nt(l.latitude),Nt(c.latitude));return f!==0?f:Oe(Nt(l.longitude),Nt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Rb(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var f,d,p,y;const _=l.fields||{},E=c.fields||{},A=(f=_[hd])===null||f===void 0?void 0:f.arrayValue,D=(d=E[hd])===null||d===void 0?void 0:d.arrayValue,b=Oe(((p=A?.values)===null||p===void 0?void 0:p.length)||0,((y=D?.values)===null||y===void 0?void 0:y.length)||0);return b!==0?b:Rb(A,D)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Rf.mapValue&&c===Rf.mapValue)return 0;if(l===Rf.mapValue)return 1;if(c===Rf.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=c.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const E=vy(d[_],y[_]);if(E!==0)return E;const A=wl(f[d[_]],p[y[_]]);if(A!==0)return A}return Oe(d.length,y.length)})(t.mapValue,e.mapValue);default:throw be(23264,{le:n})}}function Ab(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=Js(t),r=Js(e),a=Oe(n.seconds,r.seconds);return a!==0?a:Oe(n.nanos,r.nanos)}function Rb(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=wl(n[a],r[a]);if(l)return l}return Oe(n.length,r.length)}function bl(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Js(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ea(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=_y(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${_y(n.fields[c])}`;return a+"}"})(t.mapValue):be(61005,{value:t})}function Kf(t){switch(ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(t);return e?16+Kf(e):16;case 5:return 2*t.stringValue.length;case 6:return ea(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Kf(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return la(r.fields,((l,c)=>{a+=l.length+Kf(c)})),a})(t.mapValue);default:throw be(13486,{value:t})}}function fd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function Cb(t){return!!t&&"nullValue"in t}function xb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $f(t){return!!t&&"mapValue"in t}function lP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ER])===null||n===void 0?void 0:n.stringValue)===wR}function tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=tc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oP}class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$f(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=tn.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,r,a),r={},a=[],n=f.popLast()}c?r[f.lastSegment()]=tc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(e){const n=this.field(e.popLast());$f(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];$f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){la(n,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Mn(tc(this.value))}}function bR(t){const e=[];return la(t.fields,((n,r)=>{const a=new tn([n]);if($f(r)){const l=bR(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Kn(e)}class cn{constructor(e,n,r,a,l,c,f){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new cn(e,0,Ae.min(),Ae.min(),Ae.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,a){return new cn(e,1,n,Ae.min(),r,a,0)}static newNoDocument(e,n){return new cn(e,2,n,Ae.min(),Ae.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ae.min(),Ae.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sl{constructor(e,n){this.position=e,this.inclusive=n}}function Ib(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(c.referenceValue),n.key):r=wl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Db(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class SR{}class Ut extends SR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fP(e,n,r):n==="array-contains"?new pP(e,r):n==="in"?new gP(e,r):n==="not-in"?new yP(e,r):n==="array-contains-any"?new vP(e,r):new Ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dP(e,r):new mP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wl(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends SR{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ii(e,n)}matches(e){return AR(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AR(t){return t.op==="and"}function RR(t){return hP(t)&&AR(t)}function hP(t){for(const e of t.filters)if(e instanceof Ii)return!1;return!0}function Ey(t){if(t instanceof Ut)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(RR(t))return t.filters.map((e=>Ey(e))).join(",");{const e=t.filters.map((n=>Ey(n))).join(",");return`${t.op}(${e})`}}function CR(t,e){return t instanceof Ut?(function(r,a){return a instanceof Ut&&r.op===a.op&&r.field.isEqual(a.field)&&tr(r.value,a.value)})(t,e):t instanceof Ii?(function(r,a){return a instanceof Ii&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&CR(c,a.filters[f])),!0):!1})(t,e):void be(19439)}function xR(t){return t instanceof Ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`})(t):t instanceof Ii?(function(n){return n.op.toString()+" {"+n.getFilters().map(xR).join(" ,")+"}"})(t):"Filter"}class fP extends Ut{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class dP extends Ut{constructor(e,n){super(e,"in",n),this.keys=IR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mP extends Ut{constructor(e,n){super(e,"not-in",n),this.keys=IR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function IR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ve.fromName(r.referenceValue)))}class pP extends Ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&pc(n.arrayValue,this.value)}}class gP extends Ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pc(this.value.arrayValue,n)}}class yP extends Ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pc(this.value.arrayValue,n)}}class vP extends Ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>pc(this.value.arrayValue,r)))}}class _P{constructor(e,n=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function Nb(t,e=null,n=[],r=[],a=null,l=null,c=null){return new _P(t,e,n,r,a,l,c)}function Dv(t){const e=xe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Ey(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>bl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>bl(r))).join(",")),e.Pe=n}return e.Pe}function Nv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Db(t.startAt,e.startAt)&&Db(t.endAt,e.endAt)}function wy(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ho{constructor(e,n=null,r=[],a=[],l=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function TP(t,e,n,r,a,l,c,f){return new ho(t,e,n,r,a,l,c,f)}function qd(t){return new ho(t)}function Mb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mv(t){return t.collectionGroup!==null}function vl(t){const e=xe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new zt(tn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Te.push(new gc(l,r))})),n.has(tn.keyField().canonicalString())||e.Te.push(new gc(tn.keyField(),r))}return e.Te}function Yi(t){const e=xe(t);return e.Ie||(e.Ie=EP(e,vl(t))),e.Ie}function EP(t,e){if(t.limitType==="F")return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new gc(a.field,l)}));const n=t.endAt?new Sl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sl(t.startAt.position,t.startAt.inclusive):null;return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function by(t,e){const n=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gd(t,e){return Nv(Yi(t),Yi(e))&&t.limitType===e.limitType}function DR(t){return`${Dv(Yi(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>xR(a))).join(", ")}]`),zd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>bl(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>bl(a))).join(",")),`Target(${r})`})(Yi(t))}; limitType=${t.limitType})`}function Kd(t,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,a){for(const l of vl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p<=0:p<0})(r.startAt,vl(r),a)||r.endAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p>=0:p>0})(r.endAt,vl(r),a))})(t,e)}function wP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NR(t){return(e,n)=>{let r=!1;for(const a of vl(t)){const l=bP(a,e,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function bP(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):(function(l,c,f){const d=c.data.field(l),p=f.data.field(l);return d!==null&&p!==null?wl(d,p):be(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:t.dir})}}class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((n,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}const SP=new gt(ve.comparator);function Gr(){return SP}const MR=new gt(ve.comparator);function Ku(...t){let e=MR;for(const n of t)e=e.insert(n.key,n);return e}function OR(t){let e=MR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ga(){return nc()}function kR(){return nc()}function nc(){return new fo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const AP=new gt(ve.comparator),RP=new zt(ve.comparator);function Be(...t){let e=RP;for(const n of t)e=e.add(n);return e}const CP=new zt(Oe);function xP(){return CP}function Ov(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function VR(t){return{integerValue:""+t}}function IP(t,e){return nP(e)?VR(e):Ov(t,e)}class $d{constructor(){this._=void 0}}function DP(t,e,n){return t instanceof yc?(function(a,l){const c={fields:{[vR]:{stringValue:yR},[TR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Fd(l)&&(l=Hd(l)),l&&(c.fields[_R]=l),{mapValue:c}})(n,e):t instanceof vc?LR(t,e):t instanceof _c?UR(t,e):(function(a,l){const c=PR(a,l),f=Ob(c)+Ob(a.Ee);return Ty(c)&&Ty(a.Ee)?VR(f):Ov(a.serializer,f)})(t,e)}function NP(t,e,n){return t instanceof vc?LR(t,e):t instanceof _c?UR(t,e):n}function PR(t,e){return t instanceof md?(function(r){return Ty(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class yc extends $d{}class vc extends $d{constructor(e){super(),this.elements=e}}function LR(t,e){const n=jR(e);for(const r of t.elements)n.some((a=>tr(a,r)))||n.push(r);return{arrayValue:{values:n}}}class _c extends $d{constructor(e){super(),this.elements=e}}function UR(t,e){let n=jR(e);for(const r of t.elements)n=n.filter((a=>!tr(a,r)));return{arrayValue:{values:n}}}class md extends $d{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ob(t){return Nt(t.integerValue||t.doubleValue)}function jR(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class MP{constructor(e,n){this.field=e,this.transform=n}}function OP(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof vc&&a instanceof vc||r instanceof _c&&a instanceof _c?El(r.elements,a.elements,tr):r instanceof md&&a instanceof md?tr(r.Ee,a.Ee):r instanceof yc&&a instanceof yc})(t.transform,e.transform)}class kP{constructor(e,n){this.version=e,this.transformResults=n}}class mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yd{}function BR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kv(t.key,mi.none()):new Pc(t.key,t.data,mi.none());{const n=t.data,r=Mn.empty();let a=new zt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ua(t.key,r,new Kn(a.toArray()),mi.none())}}function VP(t,e,n){t instanceof Pc?(function(a,l,c){const f=a.value.clone(),d=Vb(a.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):t instanceof ua?(function(a,l,c){if(!Yf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Vb(a.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(zR(a)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function ic(t,e,n,r){return t instanceof Pc?(function(l,c,f,d){if(!Yf(l.precondition,c))return f;const p=l.value.clone(),y=Pb(l.fieldTransforms,d,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof ua?(function(l,c,f,d){if(!Yf(l.precondition,c))return f;const p=Pb(l.fieldTransforms,d,c),y=c.data;return y.setAll(zR(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(l,c,f){return Yf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(t,e,n)}function PP(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),l=PR(r.transform,a||null);l!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,l))}return n||null}function kb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&El(r,a,((l,c)=>OP(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pc extends Yd{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ua extends Yd{constructor(e,n,r,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Vb(t,e,n){const r=new Map;We(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,NP(c,f,n[a]))}return r}function Pb(t,e,n){const r=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);r.set(a.field,DP(l,c,e))}return r}class kv extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UP{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&VP(l,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kR();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=n.has(a.key)?null:f;const d=BR(c,f);d!==null&&r.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,r)=>kb(n,r)))&&El(this.baseMutations,e.baseMutations,((n,r)=>kb(n,r)))}}class Vv{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){We(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return AP})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Vv(e,n,r,a)}}class jP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BP{constructor(e,n){this.count=e,this.unchangedNames=n}}var Lt,qe;function zP(t){switch(t){case re.OK:return be(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return be(15467,{code:t})}}function FR(t){if(t===void 0)return qr("GRPC error has no .code"),re.UNKNOWN;switch(t){case Lt.OK:return re.OK;case Lt.CANCELLED:return re.CANCELLED;case Lt.UNKNOWN:return re.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return re.INTERNAL;case Lt.UNAVAILABLE:return re.UNAVAILABLE;case Lt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Lt.NOT_FOUND:return re.NOT_FOUND;case Lt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Lt.ABORTED:return re.ABORTED;case Lt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Lt.DATA_LOSS:return re.DATA_LOSS;default:return be(39323,{code:t})}}(qe=Lt||(Lt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";const FP=new Qs([4294967295,4294967295],0);function Lb(t){const e=hR().encode(t),n=new iR;return n.update(e),new Uint8Array(n.digest())}function Ub(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Qs([n,r],0),new Qs([a,l],0)]}class Pv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Qs.fromNumber(this.fe)}pe(e,n,r){let a=e.add(n.multiply(Qs.fromNumber(r)));return a.compare(FP)===1&&(a=new Qs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Lb(e),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);if(!this.ye(c))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Pv(l,a,n);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.fe===0)return;const n=Lb(e),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qd{constructor(e,n,r,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qd(Ae.min(),a,new gt(Oe),Gr(),Be())}}class Lc{constructor(e,n,r,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lc(r,n,Be(),Be(),Be())}}class Qf{constructor(e,n,r,a){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=a}}class HR{constructor(e,n){this.targetId=e,this.De=n}}class qR{constructor(e,n,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class jb{constructor(){this.ve=0,this.Ce=Bb(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Be(),n=Be(),r=Be();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:be(38017,{changeType:l})}})),new Lc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Bb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class HP{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gr(),this.je=Cf(),this.Je=Cf(),this.He=new gt(Oe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,r=e.De.count,a=this.st(n);if(a){const l=a.target;if(wy(l))if(r===0){const c=new ve(l.path);this.Xe(n,c,cn.newNoDocument(c,Ae.min()))}else We(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const f=this._t(e),d=f?this.ut(f,e,c):1;if(d!==0){this.rt(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,f;try{c=ea(r).toUint8Array()}catch(d){if(d instanceof gR)return Ws("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Pv(c,a,l)}catch(d){return Ws(d instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.fe===0?null:f}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(n,l,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&wy(f.target)){const d=new ve(f.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,cn.newNoDocument(d,e))}l.Ne&&(n.set(c,l.Le()),l.ke())}}));let r=Be();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const p=this.st(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const a=new Qd(e,n,this.He,this.ze,r);return this.ze=Gr(),this.je=Cf(),this.Je=Cf(),this.He=new gt(Oe),a}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jb,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new zt(Oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new zt(Oe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jb),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Cf(){return new gt(ve.comparator)}function Bb(){return new gt(ve.comparator)}const qP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KP={and:"AND",or:"OR"};class $P{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sy(t,e){return t.useProto3Json||zd(e)?e:{value:e}}function pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YP(t,e){return pd(t,e.toTimestamp())}function Qi(t){return We(!!t,49232),Ae.fromTimestamp((function(n){const r=Js(n);return new ut(r.seconds,r.nanos)})(t))}function Lv(t,e){return Ay(t,e).canonicalString()}function Ay(t,e){const n=(function(a){return new rt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function KR(t){const e=rt.fromString(t);return We(WR(e),10190,{key:e.toString()}),e}function Ry(t,e){return Lv(t.databaseId,e.path)}function kg(t,e){const n=KR(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(YR(n))}function $R(t,e){return Lv(t.databaseId,e)}function QP(t){const e=KR(t);return e.length===4?rt.emptyPath():YR(e)}function Cy(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YR(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zb(t,e,n){return{name:Ry(t,e),fields:n.value.mapValue.fields}}function XP(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(We(y===void 0||typeof y=="string",58123),nn.fromBase64String(y||"")):(We(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),nn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?re.UNKNOWN:FR(p.code);return new fe(y,p.message||"")})(c);n=new qR(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=kg(t,r.document.name),l=Qi(r.document.updateTime),c=r.document.createTime?Qi(r.document.createTime):Ae.min(),f=new Mn({mapValue:{fields:r.document.fields}}),d=cn.newFoundDocument(a,l,c,f),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Qf(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=kg(t,r.document),l=r.readTime?Qi(r.readTime):Ae.min(),c=cn.newNoDocument(a,l),f=r.removedTargetIds||[];n=new Qf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=kg(t,r.document),l=r.removedTargetIds||[];n=new Qf([],l,a,null)}else{if(!("filter"in e))return be(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BP(a,l),f=r.targetId;n=new HR(f,c)}}return n}function WP(t,e){let n;if(e instanceof Pc)n={update:zb(t,e.key,e.value)};else if(e instanceof kv)n={delete:Ry(t,e.key)};else if(e instanceof ua)n={update:zb(t,e.key,e.data),updateMask:a4(e.fieldMask)};else{if(!(e instanceof LP))return be(16599,{Rt:e.type});n={verify:Ry(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof yc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof _c)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof md)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:YP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(t,e.precondition)),n}function ZP(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?Qi(a.updateTime):Qi(l);return c.isEqual(Ae.min())&&(c=Qi(l)),new kP(c,a.transformResults||[])})(n,e)))):[]}function JP(t,e){return{documents:[$R(t,e.path)]}}function e4(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$R(t,a);const l=(function(p){if(p.length!==0)return XR(Ii.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:ol(E.field),direction:i4(E.dir)}})(y)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const f=Sy(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{Vt:n,parent:a}}function t4(t){let e=QP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){We(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(_){const E=QR(_);return E instanceof Ii&&RR(E)?E.getFilters():[E]})(n.where));let c=[];n.orderBy&&(c=(function(_){return _.map((E=>(function(D){return new gc(ll(D.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let E;return E=typeof _=="object"?_.value:_,zd(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(_){const E=!!_.before,A=_.values||[];return new Sl(A,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const E=!_.before,A=_.values||[];return new Sl(A,E)})(n.endAt)),TP(e,a,c,l,f,"F",d,p)}function n4(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ll(n.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(n.unaryFilter.field);return Ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(n.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ll(n.unaryFilter.field);return Ut.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ut.create(ll(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ii.create(n.compositeFilter.filters.map((r=>QR(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(t):be(30097,{filter:t})}function i4(t){return qP[t]}function r4(t){return GP[t]}function s4(t){return KP[t]}function ol(t){return{fieldPath:t.canonicalString()}}function ll(t){return tn.fromServerFormat(t.fieldPath)}function XR(t){return t instanceof Ut?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(Cb(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(Cb(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:r4(n.op),value:n.value}}})(t):t instanceof Ii?(function(n){const r=n.getFilters().map((a=>XR(a)));return r.length===1?r[0]:{compositeFilter:{op:s4(n.op),filters:r}}})(t):be(54877,{filter:t})}function a4(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function WR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class $s{constructor(e,n,r,a,l=Ae.min(),c=Ae.min(),f=nn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class o4{constructor(e){this.gt=e}}function l4(t){const e=t4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}class u4{constructor(){this.Dn=new c4}addToCollectionParentIndex(e,n){return this.Dn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Zs.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class c4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new zt(rt.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new zt(rt.comparator)).toArray()}}const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZR=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(ZR,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class Al{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Al(0)}static ur(){return new Al(-1)}}const Hb="LruGarbageCollector",h4=1048576;function qb([t,e],[n,r]){const a=Oe(t,n);return a===0?Oe(e,r):a}class f4{constructor(e){this.Tr=e,this.buffer=new zt(qb),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){me(Hb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vl(n)?me(Hb,"Ignoring IndexedDB error during garbage collection: ",n):await kl(n)}await this.Rr(3e5)}))}}class m4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Bd.ue);const r=new f4(n);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Fb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,a,l,c,f,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,n)))).next((_=>(l=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),sl()<=je.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function p4(t,e){return new m4(t,e)}class g4{constructor(){this.changes=new fo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class y4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class v4{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&ic(r.mutation,a,Kn.empty(),ut.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Be()){const a=Ga();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((l=>{let c=Ku();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=Ga();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Be())))}populateOverlays(e,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{n.set(c,f)}))}))}computeViews(e,n,r,a){let l=Gr();const c=nc(),f=(function(){return nc()})();return n.forEach(((d,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ua)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),ic(y.mutation,p,y.mutation.getFieldMask(),ut.now())):c.set(p.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,y)=>c.set(p,y))),n.forEach(((p,y)=>{var _;return f.set(p,new y4(y,(_=c.get(p))!==null&&_!==void 0?_:null))})),f)))}recalculateAndSaveOverlays(e,n){const r=nc();let a=new gt(((c,f)=>c-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const f of c)f.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||Kn.empty();y=f.applyToLocalView(p,y),r.set(d,y);const _=(a.get(f.batchId)||Be()).add(d);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,y=d.value,_=kR();y.forEach((E=>{if(!l.has(E)){const A=BR(n.get(E),r.get(E));A!==null&&_.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return le.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-l.size):le.resolve(Ga());let f=fc,d=l;return c.next((p=>le.forEach(p,((y,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(y)?le.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{d=d.insert(y,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,Be()))).next((y=>({batchId:f,changes:OR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((r=>{let a=Ku();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const l=n.collectionGroup;let c=Ku();return this.indexManager.getCollectionParents(e,l).next((f=>le.forEach(f,(d=>{const p=(function(_,E){return new ho(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,a)))).next((c=>{l.forEach(((d,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,cn.newInvalidDocument(y)))}));let f=Ku();return c.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&ic(y.mutation,p,Kn.empty(),ut.now()),Kd(n,p)&&(f=f.insert(d,p))})),f}))}}class _4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return le.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Qi(a.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:l4(a.bundledQuery),readTime:Qi(a.readTime)}})(n)),le.resolve()}}class T4{constructor(){this.overlays=new gt(ve.comparator),this.kr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ga();return le.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,l)=>{this.wt(e,n,l)})),le.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const a=Ga(),l=n.length+1,c=new ve(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>r&&a.set(d.getKey(),d)}return le.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let l=new gt(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Ga(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=Ga(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return le.resolve(f)}wt(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jP(n,r));let l=this.kr.get(n);l===void 0&&(l=Be(),this.kr.set(n,l)),this.kr.set(n,l.add(r.key))}}class E4{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}class Uv{constructor(){this.qr=new zt(Kt.Qr),this.$r=new zt(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Kt(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new ve(new rt([])),r=new Kt(n,e),a=new Kt(n,e+1),l=[];return this.$r.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ve(new rt([])),r=new Kt(n,e),a=new Kt(n,e+1);let l=Be();return this.$r.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new Kt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ve.comparator(e.key,n.key)||Oe(e.Hr,n.Hr)}static Ur(e,n){return Oe(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}class w4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new zt(Kt.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UP(l,n,r,a);this.mutationQueue.push(c);for(const f of a)this.Yr=this.Yr.add(new Kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.Xr(r),l=a<0?0:a;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?xv:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),a=new Kt(n,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(Oe);return n.forEach((a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),le.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new ve(l),0);let f=new zt(Oe);return this.Yr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Hr)),!0)}),c),le.resolve(this.ei(f))}ei(e){const n=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){We(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return le.forEach(n.mutations,(a=>{const l=new Kt(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new Kt(n,0),a=this.Yr.firstAfterOrEqual(r);return le.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class b4{constructor(e){this.ni=e,this.docs=(function(){return new gt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))})),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let l=Gr();const c=n.path,f=new ve(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||ZV(WV(y),r)<=0||(a.has(y.key)||Kd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,n,r,a){be(9500)}ri(e,n){return le.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new S4(this)}getSize(e){return le.resolve(this.size)}}class S4 extends g4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),le.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class A4{constructor(e){this.persistence=e,this.ii=new fo((n=>Dv(n)),Nv),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Uv,this.targetCount=0,this._i=Al.ar()}forEachTarget(e,n){return this.ii.forEach(((r,a)=>n(a))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),le.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Al(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.hr(n),le.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let a=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),le.waitFor(l).next((()=>a))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),le.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this.oi.containsKey(n))}}class JR{constructor(e,n){this.ai={},this.overlays={},this.ui=new Bd(0),this.ci=!1,this.ci=!0,this.li=new E4,this.referenceDelegate=e(this),this.hi=new A4(this),this.indexManager=new u4,this.remoteDocumentCache=(function(a){return new b4(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new o4(n),this.Ti=new _4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new T4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new w4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const a=new R4(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,n){return le.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class R4 extends eP{constructor(e){super(),this.currentSequenceNumber=e}}class jv{constructor(e){this.persistence=e,this.Ai=new Uv,this.Ri=null}static Vi(e){return new jv(e)}get mi(){if(this.Ri)return this.Ri;throw be(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,(r=>{const a=ve.fromPath(r);return this.fi(e,a).next((l=>{l||n.removeEntry(a,Ae.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return le.or([()=>le.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gd{constructor(e,n){this.persistence=e,this.gi=new fo((r=>iP(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=p4(this,n)}static Vi(e,n){return new gd(e,n)}Ii(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return le.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((l=>l?le.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(c=>this.Sr(e,c,n).next((f=>{f||(r++,l.removeEntry(c,Ae.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kf(e.data.value)),n}Sr(e,n,r){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return le.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bv{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=a}static Es(e,n){let r=Be(),a=Be();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Bv(e,n.fromCache,r,a)}}class C4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class x4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return SM()?8:tP(dn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,a){const l={result:null};return this.ps(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,n,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new C4;return this.ws(e,n,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,n,c,f.size)}))})).next((()=>l.result))}Ss(e,n,r,a){return r.documentReadCount<this.Vs?(sl()<=je.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(sl()<=je.DEBUG&&me("QueryEngine","Query:",al(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(sl()<=je.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(n))):le.resolve())}ps(e,n){if(Mb(n))return le.resolve(null);let r=Yi(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=dd(n,null,"F"),r=Yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Be(...l);return this.gs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.bs(n,f);return this.Ds(n,p,c,d.readTime)?this.ps(e,dd(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ys(e,n,r,a){return Mb(n)||a.isEqual(Ae.min())?le.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(n,l);return this.Ds(n,c,r,a)?le.resolve(null):(sl()<=je.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(n)),this.vs(e,c,n,XV(a,fc)).next((f=>f)))}))}bs(e,n){let r=new zt(NR(e));return n.forEach(((a,l)=>{Kd(e,l)&&(r=r.add(l))})),r}Ds(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,n,r){return sl()<=je.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",al(n)),this.gs.getDocumentsMatchingQuery(e,n,Zs.min(),r)}vs(e,n,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const zv="LocalStore",I4=3e8;class D4{constructor(e,n,r,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new gt(Oe),this.Ms=new fo((l=>Dv(l)),Nv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function N4(t,e,n,r){return new D4(t,e,n,r)}async function eC(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let d=Be();for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((p=>({Bs:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function M4(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=n.Os.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,y){const _=p.batch,E=_.keys();let A=le.resolve();return E.forEach((D=>{A=A.next((()=>y.getEntry(d,D))).next((b=>{const x=p.docVersions.get(D);We(x!==null,48541),b.version.compareTo(x)<0&&(_.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),y.addEntry(b)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(d,_)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Be();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function tC(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function O4(t,e){const n=xe(t),r=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const f=[];e.targetChanges.forEach(((y,_)=>{const E=a.get(_);if(!E)return;f.push(n.hi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>n.hi.addMatchingKeys(l,y.addedDocuments,_))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(nn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(_,A),(function(b,x,k){return b.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=I4?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(E,A,y)&&f.push(n.hi.updateTargetData(l,A))}));let d=Gr(),p=Be();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(k4(l,c,e.documentUpdates).next((y=>{d=y.Ls,p=y.ks}))),!r.isEqual(Ae.min())){const y=n.hi.getLastRemoteSnapshotVersion(l).next((_=>n.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(y)}return le.waitFor(f).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Fs=a,l)))}function k4(t,e,n){let r=Be(),a=Be();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let c=Gr();return n.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(Ae.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):me(zv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{Ls:c,ks:a}}))}function V4(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function P4(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.hi.getTargetData(r,e).next((l=>l?(a=l,le.resolve(a)):n.hi.allocateTargetId(r).next((c=>(a=new $s(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function xy(t,e,n){const r=xe(t),a=r.Fs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Vl(c))throw c;me(zv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function Gb(t,e,n){const r=xe(t);let a=Ae.min(),l=Be();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,y){const _=xe(d),E=_.Ms.get(y);return E!==void 0?le.resolve(_.Fs.get(E)):_.hi.getTargetData(p,y)})(r,c,Yi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?a:Ae.min(),n?l:Be()))).next((f=>(L4(r,wP(e),f),{documents:f,qs:l})))))}function L4(t,e,n){let r=t.xs.get(e)||Ae.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.xs.set(e,r)}class Kb{constructor(){this.activeTargetIds=xP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U4{constructor(){this.Fo=new Kb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Kb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class j4{xo(e){}shutdown(){}}const $b="ConnectivityMonitor";class Yb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){me($b,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){me($b,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let xf=null;function Iy(){return xf===null?xf=(function(){return 268435456+Math.round(2147483648*Math.random())})():xf++,"0x"+xf.toString(16)}const Vg="RestConnection",B4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===cd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,n,r,a,l){const c=Iy(),f=this.Go(e,n.toUriEncodedString());me(Vg,`Sending RPC '${e}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,a,l);const{host:p}=new URL(f),y=oa(p);return this.jo(e,f,d,r,y).then((_=>(me(Vg,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Ws(Vg,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",r),_}))}Jo(e,n,r,a,l,c){return this.Wo(e,n,r,a,l)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Go(e,n){const r=B4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}class F4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const on="WebChannelConnection";class H4 extends z4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,a,l){const c=Iy();return new Promise(((f,d)=>{const p=new rR;p.setWithCredentials(!0),p.listenOnce(sR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gf.NO_ERROR:const _=p.getResponseJson();me(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Gf.TIMEOUT:me(on,`RPC '${e}' ${c} timed out`),d(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const E=p.getStatus();if(me(on,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const b=(function(k){const L=k.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(L)>=0?L:re.UNKNOWN})(D.status);d(new fe(b,D.message))}else d(new fe(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(re.UNAVAILABLE,"Connection failed."));break;default:be(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{me(on,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);me(on,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,r,15)}))}P_(e,n,r){const a=Iy(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lR(),f=oR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=l.join("");me(on,`Creating RPC '${e}' stream ${a}: ${y}`,d);const _=c.createWebChannel(y,d);this.T_(_);let E=!1,A=!1;const D=new F4({Ho:x=>{A?me(on,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(E||(me(on,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),me(on,`RPC '${e}' stream ${a} sending:`,x),_.send(x))},Yo:()=>_.close()}),b=(x,k,L)=>{x.listen(k,(U=>{try{L(U)}catch(X){setTimeout((()=>{throw X}),0)}}))};return b(_,Gu.EventType.OPEN,(()=>{A||(me(on,`RPC '${e}' stream ${a} transport opened.`),D.s_())})),b(_,Gu.EventType.CLOSE,(()=>{A||(A=!0,me(on,`RPC '${e}' stream ${a} transport closed`),D.__(),this.I_(_))})),b(_,Gu.EventType.ERROR,(x=>{A||(A=!0,Ws(on,`RPC '${e}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),D.__(new fe(re.UNAVAILABLE,"The operation could not be completed")))})),b(_,Gu.EventType.MESSAGE,(x=>{var k;if(!A){const L=x.data[0];We(!!L,16349);const U=L,X=U?.error||((k=U[0])===null||k===void 0?void 0:k.error);if(X){me(on,`RPC '${e}' stream ${a} received error:`,X);const G=X.status;let Y=(function(M){const P=Lt[M];if(P!==void 0)return FR(P)})(G),R=X.message;Y===void 0&&(Y=re.INTERNAL,R="Unknown error status: "+G+" with message "+X.message),A=!0,D.__(new fe(Y,R)),_.close()}else me(on,`RPC '${e}' stream ${a} received:`,L),D.a_(L)}})),b(f,aR.STAT_EVENT,(x=>{x.stat===yy.PROXY?me(on,`RPC '${e}' stream ${a} detected buffering proxy`):x.stat===yy.NOPROXY&&me(on,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Pg(){return typeof document<"u"?document:null}function Xd(t){return new $P(t,!0)}class nC{constructor(e,n,r=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-r);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Qb="PersistentStream";class iC{constructor(e,n,r,a,l,c,f,d){this.Fi=e,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===n&&this.W_(r,a)}),(r=>{e((()=>{const a=new fe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return me(Qb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(me(Qb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class q4 extends iC{constructor(e,n,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=XP(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Qi(c.readTime):Ae.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Cy(this.serializer),n.addTarget=(function(l,c){let f;const d=c.target;if(f=wy(d)?{documents:JP(l,d)}:{query:e4(l,d).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=GR(l,c.resumeToken);const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ae.min())>0){f.readTime=pd(l,c.snapshotVersion.toTimestamp());const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=n4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.k_(n)}}class G4 extends iC{constructor(e,n,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=ZP(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Cy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>WP(this.serializer,r)))};this.k_(n)}}class K4{}class $4 extends K4{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Ay(n,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(re.UNKNOWN,l.toString())}))}Jo(e,n,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(e,Ay(n,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Y4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(n),this._a=!1):me("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const io="RemoteStore";class Q4{constructor(e,n,r,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{mo(this)&&(me(io,"Restarting streams for network reachability change."),await(async function(d){const p=xe(d);p.Ia.add(4),await Uc(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Wd(p)})(this))}))})),this.Aa=new Y4(r,a)}}async function Wd(t){if(mo(t))for(const e of t.da)await e(!0)}async function Uc(t){for(const e of t.da)await e(!1)}function rC(t,e){const n=xe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Gv(n)?qv(n):Pl(n).x_()&&Hv(n,e))}function Fv(t,e){const n=xe(t),r=Pl(n);n.Ta.delete(e),r.x_()&&sC(n,e),n.Ta.size===0&&(r.x_()?r.B_():mo(n)&&n.Aa.set("Unknown"))}function Hv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).H_(e)}function sC(t,e){t.Ra.$e(e),Pl(t).Y_(e)}function qv(t){t.Ra=new HP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.Aa.aa()}function Gv(t){return mo(t)&&!Pl(t).M_()&&t.Ta.size>0}function mo(t){return xe(t).Ia.size===0}function aC(t){t.Ra=void 0}async function X4(t){t.Aa.set("Online")}async function W4(t){t.Ta.forEach(((e,n)=>{Hv(t,e)}))}async function Z4(t,e){aC(t),Gv(t)?(t.Aa.la(e),qv(t)):t.Aa.set("Unknown")}async function J4(t,e,n){if(t.Aa.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ta.delete(f),a.Ra.removeTarget(f))})(t,e)}catch(r){me(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yd(t,r)}else if(e instanceof Qf?t.Ra.Ye(e):e instanceof HR?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ae.min()))try{const r=await tC(t.localStore);n.compareTo(r)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ta.get(p);y&&l.Ta.set(p,y.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,p)=>{const y=l.Ta.get(d);if(!y)return;l.Ta.set(d,y.withResumeToken(nn.EMPTY_BYTE_STRING,y.snapshotVersion)),sC(l,d);const _=new $s(y.target,d,p,y.sequenceNumber);Hv(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(r){me(io,"Failed to raise snapshot:",r),await yd(t,r)}}async function yd(t,e,n){if(!Vl(e))throw e;t.Ia.add(1),await Uc(t),t.Aa.set("Offline"),n||(n=()=>tC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(io,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Wd(t)}))}function oC(t,e){return e().catch((n=>yd(t,n,e)))}async function Zd(t){const e=xe(t),n=na(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:xv;for(;eL(e);)try{const a=await V4(e.localStore,r);if(a===null){e.Pa.length===0&&n.B_();break}r=a.batchId,tL(e,a)}catch(a){await yd(e,a)}lC(e)&&uC(e)}function eL(t){return mo(t)&&t.Pa.length<10}function tL(t,e){t.Pa.push(e);const n=na(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function lC(t){return mo(t)&&!na(t).M_()&&t.Pa.length>0}function uC(t){na(t).start()}async function nL(t){na(t).na()}async function iL(t){const e=na(t);for(const n of t.Pa)e.X_(n.mutations)}async function rL(t,e,n){const r=t.Pa.shift(),a=Vv.from(r,e,n);await oC(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Zd(t)}async function sL(t,e){e&&na(t).Z_&&await(async function(r,a){if((function(c){return zP(c)&&c!==re.ABORTED})(a.code)){const l=r.Pa.shift();na(r).N_(),await oC(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Zd(r)}})(t,e),lC(t)&&uC(t)}async function Xb(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),me(io,"RemoteStore received new credentials");const r=mo(n);n.Ia.add(3),await Uc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Wd(n)}async function aL(t,e){const n=xe(t);e?(n.Ia.delete(2),await Wd(n)):e||(n.Ia.add(2),await Uc(n),n.Aa.set("Unknown"))}function Pl(t){return t.Va||(t.Va=(function(n,r,a){const l=xe(n);return l.ia(),new q4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:X4.bind(null,t),e_:W4.bind(null,t),n_:Z4.bind(null,t),J_:J4.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Gv(t)?qv(t):t.Aa.set("Unknown")):(await t.Va.stop(),aC(t))}))),t.Va}function na(t){return t.ma||(t.ma=(function(n,r,a){const l=xe(n);return l.ia(),new G4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:nL.bind(null,t),n_:sL.bind(null,t),ea:iL.bind(null,t),ta:rL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Zd(t)):(await t.ma.stop(),t.Pa.length>0&&(me(io,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}class Kv{constructor(e,n,r,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,l){const c=Date.now()+r,f=new Kv(e,n,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Vl(t))return new fe(re.UNAVAILABLE,`${e}: ${t}`);throw t}class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Ku(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Wb{constructor(){this.fa=new gt(ve.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):be(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Rl{constructor(e,n,r,a,l,c,f,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,a,l){const c=[];return n.forEach((f=>{c.push({type:0,doc:f})})),new Rl(e,n,_l.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class oL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class lL{constructor(){this.queries=Zb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const a=xe(n),l=a.queries;a.queries=Zb(),l.forEach(((c,f)=>{for(const d of f.wa)d.onError(r)}))})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function Zb(){return new fo((t=>DR(t)),Gd)}async function Yv(t,e){const n=xe(t);let r=3;const a=e.query;let l=n.queries.get(a);l?!l.Sa()&&e.ba()&&(r=2):(l=new oL,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await n.onListen(a,!0);break;case 1:l.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const f=$v(c,`Initialization of query '${al(e.query)}' failed`);return void e.onError(f)}n.queries.set(a,l),l.wa.push(e),e.va(n.onlineState),l.ya&&e.Ca(l.ya)&&Xv(n)}async function Qv(t,e){const n=xe(t),r=e.query;let a=3;const l=n.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uL(t,e){const n=xe(t);let r=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const f of c.wa)f.Ca(a)&&(r=!0);c.ya=a}}r&&Xv(n)}function cL(t,e,n){const r=xe(t),a=r.queries.get(e);if(a)for(const l of a.wa)l.onError(n);r.queries.delete(e)}function Xv(t){t.Da.forEach((e=>{e.next()}))}var Dy,Jb;(Jb=Dy||(Dy={})).Fa="default",Jb.Cache="cache";class Wv{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Dy.Cache}}class cC{constructor(e){this.key=e}}class hC{constructor(e){this.key=e}}class hL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Be(),this.mutatedKeys=Be(),this.Xa=NR(e),this.eu=new _l(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Wb,a=n?n.eu:this.eu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,_)=>{const E=a.get(y),A=Kd(this.query,_)?_:null,D=!!E&&this.mutatedKeys.has(E.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;E&&A?E.data.isEqual(A.data)?D!==b&&(r.track({type:3,doc:A}),x=!0):this.iu(E,A)||(r.track({type:2,doc:A}),x=!0,(d&&this.Xa(A,d)>0||p&&this.Xa(A,p)<0)&&(f=!0)):!E&&A?(r.track({type:0,doc:A}),x=!0):E&&!A&&(r.track({type:1,doc:E}),x=!0,(d||p)&&(f=!0)),x&&(A?(c=c.add(A),l=b?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:f,mutatedKeys:l}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((y,_)=>(function(A,D){const b=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{At:x})}};return b(A)-b(D)})(y.type,_.type)||this.Xa(y.doc,_.doc))),this.su(r),a=a!=null&&a;const f=n&&!a?this.ou():[],d=this.Za.size===0&&this.current&&!a?1:0,p=d!==this.Ya;return this.Ya=d,c.length!==0||p?{snapshot:new Rl(this.query,e.eu,l,c,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Wb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Be(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new hC(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new cC(r))})),n}uu(e){this.Ha=e.qs,this.Za=Be();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Rl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zv="SyncEngine";class fL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dL{constructor(e){this.key=e,this.lu=!1}}class mL{constructor(e,n,r,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new fo((f=>DR(f)),Gd),this.Tu=new Map,this.Iu=new Set,this.du=new gt(ve.comparator),this.Eu=new Map,this.Au=new Uv,this.Ru={},this.Vu=new Map,this.mu=Al.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pL(t,e,n=!0){const r=yC(t);let a;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await fC(r,e,n,!0),a}async function gL(t,e){const n=yC(t);await fC(n,e,!0,!1)}async function fC(t,e,n,r){const a=await P4(t.localStore,Yi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let f;return r&&(f=await yL(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&rC(t.remoteStore,a),f}async function yL(t,e,n,r,a){t.gu=(_,E,A)=>(async function(b,x,k,L){let U=x.view.nu(k);U.Ds&&(U=await Gb(b.localStore,x.query,!1).then((({documents:R})=>x.view.nu(R,U))));const X=L&&L.targetChanges.get(x.targetId),G=L&&L.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(U,b.isPrimaryClient,X,G);return tS(b,x.targetId,Y._u),Y.snapshot})(t,_,E,A);const l=await Gb(t.localStore,e,!0),c=new hL(e,l.qs),f=c.nu(l.documents),d=Lc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),p=c.applyChanges(f,t.isPrimaryClient,d);tS(t,n,p._u);const y=new fL(e,n,c);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),p.snapshot}async function vL(t,e,n){const r=xe(t),a=r.Pu.get(e),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((c=>!Gd(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await xy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Fv(r.remoteStore,a.targetId),Ny(r,a.targetId)})).catch(kl)):(Ny(r,a.targetId),await xy(r.localStore,a.targetId,!0))}async function _L(t,e){const n=xe(t),r=n.Pu.get(e),a=n.Tu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fv(n.remoteStore,r.targetId))}async function TL(t,e,n){const r=CL(t);try{const a=await(function(c,f){const d=xe(c),p=ut.now(),y=f.reduce(((A,D)=>A.add(D.key)),Be());let _,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=Gr(),b=Be();return d.Os.getEntries(A,y).next((x=>{D=x,D.forEach(((k,L)=>{L.isValidDocument()||(b=b.add(k))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,D))).next((x=>{_=x;const k=[];for(const L of f){const U=PP(L,_.get(L.key).overlayedDocument);U!=null&&k.push(new ua(L.key,U,bR(U.value.mapValue),mi.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,k,f)})).next((x=>{E=x;const k=x.applyToLocalDocumentSet(_,b);return d.documentOverlayCache.saveOverlays(A,x.batchId,k)}))})).then((()=>({batchId:E.batchId,changes:OR(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,d){let p=c.Ru[c.currentUser.toKey()];p||(p=new gt(Oe)),p=p.insert(f,d),c.Ru[c.currentUser.toKey()]=p})(r,a.batchId,n),await jc(r,a.changes),await Zd(r.remoteStore)}catch(a){const l=$v(a,"Failed to persist write");n.reject(l)}}async function dC(t,e){const n=xe(t);try{const r=await O4(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Eu.get(l);c&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?We(c.lu,14607):a.removedDocuments.size>0&&(We(c.lu,42227),c.lu=!1))})),await jc(n,r,e)}catch(r){await kl(r)}}function eS(t,e,n){const r=xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Pu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const d=xe(c);d.onlineState=f;let p=!1;d.queries.forEach(((y,_)=>{for(const E of _.wa)E.va(f)&&(p=!0)})),p&&Xv(d)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EL(t,e,n){const r=xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Eu.get(e),l=a&&a.key;if(l){let c=new gt(ve.comparator);c=c.insert(l,cn.newNoDocument(l,Ae.min()));const f=Be().add(l),d=new Qd(Ae.min(),new Map,new gt(Oe),c,f);await dC(r,d),r.du=r.du.remove(l),r.Eu.delete(e),Jv(r)}else await xy(r.localStore,e,!1).then((()=>Ny(r,e,n))).catch(kl)}async function wL(t,e){const n=xe(t),r=e.batch.batchId;try{const a=await M4(n.localStore,e);pC(n,r,null),mC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jc(n,a)}catch(a){await kl(a)}}async function bL(t,e,n){const r=xe(t);try{const a=await(function(c,f){const d=xe(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,f).next((_=>(We(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);pC(r,e,n),mC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jc(r,a)}catch(a){await kl(a)}}function mC(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function pC(t,e,n){const r=xe(t);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function Ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||gC(t,r)}))}function gC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Jv(t))}function tS(t,e,n){for(const r of n)r instanceof cC?(t.Au.addReference(r.key,e),SL(t,r)):r instanceof hC?(me(Zv,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||gC(t,r.key)):be(19791,{yu:r})}function SL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(me(Zv,"New document in limbo: "+n),t.Iu.add(r),Jv(t))}function Jv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ve(rt.fromString(e)),r=t.mu.next();t.Eu.set(r,new dL(n)),t.du=t.du.insert(n,r),rC(t.remoteStore,new $s(Yi(qd(n.path)),r,"TargetPurposeLimboResolution",Bd.ue))}}async function jc(t,e,n){const r=xe(t),a=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((f,d)=>{c.push(r.gu(d,e,n).then((p=>{var y;if((p||n)&&r.isPrimaryClient){const _=p?!p.fromCache:(y=n?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){a.push(p);const _=Bv.Es(d.targetId,p);l.push(_)}})))})),await Promise.all(c),r.hu.J_(a),await(async function(d,p){const y=xe(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>le.forEach(p,(E=>le.forEach(E.Is,(A=>y.persistence.referenceDelegate.addReference(_,E.targetId,A))).next((()=>le.forEach(E.ds,(A=>y.persistence.referenceDelegate.removeReference(_,E.targetId,A)))))))))}catch(_){if(!Vl(_))throw _;me(zv,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const A=y.Fs.get(E),D=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(D);y.Fs=y.Fs.insert(E,b)}}})(r.localStore,l))}async function AL(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){me(Zv,"User change. New user:",e.toKey());const r=await eC(n.localStore,e);n.currentUser=e,(function(l,c){l.Vu.forEach((f=>{f.forEach((d=>{d.reject(new fe(re.CANCELLED,c))}))})),l.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jc(n,r.Bs)}}function RL(t,e){const n=xe(t),r=n.Eu.get(e);if(r&&r.lu)return Be().add(r.key);{let a=Be();const l=n.Tu.get(e);if(!l)return a;for(const c of l){const f=n.Pu.get(c);a=a.unionWith(f.view.tu)}return a}}function yC(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EL.bind(null,e),e.hu.J_=uL.bind(null,e.eventManager),e.hu.pu=cL.bind(null,e.eventManager),e}function CL(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bL.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return N4(this.persistence,new x4,e.initialUser,this.serializer)}Du(e){return new JR(jv.Vi,this.serializer)}bu(e){return new U4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class xL extends vd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){We(this.persistence.referenceDelegate instanceof gd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new d4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new JR((r=>gd.Vi(r,n)),this.serializer)}}class My{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AL.bind(null,this.syncEngine),await aL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lL})()}createDatastore(e){const n=Xd(e.databaseInfo.databaseId),r=(function(l){return new H4(l)})(e.databaseInfo);return(function(l,c,f,d){return new $4(l,c,f,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,l,c,f){return new Q4(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>eS(this.syncEngine,n,0)),(function(){return Yb.C()?new Yb:new j4})())}createSyncEngine(e,n){return(function(a,l,c,f,d,p,y){const _=new mL(a,l,c,f,d,p);return y&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const l=xe(a);me(io,"RemoteStore shutting down."),l.Ia.add(5),await Uc(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}My.provider={build:()=>new My};class e0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ia="FirestoreClient";class IL{constructor(e,n,r,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{me(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(me(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$v(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress(),me(ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await eC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{Ws("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{me("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Ws("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),t._offlineComponents=e}async function nS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DL(t);me(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Xb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>Xb(e.remoteStore,a))),t._onlineComponents=e}async function DL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(ia,"Using user provided OfflineComponentProvider");try{await Lg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Ws("Error using user provided cache. Falling back to memory cache: "+n),await Lg(t,new vd)}}else me(ia,"Using default OfflineComponentProvider"),await Lg(t,new xL(void 0));return t._offlineComponents}async function vC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(ia,"Using user provided OnlineComponentProvider"),await nS(t,t._uninitializedComponentsProvider._online)):(me(ia,"Using default OnlineComponentProvider"),await nS(t,new My))),t._onlineComponents}function NL(t){return vC(t).then((e=>e.syncEngine))}async function _d(t){const e=await vC(t),n=e.eventManager;return n.onListen=pL.bind(null,e.syncEngine),n.onUnlisten=vL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_L.bind(null,e.syncEngine),n}function ML(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new e0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_)));const A=E.docs.has(f);!A&&E.fromCache?p.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(qd(f.path),y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await _d(t),t.asyncQueue,e,n,r))),r.promise}function OL(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new e0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_))),E.fromCache&&d.source==="server"?p.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(f,y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await _d(t),t.asyncQueue,e,n,r))),r.promise}function _C(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const iS=new Map;const TC="firestore.googleapis.com",rS=!0;class sS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TC,this.ssl=rS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h4)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_C((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new BV;switch(r.type){case"firstParty":return new qV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=iS.get(n);r&&(me("ComponentProvider","Removing Datastore"),iS.delete(n),r.terminate())})(this),Promise.resolve()}}function kL(t,e,n,r={}){var a;t=kn(t,Jd);const l=oa(e),c=t._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;l&&(hv(`https://${d}`),fv("Firestore",!0)),c.host!==TC&&c.host!==d&&Ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:d,ssl:l,emulatorOptions:r});if(!eo(p,f)&&(t._setSettings(p),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=un.MOCK_USER;else{y=_1(r.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(E)}t._authCredentials=new zV(new cR(y,_))}}class ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vc(n,bt._jsonSchema))return new bt(e,r||null,new ve(rt.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:jt("string",bt._jsonSchemaVersion),referencePath:jt("string")};class Xs extends ir{constructor(e,n,r){super(e,n,qd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ve(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Ai(t,e,...n){if(t=ht(t),fR("collection","path",e),t instanceof Jd){const r=rt.fromString(e,...n);return _b(r),new Xs(t,null,r)}{if(!(t instanceof bt||t instanceof Xs))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return _b(r),new Xs(t.firestore,null,r)}}function Nn(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Cv.newId()),fR("doc","path",e),t instanceof Jd){const r=rt.fromString(e,...n);return vb(r),new bt(t,null,new ve(r))}{if(!(t instanceof bt||t instanceof Xs))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return vb(r),new bt(t.firestore,t instanceof Xs?t.converter:null,new ve(r))}}const aS="AsyncQueue";class oS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nC(this,"async_queue_retry"),this.oc=()=>{const r=Pg();r&&me(aS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Pg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Pg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ur;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Vl(e))throw e;me(aS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",lS(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=Kv.createAndSchedule(this,e,n,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&be(47125,{hc:lS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function lS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function uS(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class Kr extends Jd{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new oS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oS(e),this._firestoreClient=void 0,await e}}}function VL(t,e){const n=typeof t=="object"?t:Vd(),r=typeof t=="string"?t:cd,a=uo(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=g1("firestore");l&&kL(a,...l)}return a}function em(t){if(t._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PL(t),t._firestoreClient}function PL(t){var e,n,r;const a=t._freezeSettings(),l=(function(f,d,p,y){return new aP(f,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,_C(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new IL(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(f){const d=f?._online.build();return{_offline:f?._offline.build(d),_online:d}})(t._componentsProvider))}class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(nn.fromBase64String(e))}catch(n){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,di._jsonSchema))return di.fromBase64String(e.bytes)}}di._jsonSchemaVersion="firestore/bytes/1.0",di._jsonSchema={type:jt("string",di._jsonSchemaVersion),bytes:jt("string")};class tm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nm{constructor(e){this._methodName=e}}class Xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:jt("string",Xi._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Wi(e.vectorValues);throw new fe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:jt("string",Wi._jsonSchemaVersion),vectorValues:jt("object")};const LL=/^__.*__$/;class UL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pc(e,this.data,n,this.fieldTransforms)}}class EC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ec:t})}}class t0{constructor(e,n,r,a,l,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Td(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wC(this.Ec)&&LL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class jL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xd(e)}Dc(e,n,r,a=!1){return new t0({Ec:e,methodName:n,bc:r,path:tn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bc(t){const e=t._freezeSettings(),n=Xd(t._databaseId);return new jL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bC(t,e,n,r,a,l={}){const c=t.Dc(l.merge||l.mergeFields?2:0,e,n,a);i0("Data must be an object, but it was:",c,r);const f=AC(r,c);let d,p;if(l.merge)d=new Kn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const E=Oy(e,_,n);if(!c.contains(E))throw new fe(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CC(y,E)||y.push(E)}d=new Kn(y),p=c.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=c.fieldTransforms;return new UL(new Mn(f),d,p)}class im extends nm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof im}}class n0 extends nm{_toFieldTransform(e){return new MP(e.path,new yc)}isEqual(e){return e instanceof n0}}function BL(t,e,n,r){const a=t.Dc(1,e,n);i0("Data must be an object, but it was:",a,r);const l=[],c=Mn.empty();la(r,((d,p)=>{const y=r0(e,d,n);p=ht(p);const _=a.gc(y);if(p instanceof im)l.push(y);else{const E=zc(p,_);E!=null&&(l.push(y),c.set(y,E))}}));const f=new Kn(l);return new EC(c,f,a.fieldTransforms)}function zL(t,e,n,r,a,l){const c=t.Dc(1,e,n),f=[Oy(e,r,n)],d=[a];if(l.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Oy(e,l[E])),d.push(l[E+1]);const p=[],y=Mn.empty();for(let E=f.length-1;E>=0;--E)if(!CC(p,f[E])){const A=f[E];let D=d[E];D=ht(D);const b=c.gc(A);if(D instanceof im)p.push(A);else{const x=zc(D,b);x!=null&&(p.push(A),y.set(A,x))}}const _=new Kn(p);return new EC(y,_,c.fieldTransforms)}function SC(t,e,n,r=!1){return zc(n,t.Dc(r?4:3,e))}function zc(t,e){if(RC(t=ht(t)))return i0("Unsupported field value:",e,t),AC(t,e);if(t instanceof nm)return(function(r,a){if(!wC(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let d=zc(f,a.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(t,e)}return(function(r,a){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ut.fromDate(r);return{timestampValue:pd(a.serializer,l)}}if(r instanceof ut){const l=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pd(a.serializer,l)}}if(r instanceof Xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:GR(a.serializer,r._byteString)};if(r instanceof bt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Wi)return(function(c,f){return{mapValue:{fields:{[ER]:{stringValue:wR},[hd]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.wc("VectorValues must only contain numeric values.");return Ov(f.serializer,p)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${jd(r)}`)})(t,e)}function AC(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,((r,a)=>{const l=zc(a,e.Vc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function RC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof Xi||t instanceof di||t instanceof bt||t instanceof nm||t instanceof Wi)}function i0(t,e,n){if(!RC(n)||!dR(n)){const r=jd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Oy(t,e,n){if((e=ht(e))instanceof tm)return e._internalPath;if(typeof e=="string")return r0(t,e);throw Td("Field path arguments must be of type string or ",t,!1,void 0,n)}const FL=new RegExp("[~\\*/\\[\\]]");function r0(t,e,n){if(e.search(FL)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tm(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Td(t,e,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${a}`),d+=")"),new fe(re.INVALID_ARGUMENT,f+t+d)}function CC(t,e){return t.some((n=>n.isEqual(e)))}class s0{constructor(e,n,r,a,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HL extends s0{data(){return super.data()}}function rm(t,e){return typeof e=="string"?r0(t,e):e instanceof tm?e._internalPath:e._delegate._internalPath}function xC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class sm extends a0{}function Ha(t,e,...n){let r=[];e instanceof a0&&r.push(e),r=r.concat(n),(function(l){const c=l.filter((d=>d instanceof Hc)).length,f=l.filter((d=>d instanceof Fc)).length;if(c>1||c>0&&f>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class Fc extends sm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fc(e,n,r)}_apply(e){const n=this._parse(e);return IC(e._query,n),new ir(e.firestore,e.converter,by(e._query,n))}_parse(e){const n=Bc(e.firestore);return(function(l,c,f,d,p,y,_){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){fS(_,y);const D=[];for(const b of _)D.push(hS(d,l,b));E={arrayValue:{values:D}}}else E=hS(d,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||fS(_,y),E=SC(f,c,_,y==="in"||y==="not-in");return Ut.create(p,y,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bs(t,e,n){const r=e,a=rm("where",t);return Fc._create(a,r,n)}class Hc extends a0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hc(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ii.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const d of f)IC(c,d),c=by(c,d)})(e._query,n),new ir(e.firestore,e.converter,by(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qL(...t){return t.forEach((e=>$L("or",e))),Hc._create("or",t)}class o0 extends sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new o0(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(l,c)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new ho(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Ed(t,e="asc"){const n=e,r=rm("orderBy",t);return o0._create(r,n)}class l0 extends sm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){return new ir(e.firestore,e.converter,dd(e._query,this._limit,this._limitType))}}function cS(t){return l0._create("limit",t,"F")}class u0 extends sm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=KL(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,(function(a,l){return new ho(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,n))}}function GL(...t){return u0._create("startAfter",t,!1)}function KL(t,e,n,r){if(n[0]=ht(n[0]),n[0]instanceof s0)return(function(l,c,f,d,p){if(!d)throw new fe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const _ of vl(l))if(_.field.isKeyField())y.push(fd(c,d.key));else{const E=d.data.field(_.field);if(Fd(E))throw new fe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=_.field.canonicalString();throw new fe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new Sl(y,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=Bc(t.firestore);return(function(c,f,d,p,y,_){const E=c.explicitOrderBy;if(y.length>E.length)throw new fe(re.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let D=0;D<y.length;D++){const b=y[D];if(E[D].field.isKeyField()){if(typeof b!="string")throw new fe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof b}`);if(!Mv(c)&&b.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${b}' contains a slash.`);const x=c.path.child(rt.fromString(b));if(!ve.isDocumentKey(x))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const k=new ve(x);A.push(fd(f,k))}else{const x=SC(d,p,b);A.push(x)}}return new Sl(A,_)})(t._query,t.firestore._databaseId,a,e,n,r)}}function hS(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&n.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!ve.isDocumentKey(r))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fd(t,new ve(r))}if(n instanceof bt)return fd(t,n._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(n)}.`)}function fS(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IC(t,e){const n=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $L(t,e){if(!(e instanceof Fc||e instanceof Hc))throw new fe(re.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class YL{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(e){var n,r,a;const l=(a=(r=(n=e.fields)===null||n===void 0?void 0:n[hd].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((c=>Nt(c.doubleValue)));return new Wi(l)}convertGeoPoint(e){return new Xi(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=Js(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);We(WR(r),9688,{name:e});const a=new mc(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return a.isEqual(n)||qr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function DC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends s0{constructor(e,n,r,a,l,c){super(e,n,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:jt("string",Qa._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Xf extends Qa{data(e={}){return super.data(e)}}class Xa{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Yu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Xf(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const d=new Xf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Yu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new Xf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Yu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:QL(f.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:t})}}function Tc(t){t=kn(t,bt);const e=kn(t.firestore,Kr);return ML(em(e),t._key).then((n=>NC(e,t,n)))}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:jt("string",Xa._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class c0 extends YL{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function Qu(t){t=kn(t,ir);const e=kn(t.firestore,Kr),n=em(e),r=new c0(e);return xC(t._query),OL(n,t._query).then((a=>new Xa(e,r,t,a)))}function ky(t,e,n){t=kn(t,bt);const r=kn(t.firestore,Kr),a=DC(t.converter,e,n);return am(r,[bC(Bc(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,mi.none())])}function Vy(t,e,n,...r){t=kn(t,bt);const a=kn(t.firestore,Kr),l=Bc(a);let c;return c=typeof(e=ht(e))=="string"||e instanceof tm?zL(l,"updateDoc",t._key,e,n,r):BL(l,"updateDoc",t._key,e),am(a,[c.toMutation(t._key,mi.exists(!0))])}function Ug(t){return am(kn(t.firestore,Kr),[new kv(t._key,mi.none())])}function wd(t,e){const n=kn(t.firestore,Kr),r=Nn(t),a=DC(t.converter,e);return am(n,[bC(Bc(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,mi.exists(!1))]).then((()=>r))}function h0(t,...e){var n,r,a;t=ht(t);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||uS(e[c])||(l=e[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(uS(e[c])){const _=e[c];e[c]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[c+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[c+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let d,p,y;if(t instanceof bt)p=kn(t.firestore,Kr),y=qd(t._key.path),d={next:_=>{e[c]&&e[c](NC(p,t,_))},error:e[c+1],complete:e[c+2]};else{const _=kn(t,ir);p=kn(_.firestore,Kr),y=_._query;const E=new c0(p);d={next:A=>{e[c]&&e[c](new Xa(p,E,_,A))},error:e[c+1],complete:e[c+2]},xC(t._query)}return(function(E,A,D,b){const x=new e0(b),k=new Wv(A,x,D);return E.asyncQueue.enqueueAndForget((async()=>Yv(await _d(E),k))),()=>{x.Ou(),E.asyncQueue.enqueueAndForget((async()=>Qv(await _d(E),k)))}})(em(p),y,f,d)}function am(t,e){return(function(r,a){const l=new Ur;return r.asyncQueue.enqueueAndForget((async()=>TL(await NL(r),a,l))),l.promise})(em(t),e)}function NC(t,e,n){const r=n.docs.get(e._key),a=new c0(t);return new Qa(t,a,e._key,r,new Yu(n.hasPendingWrites,n.fromCache),e.converter)}function Ec(){return new n0("serverTimestamp")}(function(e,n=!0){(function(a){Ol=a})(co),xi(new pi("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new Kr(new FV(r.getProvider("auth-internal")),new GV(c,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(p.options.projectId,y)})(c,a),c);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),On(db,mb,e),On(db,mb,"esm2017")})();const MC="firebasestorage.googleapis.com",OC="storageBucket",XL=120*1e3,WL=600*1e3;class At extends Ni{constructor(e,n,r=0){super(jg(e),`Firebase Storage: ${n} (${jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function jg(t){return"storage/"+t}function f0(){const t="An unknown error occurred, please check the error payload for server response.";return new At(St.UNKNOWN,t)}function ZL(t){return new At(St.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JL(t){return new At(St.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new At(St.UNAUTHENTICATED,t)}function t3(){return new At(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n3(t){return new At(St.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i3(){return new At(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r3(){return new At(St.CANCELED,"User canceled the upload/download.")}function s3(t){return new At(St.INVALID_URL,"Invalid URL '"+t+"'.")}function a3(t){return new At(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function o3(){return new At(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OC+"' property when initializing the app?")}function l3(){return new At(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u3(){return new At(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c3(t){return new At(St.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Py(t){return new At(St.INVALID_ARGUMENT,t)}function kC(){return new At(St.APP_DELETED,"The Firebase app was deleted.")}function h3(t){return new At(St.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rc(t,e){return new At(St.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fu(t){throw new At(St.INTERNAL_ERROR,"Internal error: "+t)}class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(r.path==="")return r;throw a3(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),d={bucket:1,path:3};function p(X){X.path_=decodeURIComponent(X.path)}const y="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${_}/${y}/b/${a}/o${E}`,"i"),D={bucket:1,path:3},b=n===MC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",k=new RegExp(`^https?://${b}/${a}/${x}`,"i"),U=[{regex:f,indices:d,postModify:l},{regex:A,indices:D,postModify:p},{regex:k,indices:{bucket:1,path:2},postModify:p}];for(let X=0;X<U.length;X++){const G=U[X],Y=G.regex.exec(e);if(Y){const R=Y[G.indices.bucket];let S=Y[G.indices.path];S||(S=""),r=new $n(R,S),G.postModify(r);break}}if(r==null)throw s3(e);return r}}class f3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function d3(t,e,n){let r=1,a=null,l=null,c=!1,f=0;function d(){return f===2}let p=!1;function y(...x){p||(p=!0,e.apply(null,x))}function _(x){a=setTimeout(()=>{a=null,t(A,d())},x)}function E(){l&&clearTimeout(l)}function A(x,...k){if(p){E();return}if(x){E(),y.call(null,x,...k);return}if(d()||c){E(),y.call(null,x,...k);return}r<64&&(r*=2);let U;f===1?(f=2,U=0):U=(r+Math.random())*1e3,_(U)}let D=!1;function b(x){D||(D=!0,E(),!p&&(a!==null?(x||(f=2),clearTimeout(a),_(0)):x||(f=1)))}return _(0),l=setTimeout(()=>{c=!0,b(!0)},n),b}function m3(t){t(!1)}function p3(t){return t!==void 0}function g3(t){return typeof t=="object"&&!Array.isArray(t)}function d0(t){return typeof t=="string"||t instanceof String}function dS(t){return m0()&&t instanceof Blob}function m0(){return typeof Blob<"u"}function mS(t,e,n,r){if(r<e)throw Py(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Py(`Invalid value for '${t}'. Expected ${n} or less.`)}function p0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var Wa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wa||(Wa={}));function y3(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}class v3{constructor(e,n,r,a,l,c,f,d,p,y,_,E=!0,A=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=_,this.retry=E,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,b)=>{this.resolve_=D,this.reject_=b,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new If(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const d=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Wa.NO_ERROR,d=l.getStatus();if(!f||y3(d,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Wa.ABORT;r(!1,new If(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new If(p,l))})},n=(r,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(f,f.getResponse());p3(d)?l(d):l()}catch(d){c(d)}else if(f!==null){const d=f0();d.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,d)):c(d)}else if(a.canceled){const d=this.appDelete_?kC():r3();c(d)}else{const d=i3();c(d)}};this.canceled_?n(!1,new If(!1,null,!0)):this.backoffId_=d3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class If{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function T3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function w3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b3(t,e,n,r,a,l,c=!0,f=!1){const d=VC(t.urlParams),p=t.url+d,y=Object.assign({},t.headers);return E3(y,e),_3(y,n),T3(y,l),w3(y,r),new v3(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,f)}function S3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A3(...t){const e=S3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(m0())return new Blob(t);throw new At(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function R3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function C3(t){if(typeof atob>"u")throw c3("base-64");return atob(t)}const Ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bg{constructor(e,n){this.data=e,this.contentType=n||null}}function x3(t,e){switch(t){case Ki.RAW:return new Bg(PC(e));case Ki.BASE64:case Ki.BASE64URL:return new Bg(LC(t,e));case Ki.DATA_URL:return new Bg(D3(e),N3(e))}throw f0()}function PC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=t.charCodeAt(++n);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function I3(t){let e;try{e=decodeURIComponent(t)}catch{throw rc(Ki.DATA_URL,"Malformed data URL.")}return PC(e)}function LC(t,e){switch(t){case Ki.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw rc(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ki.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw rc(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=C3(e)}catch(a){throw a.message.includes("polyfill")?a:rc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class UC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rc(Ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=M3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D3(t){const e=new UC(t);return e.base64?LC(Ki.BASE64,e.rest):I3(e.rest)}function N3(t){return new UC(t).contentType}function M3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Ks{constructor(e,n){let r=0,a="";dS(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(dS(this.data_)){const r=this.data_,a=R3(r,e,n);return a===null?null:new Ks(a)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(m0()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(A3.apply(null,n))}else{const n=e.map(c=>d0(c)?x3(Ki.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let l=0;return n.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new Ks(a,!0)}}uploadData(){return this.data_}}function jC(t){let e;try{e=JSON.parse(t)}catch{return null}return g3(e)?e:null}function O3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function k3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function BC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function V3(t,e){return e}class En{constructor(e,n,r,a){this.server=e,this.local=n||e,this.writable=!!r,this.xform=a||V3}}let Df=null;function P3(t){return!d0(t)||t.length<2?t:BC(t)}function zC(){if(Df)return Df;const t=[];t.push(new En("bucket")),t.push(new En("generation")),t.push(new En("metageneration")),t.push(new En("name","fullPath",!0));function e(l,c){return P3(c)}const n=new En("name");n.xform=e,t.push(n);function r(l,c){return c!==void 0?Number(c):c}const a=new En("size");return a.xform=r,t.push(a),t.push(new En("timeCreated")),t.push(new En("updated")),t.push(new En("md5Hash",null,!0)),t.push(new En("cacheControl",null,!0)),t.push(new En("contentDisposition",null,!0)),t.push(new En("contentEncoding",null,!0)),t.push(new En("contentLanguage",null,!0)),t.push(new En("contentType",null,!0)),t.push(new En("metadata","customMetadata",!0)),Df=t,Df}function L3(t,e){function n(){const r=t.bucket,a=t.fullPath,l=new $n(r,a);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function U3(t,e,n){const r={};r.type="file";const a=n.length;for(let l=0;l<a;l++){const c=n[l];r[c.local]=c.xform(r,e[c.server])}return L3(r,t),r}function FC(t,e,n){const r=jC(e);return r===null?null:U3(t,r,n)}function j3(t,e,n,r){const a=jC(e);if(a===null||!d0(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=t.bucket,_=t.fullPath,E="/b/"+c(y)+"/o/"+c(_),A=p0(E,n,r),D=VC({alt:"media",token:p});return A+D})[0]}function B3(t,e){const n={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class HC{constructor(e,n,r,a){this.url=e,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qC(t){if(!t)throw f0()}function z3(t,e){function n(r,a){const l=FC(t,a,e);return qC(l!==null),l}return n}function F3(t,e){function n(r,a){const l=FC(t,a,e);return qC(l!==null),j3(l,a,t.host,t._protocol)}return n}function GC(t){function e(n,r){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=t3():a=e3():n.getStatus()===402?a=JL(t.bucket):n.getStatus()===403?a=n3(t.path):a=r,a.status=n.getStatus(),a.serverResponse=r.serverResponse,a}return e}function H3(t){const e=GC(t);function n(r,a){let l=e(r,a);return r.getStatus()===404&&(l=ZL(t.path)),l.serverResponse=a.serverResponse,l}return n}function q3(t,e,n){const r=e.fullServerUrl(),a=p0(r,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,f=new HC(a,l,F3(t,n),c);return f.errorHandler=H3(e),f}function G3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function K3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=G3(null,e)),r}function $3(t,e,n,r,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let U="";for(let X=0;X<2;X++)U=U+Math.random().toString().slice(2);return U}const d=f();c["Content-Type"]="multipart/related; boundary="+d;const p=K3(e,r,a),y=B3(p,n),_="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+d+"--",A=Ks.getBlob(_,r,E);if(A===null)throw l3();const D={name:p.fullPath},b=p0(l,t.host,t._protocol),x="POST",k=t.maxUploadRetryTime,L=new HC(b,x,z3(t,n),k);return L.urlParams=D,L.headers=c,L.body=A.uploadData(),L.errorHandler=GC(e),L}class Y3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,a,l){if(this.sent_)throw Fu("cannot .send() more than once");if(oa(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q3 extends Y3{initXhr(){this.xhr_.responseType="text"}}function KC(){return new Q3}class ro{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ro(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BC(this._location.path)}get storage(){return this._service}get parent(){const e=O3(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new ro(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h3(e)}}function X3(t,e,n){t._throwIfRoot("uploadBytes");const r=$3(t.storage,t._location,zC(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,KC).then(a=>({metadata:a,ref:t}))}function W3(t){t._throwIfRoot("getDownloadURL");const e=q3(t.storage,t._location,zC());return t.storage.makeRequestWithTokens(e,KC).then(n=>{if(n===null)throw u3();return n})}function Z3(t,e){const n=k3(t._location.path,e),r=new $n(t._location.bucket,n);return new ro(t.storage,r)}function J3(t){return/^[A-Za-z]+:\/\//.test(t)}function e6(t,e){return new ro(t,e)}function $C(t,e){if(t instanceof g0){const n=t;if(n._bucket==null)throw o3();const r=new ro(n,n._bucket);return e!=null?$C(r,e):r}else return e!==void 0?Z3(t,e):t}function t6(t,e){if(e&&J3(e)){if(t instanceof g0)return e6(t,e);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(t,e)}function pS(t,e){const n=e?.[OC];return n==null?null:$n.makeFromBucketSpec(n,t)}function n6(t,e,n,r={}){t.host=`${e}:${n}`;const a=oa(e);a&&(hv(`https://${t.host}/b`),fv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(t._overrideAuthToken=typeof l=="string"?l:_1(l,t.app.options.projectId))}class g0{constructor(e,n,r,a,l,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=MC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XL,this._maxUploadRetryTime=WL,this._requests=new Set,a!=null?this._bucket=$n.makeFromBucketSpec(a,this._host):this._bucket=pS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=pS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ro(this,e)}_makeRequest(e,n,r,a,l=!0){if(this._deleted)return new f3(kC());{const c=b3(e,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const gS="@firebase/storage",yS="0.13.14";const YC="storage";function QC(t,e,n){return t=ht(t),X3(t,e,n)}function XC(t){return t=ht(t),W3(t)}function WC(t,e){return t=ht(t),t6(t,e)}function i6(t=Vd(),e){t=ht(t);const r=uo(t,YC).getImmediate({identifier:e}),a=g1("storage");return a&&r6(r,...a),r}function r6(t,e,n,r={}){n6(t,e,n,r)}function s6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new g0(n,r,a,e,co)}function a6(){xi(new pi(YC,s6,"PUBLIC").setMultipleInstances(!0)),On(gS,yS,""),On(gS,yS,"esm2017")}a6();var o6="firebase",l6="11.10.0";On(o6,l6,"app");const ZC="@firebase/installations",y0="0.6.18";const JC=1e4,ex=`w:${y0}`,tx="FIS_v2",u6="https://firebaseinstallations.googleapis.com/v1",c6=3600*1e3,h6="installations",f6="Installations";const d6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},so=new lo(h6,f6,d6);function nx(t){return t instanceof Ni&&t.code.includes("request-failed")}function ix({projectId:t}){return`${u6}/projects/${t}/installations`}function rx(t){return{token:t.token,requestStatus:2,expiresIn:p6(t.expiresIn),creationTime:Date.now()}}async function sx(t,e){const r=(await e.json()).error;return so.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ax({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function m6(t,{refreshToken:e}){const n=ax(t);return n.append("Authorization",g6(e)),n}async function ox(t){const e=await t();return e.status>=500&&e.status<600?t():e}function p6(t){return Number(t.replace("s","000"))}function g6(t){return`${tx} ${t}`}async function y6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ix(t),a=ax(t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:n,authVersion:tx,appId:t.appId,sdkVersion:ex},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await ox(()=>fetch(r,f));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:rx(p.authToken)}}else throw await sx("Create Installation",d)}function lx(t){return new Promise(e=>{setTimeout(e,t)})}function v6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const _6=/^[cdef][\w-]{21}$/,Ly="";function T6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=E6(t);return _6.test(n)?n:Ly}catch{return Ly}}function E6(t){return v6(t).substr(0,22)}function om(t){return`${t.appName}!${t.appId}`}const ux=new Map;function cx(t,e){const n=om(t);hx(n,e),w6(n,e)}function hx(t,e){const n=ux.get(t);if(n)for(const r of n)r(e)}function w6(t,e){const n=b6();n&&n.postMessage({key:t,fid:e}),S6()}let Ka=null;function b6(){return!Ka&&"BroadcastChannel"in self&&(Ka=new BroadcastChannel("[Firebase] FID Change"),Ka.onmessage=t=>{hx(t.data.key,t.data.fid)}),Ka}function S6(){ux.size===0&&Ka&&(Ka.close(),Ka=null)}const A6="firebase-installations-database",R6=1,ao="firebase-installations-store";let zg=null;function v0(){return zg||(zg=kd(A6,R6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}})),zg}async function bd(t,e){const n=om(t),a=(await v0()).transaction(ao,"readwrite"),l=a.objectStore(ao),c=await l.get(n);return await l.put(e,n),await a.done,(!c||c.fid!==e.fid)&&cx(t,e.fid),e}async function fx(t){const e=om(t),r=(await v0()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}async function lm(t,e){const n=om(t),a=(await v0()).transaction(ao,"readwrite"),l=a.objectStore(ao),c=await l.get(n),f=e(c);return f===void 0?await l.delete(n):await l.put(f,n),await a.done,f&&(!c||c.fid!==f.fid)&&cx(t,f.fid),f}async function _0(t){let e;const n=await lm(t.appConfig,r=>{const a=C6(r),l=x6(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===Ly?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function C6(t){const e=t||{fid:T6(),registrationStatus:0};return dx(e)}function x6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(so.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=I6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:D6(t)}:{installationEntry:e}}async function I6(t,e){try{const n=await y6(t,e);return bd(t.appConfig,n)}catch(n){throw nx(n)&&n.customData.serverCode===409?await fx(t.appConfig):await bd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function D6(t){let e=await vS(t.appConfig);for(;e.registrationStatus===1;)await lx(100),e=await vS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _0(t);return r||n}return e}function vS(t){return lm(t,e=>{if(!e)throw so.create("installation-not-found");return dx(e)})}function dx(t){return N6(t)?{fid:t.fid,registrationStatus:0}:t}function N6(t){return t.registrationStatus===1&&t.registrationTime+JC<Date.now()}async function M6({appConfig:t,heartbeatServiceProvider:e},n){const r=O6(t,n),a=m6(t,n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:ex,appId:t.appId}},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await ox(()=>fetch(r,f));if(d.ok){const p=await d.json();return rx(p)}else throw await sx("Generate Auth Token",d)}function O6(t,{fid:e}){return`${ix(t)}/${e}/authTokens:generate`}async function T0(t,e=!1){let n;const r=await lm(t.appConfig,l=>{if(!mx(l))throw so.create("not-registered");const c=l.authToken;if(!e&&P6(c))return l;if(c.requestStatus===1)return n=k6(t,e),l;{if(!navigator.onLine)throw so.create("app-offline");const f=U6(l);return n=V6(t,f),f}});return n?await n:r.authToken}async function k6(t,e){let n=await _S(t.appConfig);for(;n.authToken.requestStatus===1;)await lx(100),n=await _S(t.appConfig);const r=n.authToken;return r.requestStatus===0?T0(t,e):r}function _S(t){return lm(t,e=>{if(!mx(e))throw so.create("not-registered");const n=e.authToken;return j6(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function V6(t,e){try{const n=await M6(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await bd(t.appConfig,r),n}catch(n){if(nx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await fx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bd(t.appConfig,r)}throw n}}function mx(t){return t!==void 0&&t.registrationStatus===2}function P6(t){return t.requestStatus===2&&!L6(t)}function L6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+c6}function U6(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function j6(t){return t.requestStatus===1&&t.requestTime+JC<Date.now()}async function B6(t){const e=t,{installationEntry:n,registrationPromise:r}=await _0(e);return r?r.catch(console.error):T0(e).catch(console.error),n.fid}async function z6(t,e=!1){const n=t;return await F6(n),(await T0(n,e)).token}async function F6(t){const{registrationPromise:e}=await _0(t);e&&await e}function H6(t){if(!t||!t.options)throw Fg("App Configuration");if(!t.name)throw Fg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fg(t){return so.create("missing-app-config-values",{valueName:t})}const px="installations",q6="installations-internal",G6=t=>{const e=t.getProvider("app").getImmediate(),n=H6(e),r=uo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},K6=t=>{const e=t.getProvider("app").getImmediate(),n=uo(e,px).getImmediate();return{getId:()=>B6(n),getToken:a=>z6(n,a)}};function $6(){xi(new pi(px,G6,"PUBLIC")),xi(new pi(q6,K6,"PRIVATE"))}$6();On(ZC,y0);On(ZC,y0,"esm2017");const Y6="/firebase-messaging-sw.js",Q6="/firebase-cloud-messaging-push-scope",gx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",X6="https://fcmregistrations.googleapis.com/v1",yx="google.c.a.c_id",W6="google.c.a.c_l",Z6="google.c.a.ts",J6="google.c.a.e",TS=1e4;var ES;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ES||(ES={}));var wc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(wc||(wc={}));function Mr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function e5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),a=new Uint8Array(r.length);for(let l=0;l<r.length;++l)a[l]=r.charCodeAt(l);return a}const Hg="fcm_token_details_db",t5=5,wS="fcm_token_object_Store";async function n5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Hg))return null;let e=null;return(await kd(Hg,t5,{upgrade:async(r,a,l,c)=>{var f;if(a<2||!r.objectStoreNames.contains(wS))return;const d=c.objectStore(wS),p=await d.index("fcmSenderId").get(t);if(await d.clear(),!!p){if(a===2){const y=p;if(!y.auth||!y.p256dh||!y.endpoint)return;e={token:y.fcmToken,createTime:(f=y.createTime)!==null&&f!==void 0?f:Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Mr(y.vapidKey)}}}else if(a===3){const y=p;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Mr(y.auth),p256dh:Mr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Mr(y.vapidKey)}}}else if(a===4){const y=p;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Mr(y.auth),p256dh:Mr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Mr(y.vapidKey)}}}}}})).close(),await xg(Hg),await xg("fcm_vapid_details_db"),await xg("undefined"),i5(e)?e:null}function i5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const r5="firebase-messaging-database",s5=1,bc="firebase-messaging-store";let qg=null;function vx(){return qg||(qg=kd(r5,s5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bc)}}})),qg}async function a5(t){const e=_x(t),r=await(await vx()).transaction(bc).objectStore(bc).get(e);if(r)return r;{const a=await n5(t.appConfig.senderId);if(a)return await E0(t,a),a}}async function E0(t,e){const n=_x(t),a=(await vx()).transaction(bc,"readwrite");return await a.objectStore(bc).put(e,n),await a.done,e}function _x({appConfig:t}){return t.appId}const o5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},fn=new lo("messaging","Messaging",o5);async function l5(t,e){const n=await b0(t),r=Tx(e),a={method:"POST",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(w0(t.appConfig),a)).json()}catch(c){throw fn.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-subscribe-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-subscribe-no-token");return l.token}async function u5(t,e){const n=await b0(t),r=Tx(e.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(`${w0(t.appConfig)}/${e.token}`,a)).json()}catch(c){throw fn.create("token-update-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-update-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-update-no-token");return l.token}async function c5(t,e){const r={method:"DELETE",headers:await b0(t)};try{const l=await(await fetch(`${w0(t.appConfig)}/${e}`,r)).json();if(l.error){const c=l.error.message;throw fn.create("token-unsubscribe-failed",{errorInfo:c})}}catch(a){throw fn.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function w0({projectId:t}){return`${X6}/projects/${t}/registrations`}async function b0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Tx({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const a={web:{endpoint:n,auth:e,p256dh:t}};return r!==gx&&(a.web.applicationPubKey=r),a}const h5=10080*60*1e3;async function f5(t){const e=await m5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Mr(e.getKey("auth")),p256dh:Mr(e.getKey("p256dh"))},r=await a5(t.firebaseDependencies);if(r){if(p5(r.subscriptionOptions,n))return Date.now()>=r.createTime+h5?d5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await c5(t.firebaseDependencies,r.token)}catch(a){console.warn(a)}return bS(t.firebaseDependencies,n)}else return bS(t.firebaseDependencies,n)}async function d5(t,e){try{const n=await u5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await E0(t.firebaseDependencies,r),n}catch(n){throw n}}async function bS(t,e){const r={token:await l5(t,e),createTime:Date.now(),subscriptionOptions:e};return await E0(t,r),r.token}async function m5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e5(e)})}function p5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,a=e.auth===t.auth,l=e.p256dh===t.p256dh;return n&&r&&a&&l}function SS(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return g5(e,t),y5(e,t),v5(e,t),e}function g5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const a=e.notification.image;a&&(t.notification.image=a);const l=e.notification.icon;l&&(t.notification.icon=l)}function y5(t,e){e.data&&(t.data=e.data)}function v5(t,e){var n,r,a,l,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const f=(a=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&a!==void 0?a:(l=e.notification)===null||l===void 0?void 0:l.click_action;f&&(t.fcmOptions.link=f);const d=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;d&&(t.fcmOptions.analyticsLabel=d)}function _5(t){return typeof t=="object"&&!!t&&yx in t}function T5(t){if(!t||!t.options)throw Gg("App Configuration Object");if(!t.name)throw Gg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Gg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Gg(t){return fn.create("missing-app-config-values",{valueName:t})}class E5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=T5(e);this.firebaseDependencies={app:e,appConfig:a,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function w5(t){try{t.swRegistration=await navigator.serviceWorker.register(Y6,{scope:Q6}),t.swRegistration.update().catch(()=>{}),await b5(t.swRegistration)}catch(e){throw fn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function b5(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${TS} ms`)),TS),a=t.installing||t.waiting;t.active?(clearTimeout(r),e()):a?a.onstatechange=l=>{var c;((c=l.target)===null||c===void 0?void 0:c.state)==="activated"&&(a.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}async function S5(t,e){if(!e&&!t.swRegistration&&await w5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");t.swRegistration=e}}async function A5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=gx)}async function R5(t,e){if(!navigator)throw fn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw fn.create("permission-blocked");return await A5(t,e?.vapidKey),await S5(t,e?.serviceWorkerRegistration),f5(t)}async function C5(t,e,n){const r=x5(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[yx],message_name:n[W6],message_time:n[Z6],message_device_time:Math.floor(Date.now()/1e3)})}function x5(t){switch(t){case wc.NOTIFICATION_CLICKED:return"notification_open";case wc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function I5(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===wc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(SS(n)):t.onMessageHandler.next(SS(n)));const r=n.data;_5(r)&&r[J6]==="1"&&await C5(t,n.messageType,r)}const AS="@firebase/messaging",RS="0.12.22";const D5=t=>{const e=new E5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>I5(e,n)),e},N5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>R5(e,r)}};function M5(){xi(new pi("messaging",D5,"PUBLIC")),xi(new pi("messaging-internal",N5,"PRIVATE")),On(AS,RS),On(AS,RS,"esm2017")}async function Ex(){try{await E1()}catch{return!1}return typeof window<"u"&&T1()&&AM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function O5(t,e){if(!navigator)throw fn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function k5(t=Vd()){return Ex().then(e=>{if(!e)throw fn.create("unsupported-browser")},e=>{throw fn.create("indexed-db-unsupported")}),uo(ht(t),"messaging").getImmediate()}function V5(t,e){return t=ht(t),O5(t,e)}M5();const P5={apiKey:"AIzaSyAIl4vWF73TBXAyI7G_Fw9sxtD63innGag",authDomain:"photo-collage-app-9e42d.firebaseapp.com",projectId:"photo-collage-app-9e42d",storageBucket:"photo-collage-app-9e42d.firebasestorage.app",messagingSenderId:"82565536571",appId:"1:82565536571:web:de4bd1ddc0a4b8ea6bb51e",measurementId:"G-P3Y1KYM0P9"},Nf=["codethathat@gmail.com","marsha.o.y@gmail.com"],um=S1(P5),Hu=UV(um),wx=new Or;wx.setCustomParameters({prompt:"select_account"});const dt=VL(um),bx=i6(um),L5=async()=>await Ex()?k5(um):null,Sx=N.createContext(null);function qc(){const t=N.useContext(Sx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function U5({children:t}){const[e,n]=N.useState(null),[r,a]=N.useState(null),[l,c]=N.useState(!0),[f,d]=N.useState(null),p=e?.email?Nf.includes(e.email):!1;N.useEffect(()=>Ck(Hu,async b=>{if(n(b),b&&b.email&&Nf.includes(b.email)){let x;try{const U=await Tc(Nn(dt,"duoboard_users",b.uid));U.exists()&&(x=U.data().customPhotoURL)}catch(U){console.error("Error fetching user document:",U)}const k={uid:b.uid,email:b.email,displayName:b.displayName||"Anonymous",photoURL:b.photoURL||"",lastSeen:Ec(),...x&&{customPhotoURL:x}},L={...k,customPhotoURL:x};try{await ky(Nn(dt,"duoboard_users",b.uid),k,{merge:!0}),a(L),d(null)}catch(U){console.error("Error updating user document:",U),d("Failed to update user profile")}}else b&&b.email&&!Nf.includes(b.email)?(d("Your email is not authorized to use this app."),a(null),await Mg(Hu)):(a(null),d(null));c(!1)}),[]);const A={user:r,firebaseUser:e,loading:l,error:f,signInWithGoogle:async()=>{c(!0),d(null);try{const D=await $k(Hu,wx);D.user.email&&!Nf.includes(D.user.email)&&(d("Your email is not authorized to use this app."),await Mg(Hu))}catch(D){console.error("Sign in error:",D),D.code==="auth/popup-closed-by-user"?d("Sign-in was cancelled."):d("Failed to sign in. Please try again.")}finally{c(!1)}},signOut:async()=>{try{await Mg(Hu),a(null),d(null)}catch(D){console.error("Sign out error:",D),d("Failed to sign out. Please try again.")}},uploadAvatar:async D=>{if(!r){d("You must be signed in to upload an avatar.");return}try{const b=WC(bx,`duoboard_avatars/${r.uid}`);await QC(b,D);const x=await XC(b);await ky(Nn(dt,"duoboard_users",r.uid),{customPhotoURL:x},{merge:!0}),a(k=>k?{...k,customPhotoURL:x}:null)}catch(b){throw console.error("Error uploading avatar:",b),d("Failed to upload avatar. Please try again."),b}},isWhitelisted:p};return O.jsx(Sx.Provider,{value:A,children:t})}const S0=N.createContext({});function A0(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const cm=N.createContext(null),R0=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class j5 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B5({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),a=N.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=N.useContext(R0);return N.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:p}=a.current;if(e||!r.current||!c||!f)return;r.current.dataset.motionPopId=n;const y=document.createElement("style");return l&&(y.nonce=l),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),O.jsx(j5,{isPresent:e,childRef:r,sizeRef:a,children:N.cloneElement(t,{ref:r})})}const z5=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c})=>{const f=A0(F5),d=N.useId(),p=N.useCallback(_=>{f.set(_,!0);for(const E of f.values())if(!E)return;r&&r()},[f,r]),y=N.useMemo(()=>({id:d,initial:e,isPresent:n,custom:a,onExitComplete:p,register:_=>(f.set(_,!1),()=>f.delete(_))}),l?[Math.random(),p]:[n,p]);return N.useMemo(()=>{f.forEach((_,E)=>f.set(E,!1))},[n]),N.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=O.jsx(B5,{isPresent:n,children:t})),O.jsx(cm.Provider,{value:y,children:t})};function F5(){return new Map}function Ax(t=!0){const e=N.useContext(cm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=e,l=N.useId();N.useEffect(()=>{t&&a(l)},[t]);const c=N.useCallback(()=>t&&r&&r(l),[l,r,t]);return!n&&r?[!1,c]:[!0]}const Mf=t=>t.key||"";function CS(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const C0=typeof window<"u",Rx=C0?N.useLayoutEffect:N.useEffect,Za=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1})=>{const[f,d]=Ax(c),p=N.useMemo(()=>CS(t),[t]),y=c&&!f?[]:p.map(Mf),_=N.useRef(!0),E=N.useRef(p),A=A0(()=>new Map),[D,b]=N.useState(p),[x,k]=N.useState(p);Rx(()=>{_.current=!1,E.current=p;for(let X=0;X<x.length;X++){const G=Mf(x[X]);y.includes(G)?A.delete(G):A.get(G)!==!0&&A.set(G,!1)}},[x,y.length,y.join("-")]);const L=[];if(p!==D){let X=[...p];for(let G=0;G<x.length;G++){const Y=x[G],R=Mf(Y);y.includes(R)||(X.splice(G,0,Y),L.push(Y))}l==="wait"&&L.length&&(X=L),k(CS(X)),b(p);return}const{forceRender:U}=N.useContext(S0);return O.jsx(O.Fragment,{children:x.map(X=>{const G=Mf(X),Y=c&&!f?!1:p===x||y.includes(G),R=()=>{if(A.has(G))A.set(G,!0);else return;let S=!0;A.forEach(M=>{M||(S=!1)}),S&&(U?.(),k(E.current),c&&d?.(),r&&r())};return O.jsx(z5,{isPresent:Y,initial:!_.current||n?void 0:!1,custom:Y?void 0:e,presenceAffectsLayout:a,mode:l,onExitComplete:Y?void 0:R,children:X},G)})})},Yn=t=>t;let Cx=Yn;function x0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},jr=t=>t*1e3,Br=t=>t/1e3,H5={useManualTiming:!1};function q5(t){let e=new Set,n=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){l.has(p)&&(d.schedule(p),t()),p(c)}const d={schedule:(p,y=!1,_=!1)=>{const A=_&&r?e:n;return y&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,r){a=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,a&&(a=!1,d.process(p))}};return d}const Of=["read","resolveKeyframes","update","preRender","render","postRender"],G5=40;function xx(t,e){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=Of.reduce((k,L)=>(k[L]=q5(l),k),{}),{read:f,resolveKeyframes:d,update:p,preRender:y,render:_,postRender:E}=c,A=()=>{const k=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(k-a.timestamp,G5),1),a.timestamp=k,a.isProcessing=!0,f.process(a),d.process(a),p.process(a),y.process(a),_.process(a),E.process(a),a.isProcessing=!1,n&&e&&(r=!1,t(A))},D=()=>{n=!0,r=!0,a.isProcessing||t(A)};return{schedule:Of.reduce((k,L)=>{const U=c[L];return k[L]=(X,G=!1,Y=!1)=>(n||D(),U.schedule(X,G,Y)),k},{}),cancel:k=>{for(let L=0;L<Of.length;L++)c[Of[L]].cancel(k)},state:a,steps:c}}const{schedule:ct,cancel:ra,state:Jt,steps:Kg}=xx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yn,!0),Ix=N.createContext({strict:!1}),xS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xl={};for(const t in xS)xl[t]={isEnabled:e=>xS[t].some(n=>!!e[n])};function K5(t){for(const e in t)xl[e]={...xl[e],...t[e]}}const $5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$5.has(t)}let Dx=t=>!Sd(t);function Y5(t){t&&(Dx=e=>e.startsWith("on")?!Sd(e):t(e))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function Q5(t,e,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(Dx(a)||n===!0&&Sd(a)||!e&&!Sd(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function X5(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const hm=N.createContext({});function Sc(t){return typeof t=="string"||Array.isArray(t)}function fm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const I0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D0=["initial",...I0];function dm(t){return fm(t.animate)||D0.some(e=>Sc(t[e]))}function Nx(t){return!!(dm(t)||t.variants)}function W5(t,e){if(dm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sc(n)?n:void 0,animate:Sc(r)?r:void 0}}return t.inherit!==!1?e:{}}function Z5(t){const{initial:e,animate:n}=W5(t,N.useContext(hm));return N.useMemo(()=>({initial:e,animate:n}),[IS(e),IS(n)])}function IS(t){return Array.isArray(t)?t.join(" "):t}const J5=Symbol.for("motionComponentSymbol");function ul(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eU(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ul(n)&&(n.current=r))},[e])}const N0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tU="framerAppearId",Mx="data-"+N0(tU),{schedule:M0}=xx(queueMicrotask,!1),Ox=N.createContext({});function nU(t,e,n,r,a){var l,c;const{visualElement:f}=N.useContext(hm),d=N.useContext(Ix),p=N.useContext(cm),y=N.useContext(R0).reducedMotion,_=N.useRef(null);r=r||d.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:f,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const E=_.current,A=N.useContext(Ox);E&&!E.projection&&a&&(E.type==="html"||E.type==="svg")&&iU(_.current,n,a,A);const D=N.useRef(!1);N.useInsertionEffect(()=>{E&&D.current&&E.update(n,p)});const b=n[Mx],x=N.useRef(!!b&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,b))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,b)));return Rx(()=>{E&&(D.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),M0.render(E.render),x.current&&E.animationState&&E.animationState.animateChanges())}),N.useEffect(()=>{E&&(!x.current&&E.animationState&&E.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,b)}),x.current=!1))}),E}function iU(t,e,n,r){const{layoutId:a,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kx(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||f&&ul(f),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:p})}function kx(t){if(t)return t.options.allowProjection!==!1?t.projection:kx(t.parent)}function rU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:a}){var l,c;t&&K5(t);function f(p,y){let _;const E={...N.useContext(R0),...p,layoutId:sU(p)},{isStatic:A}=E,D=Z5(p),b=r(p,A);if(!A&&C0){aU();const x=oU(E);_=x.MeasureLayout,D.visualElement=nU(a,b,E,e,x.ProjectionNode)}return O.jsxs(hm.Provider,{value:D,children:[_&&D.visualElement?O.jsx(_,{visualElement:D.visualElement,...E}):null,n(a,p,eU(b,D.visualElement,y),b,A,D.visualElement)]})}f.displayName=`motion.${typeof a=="string"?a:`create(${(c=(l=a.displayName)!==null&&l!==void 0?l:a.name)!==null&&c!==void 0?c:""})`}`;const d=N.forwardRef(f);return d[J5]=a,d}function sU({layoutId:t}){const e=N.useContext(S0).id;return e&&t!==void 0?e+"-"+t:t}function aU(t,e){N.useContext(Ix).strict}function oU(t){const{drag:e,layout:n}=xl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const lU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O0(t){return typeof t!="string"||t.includes("-")?!1:!!(lU.indexOf(t)>-1||/[A-Z]/u.test(t))}function DS(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function k0(t,e,n,r){if(typeof e=="function"){const[a,l]=DS(r);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=DS(r);e=e(n!==void 0?n:t.custom,a,l)}return e}const Uy=t=>Array.isArray(t),uU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),cU=t=>Uy(t)?t[t.length-1]||0:t,hn=t=>!!(t&&t.getVelocity);function Wf(t){const e=hn(t)?t.get():t;return uU(e)?e.toValue():e}function hU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,a,l){const c={latestValues:fU(r,a,l,t),renderState:e()};return n&&(c.onMount=f=>n({props:r,current:f,...c}),c.onUpdate=f=>n(f)),c}const Vx=t=>(e,n)=>{const r=N.useContext(hm),a=N.useContext(cm),l=()=>hU(t,e,r,a);return n?l():A0(l)};function fU(t,e,n,r){const a={},l=r(t,{});for(const E in l)a[E]=Wf(l[E]);let{initial:c,animate:f}=t;const d=dm(t),p=Nx(t);e&&p&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const _=y?f:c;if(_&&typeof _!="boolean"&&!fm(_)){const E=Array.isArray(_)?_:[_];for(let A=0;A<E.length;A++){const D=k0(t,E[A]);if(D){const{transitionEnd:b,transition:x,...k}=D;for(const L in k){let U=k[L];if(Array.isArray(U)){const X=y?U.length-1:0;U=U[X]}U!==null&&(a[L]=U)}for(const L in b)a[L]=b[L]}}}return a}const Ll=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(Ll),Px=t=>e=>typeof e=="string"&&e.startsWith(t),Lx=Px("--"),dU=Px("var(--"),V0=t=>dU(t)?mU.test(t.split("/*")[0].trim()):!1,mU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ux=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$r=(t,e,n)=>n>e?e:n<t?t:n,Ul={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ac={...Ul,transform:t=>$r(0,1,t)},kf={...Ul,default:1},Gc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fs=Gc("deg"),Zi=Gc("%"),we=Gc("px"),pU=Gc("vh"),gU=Gc("vw"),NS={...Zi,parse:t=>Zi.parse(t)/100,transform:t=>Zi.transform(t*100)},yU={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we},vU={rotate:Fs,rotateX:Fs,rotateY:Fs,rotateZ:Fs,scale:kf,scaleX:kf,scaleY:kf,scaleZ:kf,skew:Fs,skewX:Fs,skewY:Fs,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Ac,originX:NS,originY:NS,originZ:we},MS={...Ul,transform:Math.round},P0={...yU,...vU,zIndex:MS,size:we,fillOpacity:Ac,strokeOpacity:Ac,numOctaves:MS},_U={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TU=Ll.length;function EU(t,e,n){let r="",a=!0;for(let l=0;l<TU;l++){const c=Ll[l],f=t[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const p=Ux(f,P0[c]);if(!d){a=!1;const y=_U[c]||c;r+=`${y}(${p}) `}n&&(e[c]=p)}}return r=r.trim(),n?r=n(e,a?"":r):a&&(r="none"),r}function L0(t,e,n){const{style:r,vars:a,transformOrigin:l}=t;let c=!1,f=!1;for(const d in e){const p=e[d];if(po.has(d)){c=!0;continue}else if(Lx(d)){a[d]=p;continue}else{const y=Ux(p,P0[d]);d.startsWith("origin")?(f=!0,l[d]=y):r[d]=y}}if(e.transform||(c||n?r.transform=EU(e,t.transform,n):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:y=0}=l;r.transformOrigin=`${d} ${p} ${y}`}}const wU={offset:"stroke-dashoffset",array:"stroke-dasharray"},bU={offset:"strokeDashoffset",array:"strokeDasharray"};function SU(t,e,n=1,r=0,a=!0){t.pathLength=1;const l=a?wU:bU;t[l.offset]=we.transform(-r);const c=we.transform(e),f=we.transform(n);t[l.array]=`${c} ${f}`}function OS(t,e,n){return typeof t=="string"?t:we.transform(e+n*t)}function AU(t,e,n){const r=OS(e,t.x,t.width),a=OS(n,t.y,t.height);return`${r} ${a}`}function U0(t,{attrX:e,attrY:n,attrScale:r,originX:a,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:d=0,...p},y,_){if(L0(t,p,_),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:A,dimensions:D}=t;E.transform&&(D&&(A.transform=E.transform),delete E.transform),D&&(a!==void 0||l!==void 0||A.transform)&&(A.transformOrigin=AU(D,a!==void 0?a:.5,l!==void 0?l:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),r!==void 0&&(E.scale=r),c!==void 0&&SU(E,c,f,d,!1)}const j0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jx=()=>({...j0(),attrs:{}}),B0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Bx(t,{style:e,vars:n},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const l in n)t.style.setProperty(l,n[l])}const zx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fx(t,e,n,r){Bx(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(zx.has(a)?a:N0(a),e.attrs[a])}const Ad={};function RU(t){Object.assign(Ad,t)}function Hx(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ad[t]||t==="opacity")}function z0(t,e,n){var r;const{style:a}=t,l={};for(const c in a)(hn(a[c])||e.style&&hn(e.style[c])||Hx(c,t)||((r=n?.getValue(c))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(l[c]=a[c]);return l}function qx(t,e,n){const r=z0(t,e,n);for(const a in t)if(hn(t[a])||hn(e[a])){const l=Ll.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[l]=t[a]}return r}function CU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const kS=["x","y","width","height","cx","cy","r"],xU={useVisualState:Vx({scrapeMotionValuesFromProps:qx,createRenderState:jx,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:a})=>{if(!n)return;let l=!!t.drag;if(!l){for(const f in a)if(po.has(f)){l=!0;break}}if(!l)return;let c=!e;if(e)for(let f=0;f<kS.length;f++){const d=kS[f];t[d]!==e[d]&&(c=!0)}c&&ct.read(()=>{CU(n,r),ct.render(()=>{U0(r,a,B0(n.tagName),t.transformTemplate),Fx(n,r)})})}})},IU={useVisualState:Vx({scrapeMotionValuesFromProps:z0,createRenderState:j0})};function Gx(t,e,n){for(const r in e)!hn(e[r])&&!Hx(r,n)&&(t[r]=e[r])}function DU({transformTemplate:t},e){return N.useMemo(()=>{const n=j0();return L0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function NU(t,e){const n=t.style||{},r={};return Gx(r,n,t),Object.assign(r,DU(t,e)),r}function MU(t,e){const n={},r=NU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function OU(t,e,n,r){const a=N.useMemo(()=>{const l=jx();return U0(l,e,B0(r),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};Gx(l,t.style,t),a.style={...l,...a.style}}return a}function kU(t=!1){return(n,r,a,{latestValues:l},c)=>{const d=(O0(n)?OU:MU)(r,l,c,n),p=Q5(r,typeof n=="string",t),y=n!==N.Fragment?{...p,...d,ref:a}:{},{children:_}=r,E=N.useMemo(()=>hn(_)?_.get():_,[_]);return N.createElement(n,{...y,children:E})}}function VU(t,e){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...O0(r)?xU:IU,preloadedFeatures:t,useRender:kU(a),createVisualElement:e,Component:r};return rU(c)}}function Kx(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function mm(t,e,n){const r=t.getProps();return k0(r,e,n!==void 0?n:r.custom,t)}const PU=x0(()=>window.ScrollTimeline!==void 0);class LU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(a=>{if(PU()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{r.forEach((a,l)=>{a&&a(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class UU extends LU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function F0(t,e){return t?t[e]||t.default||t:void 0}const jy=2e4;function $x(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<jy;)e+=n,r=t.next(e);return e>=jy?1/0:e}function H0(t){return typeof t=="function"}function VS(t,e){t.timeline=e,t.onfinish=null}const q0=t=>Array.isArray(t)&&typeof t[0]=="number",jU={linearEasing:void 0};function BU(t,e){const n=x0(t);return()=>{var r;return(r=jU[e])!==null&&r!==void 0?r:n()}}const Rd=BU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yx=(t,e,n=10)=>{let r="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)r+=t(Cl(0,a-1,l))+", ";return`linear(${r.substring(0,r.length-2)})`};function Qx(t){return!!(typeof t=="function"&&Rd()||!t||typeof t=="string"&&(t in By||Rd())||q0(t)||Array.isArray(t)&&t.every(Qx))}const Xu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,By={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xu([0,.65,.55,1]),circOut:Xu([.55,0,1,.45]),backIn:Xu([.31,.01,.66,-.59]),backOut:Xu([.33,1.53,.69,.99])};function Xx(t,e){if(t)return typeof t=="function"&&Rd()?Yx(t,e):q0(t)?Xu(t):Array.isArray(t)?t.map(n=>Xx(n,e)||By.easeOut):By[t]}const Si={x:!1,y:!1};function Wx(){return Si.x||Si.y}function zU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const l=(r=void 0)!==null&&r!==void 0?r:a.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}function Zx(t,e){const n=zU(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[n,a,()=>r.abort()]}function PS(t){return e=>{e.pointerType==="touch"||Wx()||t(e)}}function FU(t,e,n={}){const[r,a,l]=Zx(t,n),c=PS(f=>{const{target:d}=f,p=e(f);if(typeof p!="function"||!d)return;const y=PS(_=>{p(_),d.removeEventListener("pointerleave",y)});d.addEventListener("pointerleave",y,a)});return r.forEach(f=>{f.addEventListener("pointerenter",c,a)}),l}const Jx=(t,e)=>e?t===e?!0:Jx(t,e.parentElement):!1,G0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qU(t){return HU.has(t.tagName)||t.tabIndex!==-1}const Wu=new WeakSet;function LS(t){return e=>{e.key==="Enter"&&t(e)}}function $g(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const GU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=LS(()=>{if(Wu.has(n))return;$g(n,"down");const a=LS(()=>{$g(n,"up")}),l=()=>$g(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function US(t){return G0(t)&&!Wx()}function KU(t,e,n={}){const[r,a,l]=Zx(t,n),c=f=>{const d=f.currentTarget;if(!US(f)||Wu.has(d))return;Wu.add(d);const p=e(f),y=(A,D)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",E),!(!US(A)||!Wu.has(d))&&(Wu.delete(d),typeof p=="function"&&p(A,{success:D}))},_=A=>{y(A,n.useGlobalTarget||Jx(d,A.target))},E=A=>{y(A,!1)};window.addEventListener("pointerup",_,a),window.addEventListener("pointercancel",E,a)};return r.forEach(f=>{!qU(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(n.useGlobalTarget?window:f).addEventListener("pointerdown",c,a),f.addEventListener("focus",p=>GU(p,a),a)}),l}function $U(t){return t==="x"||t==="y"?Si[t]?null:(Si[t]=!0,()=>{Si[t]=!1}):Si.x||Si.y?null:(Si.x=Si.y=!0,()=>{Si.x=Si.y=!1})}const e2=new Set(["width","height","top","left","right","bottom",...Ll]);let Zf;function YU(){Zf=void 0}const Ji={now:()=>(Zf===void 0&&Ji.set(Jt.isProcessing||H5.useManualTiming?Jt.timestamp:performance.now()),Zf),set:t=>{Zf=t,queueMicrotask(YU)}};function K0(t,e){t.indexOf(e)===-1&&t.push(e)}function $0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Y0{constructor(){this.subscriptions=[]}add(e){return K0(this.subscriptions,e),()=>$0(this.subscriptions,e)}notify(e,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,r);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function t2(t,e){return e?t*(1e3/e):0}const jS=30,QU=t=>!isNaN(parseFloat(t));class XU{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{const l=Ji.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ji.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Y0);const r=this.events[e].add(n);return e==="change"?()=>{r(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ji.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jS);return t2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rc(t,e){return new XU(t,e)}function WU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Rc(n))}function ZU(t,e){const n=mm(t,e);let{transitionEnd:r={},transition:a={},...l}=n||{};l={...l,...r};for(const c in l){const f=cU(l[c]);WU(t,c,f)}}function JU(t){return!!(hn(t)&&t.add)}function zy(t,e){const n=t.getValue("willChange");if(JU(n))return n.add(e)}function n2(t){return t.props[Mx]}const i2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ej=1e-7,tj=12;function nj(t,e,n,r,a){let l,c,f=0;do c=e+(n-e)/2,l=i2(c,r,a)-t,l>0?n=c:e=c;while(Math.abs(l)>ej&&++f<tj);return c}function Kc(t,e,n,r){if(t===e&&n===r)return Yn;const a=l=>nj(l,0,1,t,n);return l=>l===0||l===1?l:i2(a(l),e,r)}const r2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,s2=t=>e=>1-t(1-e),a2=Kc(.33,1.53,.69,.99),Q0=s2(a2),o2=r2(Q0),l2=t=>(t*=2)<1?.5*Q0(t):.5*(2-Math.pow(2,-10*(t-1))),X0=t=>1-Math.sin(Math.acos(t)),u2=s2(X0),c2=r2(X0),h2=t=>/^0[^.\s]+$/u.test(t);function ij(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||h2(t):!0}const sc=t=>Math.round(t*1e5)/1e5,W0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rj(t){return t==null}const sj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Z0=(t,e)=>n=>!!(typeof n=="string"&&sj.test(n)&&n.startsWith(t)||e&&!rj(n)&&Object.prototype.hasOwnProperty.call(n,e)),f2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[a,l,c,f]=r.match(W0);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},aj=t=>$r(0,255,t),Yg={...Ul,transform:t=>Math.round(aj(t))},$a={test:Z0("rgb","red"),parse:f2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Yg.transform(t)+", "+Yg.transform(e)+", "+Yg.transform(n)+", "+sc(Ac.transform(r))+")"};function oj(t){let e="",n="",r="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Fy={test:Z0("#"),parse:oj,transform:$a.transform},cl={test:Z0("hsl","hue"),parse:f2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zi.transform(sc(e))+", "+Zi.transform(sc(n))+", "+sc(Ac.transform(r))+")"},ln={test:t=>$a.test(t)||Fy.test(t)||cl.test(t),parse:t=>$a.test(t)?$a.parse(t):cl.test(t)?cl.parse(t):Fy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$a.transform(t):cl.transform(t)},lj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(W0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lj))===null||n===void 0?void 0:n.length)||0)>0}const d2="number",m2="color",cj="var",hj="var(",BS="${}",fj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},a=[];let l=0;const f=e.replace(fj,d=>(ln.test(d)?(r.color.push(l),a.push(m2),n.push(ln.parse(d))):d.startsWith(hj)?(r.var.push(l),a.push(cj),n.push(d)):(r.number.push(l),a.push(d2),n.push(parseFloat(d))),++l,BS)).split(BS);return{values:n,split:f,indexes:r,types:a}}function p2(t){return Cc(t).values}function g2(t){const{split:e,types:n}=Cc(t),r=e.length;return a=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],a[c]!==void 0){const f=n[c];f===d2?l+=sc(a[c]):f===m2?l+=ln.transform(a[c]):l+=a[c]}return l}}const dj=t=>typeof t=="number"?0:t;function mj(t){const e=p2(t);return g2(t)(e.map(dj))}const sa={test:uj,parse:p2,createTransformer:g2,getAnimatableNone:mj},pj=new Set(["brightness","contrast","saturate","opacity"]);function gj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(W0)||[];if(!r)return t;const a=n.replace(r,"");let l=pj.has(e)?1:0;return r!==n&&(l*=100),e+"("+l+a+")"}const yj=/\b([a-z-]*)\(.*?\)/gu,Hy={...sa,getAnimatableNone:t=>{const e=t.match(yj);return e?e.map(gj).join(" "):t}},vj={...P0,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:Hy,WebkitFilter:Hy},J0=t=>vj[t];function y2(t,e){let n=J0(t);return n!==Hy&&(n=sa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const _j=new Set(["auto","none","0"]);function Tj(t,e,n){let r=0,a;for(;r<t.length&&!a;){const l=t[r];typeof l=="string"&&!_j.has(l)&&Cc(l).values.length&&(a=t[r]),r++}if(a&&n)for(const l of e)t[l]=y2(n,a)}const zS=t=>t===Ul||t===we,FS=(t,e)=>parseFloat(t.split(", ")[e]),HS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/u);if(a)return FS(a[1],e);{const l=r.match(/^matrix\((.+)\)$/u);return l?FS(l[1],t):0}},Ej=new Set(["x","y","z"]),wj=Ll.filter(t=>!Ej.has(t));function bj(t){const e=[];return wj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:HS(4,13),y:HS(5,14)};Il.translateX=Il.x;Il.translateY=Il.y;const Ja=new Set;let qy=!1,Gy=!1;function v2(){if(Gy){const t=Array.from(Ja).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const a=bj(r);a.length&&(n.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([l,c])=>{var f;(f=r.getValue(l))===null||f===void 0||f.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gy=!1,qy=!1,Ja.forEach(t=>t.complete()),Ja.clear()}function _2(){Ja.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gy=!0)})}function Sj(){_2(),v2()}class e_{constructor(e,n,r,a,l,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ja.add(this),qy||(qy=!0,ct.read(_2),ct.resolveKeyframes(v2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:a}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const c=a?.get(),f=e[e.length-1];if(c!==void 0)e[0]=c;else if(r&&n){const d=r.readValue(n,f);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=f),a&&c===void 0&&a.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ja.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ja.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const T2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Aj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rj(t){const e=Aj.exec(t);if(!e)return[,];const[,n,r,a]=e;return[`--${n??r}`,a]}function E2(t,e,n=1){const[r,a]=Rj(t);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return T2(c)?parseFloat(c):c}return V0(a)?E2(a,e,n+1):a}const w2=t=>e=>e.test(t),Cj={test:t=>t==="auto",parse:t=>t},b2=[Ul,we,Zi,Fs,gU,pU,Cj],qS=t=>b2.find(w2(t));class S2 extends e_{constructor(e,n,r,a,l){super(e,n,r,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),V0(p))){const y=E2(p,n.current);y!==void 0&&(e[d]=y),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!e2.has(r)||e.length!==2)return;const[a,l]=e,c=qS(a),f=qS(l);if(c!==f)if(zS(c)&&zS(f))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let a=0;a<e.length;a++)ij(e[a])&&r.push(a);r.length&&Tj(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Il[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const l=n.getValue(r);l&&l.jump(this.measuredOrigin,!1);const c=a.length-1,f=a[c];a[c]=Il[r](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,p])=>{n.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const GS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sa.test(t)||t==="0")&&!t.startsWith("url("));function xj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Ij(t,e,n,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=GS(a,e),f=GS(l,e);return!c||!f?!1:xj(t)||(n==="spring"||H0(n))&&r}const Dj=t=>t!==null;function pm(t,{repeat:e,repeatType:n="loop"},r){const a=t.filter(Dj),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Nj=40;class A2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ji.now(),this.options={autoplay:e,delay:n,type:r,repeat:a,repeatDelay:l,repeatType:c,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Nj?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Sj(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ji.now(),this.hasAttemptedResolve=!0;const{name:r,type:a,velocity:l,delay:c,onComplete:f,onUpdate:d,isGenerator:p}=this.options;if(!p&&!Ij(e,r,a,l))if(c)this.options.duration=0;else{d&&d(pm(e,this.options,n)),f&&f(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const pt=(t,e,n)=>t+(e-t)*n;function Qg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Mj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const f=n<.5?n*(1+e):n+e-n*e,d=2*n-f;a=Qg(d,f,t+1/3),l=Qg(d,f,t),c=Qg(d,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Cd(t,e){return n=>n>0?e:t}const Xg=(t,e,n)=>{const r=t*t,a=n*(e*e-r)+r;return a<0?0:Math.sqrt(a)},Oj=[Fy,$a,cl],kj=t=>Oj.find(e=>e.test(t));function KS(t){const e=kj(t);if(!e)return!1;let n=e.parse(t);return e===cl&&(n=Mj(n)),n}const $S=(t,e)=>{const n=KS(t),r=KS(e);if(!n||!r)return Cd(t,e);const a={...n};return l=>(a.red=Xg(n.red,r.red,l),a.green=Xg(n.green,r.green,l),a.blue=Xg(n.blue,r.blue,l),a.alpha=pt(n.alpha,r.alpha,l),$a.transform(a))},Vj=(t,e)=>n=>e(t(n)),$c=(...t)=>t.reduce(Vj),Ky=new Set(["none","hidden"]);function Pj(t,e){return Ky.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Lj(t,e){return n=>pt(t,e,n)}function t_(t){return typeof t=="number"?Lj:typeof t=="string"?V0(t)?Cd:ln.test(t)?$S:Bj:Array.isArray(t)?R2:typeof t=="object"?ln.test(t)?$S:Uj:Cd}function R2(t,e){const n=[...t],r=n.length,a=t.map((l,c)=>t_(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)n[c]=a[c](l);return n}}function Uj(t,e){const n={...t,...e},r={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(r[a]=t_(t[a])(t[a],e[a]));return a=>{for(const l in r)n[l]=r[l](a);return n}}function jj(t,e){var n;const r=[],a={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const c=e.types[l],f=t.indexes[c][a[c]],d=(n=t.values[f])!==null&&n!==void 0?n:0;r[l]=d,a[c]++}return r}const Bj=(t,e)=>{const n=sa.createTransformer(e),r=Cc(t),a=Cc(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Ky.has(t)&&!a.values.length||Ky.has(e)&&!r.values.length?Pj(t,e):$c(R2(jj(r,a),a.values),n):Cd(t,e)};function C2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?pt(t,e,n):t_(t)(t,e)}const zj=5;function x2(t,e,n){const r=Math.max(e-zj,0);return t2(n-t(r),e-r)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wg=.001;function Fj({duration:t=wt.duration,bounce:e=wt.bounce,velocity:n=wt.velocity,mass:r=wt.mass}){let a,l,c=1-e;c=$r(wt.minDamping,wt.maxDamping,c),t=$r(wt.minDuration,wt.maxDuration,Br(t)),c<1?(a=p=>{const y=p*c,_=y*t,E=y-n,A=$y(p,c),D=Math.exp(-_);return Wg-E/A*D},l=p=>{const _=p*c*t,E=_*n+n,A=Math.pow(c,2)*Math.pow(p,2)*t,D=Math.exp(-_),b=$y(Math.pow(p,2),c);return(-a(p)+Wg>0?-1:1)*((E-A)*D)/b}):(a=p=>{const y=Math.exp(-p*t),_=(p-n)*t+1;return-Wg+y*_},l=p=>{const y=Math.exp(-p*t),_=(n-p)*(t*t);return y*_});const f=5/t,d=qj(a,l,f);if(t=jr(t),isNaN(d))return{stiffness:wt.stiffness,damping:wt.damping,duration:t};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:c*2*Math.sqrt(r*p),duration:t}}}const Hj=12;function qj(t,e,n){let r=n;for(let a=1;a<Hj;a++)r=r-t(r)/e(r);return r}function $y(t,e){return t*Math.sqrt(1-e*e)}const Gj=["duration","bounce"],Kj=["stiffness","damping","mass"];function YS(t,e){return e.some(n=>t[n]!==void 0)}function $j(t){let e={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...t};if(!YS(t,Kj)&&YS(t,Gj))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,l=2*$r(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:wt.mass,stiffness:a,damping:l}}else{const n=Fj(t);e={...e,...n,mass:wt.mass},e.isResolvedFromDuration=!0}return e}function I2(t=wt.visualDuration,e=wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],f={done:!1,value:l},{stiffness:d,damping:p,mass:y,duration:_,velocity:E,isResolvedFromDuration:A}=$j({...n,velocity:-Br(n.velocity||0)}),D=E||0,b=p/(2*Math.sqrt(d*y)),x=c-l,k=Br(Math.sqrt(d/y)),L=Math.abs(x)<5;r||(r=L?wt.restSpeed.granular:wt.restSpeed.default),a||(a=L?wt.restDelta.granular:wt.restDelta.default);let U;if(b<1){const G=$y(k,b);U=Y=>{const R=Math.exp(-b*k*Y);return c-R*((D+b*k*x)/G*Math.sin(G*Y)+x*Math.cos(G*Y))}}else if(b===1)U=G=>c-Math.exp(-k*G)*(x+(D+k*x)*G);else{const G=k*Math.sqrt(b*b-1);U=Y=>{const R=Math.exp(-b*k*Y),S=Math.min(G*Y,300);return c-R*((D+b*k*x)*Math.sinh(S)+G*x*Math.cosh(S))/G}}const X={calculatedDuration:A&&_||null,next:G=>{const Y=U(G);if(A)f.done=G>=_;else{let R=0;b<1&&(R=G===0?jr(D):x2(U,G,Y));const S=Math.abs(R)<=r,M=Math.abs(c-Y)<=a;f.done=S&&M}return f.value=f.done?c:Y,f},toString:()=>{const G=Math.min($x(X),jy),Y=Yx(R=>X.next(G*R).value,G,30);return G+"ms "+Y}};return X}function QS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:d,restDelta:p=.5,restSpeed:y}){const _=t[0],E={done:!1,value:_},A=S=>f!==void 0&&S<f||d!==void 0&&S>d,D=S=>f===void 0?d:d===void 0||Math.abs(f-S)<Math.abs(d-S)?f:d;let b=n*e;const x=_+b,k=c===void 0?x:c(x);k!==x&&(b=k-_);const L=S=>-b*Math.exp(-S/r),U=S=>k+L(S),X=S=>{const M=L(S),P=U(S);E.done=Math.abs(M)<=p,E.value=E.done?k:P};let G,Y;const R=S=>{A(E.value)&&(G=S,Y=I2({keyframes:[E.value,D(E.value)],velocity:x2(U,S,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return R(0),{calculatedDuration:null,next:S=>{let M=!1;return!Y&&G===void 0&&(M=!0,X(S),R(S)),G!==void 0&&S>=G?Y.next(S-G):(!M&&X(S),E)}}}const Yj=Kc(.42,0,1,1),Qj=Kc(0,0,.58,1),D2=Kc(.42,0,.58,1),Xj=t=>Array.isArray(t)&&typeof t[0]!="number",Wj={linear:Yn,easeIn:Yj,easeInOut:D2,easeOut:Qj,circIn:X0,circInOut:c2,circOut:u2,backIn:Q0,backInOut:o2,backOut:a2,anticipate:l2},XS=t=>{if(q0(t)){Cx(t.length===4);const[e,n,r,a]=t;return Kc(e,n,r,a)}else if(typeof t=="string")return Wj[t];return t};function Zj(t,e,n){const r=[],a=n||C2,l=t.length-1;for(let c=0;c<l;c++){let f=a(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Yn:e;f=$c(d,f)}r.push(f)}return r}function Jj(t,e,{clamp:n=!0,ease:r,mixer:a}={}){const l=t.length;if(Cx(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=Zj(e,r,a),d=f.length,p=y=>{if(c&&y<t[0])return e[0];let _=0;if(d>1)for(;_<t.length-2&&!(y<t[_+1]);_++);const E=Cl(t[_],t[_+1],y);return f[_](E)};return n?y=>p($r(t[0],t[l-1],y)):p}function e9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const a=Cl(0,e,r);t.push(pt(n,1,a))}}function t9(t){const e=[0];return e9(e,t.length-1),e}function n9(t,e){return t.map(n=>n*e)}function i9(t,e){return t.map(()=>e||D2).splice(0,t.length-1)}function xd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const a=Xj(r)?r.map(XS):XS(r),l={done:!1,value:e[0]},c=n9(n&&n.length===e.length?n:t9(e),t),f=Jj(c,e,{ease:Array.isArray(a)?a:i9(e,a)});return{calculatedDuration:t,next:d=>(l.value=f(d),l.done=d>=t,l)}}const r9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ct.update(e,!0),stop:()=>ra(e),now:()=>Jt.isProcessing?Jt.timestamp:Ji.now()}},s9={decay:QS,inertia:QS,tween:xd,keyframes:xd,spring:I2},a9=t=>t/100;class n_ extends A2{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:a,keyframes:l}=this.options,c=a?.KeyframeResolver||e_,f=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new c(l,f,n,r,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=this.options,f=H0(n)?n:s9[n]||xd;let d,p;f!==xd&&typeof e[0]!="number"&&(d=$c(a9,C2(e[0],e[1])),e=[0,100]);const y=f({...this.options,keyframes:e});l==="mirror"&&(p=f({...this.options,keyframes:[...e].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=$x(y));const{calculatedDuration:_}=y,E=_+a,A=E*(r+1)-a;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:_,resolvedDuration:E,totalDuration:A}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:a,generator:l,mirroredGenerator:c,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:p,totalDuration:y,resolvedDuration:_}=r;if(this.startTime===null)return l.next(0);const{delay:E,repeat:A,repeatType:D,repeatDelay:b,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-E*(this.speed>=0?1:-1),L=this.speed>=0?k<0:k>y;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let U=this.currentTime,X=l;if(A){const S=Math.min(this.currentTime,y)/_;let M=Math.floor(S),P=S%1;!P&&S>=1&&(P=1),P===1&&M--,M=Math.min(M,A+1),!!(M%2)&&(D==="reverse"?(P=1-P,b&&(P-=b/_)):D==="mirror"&&(X=c)),U=$r(0,1,P)*_}const G=L?{done:!1,value:d[0]}:X.next(U);f&&(G.value=f(G.value));let{done:Y}=G;!L&&p!==null&&(Y=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return R&&a!==void 0&&(G.value=pm(d,this.options,a)),x&&x(G.value),R&&this.finish(),G}get duration(){const{resolved:e}=this;return e?Br(e.calculatedDuration):0}get time(){return Br(this.currentTime)}set time(e){e=jr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Br(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=r9,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const o9=new Set(["opacity","clipPath","filter","transform"]);function l9(t,e,n,{delay:r=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:f="easeInOut",times:d}={}){const p={[e]:n};d&&(p.offset=d);const y=Xx(f,a);return Array.isArray(y)&&(p.easing=y),t.animate(p,{delay:r,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const u9=x0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Id=10,c9=2e4;function h9(t){return H0(t.type)||t.type==="spring"||!Qx(t.ease)}function f9(t,e){const n=new n_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const a=[];let l=0;for(;!r.done&&l<c9;)r=n.sample(l),a.push(r.value),l+=Id;return{times:void 0,keyframes:a,duration:l-Id,ease:"linear"}}const N2={anticipate:l2,backInOut:o2,circInOut:c2};function d9(t){return t in N2}class WS extends A2{constructor(e){super(e);const{name:n,motionValue:r,element:a,keyframes:l}=this.options;this.resolver=new S2(l,(c,f)=>this.onKeyframesResolved(c,f),n,r,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:a,ease:l,type:c,motionValue:f,name:d,startTime:p}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof l=="string"&&Rd()&&d9(l)&&(l=N2[l]),h9(this.options)){const{onComplete:_,onUpdate:E,motionValue:A,element:D,...b}=this.options,x=f9(e,b);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,a=x.times,l=x.ease,c="keyframes"}const y=l9(f.owner.current,d,e,{...this.options,duration:r,times:a,ease:l});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(VS(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:_}=this.options;f.set(pm(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:a,type:c,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Br(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Br(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=jr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yn;const{animation:r}=n;VS(r,e)}return Yn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:a,type:l,ease:c,times:f}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:_,element:E,...A}=this.options,D=new n_({...A,keyframes:r,duration:a,type:l,ease:c,times:f,isGenerator:!0}),b=jr(this.time);p.setWithVelocity(D.sample(b-Id).value,D.sample(b).value,Id)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:a,repeatType:l,damping:c,type:f}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=n.owner.getProps();return u9()&&r&&o9.has(r)&&!d&&!p&&!a&&l!=="mirror"&&c!==0&&f!=="inertia"}}const m9={type:"spring",stiffness:500,damping:25,restSpeed:10},p9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),g9={type:"keyframes",duration:.8},y9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v9=(t,{keyframes:e})=>e.length>2?g9:po.has(t)?t.startsWith("scale")?p9(e[1]):m9:y9;function _9({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const i_=(t,e,n,r={},a,l)=>c=>{const f=F0(r,t)||{},d=f.delay||r.delay||0;let{elapsed:p=0}=r;p=p-jr(d);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-p,onUpdate:E=>{e.set(E),f.onUpdate&&f.onUpdate(E)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:l?void 0:a};_9(f)||(y={...y,...v9(t,y)}),y.duration&&(y.duration=jr(y.duration)),y.repeatDelay&&(y.repeatDelay=jr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let _=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(_=!0)),_&&!l&&e.get()!==void 0){const E=pm(y.keyframes,f);if(E!==void 0)return ct.update(()=>{y.onUpdate(E),y.onComplete()}),new UU([])}return!l&&WS.supports(y)?new WS(y):new n_(y)};function T9({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function M2(t,e,{delay:n=0,transitionOverride:r,type:a}={}){var l;let{transition:c=t.getDefaultTransition(),transitionEnd:f,...d}=e;r&&(c=r);const p=[],y=a&&t.animationState&&t.animationState.getState()[a];for(const _ in d){const E=t.getValue(_,(l=t.latestValues[_])!==null&&l!==void 0?l:null),A=d[_];if(A===void 0||y&&T9(y,_))continue;const D={delay:n,...F0(c||{},_)};let b=!1;if(window.MotionHandoffAnimation){const k=n2(t);if(k){const L=window.MotionHandoffAnimation(k,_,ct);L!==null&&(D.startTime=L,b=!0)}}zy(t,_),E.start(i_(_,E,A,t.shouldReduceMotion&&e2.has(_)?{type:!1}:D,t,b));const x=E.animation;x&&p.push(x)}return f&&Promise.all(p).then(()=>{ct.update(()=>{f&&ZU(t,f)})}),p}function Yy(t,e,n={}){var r;const a=mm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(l=n.transitionOverride);const c=a?()=>Promise.all(M2(t,a,n)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:E}=l;return E9(t,e,y+p,_,E,n)}:()=>Promise.resolve(),{when:d}=l;if(d){const[p,y]=d==="beforeChildren"?[c,f]:[f,c];return p().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function E9(t,e,n=0,r=0,a=1,l){const c=[],f=(t.variantChildren.size-1)*r,d=a===1?(p=0)=>p*r:(p=0)=>f-p*r;return Array.from(t.variantChildren).sort(w9).forEach((p,y)=>{p.notify("AnimationStart",e),c.push(Yy(p,e,{...l,delay:n+d(y)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(c)}function w9(t,e){return t.sortNodePosition(e)}function b9(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(l=>Yy(t,l,n));r=Promise.all(a)}else if(typeof e=="string")r=Yy(t,e,n);else{const a=typeof e=="function"?mm(t,e,n.custom):e;r=Promise.all(M2(t,a,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const S9=D0.length;function O2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?O2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<S9;n++){const r=D0[n],a=t.props[r];(Sc(a)||a===!1)&&(e[r]=a)}return e}const A9=[...I0].reverse(),R9=I0.length;function C9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>b9(t,n,r)))}function x9(t){let e=C9(t),n=ZS(),r=!0;const a=d=>(p,y)=>{var _;const E=mm(t,y,d==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:A,transitionEnd:D,...b}=E;p={...p,...b,...D}}return p};function l(d){e=d(t)}function c(d){const{props:p}=t,y=O2(t.parent)||{},_=[],E=new Set;let A={},D=1/0;for(let x=0;x<R9;x++){const k=A9[x],L=n[k],U=p[k]!==void 0?p[k]:y[k],X=Sc(U),G=k===d?L.isActive:null;G===!1&&(D=x);let Y=U===y[k]&&U!==p[k]&&X;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),L.protectedKeys={...A},!L.isActive&&G===null||!U&&!L.prevProp||fm(U)||typeof U=="boolean")continue;const R=I9(L.prevProp,U);let S=R||k===d&&L.isActive&&!Y&&X||x>D&&X,M=!1;const P=Array.isArray(U)?U:[U];let B=P.reduce(a(k),{});G===!1&&(B={});const{prevResolvedValues:H={}}=L,V={...H,...B},Qe=ue=>{S=!0,E.has(ue)&&(M=!0,E.delete(ue)),L.needsAnimating[ue]=!0;const de=t.getValue(ue);de&&(de.liveStyle=!1)};for(const ue in V){const de=B[ue],Re=H[ue];if(A.hasOwnProperty(ue))continue;let De=!1;Uy(de)&&Uy(Re)?De=!Kx(de,Re):De=de!==Re,De?de!=null?Qe(ue):E.add(ue):de!==void 0&&E.has(ue)?Qe(ue):L.protectedKeys[ue]=!0}L.prevProp=U,L.prevResolvedValues=B,L.isActive&&(A={...A,...B}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(Y&&R)||M)&&_.push(...P.map(ue=>({animation:ue,options:{type:k}})))}if(E.size){const x={};E.forEach(k=>{const L=t.getBaseTarget(k),U=t.getValue(k);U&&(U.liveStyle=!0),x[k]=L??null}),_.push({animation:x})}let b=!!_.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(_):Promise.resolve()}function f(d,p){var y;if(n[d].isActive===p)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(E=>{var A;return(A=E.animationState)===null||A===void 0?void 0:A.setActive(d,p)}),n[d].isActive=p;const _=c(d);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>n,reset:()=>{n=ZS(),r=!0}}}function I9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Kx(e,t):!1}function ja(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZS(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}class ca{constructor(e){this.isMounted=!1,this.node=e}update(){}}class D9 extends ca{constructor(e){super(e),e.animationState||(e.animationState=x9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let N9=0;class M9 extends ca{constructor(){super(...arguments),this.id=N9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const O9={animation:{Feature:D9},exit:{Feature:M9}};function xc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Yc(t){return{point:{x:t.pageX,y:t.pageY}}}const k9=t=>e=>G0(e)&&t(e,Yc(e));function ac(t,e,n,r){return xc(t,e,k9(n),r)}const JS=(t,e)=>Math.abs(t-e);function V9(t,e){const n=JS(t.x,e.x),r=JS(t.y,e.y);return Math.sqrt(n**2+r**2)}class k2{constructor(e,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jg(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=V9(_.offset,{x:0,y:0})>=3;if(!E&&!A)return;const{point:D}=_,{timestamp:b}=Jt;this.history.push({...D,timestamp:b});const{onStart:x,onMove:k}=this.handlers;E||(x&&x(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zg(E,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:A,onSessionEnd:D,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Jg(_.type==="pointercancel"?this.lastMoveEventInfo:Zg(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(_,x),D&&D(_,x)},!G0(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const c=Yc(e),f=Zg(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=Jt;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,Jg(f,this.history)),this.removeListeners=$c(ac(this.contextWindow,"pointermove",this.handlePointerMove),ac(this.contextWindow,"pointerup",this.handlePointerUp),ac(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ra(this.updatePoint)}}function Zg(t,e){return e?{point:e(t.point)}:t}function eA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jg({point:t},e){return{point:t,delta:eA(t,V2(e)),offset:eA(t,P9(e)),velocity:L9(e,.1)}}function P9(t){return t[0]}function V2(t){return t[t.length-1]}function L9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const a=V2(t);for(;n>=0&&(r=t[n],!(a.timestamp-r.timestamp>jr(e)));)n--;if(!r)return{x:0,y:0};const l=Br(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const P2=1e-4,U9=1-P2,j9=1+P2,L2=.01,B9=0-L2,z9=0+L2;function Xn(t){return t.max-t.min}function F9(t,e,n){return Math.abs(t-e)<=n}function tA(t,e,n,r=.5){t.origin=r,t.originPoint=pt(e.min,e.max,t.origin),t.scale=Xn(n)/Xn(e),t.translate=pt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=U9&&t.scale<=j9||isNaN(t.scale))&&(t.scale=1),(t.translate>=B9&&t.translate<=z9||isNaN(t.translate))&&(t.translate=0)}function oc(t,e,n,r){tA(t.x,e.x,n.x,r?r.originX:void 0),tA(t.y,e.y,n.y,r?r.originY:void 0)}function nA(t,e,n){t.min=n.min+e.min,t.max=t.min+Xn(e)}function H9(t,e,n){nA(t.x,e.x,n.x),nA(t.y,e.y,n.y)}function iA(t,e,n){t.min=e.min-n.min,t.max=t.min+Xn(e)}function lc(t,e,n){iA(t.x,e.x,n.x),iA(t.y,e.y,n.y)}function q9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?pt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?pt(n,t,r.max):Math.min(t,n)),t}function rA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function G9(t,{top:e,left:n,bottom:r,right:a}){return{x:rA(t.x,n,a),y:rA(t.y,e,r)}}function sA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function K9(t,e){return{x:sA(t.x,e.x),y:sA(t.y,e.y)}}function $9(t,e){let n=.5;const r=Xn(t),a=Xn(e);return a>r?n=Cl(e.min,e.max-r,t.min):r>a&&(n=Cl(t.min,t.max-a,e.min)),$r(0,1,n)}function Y9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qy=.35;function Q9(t=Qy){return t===!1?t=0:t===!0&&(t=Qy),{x:aA(t,"left","right"),y:aA(t,"top","bottom")}}function aA(t,e,n){return{min:oA(t,e),max:oA(t,n)}}function oA(t,e){return typeof t=="number"?t:t[e]||0}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),hl=()=>({x:lA(),y:lA()}),uA=()=>({min:0,max:0}),Dt=()=>({x:uA(),y:uA()});function hi(t){return[t("x"),t("y")]}function U2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function W9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ey(t){return t===void 0||t===1}function Xy({scale:t,scaleX:e,scaleY:n}){return!ey(t)||!ey(e)||!ey(n)}function za(t){return Xy(t)||j2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function j2(t){return cA(t.x)||cA(t.y)}function cA(t){return t&&t!=="0%"}function Dd(t,e,n){const r=t-n,a=e*r;return n+a}function hA(t,e,n,r,a){return a!==void 0&&(t=Dd(t,a,r)),Dd(t,n,r)+e}function Wy(t,e=0,n=1,r,a){t.min=hA(t.min,e,n,r,a),t.max=hA(t.max,e,n,r,a)}function B2(t,{x:e,y:n}){Wy(t.x,e.translate,e.scale,e.originPoint),Wy(t.y,n.translate,n.scale,n.originPoint)}const fA=.999999999999,dA=1.0000000000001;function Z9(t,e,n,r=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let f=0;f<a;f++){l=n[f],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&dl(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,B2(t,c)),r&&za(l.latestValues)&&dl(t,l.latestValues))}e.x<dA&&e.x>fA&&(e.x=1),e.y<dA&&e.y>fA&&(e.y=1)}function fl(t,e){t.min=t.min+e,t.max=t.max+e}function mA(t,e,n,r,a=.5){const l=pt(t.min,t.max,a);Wy(t,e,n,l,r)}function dl(t,e){mA(t.x,e.x,e.scaleX,e.scale,e.originX),mA(t.y,e.y,e.scaleY,e.scale,e.originY)}function z2(t,e){return U2(W9(t.getBoundingClientRect(),e))}function J9(t,e,n){const r=z2(t,n),{scroll:a}=e;return a&&(fl(r.x,a.offset.x),fl(r.y,a.offset.y)),r}const F2=({current:t})=>t?t.ownerDocument.defaultView:null,eB=new WeakMap;class tB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yc(y).point)},l=(y,_)=>{const{drag:E,dragPropagation:A,onDragStart:D}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$U(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hi(x=>{let k=this.getAxisMotionValue(x).get()||0;if(Zi.test(k)){const{projection:L}=this.visualElement;if(L&&L.layout){const U=L.layout.layoutBox[x];U&&(k=Xn(U)*(parseFloat(k)/100))}}this.originPoint[x]=k}),D&&ct.postRender(()=>D(y,_)),zy(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(y,_)=>{const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:D,onDrag:b}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:x}=_;if(A&&this.currentDirection===null){this.currentDirection=nB(x),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,x),this.updateAxis("y",_.point,x),this.visualElement.render(),b&&b(y,_)},f=(y,_)=>this.stop(y,_),d=()=>hi(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new k2(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:F2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&ct.postRender(()=>l(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:a}=this.getProps();if(!r||!Vf(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=q9(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;n&&ul(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=G9(a.layoutBox,n):this.constraints=!1,this.elastic=Q9(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&hi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Y9(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ul(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=J9(r,a.root,this.visualElement.getTransformPagePoint());let c=K9(a.layout.layoutBox,l);if(n){const f=n(X9(c));this.hasMutatedConstraints=!!f,f&&(c=U2(f))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=hi(y=>{if(!Vf(y,n,this.currentDirection))return;let _=d&&d[y]||{};c&&(_={min:0,max:0});const E=a?200:1e6,A=a?40:1e7,D={type:"inertia",velocity:r?e[y]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...l,..._};return this.startAxisValueAnimation(y,D)});return Promise.all(p).then(f)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return zy(this.visualElement,e),r.start(i_(e,r,0,n,this.visualElement,!1))}stopAnimation(){hi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hi(n=>{const{drag:r}=this.getProps();if(!Vf(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[n];l.set(e[n]-pt(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ul(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};hi(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();a[c]=$9({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hi(c=>{if(!Vf(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:p}=this.constraints[c];f.set(pt(d,p,a[c]))})}addListeners(){if(!this.visualElement.current)return;eB.set(this.visualElement,this);const e=this.visualElement.current,n=ac(e,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ul(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ct.read(r);const c=xc(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(hi(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=d[y].translate,_.set(_.get()+d[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=Qy,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Vf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function nB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iB extends ca{constructor(e){super(e),this.removeGroupControls=Yn,this.removeListeners=Yn,this.controls=new tB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const pA=t=>(e,n)=>{t&&ct.postRender(()=>t(e,n))};class rB extends ca{constructor(){super(...arguments),this.removePointerDownListener=Yn}onPointerDown(e){this.session=new k2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:F2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:pA(e),onStart:pA(n),onMove:r,onEnd:(l,c)=>{delete this.session,a&&ct.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=ac(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=gA(t,e.target.x),r=gA(t,e.target.y);return`${n}% ${r}%`}},sB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,a=sa.parse(t);if(a.length>5)return r;const l=sa.createTransformer(t),c=typeof a[0]!="number"?1:0,f=n.x.scale*e.x,d=n.y.scale*e.y;a[0+c]/=f,a[1+c]/=d;const p=pt(f,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=p),typeof a[3+c]=="number"&&(a[3+c]/=p),l(a)}};class aB extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=e;RU(oB),l&&(n.group&&n.group.add(l),r&&r.register&&a&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Jf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:a,isPresent:l}=this.props,c=r.projection;return c&&(c.isPresent=l,a||e.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||ct.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),M0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function H2(t){const[e,n]=Ax(),r=N.useContext(S0);return O.jsx(aB,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(Ox),isPresent:e,safeToRemove:n})}const oB={borderRadius:{...qu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qu,borderTopRightRadius:qu,borderBottomLeftRadius:qu,borderBottomRightRadius:qu,boxShadow:sB};function lB(t,e,n){const r=hn(t)?t:Rc(t);return r.start(i_("",r,e,n)),r.animation}function uB(t){return t instanceof SVGElement&&t.tagName!=="svg"}const cB=(t,e)=>t.depth-e.depth;class hB{constructor(){this.children=[],this.isDirty=!1}add(e){K0(this.children,e),this.isDirty=!0}remove(e){$0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cB),this.isDirty=!1,this.children.forEach(e)}}function fB(t,e){const n=Ji.now(),r=({timestamp:a})=>{const l=a-n;l>=e&&(ra(r),t(l-e))};return ct.read(r,!0),()=>ra(r)}const q2=["TopLeft","TopRight","BottomLeft","BottomRight"],dB=q2.length,yA=t=>typeof t=="string"?parseFloat(t):t,vA=t=>typeof t=="number"||we.test(t);function mB(t,e,n,r,a,l){a?(t.opacity=pt(0,n.opacity!==void 0?n.opacity:1,pB(r)),t.opacityExit=pt(e.opacity!==void 0?e.opacity:1,0,gB(r))):l&&(t.opacity=pt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<dB;c++){const f=`border${q2[c]}Radius`;let d=_A(e,f),p=_A(n,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||vA(d)===vA(p)?(t[f]=Math.max(pt(yA(d),yA(p),r),0),(Zi.test(p)||Zi.test(d))&&(t[f]+="%")):t[f]=p}(e.rotate||n.rotate)&&(t.rotate=pt(e.rotate||0,n.rotate||0,r))}function _A(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pB=G2(0,.5,u2),gB=G2(.5,.95,Yn);function G2(t,e,n){return r=>r<t?0:r>e?1:n(Cl(t,e,r))}function TA(t,e){t.min=e.min,t.max=e.max}function ci(t,e){TA(t.x,e.x),TA(t.y,e.y)}function EA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wA(t,e,n,r,a){return t-=e,t=Dd(t,1/n,r),a!==void 0&&(t=Dd(t,1/a,r)),t}function yB(t,e=0,n=1,r=.5,a,l=t,c=t){if(Zi.test(e)&&(e=parseFloat(e),e=pt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=pt(l.min,l.max,r);t===l&&(f-=e),t.min=wA(t.min,e,n,f,a),t.max=wA(t.max,e,n,f,a)}function bA(t,e,[n,r,a],l,c){yB(t,e[n],e[r],e[a],e.scale,l,c)}const vB=["x","scaleX","originX"],_B=["y","scaleY","originY"];function SA(t,e,n,r){bA(t.x,e,vB,n?n.x:void 0,r?r.x:void 0),bA(t.y,e,_B,n?n.y:void 0,r?r.y:void 0)}function AA(t){return t.translate===0&&t.scale===1}function K2(t){return AA(t.x)&&AA(t.y)}function RA(t,e){return t.min===e.min&&t.max===e.max}function TB(t,e){return RA(t.x,e.x)&&RA(t.y,e.y)}function CA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $2(t,e){return CA(t.x,e.x)&&CA(t.y,e.y)}function xA(t){return Xn(t.x)/Xn(t.y)}function IA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class EB{constructor(){this.members=[]}add(e){K0(this.members,e),e.scheduleRender()}remove(e){if($0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wB(t,e,n){let r="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=n?.z||0;if((a||l||c)&&(r=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:_,rotateY:E,skewX:A,skewY:D}=n;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),_&&(r+=`rotateX(${_}deg) `),E&&(r+=`rotateY(${E}deg) `),A&&(r+=`skewX(${A}deg) `),D&&(r+=`skewY(${D}deg) `)}const f=t.x.scale*e.x,d=t.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const Fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zu=typeof window<"u"&&window.MotionDebug!==void 0,ty=["","X","Y","Z"],bB={visibility:"hidden"},DA=1e3;let SB=0;function ny(t,e,n,r){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Y2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=n2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ct,!(a||l))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Y2(r)}function Q2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(c={},f=e?.()){this.id=SB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zu&&(Fa.totalNodes=Fa.resolvedTargetDeltas=Fa.recalculatedProjection=0),this.nodes.forEach(CB),this.nodes.forEach(MB),this.nodes.forEach(OB),this.nodes.forEach(xB),Zu&&window.MotionDebug.record(Fa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hB)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Y0),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uB(c),this.instance=c;const{layoutId:d,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(p||d)&&(this.isLayoutDirty=!0),t){let _;const E=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=fB(E,250),Jf.hasAnimatedSinceResize&&(Jf.hasAnimatedSinceResize=!1,this.nodes.forEach(MA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:A,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||y.getDefaultTransition()||UB,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=y.getProps(),L=!this.targetLayout||!$2(this.targetLayout,D)||A,U=!E&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||U||E&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,U);const X={...F0(b,"layout"),onPlay:x,onComplete:k};(y.shouldReduceMotion||this.options.layoutRoot)&&(X.delay=0,X.type=!1),this.startAnimation(X)}else E||MA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ra(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kB),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Y2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NA);return}this.isUpdating||this.nodes.forEach(DB),this.isUpdating=!1,this.nodes.forEach(NB),this.nodes.forEach(AB),this.nodes.forEach(RB),this.clearAllSnapshots();const f=Ji.now();Jt.delta=$r(0,1e3/60,f-Jt.timestamp),Jt.timestamp=f,Jt.isProcessing=!0,Kg.update.process(Jt),Kg.preRender.process(Jt),Kg.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,M0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IB),this.sharedNodes.forEach(VB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!K2(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&(f||za(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),jB(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:f}=this.options;if(!f)return Dt();const d=f.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(BB))){const{scroll:y}=this.root;y&&(fl(d.x,y.offset.x),fl(d.y,y.offset.y))}return d}removeElementScroll(c){var f;const d=Dt();if(ci(d,c),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:_,options:E}=y;y!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&ci(d,c),fl(d.x,_.offset.x),fl(d.y,_.offset.y))}return d}applyTransform(c,f=!1){const d=Dt();ci(d,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&dl(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),za(y.latestValues)&&dl(d,y.latestValues)}return za(this.latestValues)&&dl(d,this.latestValues),d}removeTransform(c){const f=Dt();ci(f,c);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!za(p.latestValues))continue;Xy(p.latestValues)&&p.updateSnapshot();const y=Dt(),_=p.measurePageBox();ci(y,_),SA(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return za(this.latestValues)&&SA(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),lc(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),B2(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),lc(this.relativeTargetOrigin,this.target,A.target),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zu&&Fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xy(this.parent.latestValues)||j2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(p=!1),p)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;ci(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;Z9(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=Dt());const{target:D}=f;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EA(this.prevProjectionDelta.x,this.projectionDelta.x),EA(this.prevProjectionDelta.y,this.projectionDelta.y)),oc(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!IA(this.projectionDelta.x,this.prevProjectionDelta.x)||!IA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Zu&&Fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hl(),this.projectionDelta=hl(),this.projectionDeltaWithTransform=hl()}setAnimationOrigin(c,f=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},_=hl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const E=Dt(),A=d?d.source:void 0,D=this.layout?this.layout.source:void 0,b=A!==D,x=this.getStack(),k=!x||x.members.length<=1,L=!!(b&&!k&&this.options.crossfade===!0&&!this.path.some(LB));this.animationProgress=0;let U;this.mixTargetDelta=X=>{const G=X/1e3;OA(_.x,c.x,G),OA(_.y,c.y,G),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lc(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PB(this.relativeTarget,this.relativeTargetOrigin,E,G),U&&TB(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Dt()),ci(U,this.relativeTarget)),b&&(this.animationValues=y,mB(y,p,this.latestValues,G,L,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ra(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{Jf.hasAnimatedSinceResize=!0,this.currentAnimation=lB(0,DA,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:y}=c;if(!(!f||!d||!p)){if(this!==c&&this.layout&&p&&X2(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Dt();const _=Xn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+_;const E=Xn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+E}ci(f,d),dl(f,y),oc(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new EB),this.sharedNodes.get(c).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&ny("z",c,p,this.animationValues);for(let y=0;y<ty.length;y++)ny(`rotate${ty[y]}`,c,p,this.animationValues),ny(`skew${ty[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}getProjectionStyles(c){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bB;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Wf(c?.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Wf(c?.pointerEvents)||""),this.hasProjected&&!za(this.latestValues)&&(b.transform=y?y({},""):"none",this.hasProjected=!1),b}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=wB(this.projectionDeltaWithTransform,this.treeScale,E),y&&(p.transform=y(E,p.transform));const{x:A,y:D}=this.projectionDelta;p.transformOrigin=`${A.origin*100}% ${D.origin*100}% 0`,_.animationValues?p.opacity=_===this?(d=(f=E.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const b in Ad){if(E[b]===void 0)continue;const{correct:x,applyTo:k}=Ad[b],L=p.transform==="none"?E[b]:x(E[b],_);if(k){const U=k.length;for(let X=0;X<U;X++)p[k[X]]=L}else p[b]=L}return this.options.layoutId&&(p.pointerEvents=_===this?Wf(c?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(NA),this.root.sharedNodes.clear()}}}function AB(t){t.updateLayout()}function RB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:l}=t.options,c=n.source!==t.layout.source;l==="size"?hi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=Xn(E);E.min=r[_].min,E.max=E.min+A}):X2(l,n.layoutBox,r)&&hi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=Xn(r[_]);E.max=E.min+A,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+A)});const f=hl();oc(f,r,n.layoutBox);const d=hl();c?oc(d,t.applyTransform(a,!0),n.measuredBox):oc(d,r,n.layoutBox);const p=!K2(f);let y=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:A}=_;if(E&&A){const D=Dt();lc(D,n.layoutBox,E.layoutBox);const b=Dt();lc(b,r,A.layoutBox),$2(D,b)||(y=!0),_.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=D,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:p,hasRelativeTargetChanged:y})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CB(t){Zu&&Fa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IB(t){t.clearSnapshot()}function NA(t){t.clearMeasurements()}function DB(t){t.isLayoutDirty=!1}function NB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function MA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function MB(t){t.resolveTargetDelta()}function OB(t){t.calcProjection()}function kB(t){t.resetSkewAndRotation()}function VB(t){t.removeLeadSnapshot()}function OA(t,e,n){t.translate=pt(e.translate,0,n),t.scale=pt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kA(t,e,n,r){t.min=pt(e.min,n.min,r),t.max=pt(e.max,n.max,r)}function PB(t,e,n,r){kA(t.x,e.x,n.x,r),kA(t.y,e.y,n.y,r)}function LB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const UB={duration:.45,ease:[.4,0,.1,1]},VA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PA=VA("applewebkit/")&&!VA("chrome/")?Math.round:Yn;function LA(t){t.min=PA(t.min),t.max=PA(t.max)}function jB(t){LA(t.x),LA(t.y)}function X2(t,e,n){return t==="position"||t==="preserve-aspect"&&!F9(xA(e),xA(n),.2)}function BB(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const zB=Q2({attachResizeListener:(t,e)=>xc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iy={current:void 0},W2=Q2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!iy.current){const t=new zB({});t.mount(window),t.setOptions({layoutScroll:!0}),iy.current=t}return iy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FB={pan:{Feature:rB},drag:{Feature:iB,ProjectionNode:W2,MeasureLayout:H2}};function UA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=r[a];l&&ct.postRender(()=>l(e,Yc(e)))}class HB extends ca{mount(){const{current:e}=this.node;e&&(this.unmount=FU(e,n=>(UA(this.node,n,"Start"),r=>UA(this.node,r,"End"))))}unmount(){}}class qB extends ca{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$c(xc(this.node.current,"focus",()=>this.onFocus()),xc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jA(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=r[a];l&&ct.postRender(()=>l(e,Yc(e)))}class GB extends ca{mount(){const{current:e}=this.node;e&&(this.unmount=KU(e,n=>(jA(this.node,n,"Start"),(r,{success:a})=>jA(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zy=new WeakMap,ry=new WeakMap,KB=t=>{const e=Zy.get(t.target);e&&e(t)},$B=t=>{t.forEach(KB)};function YB({root:t,...e}){const n=t||document;ry.has(n)||ry.set(n,{});const r=ry.get(n),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver($B,{root:t,...e})),r[a]}function QB(t,e,n){const r=YB(e);return Zy.set(t,n),r.observe(t),()=>{Zy.delete(t),r.unobserve(t)}}const XB={some:0,all:1};class WB extends ca{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:XB[a]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),E=p?y:_;E&&E(d)};return QB(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZB(e,n))&&this.startObserver()}unmount(){}}function ZB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const JB={inView:{Feature:WB},tap:{Feature:GB},focus:{Feature:qB},hover:{Feature:HB}},ez={layout:{ProjectionNode:W2,MeasureLayout:H2}},Jy={current:null},Z2={current:!1};function tz(){if(Z2.current=!0,!!C0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jy.current=t.matches;t.addListener(e),e()}else Jy.current=!1}const nz=[...b2,ln,sa],iz=t=>nz.find(w2(t)),BA=new WeakMap;function rz(t,e,n){for(const r in e){const a=e[r],l=n[r];if(hn(a))t.addValue(r,a);else if(hn(l))t.addValue(r,Rc(a,{owner:t}));else if(l!==a)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(r);t.addValue(r,Rc(c!==void 0?c:a,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Ji.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ct.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:y}=c;this.onUpdate=y,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=dm(n),this.isVariantNode=Nx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in E){const D=E[A];d[A]!==void 0&&hn(D)&&D.set(d[A],!1)}}mount(e){this.current=e,BA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Z2.current||tz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BA.delete(this.current),this.projection&&this.projection.unmount(),ra(this.notifyUpdate),ra(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=po.has(e),a=n.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&ct.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xl){const n=xl[e];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zA.length;r++){const a=zA[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=rz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Rc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(T2(a)||h2(a))?a=parseFloat(a):!iz(a)&&sa.test(n)&&(a=y2(e,n)),this.setBaseTarget(e,hn(a)?a.get():a)),hn(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const c=k0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);c&&(a=c[e])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!hn(l)?l:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Y0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class J2 extends sz{constructor(){super(...arguments),this.KeyframeResolver=S2}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function az(t){return window.getComputedStyle(t)}class oz extends J2{constructor(){super(...arguments),this.type="html",this.renderInstance=Bx}readValueFromInstance(e,n){if(po.has(n)){const r=J0(n);return r&&r.default||0}else{const r=az(e),a=(Lx(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return z2(e,n)}build(e,n,r){L0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return z0(e,n,r)}}class lz extends J2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const r=J0(n);return r&&r.default||0}return n=zx.has(n)?n:N0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return qx(e,n,r)}build(e,n,r){U0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,a){Fx(e,n,r,a)}mount(e){this.isSVGTag=B0(e.tagName),super.mount(e)}}const uz=(t,e)=>O0(t)?new lz(e):new oz(e,{allowProjection:t!==N.Fragment}),cz=VU({...O9,...JB,...FB,...ez},uz),wn=X5(cz);function hz(){const{signInWithGoogle:t,loading:e,error:n}=qc();return O.jsx("div",{className:"min-h-full flex flex-col items-center justify-center px-4 bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:O.jsxs(wn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-sm",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsx(wn.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2,damping:15},className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),O.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CMail"})]}),n&&O.jsx(wn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:O.jsx("p",{className:"text-sm text-red-600 text-center",children:n})}),O.jsx(wn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,disabled:e,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-shadow disabled:opacity-50 disabled:cursor-not-allowed",children:e?O.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs(O.Fragment,{children:[O.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[O.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),O.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),O.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),O.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),O.jsx("span",{className:"text-gray-700 font-medium",children:"Sign in with Google"})]})})]})})}const Pf=50,il="duoboard_messages";function fz(t){const[e,n]=N.useState([]),[r,a]=N.useState(!0),[l,c]=N.useState(!1),[f,d]=N.useState(!0),[p,y]=N.useState(null),_=N.useRef(null),E=N.useRef(null),A=N.useCallback(async U=>{const X=U.filter(S=>S.replyTo).map(S=>S.replyTo);if(X.length===0)return U.map(S=>({...S,replyToMessage:null}));const G=[...new Set(X)],Y=await Promise.all(G.map(S=>Tc(Nn(dt,il,S)))),R=new Map;return Y.forEach(S=>{S.exists()&&R.set(S.id,{id:S.id,...S.data()})}),U.map(S=>({...S,replyToMessage:S.replyTo&&R.get(S.replyTo)||null}))},[]);N.useEffect(()=>{if(!t){a(!1);return}a(!0),y(null);const U=Ai(dt,il),X=Ha(U,Ed("timestamp","desc"),cS(Pf));return h0(X,async Y=>{try{const R=[];let S=null;Y.forEach(P=>{R.push({id:P.id,...P.data()}),S=P}),R.length>0&&!E.current&&(E.current=R[0].timestamp),_.current=S,d(R.length===Pf);const M=await A(R);n(M.reverse()),a(!1)}catch(R){console.error("Error fetching messages:",R),y("Failed to load messages"),a(!1)}},Y=>{console.error("Snapshot error:",Y),y("Failed to connect to messages"),a(!1)})},[t,A]);const D=N.useCallback(async()=>{if(!(!t||l||!f||!_.current)){c(!0);try{const U=Ai(dt,il),X=Ha(U,Ed("timestamp","desc"),GL(_.current),cS(Pf)),G=await Qu(X),Y=[];let R=null;if(G.forEach(S=>{Y.push({id:S.id,...S.data()}),R=S}),R&&(_.current=R),d(Y.length===Pf),Y.length>0){const S=await A(Y);n(M=>[...S.reverse(),...M])}}catch(U){console.error("Error loading more messages:",U),y("Failed to load more messages")}finally{c(!1)}}},[t,l,f,A]),b=N.useCallback(async(U,X)=>{if(!(!t||!U.trim()))try{const G={senderId:t,content:U.trim(),imageUrl:null,timestamp:Ec(),replyTo:X||null,likes:{}};await wd(Ai(dt,il),G)}catch(G){throw console.error("Error sending message:",G),new Error("Failed to send message")}},[t]),x=N.useCallback(async(U,X)=>{if(t)try{const Y=await(await fetch(U.dataUrl)).blob(),R=`duoboard_drawings/${t}_${Date.now()}.png`,S=WC(bx,R);await QC(S,Y);const M=await XC(S),P={senderId:t,content:null,imageUrl:M,timestamp:Ec(),replyTo:X||null,likes:{}};await wd(Ai(dt,il),P)}catch(G){throw console.error("Error sending drawing:",G),new Error("Failed to send drawing")}},[t]),k=N.useCallback(async U=>{if(t)try{const X=Nn(dt,il,U),G=await Tc(X);if(!G.exists())return;const R={...G.data().likes||{}};R[t]?delete R[t]:R[t]=!0,await Vy(X,{likes:R}),n(S=>S.map(M=>M.id===U?{...M,likes:R}:M))}catch(X){console.error("Error toggling like:",X)}},[t]),L=N.useCallback(U=>e.find(X=>X.id===U),[e]);return{messages:e,loading:r,loadingMore:l,hasMore:f,error:p,loadMore:D,sendMessage:b,sendDrawing:x,toggleLike:k,getMessageById:L}}const Lf="duoboard_lists",zs="duoboard_listItems",dz="duoboard_messages";function mz(t){const[e,n]=N.useState([]),[r,a]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{if(!t){a(!1);return}a(!0);const D=Ai(dt,Lf),b=Ha(D,qL(Bs("visibility","==","public"),Bs("ownerId","==",t)),Ed("createdAt","desc"));return h0(b,k=>{const L=[];k.forEach(U=>{L.push({id:U.id,...U.data()})}),n(L),a(!1)},k=>{console.error("Error fetching lists:",k),c("Failed to load lists"),a(!1)})},[t]);const f=N.useCallback(async(D,b,x,k)=>{if(!t)return null;try{const L={name:D,ownerId:t,visibility:b,type:x,emoji:k||"",createdAt:Ec()};return(await wd(Ai(dt,Lf),L)).id}catch(L){throw console.error("Error creating list:",L),new Error("Failed to create list")}},[t]),d=N.useCallback(async(D,b)=>{if(t)try{const x=Nn(dt,Lf,D);await Vy(x,b)}catch(x){throw console.error("Error updating list:",x),new Error("Failed to update list")}},[t]),p=N.useCallback(async D=>{if(t)try{const b=Ha(Ai(dt,zs),Bs("listId","==",D)),k=(await Qu(b)).docs.map(L=>Ug(Nn(dt,zs,L.id)));await Promise.all(k),await Ug(Nn(dt,Lf,D))}catch(b){throw console.error("Error deleting list:",b),new Error("Failed to delete list")}},[t]),y=N.useCallback(async(D,b)=>{if(t)try{const x=Ha(Ai(dt,zs),Bs("listId","==",D),Bs("messageId","==",b));if(!(await Qu(x)).empty)return;const L={listId:D,messageId:b,addedAt:Ec(),completed:!1};await wd(Ai(dt,zs),L)}catch(x){throw console.error("Error adding message to list:",x),new Error("Failed to add to list")}},[t]),_=N.useCallback(async(D,b)=>{if(t)try{const x=Ha(Ai(dt,zs),Bs("listId","==",D),Bs("messageId","==",b)),L=(await Qu(x)).docs.map(U=>Ug(Nn(dt,zs,U.id)));await Promise.all(L)}catch(x){throw console.error("Error removing from list:",x),new Error("Failed to remove from list")}},[t]),E=N.useCallback(async D=>{if(t)try{const b=Nn(dt,zs,D),x=await Tc(b);if(x.exists()){const k=x.data().completed||!1;await Vy(b,{completed:!k})}}catch(b){throw console.error("Error toggling item completion:",b),new Error("Failed to update item")}},[t]),A=N.useCallback(async D=>{try{const b=Ha(Ai(dt,zs),Bs("listId","==",D),Ed("addedAt","desc")),x=await Qu(b),k=[];x.forEach(Y=>{k.push({id:Y.id,...Y.data()})});const U=k.map(Y=>Y.messageId).map(Y=>Tc(Nn(dt,dz,Y))),X=await Promise.all(U),G=new Map;return X.forEach(Y=>{Y.exists()&&G.set(Y.id,{id:Y.id,...Y.data()})}),k.map(Y=>({...Y,message:G.get(Y.messageId)||null}))}catch(b){throw console.error("Error fetching list items:",b),new Error("Failed to load list items")}},[]);return{lists:e,loading:r,error:l,createList:f,updateList:d,deleteList:p,addMessageToList:y,removeFromList:_,toggleItemCompleted:E,getListItems:A}}function pz({userId:t}){const[e,n]=N.useState("default"),[r,a]=N.useState(null),[l,c]=N.useState(!1),[f,d]=N.useState(null),[p,y]=N.useState(null);N.useEffect(()=>{(async()=>{if(!("Notification"in window)){n("unsupported");return}n(Notification.permission);const A=await L5();y(A)})()},[]),N.useEffect(()=>{if(!p)return;const E=V5(p,A=>{if(console.log("Foreground message received:",A),Notification.permission==="granted"&&A.notification){const{title:D,body:b}=A.notification;new Notification(D||"New Message",{body:b||"You have a new message",icon:"./icons/icon-192.svg",tag:"cmail-foreground"})}});return()=>E()},[p]),N.useEffect(()=>{t&&r&&ky(Nn(dt,"duoboard_users",t),{fcmToken:r},{merge:!0}).catch(E=>{console.error("Error saving FCM token:",E)})},[t,r]);const _=N.useCallback(async()=>{if(!p){d("Push notifications are not supported in this browser");return}{d("VAPID key not configured. See Firebase Console > Cloud Messaging.");return}},[p]);return{permission:e,token:r,loading:l,error:f,requestPermission:_}}function gz({title:t="CMail",showProfile:e=!0,onListsClick:n}){const{user:r,signOut:a,uploadAvatar:l}=qc(),c=N.useRef(null),{permission:f,loading:d,requestPermission:p}=pz({userId:r?.uid}),y=async E=>{const A=E.target.files?.[0];if(A)try{await l(A)}catch{}c.current&&(c.current.value="")},_=r?.customPhotoURL||r?.photoURL;return O.jsxs("header",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200 safe-area-top",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[e&&O.jsxs(O.Fragment,{children:[O.jsx("input",{ref:c,id:"avatar-upload",type:"file",accept:"image/*",onChange:y,className:"hidden"}),O.jsxs("label",{htmlFor:"avatar-upload",className:"relative w-8 h-8 rounded-full overflow-hidden group cursor-pointer","aria-label":"Change profile photo",children:[_?O.jsx("img",{src:_,alt:r?.displayName,className:"w-8 h-8 rounded-full object-cover"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.displayName?.[0]||"?"}),O.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),O.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:t})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[f!=="unsupported"&&O.jsx("button",{onClick:f!=="granted"?p:void 0,disabled:d||f==="denied",className:`p-2 rounded-full transition-colors ${f==="granted"?"text-indigo-600":f==="denied"?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked":"Enable notifications",title:f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked - check browser settings":"Click to enable notifications",children:d?O.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:f==="granted"?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}),f==="denied"&&O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364L5.636 5.636"})]})}),n&&O.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"View lists",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),O.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Sign out",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}function yz({onDoubleTap:t,delay:e=300}){const n=N.useRef(0);return N.useCallback(()=>{const a=Date.now(),l=a-n.current;l>0&&l<e?(t(),n.current=0):n.current=a},[t,e])}function vz({onSwipeRight:t,onSwipeLeft:e,threshold:n=80}){const r=N.useRef(0),[a,l]=N.useState({swiping:!1,offset:0}),c=N.useCallback(p=>{r.current=p.touches[0].clientX,l({swiping:!0,offset:0})},[]),f=N.useCallback(p=>{if(!a.swiping)return;const _=p.touches[0].clientX-r.current;_>0&&t?l({swiping:!0,offset:Math.min(_,n*1.5)}):_<0&&e&&l({swiping:!0,offset:Math.max(_,-n*1.5)})},[a.swiping,n,t,e]),d=N.useCallback(()=>{const p=a.offset;p>n&&t?t():p<-n&&e&&e(),l({swiping:!1,offset:0})},[a.offset,n,t,e]);return{handlers:{onTouchStart:c,onTouchMove:f,onTouchEnd:d},swipeState:a}}function _z({message:t,isOwn:e,senderPhoto:n,senderName:r,onDoubleTap:a,onSwipeReply:l,onSwipeAddToList:c,showLikeAnimation:f,currentUserId:d,onNavigateToMessage:p,onImageLoad:y}){const _=yz({onDoubleTap:a}),{handlers:E,swipeState:A}=vz({onSwipeRight:l,onSwipeLeft:c}),D=t.likes&&Object.keys(t.likes).length>0,b=t.likes?.[d],x=t.likes?Object.keys(t.likes).length:0,k=L=>L?(L.toDate?L.toDate():new Date(L)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"";return O.jsxs(wn.div,{className:`flex items-end gap-2 mb-3 ${e?"flex-row-reverse":""}`,style:{transform:`translateX(${A.offset}px)`,transition:A.swiping?"none":"transform 0.2s ease-out"},...E,children:[O.jsx(Za,{children:A.offset>40&&O.jsx(wn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute left-0 flex items-center justify-center w-10 h-10 bg-indigo-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})}),O.jsx(Za,{children:A.offset<-40&&O.jsx(wn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute right-0 flex items-center justify-center w-10 h-10 bg-green-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})}),!e&&O.jsx("div",{className:"flex-shrink-0 w-8 h-8",children:n?O.jsx("img",{src:n,alt:r||"User",className:"w-8 h-8 rounded-full"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.[0]||"?"})}),O.jsxs("div",{className:`relative max-w-[75%] ${e?"items-end":"items-start"}`,onClick:_,children:[t.replyToMessage&&O.jsxs("button",{onClick:L=>{L.stopPropagation(),p?.(t.replyTo)},className:`block mb-1 p-2 text-xs bg-gray-100 rounded-lg border-l-2 border-indigo-400 max-w-full truncate text-left ${e?"ml-auto":""}`,children:[O.jsx("span",{className:"text-gray-500",children:"Replying to: "}),O.jsx("span",{className:"text-gray-700",children:t.replyToMessage.content||"(drawing)"})]}),O.jsxs("div",{className:`relative rounded-2xl px-4 py-2 ${e?"bg-indigo-600 text-white rounded-br-md":"bg-white border border-gray-200 text-gray-900 rounded-bl-md"}`,children:[t.imageUrl&&O.jsx("img",{src:t.imageUrl,alt:"Drawing",className:"max-w-full rounded-lg mb-1",style:{maxHeight:"200px"},onLoad:y}),t.content&&O.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:t.content}),O.jsx(Za,{children:f&&O.jsx(wn.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})}),D&&!f&&O.jsxs("div",{className:`absolute -bottom-2 ${e?"left-2":"right-2"} flex items-center gap-0.5 bg-white rounded-full px-1.5 py-0.5 shadow-sm border border-gray-100`,children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-3.5 h-3.5 ${b?"text-red-500":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),x>1&&O.jsx("span",{className:"text-xs text-gray-600",children:x})]})]}),O.jsx("p",{className:`mt-1 text-xs text-gray-400 ${e?"text-right":"text-left"}`,children:k(t.timestamp)})]})]})}function Tz({onSend:t,onDrawClick:e,replyingTo:n,onCancelReply:r,disabled:a}){const[l,c]=N.useState(""),f=N.useRef(null);N.useEffect(()=>{n&&f.current&&f.current.focus()},[n]);const d=y=>{y.preventDefault(),l.trim()&&!a&&(t(l.trim()),c(""))},p=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),d(y))};return O.jsxs("div",{className:"border-t border-gray-200 bg-white safe-area-bottom",children:[O.jsx(Za,{children:n&&O.jsx(wn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:O.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200",children:[O.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[O.jsx("div",{className:"w-1 h-8 bg-indigo-500 rounded-full"}),O.jsxs("div",{className:"min-w-0",children:[O.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Replying"}),O.jsx("p",{className:"text-sm text-gray-600 truncate",children:n.content||"(drawing)"})]})]}),O.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})}),O.jsxs("form",{onSubmit:d,className:"flex items-end gap-2 p-3",children:[O.jsx("button",{type:"button",onClick:e,disabled:a,className:"flex-shrink-0 p-2.5 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors disabled:opacity-50","aria-label":"Open drawing canvas",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("textarea",{ref:f,value:l,onChange:y=>c(y.target.value),onKeyDown:p,placeholder:"Message...",disabled:a,rows:1,className:"w-full px-4 py-2.5 bg-gray-100 rounded-2xl resize-none text-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white disabled:opacity-50 transition-colors",style:{maxHeight:"120px",minHeight:"44px"}})}),O.jsx("button",{type:"submit",disabled:!l.trim()||a,className:"flex-shrink-0 p-2.5 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:hover:bg-indigo-600","aria-label":"Send message",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ev.apply(null,arguments)}function FA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tv(t,e){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tv(t,e)}function Ez(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tv(t,e)}var HA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wz(t,e){return!!(t===e||HA(t)&&HA(e))}function bz(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!wz(t[n],e[n]))return!1;return!0}function sy(t,e){e===void 0&&(e=bz);var n,r=[],a,l=!1;function c(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return l&&n===this&&e(f,r)||(a=t.apply(this,f),l=!0,n=this,r=f),a}return c}var Sz=typeof performance=="object"&&typeof performance.now=="function",qA=Sz?function(){return performance.now()}:function(){return Date.now()};function GA(t){cancelAnimationFrame(t.id)}function Az(t,e){var n=qA();function r(){qA()-n>=e?t.call(null):a.id=requestAnimationFrame(r)}var a={id:requestAnimationFrame(r)};return a}var ay=-1;function KA(t){if(t===void 0&&(t=!1),ay===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),ay=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ay}var rl=null;function $A(t){if(t===void 0&&(t=!1),rl===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?rl="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?rl="negative":rl="positive-ascending"),document.body.removeChild(e),rl}return rl}var Rz=150,Cz=function(e,n){return e};function xz(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,a=t.getItemSize,l=t.getOffsetForIndexAndAlignment,c=t.getStartIndexForOffset,f=t.getStopIndexForStartIndex,d=t.initInstanceProps,p=t.shouldResetStyleCacheOnItemSizeChange,y=t.validateProps;return e=(function(_){Ez(E,_);function E(D){var b;return b=_.call(this,D)||this,b._instanceProps=d(b.props,FA(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:FA(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=sy(function(x,k,L,U){return b.props.onItemsRendered({overscanStartIndex:x,overscanStopIndex:k,visibleStartIndex:L,visibleStopIndex:U})}),b._callOnScroll=void 0,b._callOnScroll=sy(function(x,k,L){return b.props.onScroll({scrollDirection:x,scrollOffset:k,scrollUpdateWasRequested:L})}),b._getItemStyle=void 0,b._getItemStyle=function(x){var k=b.props,L=k.direction,U=k.itemSize,X=k.layout,G=b._getItemStyleCache(p&&U,p&&X,p&&L),Y;if(G.hasOwnProperty(x))Y=G[x];else{var R=n(b.props,x,b._instanceProps),S=a(b.props,x,b._instanceProps),M=L==="horizontal"||X==="horizontal",P=L==="rtl",B=M?R:0;G[x]=Y={position:"absolute",left:P?void 0:B,right:P?B:void 0,top:M?0:R,height:M?"100%":S,width:M?S:"100%"}}return Y},b._getItemStyleCache=void 0,b._getItemStyleCache=sy(function(x,k,L){return{}}),b._onScrollHorizontal=function(x){var k=x.currentTarget,L=k.clientWidth,U=k.scrollLeft,X=k.scrollWidth;b.setState(function(G){if(G.scrollOffset===U)return null;var Y=b.props.direction,R=U;if(Y==="rtl")switch($A()){case"negative":R=-U;break;case"positive-descending":R=X-L-U;break}return R=Math.max(0,Math.min(R,X-L)),{isScrolling:!0,scrollDirection:G.scrollOffset<R?"forward":"backward",scrollOffset:R,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(x){var k=x.currentTarget,L=k.clientHeight,U=k.scrollHeight,X=k.scrollTop;b.setState(function(G){if(G.scrollOffset===X)return null;var Y=Math.max(0,Math.min(X,U-L));return{isScrolling:!0,scrollDirection:G.scrollOffset<Y?"forward":"backward",scrollOffset:Y,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(x){var k=b.props.outerRef;b._outerRef=x,typeof k=="function"?k(x):k!=null&&typeof k=="object"&&k.hasOwnProperty("current")&&(k.current=x)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&GA(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=Az(b._resetIsScrolling,Rz)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}E.getDerivedStateFromProps=function(b,x){return Iz(b,x),y(b),null};var A=E.prototype;return A.scrollTo=function(b){b=Math.max(0,b),this.setState(function(x){return x.scrollOffset===b?null:{scrollDirection:x.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(b,x){x===void 0&&(x="auto");var k=this.props,L=k.itemCount,U=k.layout,X=this.state.scrollOffset;b=Math.max(0,Math.min(b,L-1));var G=0;if(this._outerRef){var Y=this._outerRef;U==="vertical"?G=Y.scrollWidth>Y.clientWidth?KA():0:G=Y.scrollHeight>Y.clientHeight?KA():0}this.scrollTo(l(this.props,b,x,X,this._instanceProps,G))},A.componentDidMount=function(){var b=this.props,x=b.direction,k=b.initialScrollOffset,L=b.layout;if(typeof k=="number"&&this._outerRef!=null){var U=this._outerRef;x==="horizontal"||L==="horizontal"?U.scrollLeft=k:U.scrollTop=k}this._callPropsCallbacks()},A.componentDidUpdate=function(){var b=this.props,x=b.direction,k=b.layout,L=this.state,U=L.scrollOffset,X=L.scrollUpdateWasRequested;if(X&&this._outerRef!=null){var G=this._outerRef;if(x==="horizontal"||k==="horizontal")if(x==="rtl")switch($A()){case"negative":G.scrollLeft=-U;break;case"positive-ascending":G.scrollLeft=U;break;default:var Y=G.clientWidth,R=G.scrollWidth;G.scrollLeft=R-Y-U;break}else G.scrollLeft=U;else G.scrollTop=U}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&GA(this._resetIsScrollingTimeoutId)},A.render=function(){var b=this.props,x=b.children,k=b.className,L=b.direction,U=b.height,X=b.innerRef,G=b.innerElementType,Y=b.innerTagName,R=b.itemCount,S=b.itemData,M=b.itemKey,P=M===void 0?Cz:M,B=b.layout,H=b.outerElementType,V=b.outerTagName,Qe=b.style,st=b.useIsScrolling,te=b.width,ue=this.state.isScrolling,de=L==="horizontal"||B==="horizontal",Re=de?this._onScrollHorizontal:this._onScrollVertical,De=this._getRangeToRender(),z=De[0],K=De[1],ne=[];if(R>0)for(var se=z;se<=K;se++)ne.push(N.createElement(x,{data:S,key:P(se,S),index:se,isScrolling:st?ue:void 0,style:this._getItemStyle(se)}));var he=r(this.props,this._instanceProps);return N.createElement(H||V||"div",{className:k,onScroll:Re,ref:this._outerRefSetter,style:ev({position:"relative",height:U,width:te,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:L},Qe)},N.createElement(G||Y||"div",{children:ne,ref:X,style:{height:de?"100%":he,pointerEvents:ue?"none":void 0,width:de?he:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var x=this._getRangeToRender(),k=x[0],L=x[1],U=x[2],X=x[3];this._callOnItemsRendered(k,L,U,X)}}if(typeof this.props.onScroll=="function"){var G=this.state,Y=G.scrollDirection,R=G.scrollOffset,S=G.scrollUpdateWasRequested;this._callOnScroll(Y,R,S)}},A._getRangeToRender=function(){var b=this.props,x=b.itemCount,k=b.overscanCount,L=this.state,U=L.isScrolling,X=L.scrollDirection,G=L.scrollOffset;if(x===0)return[0,0,0,0];var Y=c(this.props,G,this._instanceProps),R=f(this.props,Y,G,this._instanceProps),S=!U||X==="backward"?Math.max(1,k):1,M=!U||X==="forward"?Math.max(1,k):1;return[Math.max(0,Y-S),Math.max(0,Math.min(x-1,R+M)),Y,R]},E})(N.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Iz=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},Dz=50,ml=function(e,n,r){var a=e,l=a.itemSize,c=r.itemMetadataMap,f=r.lastMeasuredIndex;if(n>f){var d=0;if(f>=0){var p=c[f];d=p.offset+p.size}for(var y=f+1;y<=n;y++){var _=l(y);c[y]={offset:d,size:_},d+=_}r.lastMeasuredIndex=n}return c[n]},Nz=function(e,n,r){var a=n.itemMetadataMap,l=n.lastMeasuredIndex,c=l>0?a[l].offset:0;return c>=r?eI(e,n,l,0,r):Mz(e,n,Math.max(0,l),r)},eI=function(e,n,r,a,l){for(;a<=r;){var c=a+Math.floor((r-a)/2),f=ml(e,c,n).offset;if(f===l)return c;f<l?a=c+1:f>l&&(r=c-1)}return a>0?a-1:0},Mz=function(e,n,r,a){for(var l=e.itemCount,c=1;r<l&&ml(e,r,n).offset<a;)r+=c,c*=2;return eI(e,n,Math.min(r,l-1),Math.floor(r/2),a)},YA=function(e,n){var r=e.itemCount,a=n.itemMetadataMap,l=n.estimatedItemSize,c=n.lastMeasuredIndex,f=0;if(c>=r&&(c=r-1),c>=0){var d=a[c];f=d.offset+d.size}var p=r-c-1,y=p*l;return f+y},Oz=xz({getItemOffset:function(e,n,r){return ml(e,n,r).offset},getItemSize:function(e,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:YA,getOffsetForIndexAndAlignment:function(e,n,r,a,l,c){var f=e.direction,d=e.height,p=e.layout,y=e.width,_=f==="horizontal"||p==="horizontal",E=_?y:d,A=ml(e,n,l),D=YA(e,l),b=Math.max(0,Math.min(D-E,A.offset)),x=Math.max(0,A.offset-E+A.size+c);switch(r==="smart"&&(a>=x-E&&a<=b+E?r="auto":r="center"),r){case"start":return b;case"end":return x;case"center":return Math.round(x+(b-x)/2);case"auto":default:return a>=x&&a<=b?a:a<x?x:b}},getStartIndexForOffset:function(e,n,r){return Nz(e,r,n)},getStopIndexForStartIndex:function(e,n,r,a){for(var l=e.direction,c=e.height,f=e.itemCount,d=e.layout,p=e.width,y=l==="horizontal"||d==="horizontal",_=y?p:c,E=ml(e,n,a),A=r+_,D=E.offset+E.size,b=n;b<f-1&&D<A;)b++,D+=ml(e,b,a).size;return b},initInstanceProps:function(e,n){var r=e,a=r.estimatedItemSize,l={itemMetadataMap:{},estimatedItemSize:a||Dz,lastMeasuredIndex:-1};return n.resetAfterIndex=function(c,f){f===void 0&&(f=!0),l.lastMeasuredIndex=Math.min(l.lastMeasuredIndex,c-1),n._getItemStyleCache(-1),f&&n.forceUpdate()},l},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});const QA=80;function kz({messages:t,currentUser:e,otherUser:n,onDoubleTap:r,onSwipeReply:a,onSwipeAddToList:l,likeAnimatingMessageId:c,loading:f,loadingMore:d,hasMore:p,onLoadMore:y,scrollToMessageId:_,onScrollToMessageComplete:E}){const A=N.useRef(null),D=N.useRef(null),b=N.useRef({}),[x,k]=N.useState(0);N.useLayoutEffect(()=>{if(!D.current)return;const R=()=>{if(D.current){const M=D.current.clientHeight;M>0&&k(M)}};R();const S=new ResizeObserver(()=>{R()});return S.observe(D.current),window.addEventListener("resize",R),()=>{S.disconnect(),window.removeEventListener("resize",R)}},[]),N.useEffect(()=>{if(x===0&&t.length>0&&D.current){const R=D.current.clientHeight;if(R>0)k(R);else{const S=window.innerHeight-150;S>0&&k(S)}}},[x,t.length]),N.useEffect(()=>{A.current&&t.length>0&&!_&&A.current.scrollToItem(t.length-1,"end")},[t.length,_]),N.useEffect(()=>{if(_&&A.current){const R=t.findIndex(S=>S.id===_);R!==-1&&(A.current.scrollToItem(R,"center"),E?.())}},[_,t,E]);const L=N.useCallback(R=>b.current[R]||QA,[]),U=N.useCallback((R,S)=>{b.current[R]!==S&&(b.current[R]=S,A.current?.resetAfterIndex(R))},[]),X=N.useCallback(({scrollOffset:R})=>{R<100&&p&&!d&&y()},[p,d,y]),G=N.useCallback(R=>R===e.uid?{photo:e.customPhotoURL||e.photoURL,name:e.displayName}:{photo:n?.customPhotoURL||n?.photoURL,name:n?.displayName},[e,n]),Y=N.useCallback(({index:R,style:S})=>{const M=t[R],P=M.senderId===e.uid,B=G(M.senderId);return O.jsx("div",{style:S,className:"px-3",children:O.jsx(Vz,{index:R,onHeightChange:U,hasImage:!!M.imageUrl,children:O.jsx(_z,{message:M,isOwn:P,senderPhoto:B.photo,senderName:B.name,onDoubleTap:()=>r(M.id),onSwipeReply:()=>a(M),onSwipeAddToList:()=>l(M),showLikeAnimation:c===M.id,currentUserId:e.uid,onNavigateToMessage:H=>{const V=t.findIndex(Qe=>Qe.id===H);V!==-1&&A.current?.scrollToItem(V,"center")},onImageLoad:()=>U(R,0)})})})},[t,e,G,r,a,l,c,U]);return O.jsx("div",{ref:D,className:"flex-1 overflow-hidden",children:f?O.jsx("div",{className:"h-full flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):t.length===0?O.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[O.jsx("div",{className:"w-16 h-16 mb-4 bg-indigo-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),O.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No messages yet"}),O.jsx("p",{className:"text-sm text-gray-500",children:"Send a message or drawing to get started!"})]}):O.jsxs(O.Fragment,{children:[d&&O.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex justify-center py-2 bg-gradient-to-b from-gray-50 to-transparent",children:O.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"})}),x>0?O.jsx(Oz,{ref:A,height:x,width:"100%",itemCount:t.length,itemSize:L,onScroll:X,estimatedItemSize:QA,className:"scrollbar-hide",children:Y}):O.jsx("div",{className:"h-full flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]})})}function Vz({index:t,onHeightChange:e,children:n,hasImage:r}){const a=N.useRef(null),l=N.useRef(0);return N.useEffect(()=>{if(!a.current)return;const c=()=>{if(a.current){const f=a.current.getBoundingClientRect().height+12;Math.abs(f-l.current)>1&&(l.current=f,e(t,f))}};if(c(),r){const f=new ResizeObserver(()=>{c()});return f.observe(a.current),()=>f.disconnect()}},[t,e,r]),O.jsx("div",{ref:a,children:n})}function Pz({isOpen:t,onClose:e,onSend:n}){const r=N.useRef(null),[a,l]=N.useState(!1),[c,f]=N.useState(!1),d=N.useRef(null),[p,y]=N.useState(0),[_,E]=N.useState(0),[A,D]=N.useState(20),[b,x]=N.useState(4),[k,L]=N.useState([]),U=N.useRef(!1),X=N.useRef(null),G=N.useRef(null),Y=N.useRef(null),R=400,S=400,M=300,P=N.useRef(typeof window<"u"&&window.devicePixelRatio||1),B=N.useCallback(()=>`hsl(${p}, ${_}%, ${A}%)`,[p,_,A]);N.useEffect(()=>{if(t&&r.current){const K=r.current,ne=K.getContext("2d"),se=P.current;K.width=S*se,K.height=M*se,ne&&(ne.scale(se,se),ne.fillStyle="#ffffff",ne.fillRect(0,0,S,M),ne.lineCap="round",ne.lineJoin="round"),f(!1),L([])}},[t]),N.useEffect(()=>{const K=r.current?.getContext("2d");K&&(K.strokeStyle=B(),K.lineWidth=b)},[p,_,A,b,B]);const H=N.useCallback(K=>{const ne=r.current;if(!ne)return{x:0,y:0};const se=ne.getBoundingClientRect(),he=S/se.width,pe=M/se.height;let Te,He;return"touches"in K?(Te=K.touches[0].clientX,He=K.touches[0].clientY):(Te=K.clientX,He=K.clientY),{x:(Te-se.left)*he,y:(He-se.top)*pe}},[]),V=N.useCallback(()=>{const K=r.current,ne=K?.getContext("2d");if(!K||!ne)return;const se=P.current,he=ne.getImageData(0,0,S*se,M*se);L(pe=>[...pe,he])},[]),Qe=N.useCallback(()=>{if(k.length===0)return;const K=r.current,ne=K?.getContext("2d");if(!K||!ne)return;const se=P.current,he=[...k],pe=he.pop();if(pe){ne.putImageData(pe,0,0),L(he);const Te=ne.getImageData(0,0,S*se,M*se);let He=!0;for(let Pe=0;Pe<Te.data.length;Pe+=4)if(Te.data[Pe]!==255||Te.data[Pe+1]!==255||Te.data[Pe+2]!==255){He=!1;break}f(!He)}},[k]),st=N.useCallback(()=>{const K=r.current,ne=K?.getContext("2d");if(!K||!ne||!Y.current)return;const se=P.current,he=S*se,pe=M*se,Te=ne.getImageData(0,0,he,pe),He=Te.data,Pe=Y.current.r,Vn=Y.current.g,Wn=Y.current.b,gi=document.createElement("canvas");gi.width=1,gi.height=1;const yi=gi.getContext("2d");if(!yi)return;yi.fillStyle=B(),yi.fillRect(0,0,1,1);const mn=yi.getImageData(0,0,1,1).data,Mi=mn[0],rr=mn[1],go=mn[2];if(Pe===Mi&&Vn===rr&&Wn===go)return;const yo=ze=>Math.abs(He[ze]-Pe)<10&&Math.abs(He[ze+1]-Vn)<10&&Math.abs(He[ze+2]-Wn)<10,Yr=ze=>{He[ze]=Mi,He[ze+1]=rr,He[ze+2]=go,He[ze+3]=255};if(!G.current)return;const sr=Math.floor(G.current.x*se),Qr=Math.floor(G.current.y*se),ha=[[sr,Qr]],Xr=new Set;for(;ha.length>0;){const[ze,Pn]=ha.pop(),yt=`${ze},${Pn}`;if(ze<0||ze>=he||Pn<0||Pn>=pe||Xr.has(yt))continue;const Rt=(Pn*he+ze)*4;yo(Rt)&&(Xr.add(yt),Yr(Rt),ha.push([ze+1,Pn],[ze-1,Pn],[ze,Pn+1],[ze,Pn-1]))}ne.putImageData(Te,0,0),f(!0)},[B]),te=N.useCallback(()=>{X.current&&(clearTimeout(X.current),X.current=null),G.current=null,Y.current=null},[]),ue=N.useCallback(K=>{K.preventDefault();const ne=H(K);d.current=ne,U.current=!0;const se=r.current,he=se?.getContext("2d");if(!se||!he)return;const pe=P.current,Te=Math.floor(ne.x*pe),He=Math.floor(ne.y*pe),Pe=he.getImageData(Te,He,1,1).data;Y.current={r:Pe[0],g:Pe[1],b:Pe[2]},V(),G.current=ne,X.current=setTimeout(()=>{G.current&&(st(),te(),l(!1))},R),l(!0),he.strokeStyle=B(),he.lineWidth=b,he.beginPath(),he.moveTo(ne.x,ne.y),he.lineTo(ne.x,ne.y),he.stroke(),f(!0)},[H,B,b,V,st,te]),de=N.useCallback(K=>{if(!a||!d.current)return;K.preventDefault();const ne=H(K);if(G.current){const he=ne.x-G.current.x,pe=ne.y-G.current.y;Math.sqrt(he*he+pe*pe)>5&&te()}const se=r.current?.getContext("2d");se&&(se.beginPath(),se.moveTo(d.current.x,d.current.y),se.lineTo(ne.x,ne.y),se.stroke()),d.current=ne,f(!0)},[a,H,te]),Re=N.useCallback(()=>{l(!1),d.current=null,te()},[te]),De=N.useCallback(()=>{const K=r.current?.getContext("2d");K&&(c&&V(),K.fillStyle="#ffffff",K.fillRect(0,0,S,M)),f(!1)},[c,V]),z=N.useCallback(()=>{if(!r.current||!c)return;const K=r.current.toDataURL("image/png");n({dataUrl:K,width:S,height:M});const ne=r.current.getContext("2d");ne&&(ne.fillStyle="#ffffff",ne.fillRect(0,0,S,M)),f(!1),e()},[c,n,e]);return O.jsx(Za,{children:t&&O.jsx(wn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-2",onClick:e,children:O.jsxs(wn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-lg w-full",onClick:K=>K.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Draw"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:B()}}),O.jsx("button",{onClick:e,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),O.jsxs("div",{className:"p-3 flex gap-3",children:[O.jsxs("div",{className:"flex flex-col gap-2 justify-center",children:[O.jsxs("div",{className:"flex flex-col items-center gap-1",children:[O.jsx("span",{className:"text-xs text-gray-500",children:"H"}),O.jsx("input",{type:"range",min:"0",max:"360",value:p,onChange:K=>y(Number(K.target.value)),className:"h-24 w-6 appearance-none bg-transparent cursor-pointer",style:{writingMode:"vertical-lr",direction:"rtl",background:"linear-gradient(to top, hsl(0,100%,50%), hsl(60,100%,50%), hsl(120,100%,50%), hsl(180,100%,50%), hsl(240,100%,50%), hsl(300,100%,50%), hsl(360,100%,50%))",borderRadius:"4px"}})]}),O.jsxs("div",{className:"flex flex-col items-center gap-1",children:[O.jsx("span",{className:"text-xs text-gray-500",children:"S"}),O.jsx("input",{type:"range",min:"0",max:"100",value:_,onChange:K=>E(Number(K.target.value)),className:"h-24 w-6 appearance-none bg-transparent cursor-pointer",style:{writingMode:"vertical-lr",direction:"rtl",background:`linear-gradient(to top, hsl(${p},0%,${A}%), hsl(${p},100%,${A}%))`,borderRadius:"4px"}})]}),O.jsxs("div",{className:"flex flex-col items-center gap-1",children:[O.jsx("span",{className:"text-xs text-gray-500",children:"L"}),O.jsx("input",{type:"range",min:"0",max:"100",value:A,onChange:K=>D(Number(K.target.value)),className:"h-24 w-6 appearance-none bg-transparent cursor-pointer",style:{writingMode:"vertical-lr",direction:"rtl",background:`linear-gradient(to top, hsl(${p},${_}%,0%), hsl(${p},${_}%,50%), hsl(${p},${_}%,100%))`,borderRadius:"4px"}})]})]}),O.jsxs("div",{className:"flex-1 flex items-center justify-center relative bg-gray-50 rounded-xl overflow-hidden border-2 border-dashed border-gray-200",children:[O.jsx("canvas",{ref:r,className:"touch-none cursor-crosshair",style:{width:`${S}px`,height:`${M}px`,maxWidth:"100%",maxHeight:"100%"},onTouchStart:ue,onTouchMove:de,onTouchEnd:Re,onMouseDown:ue,onMouseMove:de,onMouseUp:Re,onMouseLeave:Re}),!c&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("p",{className:"text-gray-400 text-sm",children:"Draw or hold to fill!"})})]}),O.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[O.jsx("span",{className:"text-xs text-gray-500",children:"Size"}),O.jsx("input",{type:"range",min:"1",max:"20",value:b,onChange:K=>x(Number(K.target.value)),className:"h-48 w-6 appearance-none bg-gray-200 rounded cursor-pointer",style:{writingMode:"vertical-lr",direction:"rtl"}}),O.jsx("div",{className:"rounded-full bg-gray-800",style:{width:`${Math.max(b,4)}px`,height:`${Math.max(b,4)}px`,backgroundColor:B()}})]})]}),O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-gray-50",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("button",{onClick:De,disabled:!c,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),O.jsxs("button",{onClick:Qe,disabled:k.length===0,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Undo",children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),O.jsx("span",{children:"Undo"})]})]}),O.jsxs("button",{onClick:z,disabled:!c,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[O.jsx("span",{children:"Send"}),O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})]})]})})})}function Lz({isOpen:t,message:e,lists:n,currentUserId:r,onClose:a,onSelectList:l,onCreateList:c}){const[f,d]=N.useState(!1),[p,y]=N.useState(""),[_,E]=N.useState("public"),[A,D]=N.useState("collection"),[b,x]=N.useState(""),[k,L]=N.useState(!1),U=async()=>{if(p.trim()){L(!0);try{const Y=await c(p.trim(),_,A,b);Y&&l(Y),X()}catch(Y){console.error("Failed to create list:",Y)}finally{L(!1)}}},X=()=>{d(!1),y(""),E("public"),D("collection"),x("")},G=()=>{X(),a()};return O.jsx(Za,{children:t&&e&&O.jsx(wn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:G,children:O.jsxs(wn.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg max-h-[70vh] overflow-hidden",onClick:Y=>Y.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f?"Create New List":"Save to List"}),O.jsx("button",{onClick:G,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:O.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.content||(e.imageUrl?"(drawing)":"")})}),f?O.jsxs("div",{className:"p-4 space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:b,onChange:Y=>{const R=Y.target.value;if(R.length===0)x("");else{const S=[...R];x(S[S.length-1])}},placeholder:"",className:"w-14 h-14 text-2xl text-center border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),O.jsx("span",{className:"text-sm text-gray-500",children:"Type or paste any emoji"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),O.jsx("input",{type:"text",value:p,onChange:Y=>y(Y.target.value),placeholder:"List name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoFocus:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>D("collection"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="collection"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Collection"}),O.jsx("button",{onClick:()=>D("checklist"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="checklist"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Checklist"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>E("public"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${_==="public"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Shared"}),O.jsxs("button",{onClick:()=>E("private"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors flex items-center justify-center gap-1 ${_==="private"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Private",O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]})]})]}),O.jsxs("div",{className:"flex gap-2 pt-2",children:[O.jsx("button",{onClick:X,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),O.jsx("button",{onClick:U,disabled:!p.trim()||k,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50",children:k?"Creating...":"Create & Add"})]})]}):O.jsxs("div",{className:"overflow-y-auto max-h-[50vh]",children:[n.map(Y=>{const R=Y.visibility==="private",S=Y.ownerId===r;return O.jsxs("button",{onClick:()=>l(Y.id),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[O.jsx("span",{className:"text-xl",children:Y.emoji||""}),O.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:Y.name}),R&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Y.type==="checklist"&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})]},Y.id)}),O.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left border-t border-gray-200",children:[O.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),O.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"Create New List"})]})]})]})})})}function Uz({isOpen:t,lists:e,currentUserId:n,onClose:r,onGetListItems:a,onToggleCompleted:l,onRemoveFromList:c,onDeleteList:f,onNavigateToMessage:d}){const[p,y]=N.useState(null),[_,E]=N.useState([]),[A,D]=N.useState(!1),[b,x]=N.useState(null);N.useEffect(()=>{p&&(D(!0),a(p.id).then(E).catch(console.error).finally(()=>D(!1)))},[p,a]);const k=N.useCallback(async R=>{if(await l(R),p){const S=await a(p.id);E(S)}},[p,l,a]),L=N.useCallback(async R=>{if(!p)return;await c(p.id,R);const S=await a(p.id);E(S)},[p,c,a]),U=N.useCallback(async R=>{await f(R),y(null),x(null)},[f]),X=N.useCallback(R=>{d(R),r()},[d,r]),G=N.useCallback(()=>{y(null),E([]),x(null),r()},[r]),Y=R=>R?(R.toDate?R.toDate():new Date(R)).toLocaleDateString([],{month:"short",day:"numeric"}):"";return O.jsx(Za,{children:t&&O.jsx(wn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:G,children:O.jsxs(wn.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg h-[85vh] overflow-hidden flex flex-col",onClick:R=>R.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 flex-shrink-0",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[p&&O.jsx("button",{onClick:()=>{y(null),E([])},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p?O.jsxs("span",{className:"flex items-center gap-2",children:[O.jsx("span",{children:p.emoji||""}),O.jsx("span",{children:p.name})]}):"Lists"})]}),O.jsx("button",{onClick:G,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto",children:p?A?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):_.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No items yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press messages to add them here"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>O.jsxs("div",{className:"flex items-start gap-3 px-4 py-3",children:[p.type==="checklist"&&O.jsx("button",{onClick:()=>k(R.id),className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${R.completed?"bg-indigo-600 border-indigo-600":"border-gray-300 hover:border-indigo-400"}`,children:R.completed&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),O.jsxs("button",{onClick:()=>R.message&&X(R.messageId),className:`flex-1 text-left min-w-0 ${R.completed?"opacity-50":""}`,children:[O.jsx("p",{className:`text-sm text-gray-900 ${R.completed?"line-through":""}`,children:R.message?.content||(R.message?.imageUrl?"(drawing)":"Deleted message")}),O.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Added ",Y(R.addedAt)]})]}),O.jsx("button",{onClick:()=>L(R.messageId),className:"flex-shrink-0 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},R.id))}):e.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No lists yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press a message to create your first list"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:e.map(R=>{const S=R.ownerId===n,M=R.visibility==="private";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>y(R),className:"flex-1 flex items-center gap-3 text-left min-w-0",children:[O.jsx("span",{className:"text-xl",children:R.emoji||""}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name}),M&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),O.jsx("p",{className:"text-xs text-gray-400",children:R.type==="checklist"?"Checklist":"Collection"})]})]}),S&&O.jsx(O.Fragment,{children:b===R.id?O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{onClick:()=>x(null),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),O.jsx("button",{onClick:()=>U(R.id),className:"px-2 py-1 text-xs text-white bg-red-500 hover:bg-red-600 rounded",children:"Delete"})]}):O.jsx("button",{onClick:()=>x(R.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)})})})]})})})}function jz(){const{user:t}=qc(),{messages:e,loading:n,loadingMore:r,hasMore:a,loadMore:l,sendMessage:c,sendDrawing:f,toggleLike:d}=fz(t?.uid),{lists:p,createList:y,addMessageToList:_,removeFromList:E,deleteList:A,toggleItemCompleted:D,getListItems:b}=mz(t?.uid),[x,k]=N.useState(null),[L,U]=N.useState(!1),[X,G]=N.useState(!1),[Y,R]=N.useState(!1),[S,M]=N.useState(null),[P,B]=N.useState(null),[H,V]=N.useState(null),[Qe,st]=N.useState(null);N.useEffect(()=>{if(!t||e.length===0)return;const se=e.find(pe=>pe.senderId!==t.uid)?.senderId;return se?h0(Nn(dt,"duoboard_users",se),pe=>{pe.exists()&&k({uid:pe.id,...pe.data()})},pe=>console.error("Error fetching other user:",pe)):void 0},[t,e]);const te=N.useCallback(async se=>{try{await c(se,S?.id),M(null)}catch(he){console.error("Failed to send message:",he)}},[c,S]),ue=N.useCallback(async se=>{try{await f(se,S?.id),M(null)}catch(he){console.error("Failed to send drawing:",he)}},[f,S]),de=N.useCallback(async se=>{V(se),await d(se),setTimeout(()=>V(null),600)},[d]),Re=N.useCallback(se=>{M(se)},[]),De=N.useCallback(se=>{B(se),G(!0)},[]),z=N.useCallback(async se=>{P&&(await _(se,P.id),G(!1),B(null))},[P,_]),K=N.useCallback(async(se,he,pe,Te)=>y(se,he,pe,Te),[y]),ne=N.useCallback(se=>{st(se),R(!1)},[]);return t?O.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[O.jsx(gz,{onListsClick:()=>R(!0)}),O.jsx(kz,{messages:e,currentUser:t,otherUser:x,onDoubleTap:de,onSwipeReply:Re,onSwipeAddToList:De,likeAnimatingMessageId:H,loading:n,loadingMore:r,hasMore:a,onLoadMore:l,scrollToMessageId:Qe,onScrollToMessageComplete:()=>st(null)}),O.jsx(Tz,{onSend:te,onDrawClick:()=>U(!0),replyingTo:S,onCancelReply:()=>M(null)}),O.jsx(Pz,{isOpen:L,onClose:()=>U(!1),onSend:ue}),O.jsx(Lz,{isOpen:X,message:P,lists:p,currentUserId:t.uid,onClose:()=>{G(!1),B(null)},onSelectList:z,onCreateList:K}),O.jsx(Uz,{isOpen:Y,lists:p,currentUserId:t.uid,onClose:()=>R(!1),onGetListItems:b,onToggleCompleted:D,onRemoveFromList:E,onDeleteList:A,onNavigateToMessage:ne})]}):null}function Bz({children:t}){const{user:e,loading:n}=qc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e?O.jsx(O.Fragment,{children:t}):O.jsx(lv,{to:"/login",replace:!0})}function zz({children:t}){const{user:e,loading:n}=qc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e?O.jsx(lv,{to:"/",replace:!0}):O.jsx(O.Fragment,{children:t})}function Fz(){return O.jsxs(xN,{children:[O.jsx(Uf,{path:"/login",element:O.jsx(zz,{children:O.jsx(hz,{})})}),O.jsx(Uf,{path:"/",element:O.jsx(Bz,{children:O.jsx(jz,{})})}),O.jsx(Uf,{path:"*",element:O.jsx(lv,{to:"/",replace:!0})})]})}function Hz(){return O.jsx(WN,{children:O.jsx(U5,{children:O.jsx("div",{className:"h-full",children:O.jsx(Fz,{})})})})}LD.createRoot(document.getElementById("root")).render(O.jsx(N.StrictMode,{children:O.jsx(Hz,{})}));
