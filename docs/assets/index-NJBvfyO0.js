(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var yg={exports:{}},ku={};var ww;function xD(){if(ww)return ku;ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ku.Fragment=e,ku.jsx=n,ku.jsxs=n,ku}var bw;function ID(){return bw||(bw=1,yg.exports=xD()),yg.exports}var O=ID(),vg={exports:{}},Ae={};var Sw;function DD(){if(Sw)return Ae;Sw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function A(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function V(F,ie,le){this.props=F,this.context=ie,this.refs=x,this.updater=le||D}V.prototype.isReactComponent={},V.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function L(){}L.prototype=V.prototype;function k(F,ie,le){this.props=F,this.context=ie,this.refs=x,this.updater=le||D}var K=k.prototype=new L;K.constructor=k,b(K,V.prototype),K.isPureReactComponent=!0;var q=Array.isArray;function Y(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(F,ie,le){var ue=le.ref;return{$$typeof:t,type:F,key:ie,ref:ue!==void 0?ue:null,props:le}}function U(F,ie){return N(F.type,ie,F.props)}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function H(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return ie[le]})}var P=/\/+/g;function Xe(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?H(""+F.key):ie.toString(36)}function ht(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Y,Y):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ee(F,ie,le,ue,ge){var Ee=typeof F;(Ee==="undefined"||Ee==="boolean")&&(F=null);var Oe=!1;if(F===null)Oe=!0;else switch(Ee){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(F.$$typeof){case t:case e:Oe=!0;break;case y:return Oe=F._init,ee(Oe(F._payload),ie,le,ue,ge)}}if(Oe)return ge=ge(F),Oe=ue===""?"."+Xe(F,0):ue,q(ge)?(le="",Oe!=null&&(le=Oe.replace(P,"$&/")+"/"),ee(ge,ie,le,"",function(Ci){return Ci})):ge!=null&&(B(ge)&&(ge=U(ge,le+(ge.key==null||F&&F.key===ge.key?"":(""+ge.key).replace(P,"$&/")+"/")+Oe)),ie.push(ge)),1;Oe=0;var Gt=ue===""?".":ue+":";if(q(F))for(var ft=0;ft<F.length;ft++)ue=F[ft],Ee=Gt+Xe(ue,ft),Oe+=ee(ue,ie,le,Ee,ge);else if(ft=A(F),typeof ft=="function")for(F=ft.call(F),ft=0;!(ue=F.next()).done;)ue=ue.value,Ee=Gt+Xe(ue,ft++),Oe+=ee(ue,ie,le,Ee,ge);else if(Ee==="object"){if(typeof F.then=="function")return ee(ht(F),ie,le,ue,ge);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function oe(F,ie,le){if(F==null)return F;var ue=[],ge=0;return ee(F,ue,"","",function(Ee){return ie.call(le,Ee,ge++)}),ue}function fe(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var Ie=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},De={map:oe,forEach:function(F,ie,le){oe(F,function(){ie.apply(this,arguments)},le)},count:function(F){var ie=0;return oe(F,function(){ie++}),ie},toArray:function(F){return oe(F,function(ie){return ie})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ae.Activity=_,Ae.Children=De,Ae.Component=V,Ae.Fragment=n,Ae.Profiler=a,Ae.PureComponent=k,Ae.StrictMode=r,Ae.Suspense=d,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},Ae.cache=function(F){return function(){return F.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(F,ie,le){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ue=b({},F.props),ge=F.key;if(ie!=null)for(Ee in ie.key!==void 0&&(ge=""+ie.key),ie)!S.call(ie,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ie.ref===void 0||(ue[Ee]=ie[Ee]);var Ee=arguments.length-2;if(Ee===1)ue.children=le;else if(1<Ee){for(var Oe=Array(Ee),Gt=0;Gt<Ee;Gt++)Oe[Gt]=arguments[Gt+2];ue.children=Oe}return N(F.type,ge,ue)},Ae.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Ae.createElement=function(F,ie,le){var ue,ge={},Ee=null;if(ie!=null)for(ue in ie.key!==void 0&&(Ee=""+ie.key),ie)S.call(ie,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ge[ue]=ie[ue]);var Oe=arguments.length-2;if(Oe===1)ge.children=le;else if(1<Oe){for(var Gt=Array(Oe),ft=0;ft<Oe;ft++)Gt[ft]=arguments[ft+2];ge.children=Gt}if(F&&F.defaultProps)for(ue in Oe=F.defaultProps,Oe)ge[ue]===void 0&&(ge[ue]=Oe[ue]);return N(F,Ee,ge)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(F){return{$$typeof:f,render:F}},Ae.isValidElement=B,Ae.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:fe}},Ae.memo=function(F,ie){return{$$typeof:p,type:F,compare:ie===void 0?null:ie}},Ae.startTransition=function(F){var ie=R.T,le={};R.T=le;try{var ue=F(),ge=R.S;ge!==null&&ge(le,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Y,Ie)}catch(Ee){Ie(Ee)}finally{ie!==null&&le.types!==null&&(ie.types=le.types),R.T=ie}},Ae.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ae.use=function(F){return R.H.use(F)},Ae.useActionState=function(F,ie,le){return R.H.useActionState(F,ie,le)},Ae.useCallback=function(F,ie){return R.H.useCallback(F,ie)},Ae.useContext=function(F){return R.H.useContext(F)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(F,ie){return R.H.useDeferredValue(F,ie)},Ae.useEffect=function(F,ie){return R.H.useEffect(F,ie)},Ae.useEffectEvent=function(F){return R.H.useEffectEvent(F)},Ae.useId=function(){return R.H.useId()},Ae.useImperativeHandle=function(F,ie,le){return R.H.useImperativeHandle(F,ie,le)},Ae.useInsertionEffect=function(F,ie){return R.H.useInsertionEffect(F,ie)},Ae.useLayoutEffect=function(F,ie){return R.H.useLayoutEffect(F,ie)},Ae.useMemo=function(F,ie){return R.H.useMemo(F,ie)},Ae.useOptimistic=function(F,ie){return R.H.useOptimistic(F,ie)},Ae.useReducer=function(F,ie,le){return R.H.useReducer(F,ie,le)},Ae.useRef=function(F){return R.H.useRef(F)},Ae.useState=function(F){return R.H.useState(F)},Ae.useSyncExternalStore=function(F,ie,le){return R.H.useSyncExternalStore(F,ie,le)},Ae.useTransition=function(){return R.H.useTransition()},Ae.version="19.2.0",Ae}var Aw;function nv(){return Aw||(Aw=1,vg.exports=DD()),vg.exports}var M=nv(),_g={exports:{}},Pu={},Tg={exports:{}},Eg={};var Rw;function ND(){return Rw||(Rw=1,(function(t){function e(ee,oe){var fe=ee.length;ee.push(oe);e:for(;0<fe;){var Ie=fe-1>>>1,De=ee[Ie];if(0<a(De,oe))ee[Ie]=oe,ee[fe]=De,fe=Ie;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var oe=ee[0],fe=ee.pop();if(fe!==oe){ee[0]=fe;e:for(var Ie=0,De=ee.length,F=De>>>1;Ie<F;){var ie=2*(Ie+1)-1,le=ee[ie],ue=ie+1,ge=ee[ue];if(0>a(le,fe))ue<De&&0>a(ge,le)?(ee[Ie]=ge,ee[ue]=fe,Ie=ue):(ee[Ie]=le,ee[ie]=fe,Ie=ie);else if(ue<De&&0>a(ge,fe))ee[Ie]=ge,ee[ue]=fe,Ie=ue;else break e}}return oe}function a(ee,oe){var fe=ee.sortIndex-oe.sortIndex;return fe!==0?fe:ee.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var d=[],p=[],y=1,_=null,E=3,A=!1,D=!1,b=!1,x=!1,V=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var oe=n(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=ee)r(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=n(p)}}function q(ee){if(b=!1,K(ee),!D)if(n(d)!==null)D=!0,Y||(Y=!0,H());else{var oe=n(p);oe!==null&&ht(q,oe.startTime-ee)}}var Y=!1,R=-1,S=5,N=-1;function U(){return x?!0:!(t.unstable_now()-N<S)}function B(){if(x=!1,Y){var ee=t.unstable_now();N=ee;var oe=!0;try{e:{D=!1,b&&(b=!1,L(R),R=-1),A=!0;var fe=E;try{t:{for(K(ee),_=n(d);_!==null&&!(_.expirationTime>ee&&U());){var Ie=_.callback;if(typeof Ie=="function"){_.callback=null,E=_.priorityLevel;var De=Ie(_.expirationTime<=ee);if(ee=t.unstable_now(),typeof De=="function"){_.callback=De,K(ee),oe=!0;break t}_===n(d)&&r(d),K(ee)}else r(d);_=n(d)}if(_!==null)oe=!0;else{var F=n(p);F!==null&&ht(q,F.startTime-ee),oe=!1}}break e}finally{_=null,E=fe,A=!1}oe=void 0}}finally{oe?H():Y=!1}}}var H;if(typeof k=="function")H=function(){k(B)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Xe=P.port2;P.port1.onmessage=B,H=function(){Xe.postMessage(null)}}else H=function(){V(B,0)};function ht(ee,oe){R=V(function(){ee(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(ee){switch(E){case 1:case 2:case 3:var oe=3;break;default:oe=E}var fe=E;E=oe;try{return ee()}finally{E=fe}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var fe=E;E=ee;try{return oe()}finally{E=fe}},t.unstable_scheduleCallback=function(ee,oe,fe){var Ie=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ie+fe:Ie):fe=Ie,ee){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=fe+De,ee={id:y++,callback:oe,priorityLevel:ee,startTime:fe,expirationTime:De,sortIndex:-1},fe>Ie?(ee.sortIndex=fe,e(p,ee),n(d)===null&&ee===n(p)&&(b?(L(R),R=-1):b=!0,ht(q,fe-Ie))):(ee.sortIndex=De,e(d,ee),D||A||(D=!0,Y||(Y=!0,H()))),ee},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(ee){var oe=E;return function(){var fe=E;E=oe;try{return ee.apply(this,arguments)}finally{E=fe}}}})(Eg)),Eg}var Cw;function MD(){return Cw||(Cw=1,Tg.exports=ND()),Tg.exports}var wg={exports:{}},an={};var xw;function OD(){if(xw)return an;xw=1;var t=nv();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,y)},an.flushSync=function(d){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=p,r.p=y,r.d.f()}},an.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},an.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},an.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:_,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},an.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},an.requestFormReset=function(d){r.d.r(d)},an.unstable_batchedUpdates=function(d,p){return d(p)},an.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var Iw;function VD(){if(Iw)return wg.exports;Iw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wg.exports=OD(),wg.exports}var Dw;function kD(){if(Dw)return Pu;Dw=1;var t=MD(),e=nv(),n=VD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),i;if(g===u)return d(m),s;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=g;else{for(var T=!1,C=m.child;C;){if(C===o){T=!0,o=m,u=g;break}if(C===u){T=!0,u=m,o=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===o){T=!0,o=g,u=m;break}if(C===u){T=!0,u=g,o=m;break}C=C.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),k=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Xe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case V:return"Profiler";case x:return"StrictMode";case q:return"Suspense";case Y:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case D:return"Portal";case k:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case K:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:Xe(i.type)||"Memo";case S:s=i._payload,i=i._init;try{return Xe(i(s))}catch{}}return null}var ht=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ie=[],De=-1;function F(i){return{current:i}}function ie(i){0>De||(i.current=Ie[De],Ie[De]=null,De--)}function le(i,s){De++,Ie[De]=i.current,i.current=s}var ue=F(null),ge=F(null),Ee=F(null),Oe=F(null);function Gt(i,s){switch(le(Ee,s),le(ge,i),le(ue,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?GE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=GE(s),i=KE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(ue),le(ue,i)}function ft(){ie(ue),ie(ge),ie(Ee)}function Ci(i){i.memoizedState!==null&&le(Oe,i);var s=ue.current,o=KE(s,i.type);s!==o&&(le(ge,i),le(ue,o))}function Ji(i){ge.current===i&&(ie(ue),ie(ge)),Oe.current===i&&(ie(Oe),Nu._currentValue=fe)}var na,lo;function fi(i){if(na===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);na=s&&s[1]||"",lo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+i+lo}var ia=!1;function uo(i,s){if(!i||ia)return"";ia=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var W=Z}Reflect.construct(i,[],se)}else{try{se.call()}catch(Z){W=Z}i.call(se.prototype)}}else{try{throw Error()}catch(Z){W=Z}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var j=T.split(`
`),X=C.split(`
`);for(m=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(u===j.length||m===X.length)for(u=j.length-1,m=X.length-1;1<=u&&0<=m&&j[u]!==X[m];)m--;for(;1<=u&&0<=m;u--,m--)if(j[u]!==X[m]){if(u!==1||m!==1)do if(u--,m--,0>m||j[u]!==X[m]){var te=`
`+j[u].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=u&&0<=m);break}}}finally{ia=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?fi(o):""}function mm(i,s){switch(i.tag){case 26:case 27:case 5:return fi(i.type);case 16:return fi("Lazy");case 13:return i.child!==s&&s!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return uo(i.type,!1);case 11:return uo(i.type.render,!1);case 1:return uo(i.type,!0);case 31:return fi("Activity");default:return""}}function Gc(i){try{var s="",o=null;do s+=mm(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var co=Object.prototype.hasOwnProperty,ra=t.unstable_scheduleCallback,ho=t.unstable_cancelCallback,pm=t.unstable_shouldYield,Vl=t.unstable_requestPaint,Kt=t.unstable_now,Kc=t.unstable_getCurrentPriorityLevel,Pt=t.unstable_ImmediatePriority,jt=t.unstable_UserBlockingPriority,er=t.unstable_NormalPriority,$c=t.unstable_LowPriority,kl=t.unstable_IdlePriority,gm=t.log,sa=t.unstable_setDisableYieldValue,Fr=null,rn=null;function Yn(i){if(typeof gm=="function"&&sa(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Fr,i)}catch{}}var mn=Math.clz32?Math.clz32:Yc,ym=Math.log,Pl=Math.LN2;function Yc(i){return i>>>=0,i===0?32:31-(ym(i)/Pl|0)|0}var aa=256,xi=262144,Hr=4194304;function di(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Qn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=di(u):(T&=C,T!==0?m=di(T):o||(o=C&~i,o!==0&&(m=di(o))))):(C=u&~g,C!==0?m=di(C):T!==0?m=di(T):o||(o=u&~i,o!==0&&(m=di(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function qr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function fo(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ll(){var i=Hr;return Hr<<=1,(Hr&62914560)===0&&(Hr=4194304),i}function tr(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Gr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function $t(i,s,o,u,m,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var C=i.entanglements,j=i.expirationTimes,X=i.hiddenUpdates;for(o=T&~o;0<o;){var te=31-mn(o),se=1<<te;C[te]=0,j[te]=-1;var W=X[te];if(W!==null)for(X[te]=null,te=0;te<W.length;te++){var Z=W[te];Z!==null&&(Z.lane&=-536870913)}o&=~se}u!==0&&Ul(i,u,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Ul(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-mn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Kr(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-mn(o),m=1<<u;m&s|i[u]&s&&(i[u]|=s),o&=~m}}function $r(i,s){var o=s&-s;return o=(o&42)!==0?1:jl(o),(o&(i.suspendedLanes|s))!==0?0:o}function jl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function nr(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function Qc(i,s){var o=oe.p;try{return oe.p=i,s()}finally{oe.p=o}}var Ii=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ii,Yt="__reactProps$"+Ii,Di="__reactContainer$"+Ii,Yr="__reactEvents$"+Ii,Ni="__reactListeners$"+Ii,Xc="__reactHandles$"+Ii,zl="__reactResources$"+Ii,ir="__reactMarker$"+Ii;function oa(i){delete i[pt],delete i[Yt],delete i[Yr],delete i[Ni],delete i[Xc]}function rr(i){var s=i[pt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Di]||o[pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=JE(i);i!==null;){if(o=i[pt])return o;i=JE(i)}return s}i=o,o=i.parentNode}return null}function sr(i){if(i=i[pt]||i[Di]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function la(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function mi(i){var s=i[zl];return s||(s=i[zl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bt(i){i[ir]=!0}var mo=new Set,Qr={};function pn(i,s){Mi(i,s),Mi(i+"Capture",s)}function Mi(i,s){for(Qr[i]=s,i=0;i<s.length;i++)mo.add(s[i])}var vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Hl={};function Wc(i){return co.call(Hl,i)?!0:co.call(Fl,i)?!1:vm.test(i)?Hl[i]=!0:(Fl[i]=!0,!1)}function Xr(i,s,o){if(Wc(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function Wr(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Xn(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Zc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _m(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function po(i){if(!i._valueTracker){var s=Zc(i)?"checked":"value";i._valueTracker=_m(i,s,""+i[s])}}function ql(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Zc(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function go(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ar=/[\n"\\]/g;function gt(i){return i.replace(ar,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zr(i,s,o,u,m,g,T,C){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+gn(s)):i.value!==""+gn(s)&&(i.value=""+gn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?yo(i,T,gn(s)):o!=null?yo(i,T,gn(o)):u!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+gn(C):i.removeAttribute("name")}function ua(i,s,o,u,m,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){po(i);return}o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),po(i)}function yo(i,s,o){s==="number"&&go(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Fe(i,s,o,u){if(i=i.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=s.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&u&&(i[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function ca(i,s,o){if(s!=null&&(s=""+gn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+gn(o):""}function Jr(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(ht(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),po(i)}function Wn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Tm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Tm.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Jc(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Gl(i,m,u)}else for(var g in s)s.hasOwnProperty(g)&&Gl(i,g,s[g])}function Kl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oi(i){return wm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Bt(){}var vo=null;function _o(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var or=null,Vn=null;function eh(i){var s=sr(i);if(s&&(i=s.stateNode)){var o=i[Yt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Zr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+gt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var m=u[Yt]||null;if(!m)throw Error(r(90));Zr(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&ql(u)}break e;case"textarea":ca(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Fe(i,!!o.multiple,s,!1)}}}var $l=!1;function th(i,s,o){if($l)return i(s,o);$l=!0;try{var u=i(s);return u}finally{if($l=!1,(or!==null||Vn!==null)&&(Wh(),or&&(s=or,i=Vn,Vn=or=null,eh(s),i)))for(s=0;s<i.length;s++)eh(i[s])}}function wn(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=!1;if(pi)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Yl=!1}var kn=null,To=null,ki=null;function es(){if(ki)return ki;var i,s=To,o=s.length,u,m="value"in kn?kn.value:kn.textContent,g=m.length;for(i=0;i<o&&s[i]===m[i];i++);var T=o-i;for(u=1;u<=T&&s[o-u]===m[g-u];u++);return ki=m.slice(i,1<u?1-u:void 0)}function ha(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ts(){return!0}function nt(){return!1}function sn(i){function s(o,u,m,g,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(o=i[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ts:nt,this.isPropagationStopped=nt,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),s}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=sn(lr),ns=_({},lr,{view:0,detail:0}),nh=sn(ns),is,Eo,yn,da=_({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yn&&(yn&&i.type==="mousemove"?(is=i.screenX-yn.screenX,Eo=i.screenY-yn.screenY):Eo=is=0,yn=i),is)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),ih=sn(da),ma=_({},da,{dataTransfer:0}),rh=sn(ma),Ql=_({},ns,{relatedTarget:0}),rs=sn(Ql),sh=_({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),wo=sn(sh),bm=_({},lr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ah=sn(bm),pa=_({},lr,{data:0}),Xl=sn(pa),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lh(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Zl[i])?!!s[i]:!1}function ss(){return lh}var uh=_({},ns,{key:function(i){if(i.key){var s=oh[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(i){return i.type==="keypress"?ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ch=sn(uh),ur=_({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=sn(ur),hh=_({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),fh=sn(hh),dh=_({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bo=sn(dh),vn=_({},da,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=sn(vn),ph=_({},lr,{newState:0,oldState:0}),as=sn(ph),h=[9,13,27,32],v=pi&&"CompositionEvent"in window,w=null;pi&&"documentMode"in document&&(w=document.documentMode);var I=pi&&"TextEvent"in window&&!w,$=pi&&(!v||w&&8<w&&11>=w),J=" ",ce=!1;function Ke(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ne=!1;function zt(i,s){switch(i){case"compositionend":return xt(s);case"keypress":return s.which!==32?null:(ce=!0,J);case"textInput":return i=s.data,i===J&&ce?null:i;default:return null}}function Ft(i,s){if(Ne)return i==="compositionend"||!v&&Ke(i,s)?(i=es(),ki=To=kn=null,Ne=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $&&s.locale!=="ko"?null:s.data;default:return null}}var os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!os[i.type]:s==="textarea"}function ga(i,s,o,u){or?Vn?Vn.push(u):Vn=[u]:or=u,s=sf(s,"onChange"),0<s.length&&(o=new fa("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var cr=null,eu=null;function tI(i){jE(i,0)}function gh(i){var s=la(i);if(ql(s))return i}function r_(i,s){if(i==="change")return s}var s_=!1;if(pi){var Sm;if(pi){var Am="oninput"in document;if(!Am){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),Am=typeof a_.oninput=="function"}Sm=Am}else Sm=!1;s_=Sm&&(!document.documentMode||9<document.documentMode)}function o_(){cr&&(cr.detachEvent("onpropertychange",l_),eu=cr=null)}function l_(i){if(i.propertyName==="value"&&gh(eu)){var s=[];ga(s,eu,i,_o(i)),th(tI,s)}}function nI(i,s,o){i==="focusin"?(o_(),cr=s,eu=o,cr.attachEvent("onpropertychange",l_)):i==="focusout"&&o_()}function iI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gh(eu)}function rI(i,s){if(i==="click")return gh(s)}function sI(i,s){if(i==="input"||i==="change")return gh(s)}function aI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Pn=typeof Object.is=="function"?Object.is:aI;function tu(i,s){if(Pn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!co.call(s,m)||!Pn(i[m],s[m]))return!1}return!0}function u_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function c_(i,s){var o=u_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=u_(o)}}function h_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?h_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function f_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=go(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=go(i.document)}return s}function Rm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var oI=pi&&"documentMode"in document&&11>=document.documentMode,So=null,Cm=null,nu=null,xm=!1;function d_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xm||So==null||So!==go(u)||(u=So,"selectionStart"in u&&Rm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nu&&tu(nu,u)||(nu=u,u=sf(Cm,"onSelect"),0<u.length&&(s=new fa("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=So)))}function ya(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Ao={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},Im={},m_={};pi&&(m_=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function va(i){if(Im[i])return Im[i];if(!Ao[i])return i;var s=Ao[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in m_)return Im[i]=s[o];return i}var p_=va("animationend"),g_=va("animationiteration"),y_=va("animationstart"),lI=va("transitionrun"),uI=va("transitionstart"),cI=va("transitioncancel"),v_=va("transitionend"),__=new Map,Dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dm.push("scrollEnd");function gi(i,s){__.set(i,s),pn(s,[i])}var yh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Zn=[],Ro=0,Nm=0;function vh(){for(var i=Ro,s=Nm=Ro=0;s<i;){var o=Zn[s];Zn[s++]=null;var u=Zn[s];Zn[s++]=null;var m=Zn[s];Zn[s++]=null;var g=Zn[s];if(Zn[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}g!==0&&T_(o,m,g)}}function _h(i,s,o,u){Zn[Ro++]=i,Zn[Ro++]=s,Zn[Ro++]=o,Zn[Ro++]=u,Nm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Mm(i,s,o,u){return _h(i,s,o,u),Th(i)}function _a(i,s){return _h(i,null,null,s),Th(i)}function T_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&s!==null&&(m=31-mn(o),i=g.hiddenUpdates,u=i[m],u===null?i[m]=[s]:u.push(s),s.lane=o|536870912),g):null}function Th(i){if(50<Su)throw Su=0,zp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Co={};function hI(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,s,o,u){return new hI(i,s,o,u)}function Om(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hr(i,s){var o=i.alternate;return o===null?(o=Ln(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function E_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Eh(i,s,o,u,m,g){var T=0;if(u=i,typeof i=="function")Om(i)&&(T=1);else if(typeof i=="string")T=gD(i,o,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Ln(31,o,s,m),i.elementType=N,i.lanes=g,i;case b:return Ta(o.children,m,g,s);case x:T=8,m|=24;break;case V:return i=Ln(12,o,s,m|2),i.elementType=V,i.lanes=g,i;case q:return i=Ln(13,o,s,m),i.elementType=q,i.lanes=g,i;case Y:return i=Ln(19,o,s,m),i.elementType=Y,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:T=10;break e;case L:T=9;break e;case K:T=11;break e;case R:T=14;break e;case S:T=16,u=null;break e}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Ln(T,o,s,m),s.elementType=i,s.type=u,s.lanes=g,s}function Ta(i,s,o,u){return i=Ln(7,i,u,s),i.lanes=o,i}function Vm(i,s,o){return i=Ln(6,i,null,s),i.lanes=o,i}function w_(i){var s=Ln(18,null,null,0);return s.stateNode=i,s}function km(i,s,o){return s=Ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var b_=new WeakMap;function Jn(i,s){if(typeof i=="object"&&i!==null){var o=b_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Gc(s)},b_.set(i,s),s)}return{value:i,source:s,stack:Gc(s)}}var xo=[],Io=0,wh=null,iu=0,ei=[],ti=0,ls=null,Pi=1,Li="";function fr(i,s){xo[Io++]=iu,xo[Io++]=wh,wh=i,iu=s}function S_(i,s,o){ei[ti++]=Pi,ei[ti++]=Li,ei[ti++]=ls,ls=i;var u=Pi;i=Li;var m=32-mn(u)-1;u&=~(1<<m),o+=1;var g=32-mn(s)+m;if(30<g){var T=m-m%5;g=(u&(1<<T)-1).toString(32),u>>=T,m-=T,Pi=1<<32-mn(s)+m|o<<m|u,Li=g+i}else Pi=1<<g|o<<m|u,Li=i}function Pm(i){i.return!==null&&(fr(i,1),S_(i,1,0))}function Lm(i){for(;i===wh;)wh=xo[--Io],xo[Io]=null,iu=xo[--Io],xo[Io]=null;for(;i===ls;)ls=ei[--ti],ei[ti]=null,Li=ei[--ti],ei[ti]=null,Pi=ei[--ti],ei[ti]=null}function A_(i,s){ei[ti++]=Pi,ei[ti++]=Li,ei[ti++]=ls,Pi=s.id,Li=s.overflow,ls=i}var Qt=null,it=null,Be=!1,us=null,ni=!1,Um=Error(r(519));function cs(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ru(Jn(s,i)),Um}function R_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[pt]=i,s[Yt]=u,o){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(o=0;o<Ru.length;o++)ke(Ru[o],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),ua(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Jr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||HE(s.textContent,o)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=Bt),s=!0):s=!1,s||cs(i,!0)}function C_(i){for(Qt=i.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Qt=Qt.return}}function Do(i){if(i!==Qt)return!1;if(!Be)return C_(i),Be=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||ng(i.type,i.memoizedProps)),o=!o),o&&it&&cs(i),C_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));it=ZE(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));it=ZE(i)}else s===27?(s=it,Ss(i.type)?(i=og,og=null,it=i):it=s):it=Qt?ri(i.stateNode.nextSibling):null;return!0}function Ea(){it=Qt=null,Be=!1}function jm(){var i=us;return i!==null&&(Cn===null?Cn=i:Cn.push.apply(Cn,i),us=null),i}function ru(i){us===null?us=[i]:us.push(i)}var Bm=F(null),wa=null,dr=null;function hs(i,s,o){le(Bm,s._currentValue),s._currentValue=o}function mr(i){i._currentValue=Bm.current,ie(Bm)}function zm(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Fm(i,s,o,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var j=0;j<s.length;j++)if(C.context===s[j]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),zm(g.return,o,i),u||(T=null);break e}g=C.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),zm(T,o,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function No(i,s,o,u){i=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var C=m.type;Pn(m.pendingProps.value,T.value)||(i!==null?i.push(C):i=[C])}}else if(m===Oe.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Nu):i=[Nu])}m=m.return}i!==null&&Fm(s,i,o,u),s.flags|=262144}function bh(i){for(i=i.firstContext;i!==null;){if(!Pn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ba(i){wa=i,dr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xt(i){return x_(wa,i)}function Sh(i,s){return wa===null&&ba(i),x_(i,s)}function x_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},dr===null){if(i===null)throw Error(r(308));dr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else dr=dr.next=s;return o}var fI=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},dI=t.unstable_scheduleCallback,mI=t.unstable_NormalPriority,It={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hm(){return{controller:new fI,data:new Map,refCount:0}}function su(i){i.refCount--,i.refCount===0&&dI(mI,function(){i.controller.abort()})}var au=null,qm=0,Mo=0,Oo=null;function pI(i,s){if(au===null){var o=au=[];qm=0,Mo=$p(),Oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qm++,s.then(I_,I_),s}function I_(){if(--qm===0&&au!==null){Oo!==null&&(Oo.status="fulfilled");var i=au;au=null,Mo=0,Oo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function gI(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var D_=ee.S;ee.S=function(i,s){dE=Kt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pI(i,s),D_!==null&&D_(i,s)};var Sa=F(null);function Gm(){var i=Sa.current;return i!==null?i:et.pooledCache}function Ah(i,s){s===null?le(Sa,Sa.current):le(Sa,s.pool)}function N_(){var i=Gm();return i===null?null:{parent:It._currentValue,pool:i}}var Vo=Error(r(460)),Km=Error(r(474)),Rh=Error(r(542)),Ch={then:function(){}};function M_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function O_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Bt,Bt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,k_(i),i;default:if(typeof s.status=="string")s.then(Bt,Bt);else{if(i=et,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,k_(i),i}throw Ra=s,Vo}}function Aa(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ra=o,Vo):o}}var Ra=null;function V_(){if(Ra===null)throw Error(r(459));var i=Ra;return Ra=null,i}function k_(i){if(i===Vo||i===Rh)throw Error(r(483))}var ko=null,ou=0;function xh(i){var s=ou;return ou+=1,ko===null&&(ko=[]),O_(ko,i,s)}function lu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Ih(i,s){throw s.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function P_(i){function s(G,z){if(i){var Q=G.deletions;Q===null?(G.deletions=[z],G.flags|=16):Q.push(z)}}function o(G,z){if(!i)return null;for(;z!==null;)s(G,z),z=z.sibling;return null}function u(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function m(G,z){return G=hr(G,z),G.index=0,G.sibling=null,G}function g(G,z,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<z?(G.flags|=67108866,z):Q):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function T(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function C(G,z,Q,re){return z===null||z.tag!==6?(z=Vm(Q,G.mode,re),z.return=G,z):(z=m(z,Q),z.return=G,z)}function j(G,z,Q,re){var ve=Q.type;return ve===b?te(G,z,Q.props.children,re,Q.key):z!==null&&(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&Aa(ve)===z.type)?(z=m(z,Q.props),lu(z,Q),z.return=G,z):(z=Eh(Q.type,Q.key,Q.props,null,G.mode,re),lu(z,Q),z.return=G,z)}function X(G,z,Q,re){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=km(Q,G.mode,re),z.return=G,z):(z=m(z,Q.children||[]),z.return=G,z)}function te(G,z,Q,re,ve){return z===null||z.tag!==7?(z=Ta(Q,G.mode,re,ve),z.return=G,z):(z=m(z,Q),z.return=G,z)}function se(G,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Vm(""+z,G.mode,Q),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return Q=Eh(z.type,z.key,z.props,null,G.mode,Q),lu(Q,z),Q.return=G,Q;case D:return z=km(z,G.mode,Q),z.return=G,z;case S:return z=Aa(z),se(G,z,Q)}if(ht(z)||H(z))return z=Ta(z,G.mode,Q,null),z.return=G,z;if(typeof z.then=="function")return se(G,xh(z),Q);if(z.$$typeof===k)return se(G,Sh(G,z),Q);Ih(G,z)}return null}function W(G,z,Q,re){var ve=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return ve!==null?null:C(G,z,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===ve?j(G,z,Q,re):null;case D:return Q.key===ve?X(G,z,Q,re):null;case S:return Q=Aa(Q),W(G,z,Q,re)}if(ht(Q)||H(Q))return ve!==null?null:te(G,z,Q,re,null);if(typeof Q.then=="function")return W(G,z,xh(Q),re);if(Q.$$typeof===k)return W(G,z,Sh(G,Q),re);Ih(G,Q)}return null}function Z(G,z,Q,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Q)||null,C(z,G,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return G=G.get(re.key===null?Q:re.key)||null,j(z,G,re,ve);case D:return G=G.get(re.key===null?Q:re.key)||null,X(z,G,re,ve);case S:return re=Aa(re),Z(G,z,Q,re,ve)}if(ht(re)||H(re))return G=G.get(Q)||null,te(z,G,re,ve,null);if(typeof re.then=="function")return Z(G,z,Q,xh(re),ve);if(re.$$typeof===k)return Z(G,z,Q,Sh(z,re),ve);Ih(z,re)}return null}function me(G,z,Q,re){for(var ve=null,He=null,pe=z,xe=z=0,Le=null;pe!==null&&xe<Q.length;xe++){pe.index>xe?(Le=pe,pe=null):Le=pe.sibling;var qe=W(G,pe,Q[xe],re);if(qe===null){pe===null&&(pe=Le);break}i&&pe&&qe.alternate===null&&s(G,pe),z=g(qe,z,xe),He===null?ve=qe:He.sibling=qe,He=qe,pe=Le}if(xe===Q.length)return o(G,pe),Be&&fr(G,xe),ve;if(pe===null){for(;xe<Q.length;xe++)pe=se(G,Q[xe],re),pe!==null&&(z=g(pe,z,xe),He===null?ve=pe:He.sibling=pe,He=pe);return Be&&fr(G,xe),ve}for(pe=u(pe);xe<Q.length;xe++)Le=Z(pe,G,xe,Q[xe],re),Le!==null&&(i&&Le.alternate!==null&&pe.delete(Le.key===null?xe:Le.key),z=g(Le,z,xe),He===null?ve=Le:He.sibling=Le,He=Le);return i&&pe.forEach(function(Is){return s(G,Is)}),Be&&fr(G,xe),ve}function _e(G,z,Q,re){if(Q==null)throw Error(r(151));for(var ve=null,He=null,pe=z,xe=z=0,Le=null,qe=Q.next();pe!==null&&!qe.done;xe++,qe=Q.next()){pe.index>xe?(Le=pe,pe=null):Le=pe.sibling;var Is=W(G,pe,qe.value,re);if(Is===null){pe===null&&(pe=Le);break}i&&pe&&Is.alternate===null&&s(G,pe),z=g(Is,z,xe),He===null?ve=Is:He.sibling=Is,He=Is,pe=Le}if(qe.done)return o(G,pe),Be&&fr(G,xe),ve;if(pe===null){for(;!qe.done;xe++,qe=Q.next())qe=se(G,qe.value,re),qe!==null&&(z=g(qe,z,xe),He===null?ve=qe:He.sibling=qe,He=qe);return Be&&fr(G,xe),ve}for(pe=u(pe);!qe.done;xe++,qe=Q.next())qe=Z(pe,G,xe,qe.value,re),qe!==null&&(i&&qe.alternate!==null&&pe.delete(qe.key===null?xe:qe.key),z=g(qe,z,xe),He===null?ve=qe:He.sibling=qe,He=qe);return i&&pe.forEach(function(CD){return s(G,CD)}),Be&&fr(G,xe),ve}function Je(G,z,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===b&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:e:{for(var ve=Q.key;z!==null;){if(z.key===ve){if(ve=Q.type,ve===b){if(z.tag===7){o(G,z.sibling),re=m(z,Q.props.children),re.return=G,G=re;break e}}else if(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&Aa(ve)===z.type){o(G,z.sibling),re=m(z,Q.props),lu(re,Q),re.return=G,G=re;break e}o(G,z);break}else s(G,z);z=z.sibling}Q.type===b?(re=Ta(Q.props.children,G.mode,re,Q.key),re.return=G,G=re):(re=Eh(Q.type,Q.key,Q.props,null,G.mode,re),lu(re,Q),re.return=G,G=re)}return T(G);case D:e:{for(ve=Q.key;z!==null;){if(z.key===ve)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){o(G,z.sibling),re=m(z,Q.children||[]),re.return=G,G=re;break e}else{o(G,z);break}else s(G,z);z=z.sibling}re=km(Q,G.mode,re),re.return=G,G=re}return T(G);case S:return Q=Aa(Q),Je(G,z,Q,re)}if(ht(Q))return me(G,z,Q,re);if(H(Q)){if(ve=H(Q),typeof ve!="function")throw Error(r(150));return Q=ve.call(Q),_e(G,z,Q,re)}if(typeof Q.then=="function")return Je(G,z,xh(Q),re);if(Q.$$typeof===k)return Je(G,z,Sh(G,Q),re);Ih(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(o(G,z.sibling),re=m(z,Q),re.return=G,G=re):(o(G,z),re=Vm(Q,G.mode,re),re.return=G,G=re),T(G)):o(G,z)}return function(G,z,Q,re){try{ou=0;var ve=Je(G,z,Q,re);return ko=null,ve}catch(pe){if(pe===Vo||pe===Rh)throw pe;var He=Ln(29,pe,null,G.mode);return He.lanes=re,He.return=G,He}finally{}}}var Ca=P_(!0),L_=P_(!1),fs=!1;function $m(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ms(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Th(i),T_(i,null,o),s}return _h(i,u,s,o),Th(i)}function uu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Kr(i,o)}}function Qm(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Xm=!1;function cu(){if(Xm){var i=Oo;if(i!==null)throw i}}function hu(i,s,o,u){Xm=!1;var m=i.updateQueue;fs=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var j=C,X=j.next;j.next=null,T===null?g=X:T.next=X,T=j;var te=i.alternate;te!==null&&(te=te.updateQueue,C=te.lastBaseUpdate,C!==T&&(C===null?te.firstBaseUpdate=X:C.next=X,te.lastBaseUpdate=j))}if(g!==null){var se=m.baseState;T=0,te=X=j=null,C=g;do{var W=C.lane&-536870913,Z=W!==C.lane;if(Z?(Pe&W)===W:(u&W)===W){W!==0&&W===Mo&&(Xm=!0),te!==null&&(te=te.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var me=i,_e=C;W=s;var Je=o;switch(_e.tag){case 1:if(me=_e.payload,typeof me=="function"){se=me.call(Je,se,W);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=_e.payload,W=typeof me=="function"?me.call(Je,se,W):me,W==null)break e;se=_({},se,W);break e;case 2:fs=!0}}W=C.callback,W!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},te===null?(X=te=Z,j=se):te=te.next=Z,T|=W;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);te===null&&(j=se),m.baseState=j,m.firstBaseUpdate=X,m.lastBaseUpdate=te,g===null&&(m.shared.lanes=0),_s|=T,i.lanes=T,i.memoizedState=se}}function U_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function j_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)U_(o[i],s)}var Po=F(null),Dh=F(0);function B_(i,s){i=br,le(Dh,i),le(Po,s),br=i|s.baseLanes}function Wm(){le(Dh,br),le(Po,Po.current)}function Zm(){br=Dh.current,ie(Po),ie(Dh)}var Un=F(null),ii=null;function ps(i){var s=i.alternate;le(St,St.current&1),le(Un,i),ii===null&&(s===null||Po.current!==null||s.memoizedState!==null)&&(ii=i)}function Jm(i){le(St,St.current),le(Un,i),ii===null&&(ii=i)}function z_(i){i.tag===22?(le(St,St.current),le(Un,i),ii===null&&(ii=i)):gs()}function gs(){le(St,St.current),le(Un,Un.current)}function jn(i){ie(Un),ii===i&&(ii=null),ie(St)}var St=F(0);function Nh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||sg(o)||ag(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pr=0,Ce=null,We=null,Dt=null,Mh=!1,Lo=!1,xa=!1,Oh=0,fu=0,Uo=null,yI=0;function yt(){throw Error(r(321))}function ep(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Pn(i[o],s[o]))return!1;return!0}function tp(i,s,o,u,m,g){return pr=g,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ee.H=i===null||i.memoizedState===null?ST:gp,xa=!1,g=o(u,m),xa=!1,Lo&&(g=H_(s,o,u,m)),F_(i),g}function F_(i){ee.H=pu;var s=We!==null&&We.next!==null;if(pr=0,Dt=We=Ce=null,Mh=!1,fu=0,Uo=null,s)throw Error(r(300));i===null||Nt||(i=i.dependencies,i!==null&&bh(i)&&(Nt=!0))}function H_(i,s,o,u){Ce=i;var m=0;do{if(Lo&&(Uo=null),fu=0,Lo=!1,25<=m)throw Error(r(301));if(m+=1,Dt=We=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ee.H=AT,g=s(o,u)}while(Lo);return g}function vI(){var i=ee.H,s=i.useState()[0];return s=typeof s.then=="function"?du(s):s,i=i.useState()[0],(We!==null?We.memoizedState:null)!==i&&(Ce.flags|=1024),s}function np(){var i=Oh!==0;return Oh=0,i}function ip(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function rp(i){if(Mh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Mh=!1}pr=0,Dt=We=Ce=null,Lo=!1,fu=Oh=0,Uo=null}function _n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ce.memoizedState=Dt=i:Dt=Dt.next=i,Dt}function At(){if(We===null){var i=Ce.alternate;i=i!==null?i.memoizedState:null}else i=We.next;var s=Dt===null?Ce.memoizedState:Dt.next;if(s!==null)Dt=s,We=i;else{if(i===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));We=i,i={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Dt===null?Ce.memoizedState=Dt=i:Dt=Dt.next=i}return Dt}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(i){var s=fu;return fu+=1,Uo===null&&(Uo=[]),i=O_(Uo,i,s),s=Ce,(Dt===null?s.memoizedState:Dt.next)===null&&(s=s.alternate,ee.H=s===null||s.memoizedState===null?ST:gp),i}function kh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return du(i);if(i.$$typeof===k)return Xt(i)}throw Error(r(438,String(i)))}function sp(i){var s=null,o=Ce.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Vh(),Ce.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=U;return s.index++,o}function gr(i,s){return typeof s=="function"?s(i):s}function Ph(i){var s=At();return ap(s,We,i)}function ap(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=i.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}s.baseQueue=m=g,u.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{s=m.next;var C=T=null,j=null,X=s,te=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(Pe&se)===se:(pr&se)===se){var W=X.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Mo&&(te=!0);else if((pr&W)===W){X=X.next,W===Mo&&(te=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(C=j=se,T=g):j=j.next=se,Ce.lanes|=W,_s|=W;se=X.action,xa&&o(g,se),g=X.hasEagerState?X.eagerState:o(g,se)}else W={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(C=j=W,T=g):j=j.next=W,Ce.lanes|=se,_s|=se;X=X.next}while(X!==null&&X!==s);if(j===null?T=g:j.next=C,!Pn(g,i.memoizedState)&&(Nt=!0,te&&(o=Oo,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=j,u.lastRenderedState=g}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function op(i){var s=At(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);Pn(g,s.memoizedState)||(Nt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function q_(i,s,o){var u=Ce,m=At(),g=Be;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!Pn((We||m).memoizedState,o);if(T&&(m.memoizedState=o,Nt=!0),m=m.queue,cp($_.bind(null,u,m,i),[i]),m.getSnapshot!==s||T||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},K_.bind(null,u,m,o,s),null),et===null)throw Error(r(349));g||(pr&127)!==0||G_(u,s,o)}return o}function G_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ce.updateQueue,s===null?(s=Vh(),Ce.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function K_(i,s,o,u){s.value=o,s.getSnapshot=u,Y_(s)&&Q_(i)}function $_(i,s,o){return o(function(){Y_(s)&&Q_(i)})}function Y_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Pn(i,o)}catch{return!0}}function Q_(i){var s=_a(i,2);s!==null&&xn(s,i,2)}function lp(i){var s=_n();if(typeof i=="function"){var o=i;if(i=o(),xa){Yn(!0);try{o()}finally{Yn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:i},s}function X_(i,s,o,u){return i.baseState=o,ap(i,We,typeof u=="function"?u:gr)}function _I(i,s,o,u,m){if(jh(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};ee.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,W_(s,g)):(g.next=o.next,s.pending=o.next=g)}}function W_(i,s){var o=s.action,u=s.payload,m=i.state;if(s.isTransition){var g=ee.T,T={};ee.T=T;try{var C=o(m,u),j=ee.S;j!==null&&j(T,C),Z_(i,s,C)}catch(X){up(i,s,X)}finally{g!==null&&T.types!==null&&(g.types=T.types),ee.T=g}}else try{g=o(m,u),Z_(i,s,g)}catch(X){up(i,s,X)}}function Z_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){J_(i,s,u)},function(u){return up(i,s,u)}):J_(i,s,o)}function J_(i,s,o){s.status="fulfilled",s.value=o,eT(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,W_(i,o)))}function up(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,eT(s),s=s.next;while(s!==u)}i.action=null}function eT(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function tT(i,s){return s}function nT(i,s){if(Be){var o=et.formState;if(o!==null){e:{var u=Ce;if(Be){if(it){t:{for(var m=it,g=ni;m.nodeType!==8;){if(!g){m=null;break t}if(m=ri(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){it=ri(m.nextSibling),u=m.data==="F!";break e}}cs(u)}u=!1}u&&(s=o[0])}}return o=_n(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tT,lastRenderedState:s},o.queue=u,o=ET.bind(null,Ce,u),u.dispatch=o,u=lp(!1),g=pp.bind(null,Ce,!1,u.queue),u=_n(),m={state:s,dispatch:null,action:i,pending:null},u.queue=m,o=_I.bind(null,Ce,m,g,o),m.dispatch=o,u.memoizedState=i,[s,o,!1]}function iT(i){var s=At();return rT(s,We,i)}function rT(i,s,o){if(s=ap(i,s,tT)[0],i=Ph(gr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(T){throw T===Vo?Rh:T}else u=s;s=At();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(Ce.flags|=2048,jo(9,{destroy:void 0},TI.bind(null,m,o),null)),[u,g,i]}function TI(i,s){i.action=s}function sT(i){var s=At(),o=We;if(o!==null)return rT(s,o,i);At(),s=s.memoizedState,o=At();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function jo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=Vh(),Ce.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function aT(){return At().memoizedState}function Lh(i,s,o,u){var m=_n();Ce.flags|=i,m.memoizedState=jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Uh(i,s,o,u){var m=At();u=u===void 0?null:u;var g=m.memoizedState.inst;We!==null&&u!==null&&ep(u,We.memoizedState.deps)?m.memoizedState=jo(s,g,o,u):(Ce.flags|=i,m.memoizedState=jo(1|s,g,o,u))}function oT(i,s){Lh(8390656,8,i,s)}function cp(i,s){Uh(2048,8,i,s)}function EI(i){Ce.flags|=4;var s=Ce.updateQueue;if(s===null)s=Vh(),Ce.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function lT(i){var s=At().memoizedState;return EI({ref:s,nextImpl:i}),function(){if((Ge&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function uT(i,s){return Uh(4,2,i,s)}function cT(i,s){return Uh(4,4,i,s)}function hT(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function fT(i,s,o){o=o!=null?o.concat([i]):null,Uh(4,4,hT.bind(null,s,i),o)}function hp(){}function dT(i,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&ep(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function mT(i,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&ep(s,u[1]))return u[0];if(u=i(),xa){Yn(!0);try{i()}finally{Yn(!1)}}return o.memoizedState=[u,s],u}function fp(i,s,o){return o===void 0||(pr&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=pE(),Ce.lanes|=i,_s|=i,o)}function pT(i,s,o,u){return Pn(o,s)?o:Po.current!==null?(i=fp(i,o,u),Pn(i,s)||(Nt=!0),i):(pr&42)===0||(pr&1073741824)!==0&&(Pe&261930)===0?(Nt=!0,i.memoizedState=o):(i=pE(),Ce.lanes|=i,_s|=i,s)}function gT(i,s,o,u,m){var g=oe.p;oe.p=g!==0&&8>g?g:8;var T=ee.T,C={};ee.T=C,pp(i,!1,s,o);try{var j=m(),X=ee.S;if(X!==null&&X(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var te=gI(j,u);mu(i,s,te,Fn(i))}else mu(i,s,u,Fn(i))}catch(se){mu(i,s,{then:function(){},status:"rejected",reason:se},Fn())}finally{oe.p=g,T!==null&&C.types!==null&&(T.types=C.types),ee.T=T}}function wI(){}function dp(i,s,o,u){if(i.tag!==5)throw Error(r(476));var m=yT(i).queue;gT(i,m,s,fe,o===null?wI:function(){return vT(i),o(u)})}function yT(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:fe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function vT(i){var s=yT(i);s.next===null&&(s=i.alternate.memoizedState),mu(i,s.next.queue,{},Fn())}function mp(){return Xt(Nu)}function _T(){return At().memoizedState}function TT(){return At().memoizedState}function bI(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Fn();i=ds(o);var u=ms(s,i,o);u!==null&&(xn(u,s,o),uu(u,s,o)),s={cache:Hm()},i.payload=s;return}s=s.return}}function SI(i,s,o){var u=Fn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jh(i)?wT(s,o):(o=Mm(i,s,o,u),o!==null&&(xn(o,i,u),bT(o,s,u)))}function ET(i,s,o){var u=Fn();mu(i,s,o,u)}function mu(i,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jh(i))wT(s,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,C=g(T,o);if(m.hasEagerState=!0,m.eagerState=C,Pn(C,T))return _h(i,s,m,0),et===null&&vh(),!1}catch{}finally{}if(o=Mm(i,s,m,u),o!==null)return xn(o,i,u),bT(o,s,u),!0}return!1}function pp(i,s,o,u){if(u={lane:2,revertLane:$p(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},jh(i)){if(s)throw Error(r(479))}else s=Mm(i,o,u,2),s!==null&&xn(s,i,2)}function jh(i){var s=i.alternate;return i===Ce||s!==null&&s===Ce}function wT(i,s){Lo=Mh=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function bT(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Kr(i,o)}}var pu={readContext:Xt,use:kh,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};pu.useEffectEvent=yt;var ST={readContext:Xt,use:kh,useCallback:function(i,s){return _n().memoizedState=[i,s===void 0?null:s],i},useContext:Xt,useEffect:oT,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Lh(4194308,4,hT.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Lh(4194308,4,i,s)},useInsertionEffect:function(i,s){Lh(4,2,i,s)},useMemo:function(i,s){var o=_n();s=s===void 0?null:s;var u=i();if(xa){Yn(!0);try{i()}finally{Yn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=_n();if(o!==void 0){var m=o(s);if(xa){Yn(!0);try{o(s)}finally{Yn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=SI.bind(null,Ce,i),[u.memoizedState,i]},useRef:function(i){var s=_n();return i={current:i},s.memoizedState=i},useState:function(i){i=lp(i);var s=i.queue,o=ET.bind(null,Ce,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:hp,useDeferredValue:function(i,s){var o=_n();return fp(o,i,s)},useTransition:function(){var i=lp(!1);return i=gT.bind(null,Ce,i.queue,!0,!1),_n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ce,m=_n();if(Be){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),et===null)throw Error(r(349));(Pe&127)!==0||G_(u,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,oT($_.bind(null,u,g,i),[i]),u.flags|=2048,jo(9,{destroy:void 0},K_.bind(null,u,g,o,s),null),o},useId:function(){var i=_n(),s=et.identifierPrefix;if(Be){var o=Li,u=Pi;o=(u&~(1<<32-mn(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Oh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=yI++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:mp,useFormState:nT,useActionState:nT,useOptimistic:function(i){var s=_n();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pp.bind(null,Ce,!0,o),o.dispatch=s,[i,s]},useMemoCache:sp,useCacheRefresh:function(){return _n().memoizedState=bI.bind(null,Ce)},useEffectEvent:function(i){var s=_n(),o={impl:i};return s.memoizedState=o,function(){if((Ge&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},gp={readContext:Xt,use:kh,useCallback:dT,useContext:Xt,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:Ph,useRef:aT,useState:function(){return Ph(gr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=At();return pT(o,We.memoizedState,i,s)},useTransition:function(){var i=Ph(gr)[0],s=At().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:iT,useActionState:iT,useOptimistic:function(i,s){var o=At();return X_(o,We,i,s)},useMemoCache:sp,useCacheRefresh:TT};gp.useEffectEvent=lT;var AT={readContext:Xt,use:kh,useCallback:dT,useContext:Xt,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:op,useRef:aT,useState:function(){return op(gr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=At();return We===null?fp(o,i,s):pT(o,We.memoizedState,i,s)},useTransition:function(){var i=op(gr)[0],s=At().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:sT,useActionState:sT,useOptimistic:function(i,s){var o=At();return We!==null?X_(o,We,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:sp,useCacheRefresh:TT};AT.useEffectEvent=lT;function yp(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var vp={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Fn(),m=ds(u);m.payload=s,o!=null&&(m.callback=o),s=ms(i,m,u),s!==null&&(xn(s,i,u),uu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Fn(),m=ds(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=ms(i,m,u),s!==null&&(xn(s,i,u),uu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Fn(),u=ds(o);u.tag=2,s!=null&&(u.callback=s),s=ms(i,u,o),s!==null&&(xn(s,i,o),uu(s,i,o))}};function RT(i,s,o,u,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,T):s.prototype&&s.prototype.isPureReactComponent?!tu(o,u)||!tu(m,g):!0}function CT(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&vp.enqueueReplaceState(s,s.state,null)}function Ia(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=_({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}function xT(i){yh(i)}function IT(i){console.error(i)}function DT(i){yh(i)}function Bh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function NT(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _p(i,s,o){return o=ds(o),o.tag=3,o.payload={element:null},o.callback=function(){Bh(i,s)},o}function MT(i){return i=ds(i),i.tag=3,i}function OT(i,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;i.payload=function(){return m(g)},i.callback=function(){NT(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){NT(s,o,u),typeof m!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function AI(i,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&No(s,o,m,!0),o=Un.current,o!==null){switch(o.tag){case 31:case 13:return ii===null?Zh():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ch?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),qp(i,u,m)),!1;case 22:return o.flags|=65536,u===Ch?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),qp(i,u,m)),!1}throw Error(r(435,o.tag))}return qp(i,u,m),Zh(),!1}if(Be)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Um&&(i=Error(r(422),{cause:u}),ru(Jn(i,o)))):(u!==Um&&(s=Error(r(423),{cause:u}),ru(Jn(s,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Jn(u,o),m=_p(i.stateNode,u,m),Qm(i,m),vt!==4&&(vt=2)),!1;var g=Error(r(520),{cause:u});if(g=Jn(g,o),bu===null?bu=[g]:bu.push(g),vt!==4&&(vt=2),s===null)return!0;u=Jn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=_p(o.stateNode,u,i),Qm(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ts===null||!Ts.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=MT(m),OT(m,i,o,u),Qm(o,m),!1}o=o.return}while(o!==null);return!1}var Tp=Error(r(461)),Nt=!1;function Wt(i,s,o,u){s.child=i===null?L_(s,null,o,u):Ca(s,i.child,o,u)}function VT(i,s,o,u,m){o=o.render;var g=s.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return ba(s),u=tp(i,s,o,T,g,m),C=np(),i!==null&&!Nt?(ip(i,s,m),yr(i,s,m)):(Be&&C&&Pm(s),s.flags|=1,Wt(i,s,u,m),s.child)}function kT(i,s,o,u,m){if(i===null){var g=o.type;return typeof g=="function"&&!Om(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,PT(i,s,g,u,m)):(i=Eh(o.type,null,u,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!xp(i,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:tu,o(T,u)&&i.ref===s.ref)return yr(i,s,m)}return s.flags|=1,i=hr(g,u),i.ref=s.ref,i.return=s,s.child=i}function PT(i,s,o,u,m){if(i!==null){var g=i.memoizedProps;if(tu(g,u)&&i.ref===s.ref)if(Nt=!1,s.pendingProps=u=g,xp(i,m))(i.flags&131072)!==0&&(Nt=!0);else return s.lanes=i.lanes,yr(i,s,m)}return Ep(i,s,o,u,m)}function LT(i,s,o,u){var m=u.children,g=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(u=s.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~g}else u=0,s.child=null;return UT(i,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ah(s,g!==null?g.cachePool:null),g!==null?B_(s,g):Wm(),z_(s);else return u=s.lanes=536870912,UT(i,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Ah(s,g.cachePool),B_(s,g),gs(),s.memoizedState=null):(i!==null&&Ah(s,null),Wm(),gs());return Wt(i,s,m,o),s.child}function gu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function UT(i,s,o,u,m){var g=Gm();return g=g===null?null:{parent:It._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},i!==null&&Ah(s,null),Wm(),z_(s),i!==null&&No(i,s,u,!0),s.childLanes=m,null}function zh(i,s){return s=Hh({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function jT(i,s,o){return Ca(s,i.child,null,o),i=zh(s,s.pendingProps),i.flags|=2,jn(s),s.memoizedState=null,i}function RI(i,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Be){if(u.mode==="hidden")return i=zh(s,u),s.lanes=536870912,gu(null,i);if(Jm(s),(i=it)?(i=WE(i,ni),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ls!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qt=s,it=null)):i=null,i===null)throw cs(s);return s.lanes=536870912,null}return zh(s,u)}var g=i.memoizedState;if(g!==null){var T=g.dehydrated;if(Jm(s),m)if(s.flags&256)s.flags&=-257,s=jT(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Nt||No(i,s,o,!1),m=(o&i.childLanes)!==0,Nt||m){if(u=et,u!==null&&(T=$r(u,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,_a(i,T),xn(u,i,T),Tp;Zh(),s=jT(i,s,o)}else i=g.treeContext,it=ri(T.nextSibling),Qt=s,Be=!0,us=null,ni=!1,i!==null&&A_(s,i),s=zh(s,u),s.flags|=4096;return s}return i=hr(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Fh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Ep(i,s,o,u,m){return ba(s),o=tp(i,s,o,u,void 0,m),u=np(),i!==null&&!Nt?(ip(i,s,m),yr(i,s,m)):(Be&&u&&Pm(s),s.flags|=1,Wt(i,s,o,m),s.child)}function BT(i,s,o,u,m,g){return ba(s),s.updateQueue=null,o=H_(s,u,o,m),F_(i),u=np(),i!==null&&!Nt?(ip(i,s,g),yr(i,s,g)):(Be&&u&&Pm(s),s.flags|=1,Wt(i,s,o,g),s.child)}function zT(i,s,o,u,m){if(ba(s),s.stateNode===null){var g=Co,T=o.contextType;typeof T=="object"&&T!==null&&(g=Xt(T)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},$m(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Xt(T):Co,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(yp(s,o,T,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&vp.enqueueReplaceState(g,g.state,null),hu(s,u,g,m),cu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){g=s.stateNode;var C=s.memoizedProps,j=Ia(o,C);g.props=j;var X=g.context,te=o.contextType;T=Co,typeof te=="object"&&te!==null&&(T=Xt(te));var se=o.getDerivedStateFromProps;te=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||X!==T)&&CT(s,g,u,T),fs=!1;var W=s.memoizedState;g.state=W,hu(s,u,g,m),cu(),X=s.memoizedState,C||W!==X||fs?(typeof se=="function"&&(yp(s,o,se,u),X=s.memoizedState),(j=fs||RT(s,o,j,u,W,X,T))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),g.props=u,g.state=X,g.context=T,u=j):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Ym(i,s),T=s.memoizedProps,te=Ia(o,T),g.props=te,se=s.pendingProps,W=g.context,X=o.contextType,j=Co,typeof X=="object"&&X!==null&&(j=Xt(X)),C=o.getDerivedStateFromProps,(X=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==se||W!==j)&&CT(s,g,u,j),fs=!1,W=s.memoizedState,g.state=W,hu(s,u,g,m),cu();var Z=s.memoizedState;T!==se||W!==Z||fs||i!==null&&i.dependencies!==null&&bh(i.dependencies)?(typeof C=="function"&&(yp(s,o,C,u),Z=s.memoizedState),(te=fs||RT(s,o,te,u,W,Z,j)||i!==null&&i.dependencies!==null&&bh(i.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Z,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Z,j)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Z),g.props=u,g.state=Z,g.context=j,u=te):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=1024),u=!1)}return g=u,Fh(i,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&u?(s.child=Ca(s,i.child,null,m),s.child=Ca(s,null,o,m)):Wt(i,s,o,m),s.memoizedState=g.state,i=s.child):i=yr(i,s,m),i}function FT(i,s,o,u){return Ea(),s.flags|=256,Wt(i,s,o,u),s.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(i){return{baseLanes:i,cachePool:N_()}}function Sp(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=zn),i}function HT(i,s,o){var u=s.pendingProps,m=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(St.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Be){if(m?ps(s):gs(),(i=it)?(i=WE(i,ni),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ls!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qt=s,it=null)):i=null,i===null)throw cs(s);return ag(i)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,m?(gs(),m=s.mode,C=Hh({mode:"hidden",children:C},m),u=Ta(u,m,o,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,gu(null,u)):(ps(s),Ap(s,C))}var j=i.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(g)s.flags&256?(ps(s),s.flags&=-257,s=Rp(i,s,o)):s.memoizedState!==null?(gs(),s.child=i.child,s.flags|=128,s=null):(gs(),C=u.fallback,m=s.mode,u=Hh({mode:"visible",children:u.children},m),C=Ta(C,m,o,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,Ca(s,i.child,null,o),u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,s=gu(null,u));else if(ps(s),ag(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var X=T.dgst;T=X,u=Error(r(419)),u.stack="",u.digest=T,ru({value:u,source:null,stack:null}),s=Rp(i,s,o)}else if(Nt||No(i,s,o,!1),T=(o&i.childLanes)!==0,Nt||T){if(T=et,T!==null&&(u=$r(T,o),u!==0&&u!==j.retryLane))throw j.retryLane=u,_a(i,u),xn(T,i,u),Tp;sg(C)||Zh(),s=Rp(i,s,o)}else sg(C)?(s.flags|=192,s.child=i.child,s=null):(i=j.treeContext,it=ri(C.nextSibling),Qt=s,Be=!0,us=null,ni=!1,i!==null&&A_(s,i),s=Ap(s,u.children),s.flags|=4096);return s}return m?(gs(),C=u.fallback,m=s.mode,j=i.child,X=j.sibling,u=hr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,X!==null?C=hr(X,C):(C=Ta(C,m,o,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,gu(null,u),u=s.child,C=i.child.memoizedState,C===null?C=bp(o):(m=C.cachePool,m!==null?(j=It._currentValue,m=m.parent!==j?{parent:j,pool:j}:m):m=N_(),C={baseLanes:C.baseLanes|o,cachePool:m}),u.memoizedState=C,u.childLanes=Sp(i,T,o),s.memoizedState=wp,gu(i.child,u)):(ps(s),o=i.child,i=o.sibling,o=hr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function Ap(i,s){return s=Hh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Hh(i,s){return i=Ln(22,i,null,s),i.lanes=0,i}function Rp(i,s,o){return Ca(s,i.child,null,o),i=Ap(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function qT(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),zm(i.return,s,o)}function Cp(i,s,o,u,m,g){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=g)}function GT(i,s,o){var u=s.pendingProps,m=u.revealOrder,g=u.tail;u=u.children;var T=St.current,C=(T&2)!==0;if(C?(T=T&1|2,s.flags|=128):T&=1,le(St,T),Wt(i,s,u,o),u=Be?iu:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qT(i,o,s);else if(i.tag===19)qT(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)i=o.alternate,i!==null&&Nh(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Cp(s,!1,m,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Nh(i)===null){s.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Cp(s,!0,o,null,g,u);break;case"together":Cp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function yr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),_s|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(No(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=hr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=hr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function xp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&bh(i)))}function CI(i,s,o){switch(s.tag){case 3:Gt(s,s.stateNode.containerInfo),hs(s,It,i.memoizedState.cache),Ea();break;case 27:case 5:Ci(s);break;case 4:Gt(s,s.stateNode.containerInfo);break;case 10:hs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Jm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?HT(i,s,o):(ps(s),i=yr(i,s,o),i!==null?i.sibling:null);ps(s);break;case 19:var m=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(No(i,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return GT(i,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),le(St,St.current),u)break;return null;case 22:return s.lanes=0,LT(i,s,o,s.pendingProps);case 24:hs(s,It,i.memoizedState.cache)}return yr(i,s,o)}function KT(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Nt=!0;else{if(!xp(i,o)&&(s.flags&128)===0)return Nt=!1,CI(i,s,o);Nt=(i.flags&131072)!==0}else Nt=!1,Be&&(s.flags&1048576)!==0&&S_(s,iu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=Aa(s.elementType),s.type=i,typeof i=="function")Om(i)?(u=Ia(i,u),s.tag=1,s=zT(null,s,i,u,o)):(s.tag=0,s=Ep(null,s,i,u,o));else{if(i!=null){var m=i.$$typeof;if(m===K){s.tag=11,s=VT(null,s,i,u,o);break e}else if(m===R){s.tag=14,s=kT(null,s,i,u,o);break e}}throw s=Xe(i)||i,Error(r(306,s,""))}}return s;case 0:return Ep(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Ia(u,s.pendingProps),zT(i,s,u,m,o);case 3:e:{if(Gt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var g=s.memoizedState;m=g.element,Ym(i,s),hu(s,u,null,o);var T=s.memoizedState;if(u=T.cache,hs(s,It,u),u!==g.cache&&Fm(s,[It],o,!0),cu(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=FT(i,s,u,o);break e}else if(u!==m){m=Jn(Error(r(424)),s),ru(m),s=FT(i,s,u,o);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(it=ri(i.firstChild),Qt=s,Be=!0,us=null,ni=!0,o=L_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ea(),u===m){s=yr(i,s,o);break e}Wt(i,s,u,o)}s=s.child}return s;case 26:return Fh(i,s),i===null?(o=iw(s.type,null,s.pendingProps,null))?s.memoizedState=o:Be||(o=s.type,i=s.pendingProps,u=af(Ee.current).createElement(o),u[pt]=s,u[Yt]=i,Zt(u,o,i),bt(u),s.stateNode=u):s.memoizedState=iw(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ci(s),i===null&&Be&&(u=s.stateNode=ew(s.type,s.pendingProps,Ee.current),Qt=s,ni=!0,m=it,Ss(s.type)?(og=m,it=ri(u.firstChild)):it=m),Wt(i,s,s.pendingProps.children,o),Fh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Be&&((m=u=it)&&(u=iD(u,s.type,s.pendingProps,ni),u!==null?(s.stateNode=u,Qt=s,it=ri(u.firstChild),ni=!1,m=!0):m=!1),m||cs(s)),Ci(s),m=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,u=g.children,ng(m,g)?u=null:T!==null&&ng(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=tp(i,s,vI,null,null,o),Nu._currentValue=m),Fh(i,s),Wt(i,s,u,o),s.child;case 6:return i===null&&Be&&((i=o=it)&&(o=rD(o,s.pendingProps,ni),o!==null?(s.stateNode=o,Qt=s,it=null,i=!0):i=!1),i||cs(s)),null;case 13:return HT(i,s,o);case 4:return Gt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ca(s,null,u,o):Wt(i,s,u,o),s.child;case 11:return VT(i,s,s.type,s.pendingProps,o);case 7:return Wt(i,s,s.pendingProps,o),s.child;case 8:return Wt(i,s,s.pendingProps.children,o),s.child;case 12:return Wt(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,hs(s,s.type,u.value),Wt(i,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,ba(s),m=Xt(m),u=u(m),s.flags|=1,Wt(i,s,u,o),s.child;case 14:return kT(i,s,s.type,s.pendingProps,o);case 15:return PT(i,s,s.type,s.pendingProps,o);case 19:return GT(i,s,o);case 31:return RI(i,s,o);case 22:return LT(i,s,o,s.pendingProps);case 24:return ba(s),u=Xt(It),i===null?(m=Gm(),m===null&&(m=et,g=Hm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:u,cache:m},$m(s),hs(s,It,m)):((i.lanes&o)!==0&&(Ym(i,s),hu(s,null,null,o),cu()),m=i.memoizedState,g=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),hs(s,It,u)):(u=g.cache,hs(s,It,u),u!==m.cache&&Fm(s,[It],o,!0))),Wt(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function vr(i){i.flags|=4}function Ip(i,s,o,u,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(_E())i.flags|=8192;else throw Ra=Ch,Km}else i.flags&=-16777217}function $T(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!lw(s))if(_E())i.flags|=8192;else throw Ra=Ch,Km}function qh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ll():536870912,i.lanes|=s,Ho|=s)}function yu(i,s){if(!Be)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function rt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function xI(i,s,o){var u=s.pendingProps;switch(Lm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),mr(It),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Do(s)?vr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jm())),rt(s),null;case 26:var m=s.type,g=s.memoizedState;return i===null?(vr(s),g!==null?(rt(s),$T(s,g)):(rt(s),Ip(s,m,null,u,o))):g?g!==i.memoizedState?(vr(s),rt(s),$T(s,g)):(rt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&vr(s),rt(s),Ip(s,m,i,u,o)),null;case 27:if(Ji(s),o=Ee.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return rt(s),null}i=ue.current,Do(s)?R_(s):(i=ew(m,u,o),s.stateNode=i,vr(s))}return rt(s),null;case 5:if(Ji(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return rt(s),null}if(g=ue.current,Do(s))R_(s);else{var T=af(Ee.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}g[pt]=s,g[Yt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;e:switch(Zt(g,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&vr(s)}}return rt(s),Ip(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ee.current,Do(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,m=Qt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[pt]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||HE(i.nodeValue,o)),i||cs(s,!0)}else i=af(i).createTextNode(u),i[pt]=s,s.stateNode=i}return rt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=Do(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[pt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),i=!1}else o=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(jn(s),s):(jn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return rt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Do(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[pt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),m=!1}else m=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(jn(s),s):(jn(s),null)}return jn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),qh(s,s.updateQueue),rt(s),null);case 4:return ft(),i===null&&Wp(s.stateNode.containerInfo),rt(s),null;case 10:return mr(s.type),rt(s),null;case 19:if(ie(St),u=s.memoizedState,u===null)return rt(s),null;if(m=(s.flags&128)!==0,g=u.rendering,g===null)if(m)yu(u,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Nh(i),g!==null){for(s.flags|=128,yu(u,!1),i=g.updateQueue,s.updateQueue=i,qh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)E_(o,i),o=o.sibling;return le(St,St.current&1|2),Be&&fr(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Kt()>Qh&&(s.flags|=128,m=!0,yu(u,!1),s.lanes=4194304)}else{if(!m)if(i=Nh(g),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,qh(s,i),yu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Be)return rt(s),null}else 2*Kt()-u.renderingStartTime>Qh&&o!==536870912&&(s.flags|=128,m=!0,yu(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(i=u.last,i!==null?i.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Kt(),i.sibling=null,o=St.current,le(St,m?o&1|2:o&1),Be&&fr(s,u.treeForkCount),i):(rt(s),null);case 22:case 23:return jn(s),Zm(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),o=s.updateQueue,o!==null&&qh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&ie(Sa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mr(It),rt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function II(i,s){switch(Lm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return mr(It),ft(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ji(s),null;case 31:if(s.memoizedState!==null){if(jn(s),s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(jn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ie(St),null;case 4:return ft(),null;case 10:return mr(s.type),null;case 22:case 23:return jn(s),Zm(),i!==null&&ie(Sa),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return mr(It),null;case 25:return null;default:return null}}function YT(i,s){switch(Lm(s),s.tag){case 3:mr(It),ft();break;case 26:case 27:case 5:Ji(s);break;case 4:ft();break;case 31:s.memoizedState!==null&&jn(s);break;case 13:jn(s);break;case 19:ie(St);break;case 10:mr(s.type);break;case 22:case 23:jn(s),Zm(),i!==null&&ie(Sa);break;case 24:mr(It)}}function vu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&i)===i){u=void 0;var g=o.create,T=o.inst;u=g(),T.destroy=u}o=o.next}while(o!==m)}}catch(C){Qe(s,s.return,C)}}function ys(i,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&i)===i){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,m=s;var j=o,X=C;try{X()}catch(te){Qe(m,j,te)}}}u=u.next}while(u!==g)}}catch(te){Qe(s,s.return,te)}}function QT(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{j_(s,o)}catch(u){Qe(i,i.return,u)}}}function XT(i,s,o){o.props=Ia(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Qe(i,s,u)}}function _u(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(m){Qe(i,s,m)}}function Ui(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Qe(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Qe(i,s,m)}else o.current=null}function WT(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Qe(i,i.return,m)}}function Dp(i,s,o){try{var u=i.stateNode;WI(u,i.type,o,s),u[Yt]=s}catch(m){Qe(i,i.return,m)}}function ZT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ss(i.type)||i.tag===4}function Np(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ZT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ss(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mp(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bt));else if(u!==4&&(u===27&&Ss(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Mp(i,s,o),i=i.sibling;i!==null;)Mp(i,s,o),i=i.sibling}function Gh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Ss(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Gh(i,s,o),i=i.sibling;i!==null;)Gh(i,s,o),i=i.sibling}function JT(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Zt(s,u,o),s[pt]=i,s[Yt]=o}catch(g){Qe(i,i.return,g)}}var _r=!1,Mt=!1,Op=!1,eE=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function DI(i,s){if(i=i.containerInfo,eg=df,i=f_(i),Rm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,C=-1,j=-1,X=0,te=0,se=i,W=null;t:for(;;){for(var Z;se!==o||m!==0&&se.nodeType!==3||(C=T+m),se!==g||u!==0&&se.nodeType!==3||(j=T+u),se.nodeType===3&&(T+=se.nodeValue.length),(Z=se.firstChild)!==null;)W=se,se=Z;for(;;){if(se===i)break t;if(W===o&&++X===m&&(C=T),W===g&&++te===u&&(j=T),(Z=se.nextSibling)!==null)break;se=W,W=se.parentNode}se=Z}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(tg={focusedElem:i,selectionRange:o},df=!1,Ht=s;Ht!==null;)if(s=Ht,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Ht=i;else for(;Ht!==null;){switch(s=Ht,g=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)m=i[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var me=Ia(o.type,m);i=u.getSnapshotBeforeUpdate(me,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(_e){Qe(o,o.return,_e)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)rg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Ht=i;break}Ht=s.return}}function tE(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Er(i,o),u&4&&vu(5,o);break;case 1:if(Er(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(T){Qe(o,o.return,T)}else{var m=Ia(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Qe(o,o.return,T)}}u&64&&QT(o),u&512&&_u(o,o.return);break;case 3:if(Er(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{j_(i,s)}catch(T){Qe(o,o.return,T)}}break;case 27:s===null&&u&4&&JT(o);case 26:case 5:Er(i,o),s===null&&u&4&&WT(o),u&512&&_u(o,o.return);break;case 12:Er(i,o);break;case 31:Er(i,o),u&4&&rE(i,o);break;case 13:Er(i,o),u&4&&sE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=jI.bind(null,o),sD(i,o))));break;case 22:if(u=o.memoizedState!==null||_r,!u){s=s!==null&&s.memoizedState!==null||Mt,m=_r;var g=Mt;_r=u,(Mt=s)&&!g?wr(i,o,(o.subtreeFlags&8772)!==0):Er(i,o),_r=m,Mt=g}break;case 30:break;default:Er(i,o)}}function nE(i){var s=i.alternate;s!==null&&(i.alternate=null,nE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&oa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var lt=null,Sn=!1;function Tr(i,s,o){for(o=o.child;o!==null;)iE(i,s,o),o=o.sibling}function iE(i,s,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Fr,o)}catch{}switch(o.tag){case 26:Mt||Ui(o,s),Tr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Mt||Ui(o,s);var u=lt,m=Sn;Ss(o.type)&&(lt=o.stateNode,Sn=!1),Tr(i,s,o),xu(o.stateNode),lt=u,Sn=m;break;case 5:Mt||Ui(o,s);case 6:if(u=lt,m=Sn,lt=null,Tr(i,s,o),lt=u,Sn=m,lt!==null)if(Sn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(o.stateNode)}catch(g){Qe(o,s,g)}else try{lt.removeChild(o.stateNode)}catch(g){Qe(o,s,g)}break;case 18:lt!==null&&(Sn?(i=lt,QE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Wo(i)):QE(lt,o.stateNode));break;case 4:u=lt,m=Sn,lt=o.stateNode.containerInfo,Sn=!0,Tr(i,s,o),lt=u,Sn=m;break;case 0:case 11:case 14:case 15:ys(2,o,s),Mt||ys(4,o,s),Tr(i,s,o);break;case 1:Mt||(Ui(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&XT(o,s,u)),Tr(i,s,o);break;case 21:Tr(i,s,o);break;case 22:Mt=(u=Mt)||o.memoizedState!==null,Tr(i,s,o),Mt=u;break;default:Tr(i,s,o)}}function rE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Wo(i)}catch(o){Qe(s,s.return,o)}}}function sE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wo(i)}catch(o){Qe(s,s.return,o)}}function NI(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new eE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new eE),s;default:throw Error(r(435,i.tag))}}function Kh(i,s){var o=NI(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=BI.bind(null,i,u);u.then(m,m)}})}function An(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=i,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Ss(C.type)){lt=C.stateNode,Sn=!1;break e}break;case 5:lt=C.stateNode,Sn=!1;break e;case 3:case 4:lt=C.stateNode.containerInfo,Sn=!0;break e}C=C.return}if(lt===null)throw Error(r(160));iE(g,T,m),lt=null,Sn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)aE(s,i),s=s.sibling}var yi=null;function aE(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:An(s,i),Rn(i),u&4&&(ys(3,i,i.return),vu(3,i),ys(5,i,i.return));break;case 1:An(s,i),Rn(i),u&512&&(Mt||o===null||Ui(o,o.return)),u&64&&_r&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=yi;if(An(s,i),Rn(i),u&512&&(Mt||o===null||Ui(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[ir]||g[pt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Zt(g,u,o),g[pt]=i,bt(g),u=g;break e;case"link":var T=aw("link","href",m).get(u+(o.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(C,1);break t}}g=m.createElement(u),Zt(g,u,o),m.head.appendChild(g);break;case"meta":if(T=aw("meta","content",m).get(u+(o.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(C,1);break t}}g=m.createElement(u),Zt(g,u,o),m.head.appendChild(g);break;default:throw Error(r(468,u))}g[pt]=i,bt(g),u=g}i.stateNode=u}else ow(m,i.type,i.stateNode);else i.stateNode=sw(m,u,i.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ow(m,i.type,i.stateNode):sw(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Dp(i,i.memoizedProps,o.memoizedProps)}break;case 27:An(s,i),Rn(i),u&512&&(Mt||o===null||Ui(o,o.return)),o!==null&&u&4&&Dp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(An(s,i),Rn(i),u&512&&(Mt||o===null||Ui(o,o.return)),i.flags&32){m=i.stateNode;try{Wn(m,"")}catch(me){Qe(i,i.return,me)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Dp(i,m,o!==null?o.memoizedProps:m)),u&1024&&(Op=!0);break;case 6:if(An(s,i),Rn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(me){Qe(i,i.return,me)}}break;case 3:if(uf=null,m=yi,yi=of(s.containerInfo),An(s,i),yi=m,Rn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Wo(s.containerInfo)}catch(me){Qe(i,i.return,me)}Op&&(Op=!1,oE(i));break;case 4:u=yi,yi=of(i.stateNode.containerInfo),An(s,i),Rn(i),yi=u;break;case 12:An(s,i),Rn(i);break;case 31:An(s,i),Rn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 13:An(s,i),Rn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Yh=Kt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 22:m=i.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,X=_r,te=Mt;if(_r=X||m,Mt=te||j,An(s,i),Mt=te,_r=X,Rn(i),u&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||j||_r||Mt||Da(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){j=o=s;try{if(g=j.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=j.stateNode;var se=j.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(me){Qe(j,j.return,me)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(me){Qe(j,j.return,me)}}}else if(s.tag===18){if(o===null){j=s;try{var Z=j.stateNode;m?XE(Z,!0):XE(j.stateNode,!1)}catch(me){Qe(j,j.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kh(i,o))));break;case 19:An(s,i),Rn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 30:break;case 21:break;default:An(s,i),Rn(i)}}function Rn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(ZT(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,g=Np(i);Gh(i,g,m);break;case 5:var T=o.stateNode;o.flags&32&&(Wn(T,""),o.flags&=-33);var C=Np(i);Gh(i,C,T);break;case 3:case 4:var j=o.stateNode.containerInfo,X=Np(i);Mp(i,X,j);break;default:throw Error(r(161))}}catch(te){Qe(i,i.return,te)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function oE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;oE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Er(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tE(i,s.alternate,s),s=s.sibling}function Da(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ys(4,s,s.return),Da(s);break;case 1:Ui(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&XT(s,s.return,o),Da(s);break;case 27:xu(s.stateNode);case 26:case 5:Ui(s,s.return),Da(s);break;case 22:s.memoizedState===null&&Da(s);break;case 30:Da(s);break;default:Da(s)}i=i.sibling}}function wr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:wr(m,g,o),vu(4,g);break;case 1:if(wr(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){Qe(u,u.return,X)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)U_(j[m],C)}catch(X){Qe(u,u.return,X)}}o&&T&64&&QT(g),_u(g,g.return);break;case 27:JT(g);case 26:case 5:wr(m,g,o),o&&u===null&&T&4&&WT(g),_u(g,g.return);break;case 12:wr(m,g,o);break;case 31:wr(m,g,o),o&&T&4&&rE(m,g);break;case 13:wr(m,g,o),o&&T&4&&sE(m,g);break;case 22:g.memoizedState===null&&wr(m,g,o),_u(g,g.return);break;case 30:break;default:wr(m,g,o)}s=s.sibling}}function Vp(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&su(o))}function kp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&su(i))}function vi(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lE(i,s,o,u),s=s.sibling}function lE(i,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:vi(i,s,o,u),m&2048&&vu(9,s);break;case 1:vi(i,s,o,u);break;case 3:vi(i,s,o,u),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&su(i)));break;case 12:if(m&2048){vi(i,s,o,u),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){Qe(s,s.return,j)}}else vi(i,s,o,u);break;case 31:vi(i,s,o,u);break;case 13:vi(i,s,o,u);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?vi(i,s,o,u):Tu(i,s):g._visibility&2?vi(i,s,o,u):(g._visibility|=2,Bo(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Vp(T,s);break;case 24:vi(i,s,o,u),m&2048&&kp(s.alternate,s);break;default:vi(i,s,o,u)}}function Bo(i,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=i,T=s,C=o,j=u,X=T.flags;switch(T.tag){case 0:case 11:case 15:Bo(g,T,C,j,m),vu(8,T);break;case 23:break;case 22:var te=T.stateNode;T.memoizedState!==null?te._visibility&2?Bo(g,T,C,j,m):Tu(g,T):(te._visibility|=2,Bo(g,T,C,j,m)),m&&X&2048&&Vp(T.alternate,T);break;case 24:Bo(g,T,C,j,m),m&&X&2048&&kp(T.alternate,T);break;default:Bo(g,T,C,j,m)}s=s.sibling}}function Tu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,m=u.flags;switch(u.tag){case 22:Tu(o,u),m&2048&&Vp(u.alternate,u);break;case 24:Tu(o,u),m&2048&&kp(u.alternate,u);break;default:Tu(o,u)}s=s.sibling}}var Eu=8192;function zo(i,s,o){if(i.subtreeFlags&Eu)for(i=i.child;i!==null;)uE(i,s,o),i=i.sibling}function uE(i,s,o){switch(i.tag){case 26:zo(i,s,o),i.flags&Eu&&i.memoizedState!==null&&yD(o,yi,i.memoizedState,i.memoizedProps);break;case 5:zo(i,s,o);break;case 3:case 4:var u=yi;yi=of(i.stateNode.containerInfo),zo(i,s,o),yi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Eu,Eu=16777216,zo(i,s,o),Eu=u):zo(i,s,o));break;default:zo(i,s,o)}}function cE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function wu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,fE(u,i)}cE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hE(i),i=i.sibling}function hE(i){switch(i.tag){case 0:case 11:case 15:wu(i),i.flags&2048&&ys(9,i,i.return);break;case 3:wu(i);break;case 12:wu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,$h(i)):wu(i);break;default:wu(i)}}function $h(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,fE(u,i)}cE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ys(8,s,s.return),$h(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,$h(s));break;default:$h(s)}i=i.sibling}}function fE(i,s){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=i;Ht!==null;){u=Ht;var m=u.sibling,g=u.return;if(nE(u),u===o){Ht=null;break e}if(m!==null){m.return=g,Ht=m;break e}Ht=g}}}var MI={getCacheForType:function(i){var s=Xt(It),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return Xt(It).controller.signal}},OI=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,Ve=null,Pe=0,Ye=0,Bn=null,vs=!1,Fo=!1,Pp=!1,br=0,vt=0,_s=0,Na=0,Lp=0,zn=0,Ho=0,bu=null,Cn=null,Up=!1,Yh=0,dE=0,Qh=1/0,Xh=null,Ts=null,Lt=0,Es=null,qo=null,Sr=0,jp=0,Bp=null,mE=null,Su=0,zp=null;function Fn(){return(Ge&2)!==0&&Pe!==0?Pe&-Pe:ee.T!==null?$p():nr()}function pE(){if(zn===0)if((Pe&536870912)===0||Be){var i=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),zn=i}else zn=536870912;return i=Un.current,i!==null&&(i.flags|=32),zn}function xn(i,s,o){(i===et&&(Ye===2||Ye===9)||i.cancelPendingCommit!==null)&&(Go(i,0),ws(i,Pe,zn,!1)),Gr(i,o),((Ge&2)===0||i!==et)&&(i===et&&((Ge&2)===0&&(Na|=o),vt===4&&ws(i,Pe,zn,!1)),ji(i))}function gE(i,s,o){if((Ge&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||qr(i,s),m=u?PI(i,s):Hp(i,s,!0),g=u;do{if(m===0){Fo&&!u&&ws(i,s,0,!1);break}else{if(o=i.current.alternate,g&&!VI(o)){m=Hp(i,s,!1),g=!1;continue}if(m===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=i;m=bu;var j=C.current.memoizedState.isDehydrated;if(j&&(Go(C,T).flags|=256),T=Hp(C,T,!1),T!==2){if(Pp&&!j){C.errorRecoveryDisabledLanes|=g,Na|=g,m=4;break e}g=Cn,Cn=m,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){Go(i,0),ws(i,s,0,!0);break}e:{switch(u=i,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ws(u,s,zn,!vs);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Yh+300-Kt(),10<m)){if(ws(u,s,zn,!vs),Qn(u,0,!0)!==0)break e;Sr=s,u.timeoutHandle=$E(yE.bind(null,u,o,Cn,Xh,Up,s,zn,Na,Ho,vs,g,"Throttled",-0,0),m);break e}yE(u,o,Cn,Xh,Up,s,zn,Na,Ho,vs,g,null,-0,0)}}break}while(!0);ji(i)}function yE(i,s,o,u,m,g,T,C,j,X,te,se,W,Z){if(i.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bt},uE(s,g,se);var me=(g&62914560)===g?Yh-Kt():(g&4194048)===g?dE-Kt():0;if(me=vD(se,me),me!==null){Sr=g,i.cancelPendingCommit=me(AE.bind(null,i,s,g,o,u,m,T,C,j,te,se,null,W,Z)),ws(i,g,T,!X);return}}AE(i,s,g,o,u,m,T,C,j)}function VI(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!Pn(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ws(i,s,o,u){s&=~Lp,s&=~Na,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var m=s;0<m;){var g=31-mn(m),T=1<<g;u[g]=-1,m&=~T}o!==0&&Ul(i,o,s)}function Wh(){return(Ge&6)===0?(Au(0),!1):!0}function Fp(){if(Ve!==null){if(Ye===0)var i=Ve.return;else i=Ve,dr=wa=null,rp(i),ko=null,ou=0,i=Ve;for(;i!==null;)YT(i.alternate,i),i=i.return;Ve=null}}function Go(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,eD(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Sr=0,Fp(),et=i,Ve=o=hr(i.current,null),Pe=s,Ye=0,Bn=null,vs=!1,Fo=qr(i,s),Pp=!1,Ho=zn=Lp=Na=_s=vt=0,Cn=bu=null,Up=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var m=31-mn(u),g=1<<m;s|=i[m],u&=~g}return br=s,vh(),o}function vE(i,s){Ce=null,ee.H=pu,s===Vo||s===Rh?(s=V_(),Ye=3):s===Km?(s=V_(),Ye=4):Ye=s===Tp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bn=s,Ve===null&&(vt=1,Bh(i,Jn(s,i.current)))}function _E(){var i=Un.current;return i===null?!0:(Pe&4194048)===Pe?ii===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===ii:!1}function TE(){var i=ee.H;return ee.H=pu,i===null?pu:i}function EE(){var i=ee.A;return ee.A=MI,i}function Zh(){vt=4,vs||(Pe&4194048)!==Pe&&Un.current!==null||(Fo=!0),(_s&134217727)===0&&(Na&134217727)===0||et===null||ws(et,Pe,zn,!1)}function Hp(i,s,o){var u=Ge;Ge|=2;var m=TE(),g=EE();(et!==i||Pe!==s)&&(Xh=null,Go(i,s)),s=!1;var T=vt;e:do try{if(Ye!==0&&Ve!==null){var C=Ve,j=Bn;switch(Ye){case 8:Fp(),T=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var X=Ye;if(Ye=0,Bn=null,Ko(i,C,j,X),o&&Fo){T=0;break e}break;default:X=Ye,Ye=0,Bn=null,Ko(i,C,j,X)}}kI(),T=vt;break}catch(te){vE(i,te)}while(!0);return s&&i.shellSuspendCounter++,dr=wa=null,Ge=u,ee.H=m,ee.A=g,Ve===null&&(et=null,Pe=0,vh()),T}function kI(){for(;Ve!==null;)wE(Ve)}function PI(i,s){var o=Ge;Ge|=2;var u=TE(),m=EE();et!==i||Pe!==s?(Xh=null,Qh=Kt()+500,Go(i,s)):Fo=qr(i,s);e:do try{if(Ye!==0&&Ve!==null){s=Ve;var g=Bn;t:switch(Ye){case 1:Ye=0,Bn=null,Ko(i,s,g,1);break;case 2:case 9:if(M_(g)){Ye=0,Bn=null,bE(s);break}s=function(){Ye!==2&&Ye!==9||et!==i||(Ye=7),ji(i)},g.then(s,s);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:M_(g)?(Ye=0,Bn=null,bE(s)):(Ye=0,Bn=null,Ko(i,s,g,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var C=Ve;if(T?lw(T):C.stateNode.complete){Ye=0,Bn=null;var j=C.sibling;if(j!==null)Ve=j;else{var X=C.return;X!==null?(Ve=X,Jh(X)):Ve=null}break t}}Ye=0,Bn=null,Ko(i,s,g,5);break;case 6:Ye=0,Bn=null,Ko(i,s,g,6);break;case 8:Fp(),vt=6;break e;default:throw Error(r(462))}}LI();break}catch(te){vE(i,te)}while(!0);return dr=wa=null,ee.H=u,ee.A=m,Ge=o,Ve!==null?0:(et=null,Pe=0,vh(),vt)}function LI(){for(;Ve!==null&&!pm();)wE(Ve)}function wE(i){var s=KT(i.alternate,i,br);i.memoizedProps=i.pendingProps,s===null?Jh(i):Ve=s}function bE(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=BT(o,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=BT(o,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:rp(s);default:YT(o,s),s=Ve=E_(s,br),s=KT(o,s,br)}i.memoizedProps=i.pendingProps,s===null?Jh(i):Ve=s}function Ko(i,s,o,u){dr=wa=null,rp(s),ko=null,ou=0;var m=s.return;try{if(AI(i,m,s,o,Pe)){vt=1,Bh(i,Jn(o,i.current)),Ve=null;return}}catch(g){if(m!==null)throw Ve=m,g;vt=1,Bh(i,Jn(o,i.current)),Ve=null;return}s.flags&32768?(Be||u===1?i=!0:Fo||(Pe&536870912)!==0?i=!1:(vs=i=!0,(u===2||u===9||u===3||u===6)&&(u=Un.current,u!==null&&u.tag===13&&(u.flags|=16384))),SE(s,i)):Jh(s)}function Jh(i){var s=i;do{if((s.flags&32768)!==0){SE(s,vs);return}i=s.return;var o=xI(s.alternate,s,br);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);vt===0&&(vt=5)}function SE(i,s){do{var o=II(i.alternate,i);if(o!==null){o.flags&=32767,Ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=o}while(i!==null);vt=6,Ve=null}function AE(i,s,o,u,m,g,T,C,j){i.cancelPendingCommit=null;do ef();while(Lt!==0);if((Ge&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=Nm,$t(i,o,g,T,C,j),i===et&&(Ve=et=null,Pe=0),qo=s,Es=i,Sr=o,jp=g,Bp=m,mE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zI(er,function(){return DE(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null,m=oe.p,oe.p=2,T=Ge,Ge|=4;try{DI(i,s,o)}finally{Ge=T,oe.p=m,ee.T=u}}Lt=1,RE(),CE(),xE()}}function RE(){if(Lt===1){Lt=0;var i=Es,s=qo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ee.T,ee.T=null;var u=oe.p;oe.p=2;var m=Ge;Ge|=4;try{aE(s,i);var g=tg,T=f_(i.containerInfo),C=g.focusedElem,j=g.selectionRange;if(T!==C&&C&&C.ownerDocument&&h_(C.ownerDocument.documentElement,C)){if(j!==null&&Rm(C)){var X=j.start,te=j.end;if(te===void 0&&(te=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(te,C.value.length);else{var se=C.ownerDocument||document,W=se&&se.defaultView||window;if(W.getSelection){var Z=W.getSelection(),me=C.textContent.length,_e=Math.min(j.start,me),Je=j.end===void 0?_e:Math.min(j.end,me);!Z.extend&&_e>Je&&(T=Je,Je=_e,_e=T);var G=c_(C,_e),z=c_(C,Je);if(G&&z&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var Q=se.createRange();Q.setStart(G.node,G.offset),Z.removeAllRanges(),_e>Je?(Z.addRange(Q),Z.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),Z.addRange(Q))}}}}for(se=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<se.length;C++){var re=se[C];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}df=!!eg,tg=eg=null}finally{Ge=m,oe.p=u,ee.T=o}}i.current=s,Lt=2}}function CE(){if(Lt===2){Lt=0;var i=Es,s=qo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ee.T,ee.T=null;var u=oe.p;oe.p=2;var m=Ge;Ge|=4;try{tE(i,s.alternate,s)}finally{Ge=m,oe.p=u,ee.T=o}}Lt=3}}function xE(){if(Lt===4||Lt===3){Lt=0,Vl();var i=Es,s=qo,o=Sr,u=mE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Lt=5:(Lt=0,qo=Es=null,IE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ts=null),Bl(o),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Fr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=ee.T,m=oe.p,oe.p=2,ee.T=null;try{for(var g=i.onRecoverableError,T=0;T<u.length;T++){var C=u[T];g(C.value,{componentStack:C.stack})}}finally{ee.T=s,oe.p=m}}(Sr&3)!==0&&ef(),ji(i),m=i.pendingLanes,(o&261930)!==0&&(m&42)!==0?i===zp?Su++:(Su=0,zp=i):Su=0,Au(0)}}function IE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,su(s)))}function ef(){return RE(),CE(),xE(),DE()}function DE(){if(Lt!==5)return!1;var i=Es,s=jp;jp=0;var o=Bl(Sr),u=ee.T,m=oe.p;try{oe.p=32>o?32:o,ee.T=null,o=Bp,Bp=null;var g=Es,T=Sr;if(Lt=0,qo=Es=null,Sr=0,(Ge&6)!==0)throw Error(r(331));var C=Ge;if(Ge|=4,hE(g.current),lE(g,g.current,T,o),Ge=C,Au(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Fr,g)}catch{}return!0}finally{oe.p=m,ee.T=u,IE(i,s)}}function NE(i,s,o){s=Jn(o,s),s=_p(i.stateNode,s,2),i=ms(i,s,2),i!==null&&(Gr(i,2),ji(i))}function Qe(i,s,o){if(i.tag===3)NE(i,i,o);else for(;s!==null;){if(s.tag===3){NE(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ts===null||!Ts.has(u))){i=Jn(o,i),o=MT(2),u=ms(s,o,2),u!==null&&(OT(o,u,s,i),Gr(u,2),ji(u));break}}s=s.return}}function qp(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new OI;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Pp=!0,m.add(o),i=UI.bind(null,i,s,o),s.then(i,i))}function UI(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,et===i&&(Pe&o)===o&&(vt===4||vt===3&&(Pe&62914560)===Pe&&300>Kt()-Yh?(Ge&2)===0&&Go(i,0):Lp|=o,Ho===Pe&&(Ho=0)),ji(i)}function ME(i,s){s===0&&(s=Ll()),i=_a(i,s),i!==null&&(Gr(i,s),ji(i))}function jI(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),ME(i,o)}function BI(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),ME(i,o)}function zI(i,s){return ra(i,s)}var tf=null,$o=null,Gp=!1,nf=!1,Kp=!1,bs=0;function ji(i){i!==$o&&i.next===null&&($o===null?tf=$o=i:$o=$o.next=i),nf=!0,Gp||(Gp=!0,HI())}function Au(i,s){if(!Kp&&nf){Kp=!0;do for(var o=!1,u=tf;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var T=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-mn(42|i)+1)-1,g&=m&~(T&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,PE(u,g))}else g=Pe,g=Qn(u,u===et?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||qr(u,g)||(o=!0,PE(u,g));u=u.next}while(o);Kp=!1}}function FI(){OE()}function OE(){nf=Gp=!1;var i=0;bs!==0&&JI()&&(i=bs);for(var s=Kt(),o=null,u=tf;u!==null;){var m=u.next,g=VE(u,s);g===0?(u.next=null,o===null?tf=m:o.next=m,m===null&&($o=o)):(o=u,(i!==0||(g&3)!==0)&&(nf=!0)),u=m}Lt!==0&&Lt!==5||Au(i),bs!==0&&(bs=0)}function VE(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-mn(g),C=1<<T,j=m[T];j===-1?((C&o)===0||(C&u)!==0)&&(m[T]=fo(C,s)):j<=s&&(i.expiredLanes|=C),g&=~C}if(s=et,o=Pe,o=Qn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Ye===2||Ye===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ho(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||qr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&ho(u),Bl(o)){case 2:case 8:o=jt;break;case 32:o=er;break;case 268435456:o=kl;break;default:o=er}return u=kE.bind(null,i),o=ra(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&ho(u),i.callbackPriority=2,i.callbackNode=null,2}function kE(i,s){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(ef()&&i.callbackNode!==o)return null;var u=Pe;return u=Qn(i,i===et?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(gE(i,u,s),VE(i,Kt()),i.callbackNode!=null&&i.callbackNode===o?kE.bind(null,i):null)}function PE(i,s){if(ef())return null;gE(i,s,!0)}function HI(){tD(function(){(Ge&6)!==0?ra(Pt,FI):OE()})}function $p(){if(bs===0){var i=Mo;i===0&&(i=aa,aa<<=1,(aa&261888)===0&&(aa=256)),bs=i}return bs}function LE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Oi(""+i)}function UE(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function qI(i,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var g=LE((m[Yt]||null).action),T=u.submitter;T&&(s=(s=T[Yt]||null)?LE(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var C=new fa("action","action",null,u,m);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(bs!==0){var j=T?UE(m,T):new FormData(m);dp(o,{pending:!0,data:j,method:m.method,action:g},null,j)}}else typeof g=="function"&&(C.preventDefault(),j=T?UE(m,T):new FormData(m),dp(o,{pending:!0,data:j,method:m.method,action:g},g,j))},currentTarget:m}]})}}for(var Yp=0;Yp<Dm.length;Yp++){var Qp=Dm[Yp],GI=Qp.toLowerCase(),KI=Qp[0].toUpperCase()+Qp.slice(1);gi(GI,"on"+KI)}gi(p_,"onAnimationEnd"),gi(g_,"onAnimationIteration"),gi(y_,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(lI,"onTransitionRun"),gi(uI,"onTransitionStart"),gi(cI,"onTransitionCancel"),gi(v_,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$I=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function jE(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],m=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var T=u.length-1;0<=T;T--){var C=u[T],j=C.instance,X=C.currentTarget;if(C=C.listener,j!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=X;try{g(m)}catch(te){yh(te)}m.currentTarget=null,g=j}else for(T=0;T<u.length;T++){if(C=u[T],j=C.instance,X=C.currentTarget,C=C.listener,j!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=X;try{g(m)}catch(te){yh(te)}m.currentTarget=null,g=j}}}}function ke(i,s){var o=s[Yr];o===void 0&&(o=s[Yr]=new Set);var u=i+"__bubble";o.has(u)||(BE(s,i,2,!1),o.add(u))}function Xp(i,s,o){var u=0;s&&(u|=4),BE(o,i,u,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function Wp(i){if(!i[rf]){i[rf]=!0,mo.forEach(function(o){o!=="selectionchange"&&($I.has(o)||Xp(o,!1,i),Xp(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rf]||(s[rf]=!0,Xp("selectionchange",!1,s))}}function BE(i,s,o,u){switch(pw(s)){case 2:var m=ED;break;case 8:m=wD;break;default:m=fg}o=m.bind(null,s,o,i),m=void 0,!Yl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(s,o,{capture:!0,passive:m}):i.addEventListener(s,o,!0):m!==void 0?i.addEventListener(s,o,{passive:m}):i.addEventListener(s,o,!1)}function Zp(i,s,o,u,m){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===m)break;if(T===4)for(T=u.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;C!==null;){if(T=rr(C),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){u=g=T;continue e}C=C.parentNode}}u=u.return}th(function(){var X=g,te=_o(o),se=[];e:{var W=__.get(i);if(W!==void 0){var Z=fa,me=i;switch(i){case"keypress":if(ha(o)===0)break e;case"keydown":case"keyup":Z=ch;break;case"focusin":me="focus",Z=rs;break;case"focusout":me="blur",Z=rs;break;case"beforeblur":case"afterblur":Z=rs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=fh;break;case p_:case g_:case y_:Z=wo;break;case v_:Z=bo;break;case"scroll":case"scrollend":Z=nh;break;case"wheel":Z=mh;break;case"copy":case"cut":case"paste":Z=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Jl;break;case"toggle":case"beforetoggle":Z=as}var _e=(s&4)!==0,Je=!_e&&(i==="scroll"||i==="scrollend"),G=_e?W!==null?W+"Capture":null:W;_e=[];for(var z=X,Q;z!==null;){var re=z;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||G===null||(re=wn(z,G),re!=null&&_e.push(Cu(z,re,Q))),Je)break;z=z.return}0<_e.length&&(W=new Z(W,me,null,o,te),se.push({event:W,listeners:_e}))}}if((s&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",W&&o!==vo&&(me=o.relatedTarget||o.fromElement)&&(rr(me)||me[Di]))break e;if((Z||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(me=o.relatedTarget||o.toElement,Z=X,me=me?rr(me):null,me!==null&&(Je=l(me),_e=me.tag,me!==Je||_e!==5&&_e!==27&&_e!==6)&&(me=null)):(Z=null,me=X),Z!==me)){if(_e=ih,re="onMouseLeave",G="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Jl,re="onPointerLeave",G="onPointerEnter",z="pointer"),Je=Z==null?W:la(Z),Q=me==null?W:la(me),W=new _e(re,z+"leave",Z,o,te),W.target=Je,W.relatedTarget=Q,re=null,rr(te)===X&&(_e=new _e(G,z+"enter",me,o,te),_e.target=Q,_e.relatedTarget=Je,re=_e),Je=re,Z&&me)t:{for(_e=YI,G=Z,z=me,Q=0,re=G;re;re=_e(re))Q++;re=0;for(var ve=z;ve;ve=_e(ve))re++;for(;0<Q-re;)G=_e(G),Q--;for(;0<re-Q;)z=_e(z),re--;for(;Q--;){if(G===z||z!==null&&G===z.alternate){_e=G;break t}G=_e(G),z=_e(z)}_e=null}else _e=null;Z!==null&&zE(se,W,Z,_e,!1),me!==null&&Je!==null&&zE(se,Je,me,_e,!0)}}e:{if(W=X?la(X):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var He=r_;else if(bn(W))if(s_)He=sI;else{He=iI;var pe=nI}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Kl(X.elementType)&&(He=r_):He=rI;if(He&&(He=He(i,X))){ga(se,He,o,te);break e}pe&&pe(i,W,X),i==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&yo(W,"number",W.value)}switch(pe=X?la(X):window,i){case"focusin":(bn(pe)||pe.contentEditable==="true")&&(So=pe,Cm=X,nu=null);break;case"focusout":nu=Cm=So=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,d_(se,o,te);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":d_(se,o,te)}var xe;if(v)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ne?Ke(i,o)&&(Le="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Le="onCompositionStart");Le&&($&&o.locale!=="ko"&&(Ne||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ne&&(xe=es()):(kn=te,To="value"in kn?kn.value:kn.textContent,Ne=!0)),pe=sf(X,Le),0<pe.length&&(Le=new Xl(Le,i,null,o,te),se.push({event:Le,listeners:pe}),xe?Le.data=xe:(xe=xt(o),xe!==null&&(Le.data=xe)))),(xe=I?zt(i,o):Ft(i,o))&&(Le=sf(X,"onBeforeInput"),0<Le.length&&(pe=new Xl("onBeforeInput","beforeinput",null,o,te),se.push({event:pe,listeners:Le}),pe.data=xe)),qI(se,i,X,o,te)}jE(se,s)})}function Cu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function sf(i,s){for(var o=s+"Capture",u=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=wn(i,o),m!=null&&u.unshift(Cu(i,m,g)),m=wn(i,s),m!=null&&u.push(Cu(i,m,g))),i.tag===3)return u;i=i.return}return[]}function YI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zE(i,s,o,u,m){for(var g=s._reactName,T=[];o!==null&&o!==u;){var C=o,j=C.alternate,X=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||X===null||(j=X,m?(X=wn(o,g),X!=null&&T.unshift(Cu(o,X,j))):m||(X=wn(o,g),X!=null&&T.push(Cu(o,X,j)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var QI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function FE(i){return(typeof i=="string"?i:""+i).replace(QI,`
`).replace(XI,"")}function HE(i,s){return s=FE(s),FE(i)===s}function Ze(i,s,o,u,m,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Wn(i,""+u);break;case"className":Wr(i,"class",u);break;case"tabIndex":Wr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(i,o,u);break;case"style":Jc(i,u,g);break;case"data":if(s!=="object"){Wr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Oi(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Ze(i,s,"name",m.name,m,null),Ze(i,s,"formEncType",m.formEncType,m,null),Ze(i,s,"formMethod",m.formMethod,m,null),Ze(i,s,"formTarget",m.formTarget,m,null)):(Ze(i,s,"encType",m.encType,m,null),Ze(i,s,"method",m.method,m,null),Ze(i,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Oi(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Bt);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Oi(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":ke("beforetoggle",i),ke("toggle",i),Xr(i,"popover",u);break;case"xlinkActuate":Xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Em.get(o)||o,Xr(i,o,u))}}function Jp(i,s,o,u,m,g){switch(o){case"style":Jc(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&Wn(i,""+u);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Bt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=i[Yt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,m);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Xr(i,o,u)}}}function Zt(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ze(i,s,g,T,o,null)}}m&&Ze(i,s,"srcSet",o.srcSet,o,null),u&&Ze(i,s,"src",o.src,o,null);return;case"input":ke("invalid",i);var C=g=T=m=null,j=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var te=o[u];if(te!=null)switch(u){case"name":m=te;break;case"type":T=te;break;case"checked":j=te;break;case"defaultChecked":X=te;break;case"value":g=te;break;case"defaultValue":C=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:Ze(i,s,u,te,o,null)}}ua(i,g,C,j,X,T,m,!1);return;case"select":ke("invalid",i),u=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:Ze(i,s,m,C,o,null)}s=g,o=T,i.multiple=!!u,s!=null?Fe(i,!!u,s,!1):o!=null&&Fe(i,!!u,o,!0);return;case"textarea":ke("invalid",i),g=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(C=o[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:Ze(i,s,T,C,o,null)}Jr(i,u,m,g);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ze(i,s,j,u,o,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(u=0;u<Ru.length;u++)ke(Ru[u],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ze(i,s,X,u,o,null)}return;default:if(Kl(s)){for(te in o)o.hasOwnProperty(te)&&(u=o[te],u!==void 0&&Jp(i,s,te,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Ze(i,s,C,u,o,null))}function WI(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,C=null,j=null,X=null,te=null;for(Z in o){var se=o[Z];if(o.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=se;default:u.hasOwnProperty(Z)||Ze(i,s,Z,null,u,se)}}for(var W in u){var Z=u[W];if(se=o[W],u.hasOwnProperty(W)&&(Z!=null||se!=null))switch(W){case"type":g=Z;break;case"name":m=Z;break;case"checked":X=Z;break;case"defaultChecked":te=Z;break;case"value":T=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==se&&Ze(i,s,W,Z,u,se)}}Zr(i,T,C,j,X,te,g,m);return;case"select":Z=T=C=W=null;for(g in o)if(j=o[g],o.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":Z=j;default:u.hasOwnProperty(g)||Ze(i,s,g,null,u,j)}for(m in u)if(g=u[m],j=o[m],u.hasOwnProperty(m)&&(g!=null||j!=null))switch(m){case"value":W=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==j&&Ze(i,s,m,g,u,j)}s=C,o=T,u=Z,W!=null?Fe(i,!!o,W,!1):!!u!=!!o&&(s!=null?Fe(i,!!o,s,!0):Fe(i,!!o,o?[]:"",!1));return;case"textarea":Z=W=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ze(i,s,C,null,u,m)}for(T in u)if(m=u[T],g=o[T],u.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":W=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&Ze(i,s,T,m,u,g)}ca(i,W,Z);return;case"option":for(var me in o)if(W=o[me],o.hasOwnProperty(me)&&W!=null&&!u.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:Ze(i,s,me,null,u,W)}for(j in u)if(W=u[j],Z=o[j],u.hasOwnProperty(j)&&W!==Z&&(W!=null||Z!=null))switch(j){case"selected":i.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ze(i,s,j,W,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in o)W=o[_e],o.hasOwnProperty(_e)&&W!=null&&!u.hasOwnProperty(_e)&&Ze(i,s,_e,null,u,W);for(X in u)if(W=u[X],Z=o[X],u.hasOwnProperty(X)&&W!==Z&&(W!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:Ze(i,s,X,W,u,Z)}return;default:if(Kl(s)){for(var Je in o)W=o[Je],o.hasOwnProperty(Je)&&W!==void 0&&!u.hasOwnProperty(Je)&&Jp(i,s,Je,void 0,u,W);for(te in u)W=u[te],Z=o[te],!u.hasOwnProperty(te)||W===Z||W===void 0&&Z===void 0||Jp(i,s,te,W,u,Z);return}}for(var G in o)W=o[G],o.hasOwnProperty(G)&&W!=null&&!u.hasOwnProperty(G)&&Ze(i,s,G,null,u,W);for(se in u)W=u[se],Z=o[se],!u.hasOwnProperty(se)||W===Z||W==null&&Z==null||Ze(i,s,se,W,u,Z)}function qE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],g=m.transferSize,T=m.initiatorType,C=m.duration;if(g&&C&&qE(T)){for(T=0,C=m.responseEnd,u+=1;u<o.length;u++){var j=o[u],X=j.startTime;if(X>C)break;var te=j.transferSize,se=j.initiatorType;te&&qE(se)&&(j=j.responseEnd,T+=te*(j<C?1:(C-X)/(j-X)))}if(--u,s+=8*(g+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var eg=null,tg=null;function af(i){return i.nodeType===9?i:i.ownerDocument}function GE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function ng(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ig=null;function JI(){var i=window.event;return i&&i.type==="popstate"?i===ig?!1:(ig=i,!0):(ig=null,!1)}var $E=typeof setTimeout=="function"?setTimeout:void 0,eD=typeof clearTimeout=="function"?clearTimeout:void 0,YE=typeof Promise=="function"?Promise:void 0,tD=typeof queueMicrotask=="function"?queueMicrotask:typeof YE<"u"?function(i){return YE.resolve(null).then(i).catch(nD)}:$E;function nD(i){setTimeout(function(){throw i})}function Ss(i){return i==="head"}function QE(i,s){var o=s,u=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(m),Wo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")xu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,xu(o);for(var g=o.firstChild;g;){var T=g.nextSibling,C=g.nodeName;g[ir]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&xu(i.ownerDocument.body);o=m}while(o);Wo(s)}function XE(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function rg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rg(o),oa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function iD(i,s,o,u){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ir])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function rD(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ri(i.nextSibling),i===null))return null;return i}function WE(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ri(i.nextSibling),i===null))return null;return i}function sg(i){return i.data==="$?"||i.data==="$~"}function ag(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sD(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ri(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var og=null;function ZE(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return ri(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function JE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function ew(i,s,o){switch(s=af(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function xu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);oa(i)}var si=new Map,tw=new Set;function of(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ar=oe.d;oe.d={f:aD,r:oD,D:lD,C:uD,L:cD,m:hD,X:dD,S:fD,M:mD};function aD(){var i=Ar.f(),s=Wh();return i||s}function oD(i){var s=sr(i);s!==null&&s.tag===5&&s.type==="form"?vT(s):Ar.r(i)}var Yo=typeof document>"u"?null:document;function nw(i,s,o){var u=Yo;if(u&&typeof s=="string"&&s){var m=gt(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),tw.has(m)||(tw.add(m),i={rel:i,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),Zt(s,"link",i),bt(s),u.head.appendChild(s)))}}function lD(i){Ar.D(i),nw("dns-prefetch",i,null)}function uD(i,s){Ar.C(i,s),nw("preconnect",i,s)}function cD(i,s,o){Ar.L(i,s,o);var u=Yo;if(u&&i&&s){var m='link[rel="preload"][as="'+gt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+gt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+gt(o.imageSizes)+'"]')):m+='[href="'+gt(i)+'"]';var g=m;switch(s){case"style":g=Qo(i);break;case"script":g=Xo(i)}si.has(g)||(i=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),si.set(g,i),u.querySelector(m)!==null||s==="style"&&u.querySelector(Iu(g))||s==="script"&&u.querySelector(Du(g))||(s=u.createElement("link"),Zt(s,"link",i),bt(s),u.head.appendChild(s)))}}function hD(i,s){Ar.m(i,s);var o=Yo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+gt(u)+'"][href="'+gt(i)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Xo(i)}if(!si.has(g)&&(i=_({rel:"modulepreload",href:i},s),si.set(g,i),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(g)))return}u=o.createElement("link"),Zt(u,"link",i),bt(u),o.head.appendChild(u)}}}function fD(i,s,o){Ar.S(i,s,o);var u=Yo;if(u&&i){var m=mi(u).hoistableStyles,g=Qo(i);s=s||"default";var T=m.get(g);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(Iu(g)))C.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":s},o),(o=si.get(g))&&lg(i,o);var j=T=u.createElement("link");bt(j),Zt(j,"link",i),j._p=new Promise(function(X,te){j.onload=X,j.onerror=te}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,lf(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:C},m.set(g,T)}}}function dD(i,s){Ar.X(i,s);var o=Yo;if(o&&i){var u=mi(o).hoistableScripts,m=Xo(i),g=u.get(m);g||(g=o.querySelector(Du(m)),g||(i=_({src:i,async:!0},s),(s=si.get(m))&&ug(i,s),g=o.createElement("script"),bt(g),Zt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function mD(i,s){Ar.M(i,s);var o=Yo;if(o&&i){var u=mi(o).hoistableScripts,m=Xo(i),g=u.get(m);g||(g=o.querySelector(Du(m)),g||(i=_({src:i,async:!0,type:"module"},s),(s=si.get(m))&&ug(i,s),g=o.createElement("script"),bt(g),Zt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function iw(i,s,o,u){var m=(m=Ee.current)?of(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Qo(o.href),o=mi(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Qo(o.href);var g=mi(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Iu(i)))&&!g._p&&(T.instance=g,T.state.loading=5),si.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},si.set(i,o),g||pD(m,i,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=mi(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Qo(i){return'href="'+gt(i)+'"'}function Iu(i){return'link[rel="stylesheet"]['+i+"]"}function rw(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function pD(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Zt(s,"link",o),bt(s),i.head.appendChild(s))}function Xo(i){return'[src="'+gt(i)+'"]'}function Du(i){return"script[async]"+i}function sw(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+gt(o.href)+'"]');if(u)return s.instance=u,bt(u),u;var m=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),bt(u),Zt(u,"style",m),lf(u,o.precedence,i),s.instance=u;case"stylesheet":m=Qo(o.href);var g=i.querySelector(Iu(m));if(g)return s.state.loading|=4,s.instance=g,bt(g),g;u=rw(o),(m=si.get(m))&&lg(u,m),g=(i.ownerDocument||i).createElement("link"),bt(g);var T=g;return T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Zt(g,"link",u),s.state.loading|=4,lf(g,o.precedence,i),s.instance=g;case"script":return g=Xo(o.src),(m=i.querySelector(Du(g)))?(s.instance=m,bt(m),m):(u=o,(m=si.get(g))&&(u=_({},o),ug(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),bt(m),Zt(m,"link",u),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,lf(u,o.precedence,i));return s.instance}function lf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===s)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function lg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ug(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var uf=null;function aw(i,s,o){if(uf===null){var u=new Map,m=uf=new Map;m.set(o,u)}else m=uf,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[ir]||g[pt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var C=u.get(T);C?C.push(g):u.set(T,[g])}}return u}function ow(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function gD(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function yD(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Qo(u.href),g=s.querySelector(Iu(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=cf.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=g,bt(g);return}g=s.ownerDocument||s,u=rw(u),(m=si.get(m))&&lg(u,m),g=g.createElement("link"),bt(g);var T=g;T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Zt(g,"link",u),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=cf.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var cg=0;function vD(i,s){return i.stylesheets&&i.count===0&&ff(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&ff(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+s);0<i.imgBytes&&cg===0&&(cg=62500*ZI());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ff(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>cg?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ff(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hf=null;function ff(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hf=new Map,s.forEach(_D,i),hf=null,cf.call(i))}function _D(i,s){if(!(s.state.loading&4)){var o=hf.get(i);if(o)var u=o.get(null);else{o=new Map,hf.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||u,g===u&&o.set(null,m),o.set(T,m),this.count++,u=cf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Nu={$$typeof:k,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function TD(i,s,o,u,m,g,T,C,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function uw(i,s,o,u,m,g,T,C,j,X,te,se){return i=new TD(i,s,o,T,j,X,te,se,C),s=1,g===!0&&(s|=24),g=Ln(3,null,null,s),i.current=g,g.stateNode=i,s=Hm(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},$m(g),i}function cw(i){return i?(i=Co,i):Co}function hw(i,s,o,u,m,g){m=cw(m),u.context===null?u.context=m:u.pendingContext=m,u=ds(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ms(i,u,s),o!==null&&(xn(o,i,s),uu(o,i,s))}function fw(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function hg(i,s){fw(i,s),(i=i.alternate)&&fw(i,s)}function dw(i){if(i.tag===13||i.tag===31){var s=_a(i,67108864);s!==null&&xn(s,i,67108864),hg(i,67108864)}}function mw(i){if(i.tag===13||i.tag===31){var s=Fn();s=jl(s);var o=_a(i,s);o!==null&&xn(o,i,s),hg(i,s)}}var df=!0;function ED(i,s,o,u){var m=ee.T;ee.T=null;var g=oe.p;try{oe.p=2,fg(i,s,o,u)}finally{oe.p=g,ee.T=m}}function wD(i,s,o,u){var m=ee.T;ee.T=null;var g=oe.p;try{oe.p=8,fg(i,s,o,u)}finally{oe.p=g,ee.T=m}}function fg(i,s,o,u){if(df){var m=dg(u);if(m===null)Zp(i,s,u,mf,o),gw(i,u);else if(SD(m,i,s,o,u))u.stopPropagation();else if(gw(i,u),s&4&&-1<bD.indexOf(i)){for(;m!==null;){var g=sr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=di(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var j=1<<31-mn(T);C.entanglements[1]|=j,T&=~j}ji(g),(Ge&6)===0&&(Qh=Kt()+500,Au(0))}}break;case 31:case 13:C=_a(g,2),C!==null&&xn(C,g,2),Wh(),hg(g,2)}if(g=dg(u),g===null&&Zp(i,s,u,mf,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else Zp(i,s,u,null,o)}}function dg(i){return i=_o(i),mg(i)}var mf=null;function mg(i){if(mf=null,i=rr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=f(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return mf=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kc()){case Pt:return 2;case jt:return 8;case er:case $c:return 32;case kl:return 268435456;default:return 32}default:return 32}}var pg=!1,As=null,Rs=null,Cs=null,Mu=new Map,Ou=new Map,xs=[],bD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(i,s){switch(i){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(s.pointerId)}}function Vu(i,s,o,u,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},s!==null&&(s=sr(s),s!==null&&dw(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function SD(i,s,o,u,m){switch(s){case"focusin":return As=Vu(As,i,s,o,u,m),!0;case"dragenter":return Rs=Vu(Rs,i,s,o,u,m),!0;case"mouseover":return Cs=Vu(Cs,i,s,o,u,m),!0;case"pointerover":var g=m.pointerId;return Mu.set(g,Vu(Mu.get(g)||null,i,s,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Ou.set(g,Vu(Ou.get(g)||null,i,s,o,u,m)),!0}return!1}function yw(i){var s=rr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Qc(i.priority,function(){mw(o)});return}}else if(s===31){if(s=f(o),s!==null){i.blockedOn=s,Qc(i.priority,function(){mw(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=dg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);vo=u,o.target.dispatchEvent(u),vo=null}else return s=sr(o),s!==null&&dw(s),i.blockedOn=o,!1;s.shift()}return!0}function vw(i,s,o){pf(i)&&o.delete(s)}function AD(){pg=!1,As!==null&&pf(As)&&(As=null),Rs!==null&&pf(Rs)&&(Rs=null),Cs!==null&&pf(Cs)&&(Cs=null),Mu.forEach(vw),Ou.forEach(vw)}function gf(i,s){i.blockedOn===s&&(i.blockedOn=null,pg||(pg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AD)))}var yf=null;function _w(i){yf!==i&&(yf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yf===i&&(yf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],m=i[s+2];if(typeof u!="function"){if(mg(u||o)===null)continue;break}var g=sr(o);g!==null&&(i.splice(s,3),s-=3,dp(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Wo(i){function s(j){return gf(j,i)}As!==null&&gf(As,i),Rs!==null&&gf(Rs,i),Cs!==null&&gf(Cs,i),Mu.forEach(s),Ou.forEach(s);for(var o=0;o<xs.length;o++){var u=xs[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<xs.length&&(o=xs[0],o.blockedOn===null);)yw(o),o.blockedOn===null&&xs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],T=m[Yt]||null;if(typeof g=="function")T||_w(o);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Yt]||null)C=T.formAction;else if(mg(m)!==null)continue}else C=T.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),_w(o)}}}function Tw(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gg(i){this._internalRoot=i}vf.prototype.render=gg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Fn();hw(o,u,i,s,null,null)},vf.prototype.unmount=gg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;hw(i.current,2,null,i,null,null),Wh(),s[Di]=null}};function vf(i){this._internalRoot=i}vf.prototype.unstable_scheduleHydration=function(i){if(i){var s=nr();i={blockedOn:null,target:i,priority:s};for(var o=0;o<xs.length&&s!==0&&s<xs[o].priority;o++);xs.splice(o,0,i),o===0&&yw(i)}};var Ew=e.version;if(Ew!=="19.2.0")throw Error(r(527,Ew,"19.2.0"));oe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var RD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Fr=_f.inject(RD),rn=_f}catch{}}return Pu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",m=xT,g=IT,T=DT;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=uw(i,1,!1,null,null,o,u,null,m,g,T,Tw),i[Di]=s.current,Wp(i),new gg(s)},Pu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,m="",g=xT,T=IT,C=DT,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),s=uw(i,1,!0,s,o??null,u,m,j,g,T,C,Tw),s.context=cw(null),o=s.current,u=Fn(),u=jl(u),m=ds(u),m.callback=null,ms(o,m,u),o=u,s.current.lanes=o,Gr(s,o),ji(s),i[Di]=s.current,Wp(i),new vf(s)},Pu.version="19.2.0",Pu}var Nw;function PD(){if(Nw)return _g.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_g.exports=kD(),_g.exports}var LD=PD();var Mw="popstate";function UD(t={}){function e(a,l){let{pathname:c="/",search:f="",hash:d=""}=eo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),oy("",{pathname:c,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");f=p===-1?d:d.slice(0,p)}return f+"#"+(typeof l=="string"?l:sc(l))}function r(a,l){Kn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return BD(e,n,r,t)}function ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jD(){return Math.random().toString(36).substring(2,10)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function oy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?eo(e):e,state:n,key:e&&e.key||r||jD()}}function sc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function BD(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,f="POP",d=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let x=y(),V=x==null?null:x-p;p=x,d&&d({action:f,location:b.location,delta:V})}function E(x,V){f="PUSH";let L=oy(b.location,x,V);n&&n(L,x),p=y()+1;let k=Ow(L,p),K=b.createHref(L);try{c.pushState(k,"",K)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(K)}l&&d&&d({action:f,location:b.location,delta:1})}function A(x,V){f="REPLACE";let L=oy(b.location,x,V);n&&n(L,x),p=y();let k=Ow(L,p),K=b.createHref(L);c.replaceState(k,"",K),l&&d&&d({action:f,location:b.location,delta:0})}function D(x){return zD(x)}let b={get action(){return f},get location(){return t(a,c)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Mw,_),d=x,()=>{a.removeEventListener(Mw,_),d=null}},createHref(x){return e(a,x)},createURL:D,encodeLocation(x){let V=D(x);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:A,go(x){return c.go(x)}};return b}function zD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ct(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:sc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function XA(t,e,n="/"){return FD(t,e,n,!1)}function FD(t,e,n,r){let a=typeof e=="string"?eo(e):e,l=kr(a.pathname||"/",n);if(l==null)return null;let c=WA(t);HD(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let p=eN(l);f=ZD(c[d],p,r)}return f}function WA(t,e=[],n=[],r="",a=!1){let l=(c,f,d=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;ct(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let _=Dr([r,y.relativePath]),E=n.concat(y);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),WA(c.children,e,E,_,d)),!(c.path==null&&!c.index)&&e.push({path:_,score:XD(_,c.index),routesMeta:E})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let d of ZA(c.path))l(c,f,!0,d)}),e}function ZA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=ZA(r.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function HD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qD=/^:[\w-]+$/,GD=3,KD=2,$D=1,YD=10,QD=-2,Vw=t=>t==="*";function XD(t,e){let n=t.split("/"),r=n.length;return n.some(Vw)&&(r+=QD),e&&(r+=KD),n.filter(a=>!Vw(a)).reduce((a,l)=>a+(qD.test(l)?GD:l===""?$D:YD),r)}function WD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function ZD(t,e,n=!1){let{routesMeta:r}=t,a={},l="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],p=f===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=Zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=Zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:Dr([l,_.pathname]),pathnameBase:sN(Dr([l,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(l=Dr([l,_.pathnameBase]))}return c}function Zf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JD(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:_},E)=>{if(y==="*"){let D=f[E]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const A=f[E];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:t}}function JD(t,e=!1,n=!0){Kn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function eN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function kr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var tN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nN=t=>tN.test(t);function iN(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?eo(t):t,l;if(n)if(nN(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=kw(n.substring(1),"/"):l=kw(n,e)}else l=e;return{pathname:l,search:aN(r),hash:oN(a)}}function kw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iv(t){let e=rN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function rv(t,e,n,r=!1){let a;typeof t=="string"?a=eo(t):(a={...t},ct(!a.pathname||!a.pathname.includes("?"),bg("?","pathname","search",a)),ct(!a.pathname||!a.pathname.includes("#"),bg("#","pathname","hash",a)),ct(!a.search||!a.search.includes("#"),bg("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let _=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),_-=1;a.pathname=E.join("/")}f=_>=0?e[_]:"/"}let d=iN(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Dr=t=>t.join("/").replace(/\/\/+/g,"/"),sN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JA=["POST","PUT","PATCH","DELETE"];new Set(JA);var uN=["GET",...JA];new Set(uN);var Al=M.createContext(null);Al.displayName="DataRouter";var Id=M.createContext(null);Id.displayName="DataRouterState";M.createContext(!1);var e1=M.createContext({isTransitioning:!1});e1.displayName="ViewTransition";var cN=M.createContext(new Map);cN.displayName="Fetchers";var hN=M.createContext(null);hN.displayName="Await";var Ai=M.createContext(null);Ai.displayName="Navigation";var Ac=M.createContext(null);Ac.displayName="Location";var Wi=M.createContext({outlet:null,matches:[],isDataRoute:!1});Wi.displayName="Route";var sv=M.createContext(null);sv.displayName="RouteError";function fN(t,{relative:e}={}){ct(Rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext(Ai),{hash:a,pathname:l,search:c}=Rc(t,{relative:e}),f=l;return n!=="/"&&(f=l==="/"?n:Dr([n,l])),r.createHref({pathname:f,search:c,hash:a})}function Rl(){return M.useContext(Ac)!=null}function Ws(){return ct(Rl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Ac).location}var t1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n1(t){M.useContext(Ai).static||M.useLayoutEffect(t)}function i1(){let{isDataRoute:t}=M.useContext(Wi);return t?AN():dN()}function dN(){ct(Rl(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Al),{basename:e,navigator:n}=M.useContext(Ai),{matches:r}=M.useContext(Wi),{pathname:a}=Ws(),l=JSON.stringify(iv(r)),c=M.useRef(!1);return n1(()=>{c.current=!0}),M.useCallback((d,p={})=>{if(Kn(c.current,t1),!c.current)return;if(typeof d=="number"){n.go(d);return}let y=rv(d,JSON.parse(l),a,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Dr([e,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[e,n,l,a,t])}M.createContext(null);function Rc(t,{relative:e}={}){let{matches:n}=M.useContext(Wi),{pathname:r}=Ws(),a=JSON.stringify(iv(n));return M.useMemo(()=>rv(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function mN(t,e){return r1(t,e)}function r1(t,e,n,r,a){ct(Rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(Ai),{matches:c}=M.useContext(Wi),f=c[c.length-1],d=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let L=_&&_.path||"";s1(p,!_||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let E=Ws(),A;if(e){let L=typeof e=="string"?eo(e):e;ct(y==="/"||L.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${L.pathname}" was given in the \`location\` prop.`),A=L}else A=E;let D=A.pathname||"/",b=D;if(y!=="/"){let L=y.replace(/^\//,"").split("/");b="/"+D.replace(/^\//,"").split("/").slice(L.length).join("/")}let x=XA(t,{pathname:b});Kn(_||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Kn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=_N(x&&x.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Dr([y,l.encodeLocation?l.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:Dr([y,l.encodeLocation?l.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,n,r,a);return e&&V?M.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},V):V}function pN(){let t=SN(),e=lN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,c)}var gN=M.createElement(pN,null),yN=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(Wi.Provider,{value:this.props.routeContext},M.createElement(sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vN({routeContext:t,match:e,children:n}){let r=M.useContext(Al);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Wi.Provider,{value:t},n)}function _N(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,d=-1;if(n)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:E,errors:A}=n,D=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||D){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=n&&r?(y,_)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,E)=>{let A,D=!1,b=null,x=null;n&&(A=c&&_.route.id?c[_.route.id]:void 0,b=_.route.errorElement||gN,f&&(d<0&&E===0?(s1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,x=null):d===E&&(D=!0,x=_.route.hydrateFallbackElement||null)));let V=e.concat(l.slice(0,E+1)),L=()=>{let k;return A?k=b:D?k=x:_.route.Component?k=M.createElement(_.route.Component,null):_.route.element?k=_.route.element:k=y,M.createElement(vN,{match:_,routeContext:{outlet:y,matches:V,isDataRoute:n!=null},children:k})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?M.createElement(yN,{location:n.location,revalidation:n.revalidation,component:b,error:A,children:L(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:p}):L()},null)}function av(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TN(t){let e=M.useContext(Al);return ct(e,av(t)),e}function EN(t){let e=M.useContext(Id);return ct(e,av(t)),e}function wN(t){let e=M.useContext(Wi);return ct(e,av(t)),e}function ov(t){let e=wN(t),n=e.matches[e.matches.length-1];return ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function bN(){return ov("useRouteId")}function SN(){let t=M.useContext(sv),e=EN("useRouteError"),n=ov("useRouteError");return t!==void 0?t:e.errors?.[n]}function AN(){let{router:t}=TN("useNavigate"),e=ov("useNavigate"),n=M.useRef(!1);return n1(()=>{n.current=!0}),M.useCallback(async(a,l={})=>{Kn(n.current,t1),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var Pw={};function s1(t,e,n){!e&&!Pw[t]&&(Pw[t]=!0,Kn(!1,n))}M.memo(RN);function RN({routes:t,future:e,state:n,unstable_onError:r}){return r1(t,void 0,n,r,e)}function lv({to:t,replace:e,state:n,relative:r}){ct(Rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(Ai);Kn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Wi),{pathname:c}=Ws(),f=i1(),d=rv(t,iv(l),c,r==="path"),p=JSON.stringify(d);return M.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:r})},[f,p,r,e,n]),null}function Pf(t){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:l=!1}){ct(!Rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=eo(n));let{pathname:d="/",search:p="",hash:y="",state:_=null,key:E="default"}=n,A=M.useMemo(()=>{let D=kr(d,c);return D==null?null:{location:{pathname:D,search:p,hash:y,state:_,key:E},navigationType:r}},[c,d,p,y,_,E,r]);return Kn(A!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:M.createElement(Ai.Provider,{value:f},M.createElement(Ac.Provider,{children:e,value:A}))}function xN({children:t,location:e}){return mN(ly(t),e)}function ly(t,e=[]){let n=[];return M.Children.forEach(t,(r,a)=>{if(!M.isValidElement(r))return;let l=[...e,a];if(r.type===M.Fragment){n.push.apply(n,ly(r.props.children,l));return}ct(r.type===Pf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ly(r.props.children,l)),n.push(c)}),n}var Lf="get",Uf="application/x-www-form-urlencoded";function Dd(t){return t!=null&&typeof t.tagName=="string"}function IN(t){return Dd(t)&&t.tagName.toLowerCase()==="button"}function DN(t){return Dd(t)&&t.tagName.toLowerCase()==="form"}function NN(t){return Dd(t)&&t.tagName.toLowerCase()==="input"}function MN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ON(t,e){return t.button===0&&(!e||e==="_self")&&!MN(t)}var Tf=null;function VN(){if(Tf===null)try{new FormData(document.createElement("form"),0),Tf=!1}catch{Tf=!0}return Tf}var kN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(t){return t!=null&&!kN.has(t)?(Kn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uf}"`),null):t}function PN(t,e){let n,r,a,l,c;if(DN(t)){let f=t.getAttribute("action");r=f?kr(f,e):null,n=t.getAttribute("method")||Lf,a=Sg(t.getAttribute("enctype"))||Uf,l=new FormData(t)}else if(IN(t)||NN(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||f.getAttribute("action");if(r=d?kr(d,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||Lf,a=Sg(t.getAttribute("formenctype"))||Sg(f.getAttribute("enctype"))||Uf,l=new FormData(f,t),!VN()){let{name:p,type:y,value:_}=t;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,_)}}else{if(Dd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lf,r=null,a=Uf,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&kr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function UN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function BN(t,e,n){let r=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await UN(l,n);return c.links?c.links():[]}return[]}));return qN(r.flat(1).filter(jN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Lw(t,e,n,r,a,l){let c=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,f=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,p)=>c(d,p)||f(d,p)):l==="data"?e.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function zN(t,e,{includeHydrateFallback:n}={}){return FN(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function FN(t){return[...new Set(t)]}function HN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function qN(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let l=JSON.stringify(HN(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function a1(){let t=M.useContext(Al);return uv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function GN(){let t=M.useContext(Id);return uv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cv=M.createContext(void 0);cv.displayName="FrameworkContext";function o1(){let t=M.useContext(cv);return uv(t,"You must render this element inside a <HydratedRouter> element"),t}function KN(t,e){let n=M.useContext(cv),[r,a]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,E=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let b=V=>{V.forEach(L=>{c(L.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return E.current&&x.observe(E.current),()=>{x.disconnect()}}},[t]),M.useEffect(()=>{if(r){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[r]);let A=()=>{a(!0)},D=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,E,{}]:[l,E,{onFocus:Lu(f,A),onBlur:Lu(d,D),onMouseEnter:Lu(p,A),onMouseLeave:Lu(y,D),onTouchStart:Lu(_,A)}]:[!1,E,{}]}function Lu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $N({page:t,...e}){let{router:n}=a1(),r=M.useMemo(()=>XA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?M.createElement(QN,{page:t,matches:r,...e}):null}function YN(t){let{manifest:e,routeModules:n}=o1(),[r,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return BN(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),r}function QN({page:t,matches:e,...n}){let r=Ws(),{manifest:a,routeModules:l}=o1(),{basename:c}=a1(),{loaderData:f,matches:d}=GN(),p=M.useMemo(()=>Lw(t,e,d,a,r,"data"),[t,e,d,a,r]),y=M.useMemo(()=>Lw(t,e,d,a,r,"assets"),[t,e,d,a,r]),_=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let D=new Set,b=!1;if(e.forEach(V=>{let L=a.routes[V.route.id];!L||!L.hasLoader||(!p.some(k=>k.route.id===V.route.id)&&V.route.id in f&&l[V.route.id]?.shouldRevalidate||L.hasClientLoader?b=!0:D.add(V.route.id))}),D.size===0)return[];let x=LN(t,c,"data");return b&&D.size>0&&x.searchParams.set("_routes",e.filter(V=>D.has(V.route.id)).map(V=>V.route.id).join(",")),[x.pathname+x.search]},[c,f,r,a,p,e,t,l]),E=M.useMemo(()=>zN(y,a),[y,a]),A=YN(y);return M.createElement(M.Fragment,null,_.map(D=>M.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),E.map(D=>M.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),A.map(({key:D,link:b})=>M.createElement("link",{key:D,nonce:n.nonce,...b})))}function XN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l1&&(window.__reactRouterVersion="7.9.6")}catch{}function WN({basename:t,children:e,window:n}){let r=M.useRef();r.current==null&&(r.current=UD({window:n,v5Compat:!0}));let a=r.current,[l,c]=M.useState({action:a.action,location:a.location}),f=M.useCallback(d=>{M.startTransition(()=>c(d))},[c]);return M.useLayoutEffect(()=>a.listen(f),[a,f]),M.createElement(CN,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c1=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:f,target:d,to:p,preventScrollReset:y,viewTransition:_,...E},A){let{basename:D}=M.useContext(Ai),b=typeof p=="string"&&u1.test(p),x,V=!1;if(typeof p=="string"&&b&&(x=p,l1))try{let N=new URL(window.location.href),U=p.startsWith("//")?new URL(N.protocol+p):new URL(p),B=kr(U.pathname,D);U.origin===N.origin&&B!=null?p=B+U.search+U.hash:V=!0}catch{Kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=fN(p,{relative:a}),[k,K,q]=KN(r,E),Y=tM(p,{replace:c,state:f,target:d,preventScrollReset:y,relative:a,viewTransition:_});function R(N){e&&e(N),N.defaultPrevented||Y(N)}let S=M.createElement("a",{...E,...q,href:x||L,onClick:V||l?e:R,ref:XN(A,K),target:d,"data-discover":!b&&n==="render"?"true":void 0});return k&&!b?M.createElement(M.Fragment,null,S,M.createElement($N,{page:L})):S});c1.displayName="Link";var ZN=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:f,children:d,...p},y){let _=Rc(c,{relative:p.relative}),E=Ws(),A=M.useContext(Id),{navigator:D,basename:b}=M.useContext(Ai),x=A!=null&&aM(_)&&f===!0,V=D.encodeLocation?D.encodeLocation(_).pathname:_.pathname,L=E.pathname,k=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(L=L.toLowerCase(),k=k?k.toLowerCase():null,V=V.toLowerCase()),k&&b&&(k=kr(k,b)||k);const K=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let q=L===V||!a&&L.startsWith(V)&&L.charAt(K)==="/",Y=k!=null&&(k===V||!a&&k.startsWith(V)&&k.charAt(V.length)==="/"),R={isActive:q,isPending:Y,isTransitioning:x},S=q?e:void 0,N;typeof r=="function"?N=r(R):N=[r,q?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(R):l;return M.createElement(c1,{...p,"aria-current":S,className:N,ref:y,style:U,to:c,viewTransition:f},typeof d=="function"?d(R):d)});ZN.displayName="NavLink";var JN=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:l,method:c=Lf,action:f,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,...E},A)=>{let D=rM(),b=sM(f,{relative:p}),x=c.toLowerCase()==="get"?"get":"post",V=typeof f=="string"&&u1.test(f),L=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let K=k.nativeEvent.submitter,q=K?.getAttribute("formmethod")||c;D(K||k.currentTarget,{fetcherKey:e,method:q,navigate:n,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:_})};return M.createElement("form",{ref:A,method:x,action:b,onSubmit:r?d:L,...E,"data-discover":!V&&t==="render"?"true":void 0})});JN.displayName="Form";function eM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h1(t){let e=M.useContext(Al);return ct(e,eM(t)),e}function tM(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=i1(),d=Ws(),p=Rc(t,{relative:l});return M.useCallback(y=>{if(ON(y,e)){y.preventDefault();let _=n!==void 0?n:sc(d)===sc(p);f(t,{replace:_,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[d,f,p,n,r,e,t,a,l,c])}var nM=0,iM=()=>`__${String(++nM)}__`;function rM(){let{router:t}=h1("useSubmit"),{basename:e}=M.useContext(Ai),n=bN();return M.useCallback(async(r,a={})=>{let{action:l,method:c,encType:f,formData:d,body:p}=PN(r,e);if(a.navigate===!1){let y=a.fetcherKey||iM();await t.fetch(y,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function sM(t,{relative:e}={}){let{basename:n}=M.useContext(Ai),r=M.useContext(Wi);ct(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Rc(t||".",{relative:e})},c=Ws();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Dr([n,l.pathname])),sc(l)}function aM(t,{relative:e}={}){let n=M.useContext(e1);ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=h1("useViewTransitionState"),a=Rc(t,{relative:e});if(!n.isTransitioning)return!1;let l=kr(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=kr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zf(a.pathname,c)!=null||Zf(a.pathname,l)!=null}const oM=()=>{};var Uw={};const f1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},lM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],f=t[n++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],c=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},d1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,f=c?t[a+1]:0,d=a+2<t.length,p=d?t[a+2]:0,y=l>>2,_=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,A=p&63;d||(A=64,c||(E=64)),r.push(n[y],n[_],n[E],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],f=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||f==null||p==null||_==null)throw new uM;const E=l<<2|f>>4;if(r.push(E),p!==64){const A=f<<4&240|p>>2;if(r.push(A),_!==64){const D=p<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cM=function(t){const e=f1(t);return d1.encodeByteArray(e,!0)},Jf=function(t){return cM(t).replace(/\./g,"")},m1=function(t){try{return d1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fM=()=>hM().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof Uw>"u")return;const t=Uw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m1(t[1]);return e&&JSON.parse(e)},Nd=()=>{try{return oM()||fM()||dM()||mM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p1=t=>{var e,n;return(n=(e=Nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},g1=t=>{const e=p1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},y1=()=>{var t;return(t=Nd())===null||t===void 0?void 0:t.config},v1=t=>{var e;return(e=Nd())===null||e===void 0?void 0:e[`_${t}`]};class pM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Zs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hv(t){return(await fetch(t,{credentials:"include"})).ok}function _1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jf(JSON.stringify(n)),Jf(JSON.stringify(c)),""].join(".")}const Qu={};function gM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?t.emulator.push(e):t.prod.push(e);return t}function yM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jw=!1;function fv(t,e){if(typeof window>"u"||typeof document>"u"||!Zs(window.location.host)||Qu[t]===e||Qu[t]||jw)return;Qu[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=gM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{jw=!0,c()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=yM(r),A=n("text"),D=document.getElementById(A)||document.createElement("span"),b=n("learnmore"),x=document.getElementById(b)||document.createElement("a"),V=n("preprendIcon"),L=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const k=E.element;f(k),y(x,b);const K=p();d(L,V),k.append(L,D,x,K),document.body.appendChild(k)}l?(D.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function _M(){var t;const e=(t=Nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bM(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SM(){return!_M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T1(){try{return typeof indexedDB=="object"}catch{return!1}}function E1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}function AM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const RM="FirebaseError";class Ri extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RM,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,to.prototype.create)}}class to{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?CM(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ri(a,f,r)}}function CM(t,e){return t.replace(xM,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const xM=/\{\$([^}]+)}/g;function IM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const l=t[a],c=e[a];if(Bw(l)&&Bw(c)){if(!$a(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}function Cc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DM(t,e){const n=new NM(t,e);return n.subscribe.bind(n)}class NM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=Ag),a.error===void 0&&(a.error=Ag),a.complete===void 0&&(a.complete=Ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ag(){}function ot(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Oa="[DEFAULT]";class OM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kM(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VM(t){return t===Oa?void 0:t}function kM(t){return t.instantiationMode==="EAGER"}class PM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const LM={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},UM=Ue.INFO,jM={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},BM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=jM[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=UM,this._logHandler=BM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const zM=(t,e)=>e.some(n=>t instanceof n);let zw,Fw;function FM(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HM(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w1=new WeakMap,uy=new WeakMap,b1=new WeakMap,Rg=new WeakMap,mv=new WeakMap;function qM(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Nr(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&w1.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function GM(t){if(uy.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});uy.set(t,e)}let cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KM(t){cy=t(cy)}function $M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cg(this),e,...n);return b1.set(r,e.sort?e.sort():[e]),Nr(r)}:HM().includes(t)?function(...e){return t.apply(Cg(this),e),Nr(w1.get(this))}:function(...e){return Nr(t.apply(Cg(this),e))}}function YM(t){return typeof t=="function"?$M(t):(t instanceof IDBTransaction&&GM(t),zM(t,FM())?new Proxy(t,cy):t)}function Nr(t){if(t instanceof IDBRequest)return qM(t);if(Rg.has(t))return Rg.get(t);const e=YM(t);return e!==t&&(Rg.set(t,e),mv.set(e,t)),e}const Cg=t=>mv.get(t);function Md(t,e,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),f=Nr(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Nr(c.result),d.oldVersion,d.newVersion,Nr(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}function xg(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Nr(n).then(()=>{})}const QM=["get","getKey","getAll","getAllKeys","count"],XM=["put","add","delete","clear"],Ig=new Map;function Hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=XM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||QM.includes(n)))return;const l=async function(c,...f){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),a&&d.done]))[0]};return Ig.set(e,l),l}KM(t=>({...t,get:(e,n,r)=>Hw(e,n)||t.get(e,n,r),has:(e,n)=>!!Hw(e,n)||t.has(e,n)}));class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZM(t){const e=t.getComponent();return e?.type==="VERSION"}const hy="@firebase/app",qw="0.13.2";const Pr=new dv("@firebase/app"),JM="@firebase/app-compat",eO="@firebase/analytics-compat",tO="@firebase/analytics",nO="@firebase/app-check-compat",iO="@firebase/app-check",rO="@firebase/auth",sO="@firebase/auth-compat",aO="@firebase/database",oO="@firebase/data-connect",lO="@firebase/database-compat",uO="@firebase/functions",cO="@firebase/functions-compat",hO="@firebase/installations",fO="@firebase/installations-compat",dO="@firebase/messaging",mO="@firebase/messaging-compat",pO="@firebase/performance",gO="@firebase/performance-compat",yO="@firebase/remote-config",vO="@firebase/remote-config-compat",_O="@firebase/storage",TO="@firebase/storage-compat",EO="@firebase/firestore",wO="@firebase/ai",bO="@firebase/firestore-compat",SO="firebase",AO="11.10.0";const fy="[DEFAULT]",RO={[hy]:"fire-core",[JM]:"fire-core-compat",[tO]:"fire-analytics",[eO]:"fire-analytics-compat",[iO]:"fire-app-check",[nO]:"fire-app-check-compat",[rO]:"fire-auth",[sO]:"fire-auth-compat",[aO]:"fire-rtdb",[oO]:"fire-data-connect",[lO]:"fire-rtdb-compat",[uO]:"fire-fn",[cO]:"fire-fn-compat",[hO]:"fire-iid",[fO]:"fire-iid-compat",[dO]:"fire-fcm",[mO]:"fire-fcm-compat",[pO]:"fire-perf",[gO]:"fire-perf-compat",[yO]:"fire-rc",[vO]:"fire-rc-compat",[_O]:"fire-gcs",[TO]:"fire-gcs-compat",[EO]:"fire-fst",[bO]:"fire-fst-compat",[wO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};const ed=new Map,CO=new Map,dy=new Map;function Gw(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(dy.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;dy.set(e,t);for(const n of ed.values())Gw(n,t);for(const n of CO.values())Gw(n,t);return!0}function no(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t==null?!1:t.settings!==void 0}const xO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new to("app","Firebase",xO);class IO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}const io=AO;function S1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fy,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw js.create("bad-app-name",{appName:String(a)});if(n||(n=y1()),!n)throw js.create("no-options");const l=ed.get(a);if(l){if($a(n,l.options)&&$a(r,l.config))return l;throw js.create("duplicate-app",{appName:a})}const c=new PM(a);for(const d of dy.values())c.addComponent(d);const f=new IO(n,r,c);return ed.set(a,f),f}function Od(t=fy){const e=ed.get(t);if(!e&&t===fy&&y1())return S1();if(!e)throw js.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let a=(r=RO[t])!==null&&r!==void 0?r:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(f.join(" "));return}bi(new hi(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const DO="firebase-heartbeat-database",NO=1,ac="firebase-heartbeat-store";let Dg=null;function A1(){return Dg||(Dg=Md(DO,NO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw js.create("idb-open",{originalErrorMessage:t.message})})),Dg}async function MO(t){try{const n=(await A1()).transaction(ac),r=await n.objectStore(ac).get(R1(t));return await n.done,r}catch(e){if(e instanceof Ri)Pr.warn(e.message);else{const n=js.create("idb-get",{originalErrorMessage:e?.message});Pr.warn(n.message)}}}async function Kw(t,e){try{const r=(await A1()).transaction(ac,"readwrite");await r.objectStore(ac).put(e,R1(t)),await r.done}catch(n){if(n instanceof Ri)Pr.warn(n.message);else{const r=js.create("idb-set",{originalErrorMessage:n?.message});Pr.warn(r.message)}}}function R1(t){return`${t.name}!${t.options.appId}`}const OO=1024,VO=30;class kO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$w();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>VO){const c=UO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:a}=PO(this._heartbeatsCache.heartbeats),l=Jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Pr.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function PO(t,e=OO){const n=[];let r=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Yw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Yw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T1()?E1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return Jf(JSON.stringify({version:2,heartbeats:t})).length}function UO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function jO(t){bi(new hi("platform-logger",e=>new WM(e),"PRIVATE")),bi(new hi("heartbeat",e=>new kO(e),"PRIVATE")),Mn(hy,qw,t),Mn(hy,qw,"esm2017"),Mn("fire-js","")}jO("");function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function C1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BO=C1,x1=new to("auth","Firebase",C1());const td=new dv("@firebase/auth");function zO(t,...e){td.logLevel<=Ue.WARN&&td.warn(`Auth (${io}): ${t}`,...e)}function jf(t,...e){td.logLevel<=Ue.ERROR&&td.error(`Auth (${io}): ${t}`,...e)}function Qi(t,...e){throw yv(t,...e)}function wi(t,...e){return yv(t,...e)}function gv(t,e,n){const r=Object.assign(Object.assign({},BO()),{[e]:n});return new to("auth","Firebase",r).create(e,{appName:t.name})}function za(t){return gv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qi(t,"argument-error"),gv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x1.create(t,...e)}function be(t,e,...n){if(!t)throw yv(e,...n)}function xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jf(e),new Error(e)}function Lr(t,e){t||xr(e)}function my(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HO(){return Qw()==="http:"||Qw()==="https:"}function Qw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HO()||EM()||"connection"in navigator)?navigator.onLine:!0}function GO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lr(n>e,"Short delay should be less than long delay!"),this.isMobile=vM()||wM()}get(){return qO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vv(t,e){Lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class I1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YO=new xc(3e4,6e4);function _v(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cl(t,e,n,r,a={}){return D1(t,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=Cc(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},l);return TM()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Zs(t.emulatorConfig.host)&&(p.credentials="include"),I1.fetch()(await N1(t,t.config.apiHost,n,f),p)})}async function D1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KO),e);try{const a=new XO(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ef(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Ef(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw Ef(t,"user-disabled",c);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gv(t,y,p);Qi(t,y)}}catch(a){if(a instanceof Ri)throw a;Qi(t,"network-request-failed",{message:String(a)})}}async function QO(t,e,n,r,a={}){const l=await Cl(t,e,n,r,a);return"mfaPendingCredential"in l&&Qi(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function N1(t,e,n,r){const a=`${e}${n}?${r}`,l=t,c=l.config.emulator?vv(t.config,a):`${t.config.apiScheme}://${a}`;return $O.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class XO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),YO.get())})}}function Ef(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=wi(t,e,r);return a.customData._tokenResponse=n,a}async function WO(t,e){return Cl(t,"POST","/v1/accounts:delete",e)}async function nd(t,e){return Cl(t,"POST","/v1/accounts:lookup",e)}function Xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZO(t,e=!1){const n=ot(t),r=await n.getIdToken(e),a=Tv(r);be(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Xu(Ng(a.auth_time)),issuedAtTime:Xu(Ng(a.iat)),expirationTime:Xu(Ng(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ng(t){return Number(t)*1e3}function Tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const a=m1(n);return a?JSON.parse(a):(jf("Failed to decode base64 JWT payload"),null)}catch(a){return jf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Xw(t){const e=Tv(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function oc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ri&&JO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class eV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class py{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function id(t){var e;const n=t.auth,r=await t.getIdToken(),a=await oc(t,nd(n,{idToken:r}));be(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?M1(l.providerUserInfo):[],f=nV(t.providerData,c),d=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!f?.length,y=d?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new py(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function tV(t){const e=ot(t);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nV(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function M1(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function iV(t,e){const n=await D1(t,{},async()=>{const r=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await N1(t,a,"/v1/token",`key=${l}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return t.emulatorConfig&&Zs(t.emulatorConfig.host)&&(d.credentials="include"),I1.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rV(t,e){return Cl(t,"POST","/v2/accounts:revokeToken",_v(t,e))}class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Xw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await iV(e,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new cl;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return xr("not implemented")}}function Ds(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:n,auth:r,stsTokenManager:a}=e,l=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new py(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await oc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZO(this,e)}reload(){return tV(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(za(this.auth));const e=await this.getIdToken();return await oc(this,WO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,a,l,c,f,d,p,y;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,A=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,D=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(f=n.tenantId)!==null&&f!==void 0?f:void 0,x=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(p=n.createdAt)!==null&&p!==void 0?p:void 0,L=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:k,emailVerified:K,isAnonymous:q,providerData:Y,stsTokenManager:R}=n;be(k&&R,e,"internal-error");const S=cl.fromJSON(this.name,R);be(typeof k=="string",e,"internal-error"),Ds(_,e.name),Ds(E,e.name),be(typeof K=="boolean",e,"internal-error"),be(typeof q=="boolean",e,"internal-error"),Ds(A,e.name),Ds(D,e.name),Ds(b,e.name),Ds(x,e.name),Ds(V,e.name),Ds(L,e.name);const N=new Ei({uid:k,auth:e,email:E,emailVerified:K,displayName:_,isAnonymous:q,photoURL:D,phoneNumber:A,tenantId:b,stsTokenManager:S,createdAt:V,lastLoginAt:L});return Y&&Array.isArray(Y)&&(N.providerData=Y.map(U=>Object.assign({},U))),x&&(N._redirectEventId=x),N}static async _fromIdTokenResponse(e,n,r=!1){const a=new cl;a.updateFromServerResponse(n);const l=new Ei({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await id(l),l}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?M1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new cl;f.updateFromIdToken(r);const d=new Ei({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new py(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}const Ww=new Map;function Ir(t){Lr(t instanceof Function,"Expected a class definition");let e=Ww.get(t);return e?(Lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ww.set(t,e),e)}class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O1.type="NONE";const Zw=O1;function Bf(t,e,n){return`firebase:${t}:${e}:${n}`}class hl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Bf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Bf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nd(this.auth,{idToken:e}).catch(()=>{});return n?Ei._fromGetAccountInfoResponse(this.auth,n,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hl(Ir(Zw),e,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ir(Zw);const c=Bf(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const E=await nd(e,{idToken:y}).catch(()=>{});if(!E)break;_=await Ei._fromGetAccountInfoResponse(e,E,y)}else _=Ei._fromJSON(e,y);p!==l&&(f=_),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new hl(l,e,r):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new hl(l,e,r))}}function Jw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j1(e))return"Blackberry";if(B1(e))return"Webos";if(k1(e))return"Safari";if((e.includes("chrome/")||P1(e))&&!e.includes("edge/"))return"Chrome";if(U1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function V1(t=dn()){return/firefox\//i.test(t)}function k1(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P1(t=dn()){return/crios\//i.test(t)}function L1(t=dn()){return/iemobile/i.test(t)}function U1(t=dn()){return/android/i.test(t)}function j1(t=dn()){return/blackberry/i.test(t)}function B1(t=dn()){return/webos/i.test(t)}function Ev(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sV(t=dn()){var e;return Ev(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aV(){return bM()&&document.documentMode===10}function z1(t=dn()){return Ev(t)||U1(t)||B1(t)||j1(t)||/windows phone/i.test(t)||L1(t)}function F1(t,e=[]){let n;switch(t){case"Browser":n=Jw(dn());break;case"Worker":n=`${Jw(dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}class oV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((c,f)=>{try{const d=e(l);c(d)}catch(d){f(d)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function lV(t,e={}){return Cl(t,"GET","/v2/passwordPolicy",_v(t,e))}const uV=6;class cV{constructor(e){var n,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:uV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,a,l,c,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class hV{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eb(this),this.idTokenSubscription=new eb(this),this.beforeStateQueue=new oV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nd(this,{idToken:e}),r=await Ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===f)&&d?.user&&(a=d.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(za(this));const n=e?ot(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(za(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(za(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lV(this),n=new cV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new to("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,a);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&zO(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Vd(t){return ot(t)}class eb{constructor(e){this.auth=e,this.observer=null,this.addObserver=DM(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fV(t){wv=t}function dV(t){return wv.loadJS(t)}function mV(){return wv.gapiScript}function pV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function gV(t,e){const n=no(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if($a(l,e??{}))return a;Qi(a,"already-initialized")}return n.initialize({options:e})}function yV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function vV(t,e,n){const r=Vd(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=H1(e),{host:c,port:f}=_V(e),d=f===null?"":`:${f}`,p={url:`${l}//${c}${d}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be($a(p,r.config.emulator)&&$a(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Zs(c)?(hv(`${l}//${c}${d}`),fv("Auth",!0)):TV()}function H1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _V(t){const e=H1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:tb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:tb(c)}}}function tb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class q1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,n){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function fl(t,e){return QO(t,"POST","/v1/accounts:signInWithIdp",_v(t,e))}const EV="http://localhost";class Ya extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=n,l=pv(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ya(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return fl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fl(e,n)}buildRequest(){const e={requestUri:EV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cc(n)}return e}}class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ic extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vs extends Ic{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";class Cr extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ya._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";class ks extends Ic{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";class Ps extends Ic{constructor(){super("twitter.com")}static credential(e,n){return Ya._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";class pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const l=await Ei._fromIdTokenResponse(e,r,a),c=nb(r);return new pl({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=nb(r);return new pl({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function nb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class rd extends Ri{constructor(e,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new rd(e,n,r,a)}}function G1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(t,l,e,r):l})}async function wV(t,e,n=!1){const r=await oc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pl._forOperation(t,"link",r)}async function bV(t,e,n=!1){const{auth:r}=t;if(li(r.app))return Promise.reject(za(r));const a="reauthenticate";try{const l=await oc(t,G1(r,a,e,t),n);be(l.idToken,r,"internal-error");const c=Tv(l.idToken);be(c,r,"internal-error");const{sub:f}=c;return be(t.uid===f,r,"user-mismatch"),pl._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Qi(r,"user-mismatch"),l}}async function SV(t,e,n=!1){if(li(t.app))return Promise.reject(za(t));const r="signIn",a=await G1(t,r,e),l=await pl._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(l.user),l}function AV(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function RV(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function CV(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function Mg(t){return ot(t).signOut()}const sd="__sak";class K1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xV=1e3,IV=10;class $1 extends K1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);aV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,IV):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$1.type="LOCAL";const DV=$1;class Y1 extends K1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Y1.type="SESSION";const Q1=Y1;function NV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new kd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async p=>p(n.origin,l)),d=await NV(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kd.receivers=[];function Sv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class MV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const p=Sv("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Fi(){return window}function OV(t){Fi().location.href=t}function X1(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function VV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PV(){return X1()?self:null}const W1="firebaseLocalStorageDb",LV=1,ad="firebaseLocalStorage",Z1="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(t,e){return t.transaction([ad],e?"readwrite":"readonly").objectStore(ad)}function UV(){const t=indexedDB.deleteDatabase(W1);return new Dc(t).toPromise()}function gy(){const t=indexedDB.open(W1,LV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ad,{keyPath:Z1})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ad)?e(r):(r.close(),await UV(),e(await gy()))})})}async function ib(t,e,n){const r=Pd(t,!0).put({[Z1]:e,value:n});return new Dc(r).toPromise()}async function jV(t,e){const n=Pd(t,!1).get(e),r=await new Dc(n).toPromise();return r===void 0?null:r.value}function rb(t,e){const n=Pd(t,!0).delete(e);return new Dc(n).toPromise()}const BV=800,zV=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kd._getInstance(PV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VV(),!this.activeServiceWorker)return;this.sender=new MV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gy();return await ib(e,sd,"1"),await rb(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ib(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Pd(a,!1).getAll();return new Dc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const FV=J1;new xc(3e4,6e4);function eR(t,e){return e?Ir(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Av extends q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HV(t){return SV(t.auth,new Av(t),t.bypassAuthState)}function qV(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),bV(n,new Av(t),t.bypassAuthState)}async function GV(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),wV(n,new Av(t),t.bypassAuthState)}class tR{constructor(e,n,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HV;case"linkViaPopup":case"linkViaRedirect":return GV;case"reauthViaPopup":case"reauthViaRedirect":return qV;default:Qi(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const KV=new xc(2e3,1e4);async function $V(t,e,n){if(li(t.app))return Promise.reject(wi(t,"operation-not-supported-in-this-environment"));const r=Vd(t);FO(t,e,bv);const a=eR(r,n);return new La(r,"signInViaPopup",e,a).executeNotNull()}class La extends tR{constructor(e,n,r,a,l){super(e,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KV.get())};e()}}La.currentPopupAction=null;const YV="pendingRedirect",zf=new Map;class QV extends tR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zf.get(this.auth._key());if(!e){try{const r=await XV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zf.set(this.auth._key(),e)}return this.bypassAuthState||zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XV(t,e){const n=JV(e),r=ZV(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function WV(t,e){zf.set(t._key(),e)}function ZV(t){return Ir(t._redirectPersistence)}function JV(t){return Bf(YV,t.config.apiKey,t.name)}async function ek(t,e,n=!1){if(li(t.app))return Promise.reject(za(t));const r=Vd(t),a=eR(r,e),c=await new QV(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const tk=600*1e3;class nk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nR(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tk&&this.cachedEventUids.clear(),this.cachedEventUids.has(sb(e))}saveEventToCache(e){this.cachedEventUids.add(sb(e)),this.lastProcessedEventTime=Date.now()}}function sb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nR(t);default:return!1}}async function rk(t,e={}){return Cl(t,"GET","/v1/projects",e)}const sk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ak=/^https?/;async function ok(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rk(t);for(const n of e)try{if(lk(n))return}catch{}Qi(t,"unauthorized-domain")}function lk(t){const e=my(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!ak.test(n))return!1;if(sk.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const uk=new xc(3e4,6e4);function ab(){const t=Fi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ck(t){return new Promise((e,n)=>{var r,a,l;function c(){ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ab(),n(wi(t,"network-request-failed"))},timeout:uk.get()})}if(!((a=(r=Fi().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Fi().gapi)===null||l===void 0)&&l.load)c();else{const f=pV("iframefcb");return Fi()[f]=()=>{gapi.load?c():n(wi(t,"network-request-failed"))},dV(`${mV()}?onload=${f}`).catch(d=>n(d))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function hk(t){return Ff=Ff||ck(t),Ff}const fk=new xc(5e3,15e3),dk="__/auth/iframe",mk="emulator/auth/iframe",pk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yk(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vv(e,mk):`https://${t.config.authDomain}/${dk}`,r={apiKey:e.apiKey,appName:t.name,v:io},a=gk.get(t.config.apiHost);a&&(r.eid=a);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Cc(r).slice(1)}`}async function vk(t){const e=await hk(t),n=Fi().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:yk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pk,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=wi(t,"network-request-failed"),f=Fi().setTimeout(()=>{l(c)},fk.get());function d(){Fi().clearTimeout(f),a(r)}r.ping(d).then(d,()=>{l(c)})}))}const _k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tk=500,Ek=600,wk="_blank",bk="http://localhost";class ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sk(t,e,n,r=Tk,a=Ek){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},_k),{width:r.toString(),height:a.toString(),top:l,left:c}),p=dn().toLowerCase();n&&(f=P1(p)?wk:n),V1(p)&&(e=e||bk,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(sV(p)&&f!=="_self")return Ak(e||"",f),new ob(null);const _=window.open(e||"",f,y);be(_,t,"popup-blocked");try{_.focus()}catch{}return new ob(_)}function Ak(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Rk="__/auth/handler",Ck="emulator/auth/handler",xk=encodeURIComponent("fac");async function lb(t,e,n,r,a,l){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:io,eventId:a};if(e instanceof bv){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",IM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Ic){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await t._getAppCheckToken(),p=d?`#${xk}=${encodeURIComponent(d)}`:"";return`${Ik(t)}?${Cc(f).slice(1)}${p}`}function Ik({config:t}){return t.emulator?vv(t,Ck):`https://${t.authDomain}/${Rk}`}const Og="webStorageSupport";class Dk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=ek,this._overrideRedirectResult=WV}async _openPopup(e,n,r,a){var l;Lr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await lb(e,n,r,my(),a);return Sk(e,c,Sv())}async _openRedirect(e,n,r,a){await this._originValidation(e);const l=await lb(e,n,r,my(),a);return OV(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Lr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vk(e),r=new nk(e);return n.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Og,{type:Og},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Og];c!==void 0&&n(!!c),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ok(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z1()||k1()||Ev()}}const Nk=Dk;var ub="@firebase/auth",cb="1.10.8";class Mk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ok(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vk(t){bi(new hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},p=new hV(r,a,l,d);return yV(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bi(new hi("auth-internal",e=>{const n=Vd(e.getProvider("auth").getImmediate());return(r=>new Mk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(ub,cb,Ok(t)),Mn(ub,cb,"esm2017")}const kk=300,Pk=v1("authIdTokenMaxAge")||kk;let hb=null;const Lk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Pk)return;const a=n?.token;hb!==a&&(hb=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Uk(t=Od()){const e=no(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gV(t,{popupRedirectResolver:Nk,persistence:[FV,DV,Q1]}),r=v1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Lk(l.toString());RV(n,c,()=>c(n.currentUser)),AV(n,f=>c(f))}}const a=p1("auth");return a&&vV(n,`http://${a}`),n}function jk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const l=wi("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",jk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vk("Browser");var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Bs,iR;(function(){var t;function e(R,S){function N(){}N.prototype=S.prototype,R.D=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(U,B,H){for(var P=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)P[Xe-2]=arguments[Xe];return S.prototype[B].apply(U,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,N){N||(N=0);var U=Array(16);if(typeof S=="string")for(var B=0;16>B;++B)U[B]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(B=0;16>B;++B)U[B]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],B=R.g[2];var H=R.g[3],P=S+(H^N&(B^H))+U[0]+3614090360&4294967295;S=N+(P<<7&4294967295|P>>>25),P=H+(B^S&(N^B))+U[1]+3905402710&4294967295,H=S+(P<<12&4294967295|P>>>20),P=B+(N^H&(S^N))+U[2]+606105819&4294967295,B=H+(P<<17&4294967295|P>>>15),P=N+(S^B&(H^S))+U[3]+3250441966&4294967295,N=B+(P<<22&4294967295|P>>>10),P=S+(H^N&(B^H))+U[4]+4118548399&4294967295,S=N+(P<<7&4294967295|P>>>25),P=H+(B^S&(N^B))+U[5]+1200080426&4294967295,H=S+(P<<12&4294967295|P>>>20),P=B+(N^H&(S^N))+U[6]+2821735955&4294967295,B=H+(P<<17&4294967295|P>>>15),P=N+(S^B&(H^S))+U[7]+4249261313&4294967295,N=B+(P<<22&4294967295|P>>>10),P=S+(H^N&(B^H))+U[8]+1770035416&4294967295,S=N+(P<<7&4294967295|P>>>25),P=H+(B^S&(N^B))+U[9]+2336552879&4294967295,H=S+(P<<12&4294967295|P>>>20),P=B+(N^H&(S^N))+U[10]+4294925233&4294967295,B=H+(P<<17&4294967295|P>>>15),P=N+(S^B&(H^S))+U[11]+2304563134&4294967295,N=B+(P<<22&4294967295|P>>>10),P=S+(H^N&(B^H))+U[12]+1804603682&4294967295,S=N+(P<<7&4294967295|P>>>25),P=H+(B^S&(N^B))+U[13]+4254626195&4294967295,H=S+(P<<12&4294967295|P>>>20),P=B+(N^H&(S^N))+U[14]+2792965006&4294967295,B=H+(P<<17&4294967295|P>>>15),P=N+(S^B&(H^S))+U[15]+1236535329&4294967295,N=B+(P<<22&4294967295|P>>>10),P=S+(B^H&(N^B))+U[1]+4129170786&4294967295,S=N+(P<<5&4294967295|P>>>27),P=H+(N^B&(S^N))+U[6]+3225465664&4294967295,H=S+(P<<9&4294967295|P>>>23),P=B+(S^N&(H^S))+U[11]+643717713&4294967295,B=H+(P<<14&4294967295|P>>>18),P=N+(H^S&(B^H))+U[0]+3921069994&4294967295,N=B+(P<<20&4294967295|P>>>12),P=S+(B^H&(N^B))+U[5]+3593408605&4294967295,S=N+(P<<5&4294967295|P>>>27),P=H+(N^B&(S^N))+U[10]+38016083&4294967295,H=S+(P<<9&4294967295|P>>>23),P=B+(S^N&(H^S))+U[15]+3634488961&4294967295,B=H+(P<<14&4294967295|P>>>18),P=N+(H^S&(B^H))+U[4]+3889429448&4294967295,N=B+(P<<20&4294967295|P>>>12),P=S+(B^H&(N^B))+U[9]+568446438&4294967295,S=N+(P<<5&4294967295|P>>>27),P=H+(N^B&(S^N))+U[14]+3275163606&4294967295,H=S+(P<<9&4294967295|P>>>23),P=B+(S^N&(H^S))+U[3]+4107603335&4294967295,B=H+(P<<14&4294967295|P>>>18),P=N+(H^S&(B^H))+U[8]+1163531501&4294967295,N=B+(P<<20&4294967295|P>>>12),P=S+(B^H&(N^B))+U[13]+2850285829&4294967295,S=N+(P<<5&4294967295|P>>>27),P=H+(N^B&(S^N))+U[2]+4243563512&4294967295,H=S+(P<<9&4294967295|P>>>23),P=B+(S^N&(H^S))+U[7]+1735328473&4294967295,B=H+(P<<14&4294967295|P>>>18),P=N+(H^S&(B^H))+U[12]+2368359562&4294967295,N=B+(P<<20&4294967295|P>>>12),P=S+(N^B^H)+U[5]+4294588738&4294967295,S=N+(P<<4&4294967295|P>>>28),P=H+(S^N^B)+U[8]+2272392833&4294967295,H=S+(P<<11&4294967295|P>>>21),P=B+(H^S^N)+U[11]+1839030562&4294967295,B=H+(P<<16&4294967295|P>>>16),P=N+(B^H^S)+U[14]+4259657740&4294967295,N=B+(P<<23&4294967295|P>>>9),P=S+(N^B^H)+U[1]+2763975236&4294967295,S=N+(P<<4&4294967295|P>>>28),P=H+(S^N^B)+U[4]+1272893353&4294967295,H=S+(P<<11&4294967295|P>>>21),P=B+(H^S^N)+U[7]+4139469664&4294967295,B=H+(P<<16&4294967295|P>>>16),P=N+(B^H^S)+U[10]+3200236656&4294967295,N=B+(P<<23&4294967295|P>>>9),P=S+(N^B^H)+U[13]+681279174&4294967295,S=N+(P<<4&4294967295|P>>>28),P=H+(S^N^B)+U[0]+3936430074&4294967295,H=S+(P<<11&4294967295|P>>>21),P=B+(H^S^N)+U[3]+3572445317&4294967295,B=H+(P<<16&4294967295|P>>>16),P=N+(B^H^S)+U[6]+76029189&4294967295,N=B+(P<<23&4294967295|P>>>9),P=S+(N^B^H)+U[9]+3654602809&4294967295,S=N+(P<<4&4294967295|P>>>28),P=H+(S^N^B)+U[12]+3873151461&4294967295,H=S+(P<<11&4294967295|P>>>21),P=B+(H^S^N)+U[15]+530742520&4294967295,B=H+(P<<16&4294967295|P>>>16),P=N+(B^H^S)+U[2]+3299628645&4294967295,N=B+(P<<23&4294967295|P>>>9),P=S+(B^(N|~H))+U[0]+4096336452&4294967295,S=N+(P<<6&4294967295|P>>>26),P=H+(N^(S|~B))+U[7]+1126891415&4294967295,H=S+(P<<10&4294967295|P>>>22),P=B+(S^(H|~N))+U[14]+2878612391&4294967295,B=H+(P<<15&4294967295|P>>>17),P=N+(H^(B|~S))+U[5]+4237533241&4294967295,N=B+(P<<21&4294967295|P>>>11),P=S+(B^(N|~H))+U[12]+1700485571&4294967295,S=N+(P<<6&4294967295|P>>>26),P=H+(N^(S|~B))+U[3]+2399980690&4294967295,H=S+(P<<10&4294967295|P>>>22),P=B+(S^(H|~N))+U[10]+4293915773&4294967295,B=H+(P<<15&4294967295|P>>>17),P=N+(H^(B|~S))+U[1]+2240044497&4294967295,N=B+(P<<21&4294967295|P>>>11),P=S+(B^(N|~H))+U[8]+1873313359&4294967295,S=N+(P<<6&4294967295|P>>>26),P=H+(N^(S|~B))+U[15]+4264355552&4294967295,H=S+(P<<10&4294967295|P>>>22),P=B+(S^(H|~N))+U[6]+2734768916&4294967295,B=H+(P<<15&4294967295|P>>>17),P=N+(H^(B|~S))+U[13]+1309151649&4294967295,N=B+(P<<21&4294967295|P>>>11),P=S+(B^(N|~H))+U[4]+4149444226&4294967295,S=N+(P<<6&4294967295|P>>>26),P=H+(N^(S|~B))+U[11]+3174756917&4294967295,H=S+(P<<10&4294967295|P>>>22),P=B+(S^(H|~N))+U[2]+718787259&4294967295,B=H+(P<<15&4294967295|P>>>17),P=N+(H^(B|~S))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(B+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+H&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var N=S-this.blockSize,U=this.B,B=this.h,H=0;H<S;){if(B==0)for(;H<=N;)a(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<S;)if(U[B++]=R.charCodeAt(H++),B==this.blockSize){a(this,U),B=0;break}}else for(;H<S;)if(U[B++]=R[H++],B==this.blockSize){a(this,U),B=0;break}}this.h=B,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var N=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=N&255,N/=256;for(this.u(R),R=Array(16),S=N=0;4>S;++S)for(var U=0;32>U;U+=8)R[N++]=this.g[S]>>>U&255;return R};function l(R,S){var N=f;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function c(R,S){this.h=S;for(var N=[],U=!0,B=R.length-1;0<=B;B--){var H=R[B]|0;U&&H==S||(N[B]=H,U=!1)}this.g=N}var f={};function d(R){return-128<=R&&128>R?l(R,function(S){return new c([S|0],0>S?-1:0)}):new c([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return x(p(-R));for(var S=[],N=1,U=0;R>=N;U++)S[U]=R/N|0,N*=4294967296;return new c(S,0)}function y(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return x(y(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(S,8)),U=_,B=0;B<R.length;B+=8){var H=Math.min(8,R.length-B),P=parseInt(R.substring(B,B+H),S);8>H?(H=p(Math.pow(S,H)),U=U.j(H).add(p(P))):(U=U.j(N),U=U.add(p(P)))}return U}var _=d(0),E=d(1),A=d(16777216);t=c.prototype,t.m=function(){if(b(this))return-x(this).m();for(var R=0,S=1,N=0;N<this.g.length;N++){var U=this.i(N);R+=(0<=U?U:4294967296+U)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(b(this))return"-"+x(this).toString(R);for(var S=p(Math.pow(R,6)),N=this,U="";;){var B=K(N,S).g;N=V(N,B.j(S));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=B,D(N))return H+U;for(;6>H.length;)H="0"+H;U=H+U}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=V(this,R),b(R)?-1:D(R)?0:1};function x(R){for(var S=R.g.length,N=[],U=0;U<S;U++)N[U]=~R.g[U];return new c(N,~R.h).add(E)}t.abs=function(){return b(this)?x(this):this},t.add=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0,B=0;B<=S;B++){var H=U+(this.i(B)&65535)+(R.i(B)&65535),P=(H>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);U=P>>>16,H&=65535,P&=65535,N[B]=P<<16|H}return new c(N,N[N.length-1]&-2147483648?-1:0)};function V(R,S){return R.add(x(S))}t.j=function(R){if(D(this)||D(R))return _;if(b(this))return b(R)?x(this).j(x(R)):x(x(this).j(R));if(b(R))return x(this.j(x(R)));if(0>this.l(A)&&0>R.l(A))return p(this.m()*R.m());for(var S=this.g.length+R.g.length,N=[],U=0;U<2*S;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<R.g.length;B++){var H=this.i(U)>>>16,P=this.i(U)&65535,Xe=R.i(B)>>>16,ht=R.i(B)&65535;N[2*U+2*B]+=P*ht,L(N,2*U+2*B),N[2*U+2*B+1]+=H*ht,L(N,2*U+2*B+1),N[2*U+2*B+1]+=P*Xe,L(N,2*U+2*B+1),N[2*U+2*B+2]+=H*Xe,L(N,2*U+2*B+2)}for(U=0;U<S;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=S;U<2*S;U++)N[U]=0;return new c(N,0)};function L(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function k(R,S){this.g=R,this.h=S}function K(R,S){if(D(S))throw Error("division by zero");if(D(R))return new k(_,_);if(b(R))return S=K(x(R),S),new k(x(S.g),x(S.h));if(b(S))return S=K(R,x(S)),new k(x(S.g),S.h);if(30<R.g.length){if(b(R)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var N=E,U=S;0>=U.l(R);)N=q(N),U=q(U);var B=Y(N,1),H=Y(U,1);for(U=Y(U,2),N=Y(N,2);!D(U);){var P=H.add(U);0>=P.l(R)&&(B=B.add(N),H=P),U=Y(U,1),N=Y(N,1)}return S=V(R,B.j(S)),new k(B,S)}for(B=_;0<=R.l(S);){for(N=Math.max(1,Math.floor(R.m()/S.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),H=p(N),P=H.j(S);b(P)||0<P.l(R);)N-=U,H=p(N),P=H.j(S);D(H)&&(H=E),B=B.add(H),R=V(R,P)}return new k(B,R)}t.A=function(R){return K(this,R).h},t.and=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)&R.i(U);return new c(N,this.h&R.h)},t.or=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)|R.i(U);return new c(N,this.h|R.h)},t.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)^R.i(U);return new c(N,this.h^R.h)};function q(R){for(var S=R.g.length+1,N=[],U=0;U<S;U++)N[U]=R.i(U)<<1|R.i(U-1)>>>31;return new c(N,R.h)}function Y(R,S){var N=S>>5;S%=32;for(var U=R.g.length-N,B=[],H=0;H<U;H++)B[H]=0<S?R.i(H+N)>>>S|R.i(H+N+1)<<32-S:R.i(H+N);return new c(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Bs=c}).apply(typeof fb<"u"?fb:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rR,zu,sR,Hf,yy,aR,oR,lR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,w){return h==Array.prototype||h==Object.prototype||(h[v]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function a(h,v){if(v)e:{var w=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var $=h[I];if(!($ in w))break e;w=w[$]}h=h[h.length-1],I=w[h],v=v(I),v!=I&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var w=0,I=!1,$={next:function(){if(!I&&w<h.length){var J=w++;return{value:v(J,h[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,w){return w})}});var c=c||{},f=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,w){return h.call.apply(h.bind,arguments)}function _(h,v,w){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),h.apply(v,$)}}return function(){return h.apply(v,arguments)}}function E(h,v,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,E.apply(null,arguments)}function A(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function D(h,v){function w(){}w.prototype=v.prototype,h.aa=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(I,$,J){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return v.prototype[$].apply(I,ce)}}function b(h){const v=h.length;if(0<v){const w=Array(v);for(let I=0;I<v;I++)w[I]=h[I];return w}return[]}function x(h,v){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(d(I)){const $=h.length||0,J=I.length||0;h.length=$+J;for(let ce=0;ce<J;ce++)h[$+ce]=I[ce]}else h.push(I)}}class V{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){return/^[\s\xa0]*$/.test(h)}function k(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function K(h){return K[" "](h),h}K[" "]=function(){};var q=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function Y(h,v,w){for(const I in h)v.call(w,h[I],I,h)}function R(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function S(h){const v={};for(const w in h)v[w]=h[w];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,v){let w,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(w in I)h[w]=I[w];for(let J=0;J<N.length;J++)w=N[J],Object.prototype.hasOwnProperty.call(I,w)&&(h[w]=I[w])}}function B(h){var v=1;h=h.split(":");const w=[];for(;0<v&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function H(h){f.setTimeout(()=>{throw h},0)}function P(){var h=Ie;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Xe{constructor(){this.h=this.g=null}add(v,w){const I=ht.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var ht=new V(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,fe=!1,Ie=new Xe,De=()=>{const h=f.Promise.resolve(void 0);oe=()=>{h.then(F)}};var F=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(w){H(w)}var v=ht;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}fe=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ue=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};f.addEventListener("test",w,v),f.removeEventListener("test",w,v)}catch{}return h})();function ge(h,v){if(le.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(q){e:{try{K(v.nodeName);var $=!0;break e}catch{}$=!1}$||(v=null)}}else w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ee[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ge.aa.h.call(this)}}D(ge,le);var Ee={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function ft(h,v,w,I,$){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=$,this.key=++Gt,this.da=this.fa=!1}function Ci(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ji(h){this.src=h,this.g={},this.h=0}Ji.prototype.add=function(h,v,w,I,$){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ce=lo(h,v,I,$);return-1<ce?(v=h[ce],w||(v.fa=!1)):(v=new ft(v,this.src,J,!!I,$),v.fa=w,h.push(v)),v};function na(h,v){var w=v.type;if(w in h.g){var I=h.g[w],$=Array.prototype.indexOf.call(I,v,void 0),J;(J=0<=$)&&Array.prototype.splice.call(I,$,1),J&&(Ci(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function lo(h,v,w,I){for(var $=0;$<h.length;++$){var J=h[$];if(!J.da&&J.listener==v&&J.capture==!!w&&J.ha==I)return $}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),ia={};function uo(h,v,w,I,$){if(Array.isArray(v)){for(var J=0;J<v.length;J++)uo(h,v[J],w,I,$);return null}return w=Kc(w),h&&h[Oe]?h.K(v,w,p(I)?!!I.capture:!1,$):mm(h,v,w,!1,I,$)}function mm(h,v,w,I,$,J){if(!v)throw Error("Invalid event type");var ce=p($)?!!$.capture:!!$,Ke=Vl(h);if(Ke||(h[fi]=Ke=new Ji(h)),w=Ke.add(v,w,I,ce,J),w.proxy)return w;if(I=Gc(),w.proxy=I,I.src=h,I.listener=w,h.addEventListener)ue||($=ce),$===void 0&&($=!1),h.addEventListener(v.toString(),I,$);else if(h.attachEvent)h.attachEvent(ho(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Gc(){function h(w){return v.call(h.src,h.listener,w)}const v=pm;return h}function co(h,v,w,I,$){if(Array.isArray(v))for(var J=0;J<v.length;J++)co(h,v[J],w,I,$);else I=p(I)?!!I.capture:!!I,w=Kc(w),h&&h[Oe]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],w=lo(J,w,I,$),-1<w&&(Ci(J[w]),Array.prototype.splice.call(J,w,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Vl(h))&&(v=h.g[v.toString()],h=-1,v&&(h=lo(v,w,I,$)),(w=-1<h?v[h]:null)&&ra(w))}function ra(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Oe])na(v.i,h);else{var w=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(w,I,h.capture):v.detachEvent?v.detachEvent(ho(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Vl(v))?(na(w,h),w.h==0&&(w.src=null,v[fi]=null)):Ci(h)}}}function ho(h){return h in ia?ia[h]:ia[h]="on"+h}function pm(h,v){if(h.da)h=!0;else{v=new ge(v,this);var w=h.listener,I=h.ha||h.src;h.fa&&ra(h),h=w.call(I,v)}return h}function Vl(h){return h=h[fi],h instanceof Ji?h:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kc(h){return typeof h=="function"?h:(h[Kt]||(h[Kt]=function(v){return h.handleEvent(v)}),h[Kt])}function Pt(){ie.call(this),this.i=new Ji(this),this.M=this,this.F=null}D(Pt,ie),Pt.prototype[Oe]=!0,Pt.prototype.removeEventListener=function(h,v,w,I){co(this,h,v,w,I)};function jt(h,v){var w,I=h.F;if(I)for(w=[];I;I=I.F)w.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new le(v,h);else if(v instanceof le)v.target=v.target||h;else{var $=v;v=new le(I,h),U(v,$)}if($=!0,w)for(var J=w.length-1;0<=J;J--){var ce=v.g=w[J];$=er(ce,I,!0,v)&&$}if(ce=v.g=h,$=er(ce,I,!0,v)&&$,$=er(ce,I,!1,v)&&$,w)for(J=0;J<w.length;J++)ce=v.g=w[J],$=er(ce,I,!1,v)&&$}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var w=h.g[v],I=0;I<w.length;I++)Ci(w[I]);delete h.g[v],h.h--}}this.F=null},Pt.prototype.K=function(h,v,w,I){return this.i.add(String(h),v,!1,w,I)},Pt.prototype.L=function(h,v,w,I){return this.i.add(String(h),v,!0,w,I)};function er(h,v,w,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,J=0;J<v.length;++J){var ce=v[J];if(ce&&!ce.da&&ce.capture==w){var Ke=ce.listener,xt=ce.ha||ce.src;ce.fa&&na(h.i,ce),$=Ke.call(xt,I)!==!1&&$}}return $&&!I.defaultPrevented}function $c(h,v,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:f.setTimeout(h,v||0)}function kl(h){h.g=$c(()=>{h.g=null,h.i&&(h.i=!1,kl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class gm extends ie{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(h){ie.call(this),this.h=h,this.g={}}D(sa,ie);var Fr=[];function rn(h){Y(h.g,function(v,w){this.g.hasOwnProperty(w)&&ra(v)},h),h.g={}}sa.prototype.N=function(){sa.aa.N.call(this),rn(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=f.JSON.stringify,mn=f.JSON.parse,ym=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Pl(){}Pl.prototype.h=null;function Yc(h){return h.h||(h.h=h.i())}function aa(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){le.call(this,"d")}D(Hr,le);function di(){le.call(this,"c")}D(di,le);var Qn={},qr=null;function fo(){return qr=qr||new Pt}Qn.La="serverreachability";function Ll(h){le.call(this,Qn.La,h)}D(Ll,le);function tr(h){const v=fo();jt(v,new Ll(v))}Qn.STAT_EVENT="statevent";function Gr(h,v){le.call(this,Qn.STAT_EVENT,h),this.stat=v}D(Gr,le);function $t(h){const v=fo();jt(v,new Gr(v,h))}Qn.Ma="timingevent";function Ul(h,v){le.call(this,Qn.Ma,h),this.size=v}D(Ul,le);function Kr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},v)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function jl(h,v,w,I,$,J){h.info(function(){if(h.g)if(J)for(var ce="",Ke=J.split("&"),xt=0;xt<Ke.length;xt++){var Ne=Ke[xt].split("=");if(1<Ne.length){var zt=Ne[0];Ne=Ne[1];var Ft=zt.split("_");ce=2<=Ft.length&&Ft[1]=="type"?ce+(zt+"="+Ne+"&"):ce+(zt+"=redacted&")}}else ce=null;else ce=J;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+v+`
`+w+`
`+ce})}function Bl(h,v,w,I,$,J,ce){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+v+`
`+w+`
`+J+" "+ce})}function nr(h,v,w,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ii(h,w)+(I?" "+I:"")})}function Qc(h,v){h.info(function(){return"TIMEOUT: "+v})}$r.prototype.info=function(){};function Ii(h,v){if(!h.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var I=w[h];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ce=1;ce<$.length;ce++)$[ce]=""}}}}return Yn(w)}catch{return v}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function Yr(){}D(Yr,Pl),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},Di=new Yr;function Ni(h,v,w,I){this.j=h,this.i=v,this.l=w,this.R=I||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var zl={},ir={};function oa(h,v,w){h.L=1,h.v=ca(gt(v)),h.m=w,h.P=!0,rr(h,null)}function rr(h,v){h.F=Date.now(),mi(h),h.A=gt(h.v);var w=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),or(w.i,"t",I),h.C=0,w=h.j.J,h.h=new Xc,h.g=fh(h.j,w?v:null,!h.m),0<h.O&&(h.M=new gm(E(h.Y,h,h.g),h.O)),v=h.U,w=h.g,I=h.ca;var $="readystatechange";Array.isArray($)||($&&(Fr[0]=$.toString()),$=Fr);for(var J=0;J<$.length;J++){var ce=uo(w,$[J],I||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),tr(),jl(h.i,h.u,h.A,h.l,h.R,h.m)}Ni.prototype.ca=function(h){h=h.target;const v=this.M;v&&yn(h)==3?v.j():this.Y(h)},Ni.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=yn(this.g);var v=this.g.Ba();const os=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||Ft!=4||v==7||(v==8||0>=os?tr(3):tr(2)),mo(this);var w=this.g.Z();this.X=w;t:if(sr(this)){var I=da(this.g);h="";var $=I.length,J=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Qr(this);var ce="";break t}this.h.i=new f.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,h+=this.h.i.decode(I[v],{stream:!(J&&v==$-1)});I.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=w==200,Bl(this.i,this.u,this.A,this.l,this.R,Ft,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,xt=this.g;if((Ke=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Ke)){var Ne=Ke;break t}}Ne=null}if(w=Ne)nr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,w);else{this.o=!1,this.s=3,$t(12),pn(this),Qr(this);break e}}if(this.P){w=!0;let bn;for(;!this.J&&this.C<ce.length;)if(bn=la(this,ce),bn==ir){Ft==4&&(this.s=4,$t(14),w=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==zl){this.s=4,$t(15),nr(this.i,this.l,ce,"[Invalid Chunk]"),w=!1;break}else nr(this.i,this.l,bn,null),Mi(this,bn);if(sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||ce.length!=0||this.h.h||(this.s=1,$t(16),w=!1),this.o=this.o&&w,!w)nr(this.i,this.l,ce,"[Invalid Chunked Response]"),pn(this),Qr(this);else if(0<ce.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Zl(zt),zt.M=!0,$t(11))}}else nr(this.i,this.l,ce,null),Mi(this,ce);Ft==4&&pn(this),this.o&&!this.J&&(Ft==4?uh(this.j,this):(this.o=!1,mi(this)))}else ih(this.g),w==400&&0<ce.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),pn(this),Qr(this)}}}catch{}finally{}};function sr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function la(h,v){var w=h.C,I=v.indexOf(`
`,w);return I==-1?ir:(w=Number(v.substring(w,I)),isNaN(w)?zl:(I+=1,I+w>v.length?ir:(v=v.slice(I,I+w),h.C=I+w,v)))}Ni.prototype.cancel=function(){this.J=!0,pn(this)};function mi(h){h.S=Date.now()+h.I,bt(h,h.I)}function bt(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Kr(E(h.ba,h),v)}function mo(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Ni.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Qc(this.i,this.A),this.L!=2&&(tr(),$t(17)),pn(this),this.s=2,Qr(this)):bt(this,this.S-h)};function Qr(h){h.j.G==0||h.J||uh(h.j,h)}function pn(h){mo(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,rn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Mi(h,v){try{var w=h.j;if(w.G!=0&&(w.g==h||Xr(w.h,h))){if(!h.K&&Xr(w.h,h)&&w.G==3){try{var I=w.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)ss(w),rs(w);else break e;Wl(w),$t(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=Kr(E(w.Za,w),6e3));if(1>=Wc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ur(w,11)}else if((h.K||w.g==h)&&ss(w),!L(v))for($=w.Da.g.parse(v),v=0;v<$.length;v++){let Ne=$[v];if(w.T=Ne[0],Ne=Ne[1],w.G==2)if(Ne[0]=="c"){w.K=Ne[1],w.ia=Ne[2];const zt=Ne[3];zt!=null&&(w.la=zt,w.j.info("VER="+w.la));const Ft=Ne[4];Ft!=null&&(w.Aa=Ft,w.j.info("SVER="+w.Aa));const os=Ne[5];os!=null&&typeof os=="number"&&0<os&&(I=1.5*os,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const bn=h.g;if(bn){const ga=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var J=I.h;J.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Wr(J,J.h),J.h=null))}if(I.D){const cr=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;cr&&(I.ya=cr,Fe(I.I,I.D,cr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ce=h;if(I.qa=hh(I,I.J?I.ia:null,I.W),ce.K){Xn(I.h,ce);var Ke=ce,xt=I.L;xt&&(Ke.I=xt),Ke.B&&(mo(Ke),mi(Ke)),I.g=ce}else oh(I);0<w.i.length&&wo(w)}else Ne[0]!="stop"&&Ne[0]!="close"||ur(w,7);else w.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ur(w,7):Ql(w):Ne[0]!="noop"&&w.l&&w.l.ta(Ne),w.v=0)}}tr(4)}catch{}}var vm=class{constructor(h,v){this.g=h,this.map=v}};function Fl(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wc(h){return h.h?1:h.g?h.g.size:0}function Xr(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Wr(h,v){h.g?h.g.add(v):h.h=v}function Xn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Fl.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.D);return v}return b(h.i)}function Zc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],w=h.length,I=0;I<w;I++)v.push(h[I]);return v}v=[],w=0;for(I in h)v[w++]=h[I];return v}function _m(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var w=0;w<h;w++)v.push(w);return v}v=[],w=0;for(const I in h)v[w++]=I;return v}}}function po(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var w=_m(h),I=Zc(h),$=I.length,J=0;J<$;J++)v.call(void 0,I[J],w&&w[J],h)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function go(h,v){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var I=h[w].indexOf("="),$=null;if(0<=I){var J=h[w].substring(0,I);$=h[w].substring(I+1)}else J=h[w];v(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ar(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ar){this.h=h.h,Zr(this,h.j),this.o=h.o,this.g=h.g,ua(this,h.s),this.l=h.l;var v=h.i,w=new Oi;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),yo(this,w),this.m=h.m}else h&&(v=String(h).match(ql))?(this.h=!1,Zr(this,v[1]||"",!0),this.o=Jr(v[2]||""),this.g=Jr(v[3]||"",!0),ua(this,v[4]),this.l=Jr(v[5]||"",!0),yo(this,v[6]||"",!0),this.m=Jr(v[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}ar.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Wn(v,Gl,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Wn(v,Gl,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Wn(w,w.charAt(0)=="/"?Kl:Jc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Wn(w,wm)),h.join("")};function gt(h){return new ar(h)}function Zr(h,v,w){h.j=w?Jr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ua(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function yo(h,v,w){v instanceof Oi?(h.i=v,eh(h.i,h.h)):(w||(v=Wn(v,Em)),h.i=new Oi(v,h.h))}function Fe(h,v,w){h.i.set(v,w)}function ca(h){return Fe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Jr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Wn(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Tm),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,Jc=/[#\?:]/g,Kl=/[#\?]/g,Em=/[#\?@]/g,wm=/#/g;function Oi(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Bt(h){h.g||(h.g=new Map,h.h=0,h.i&&go(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=Oi.prototype,t.add=function(h,v){Bt(this),this.i=null,h=Vn(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function vo(h,v){Bt(h),v=Vn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function _o(h,v){return Bt(h),v=Vn(h,v),h.g.has(v)}t.forEach=function(h,v){Bt(this),this.g.forEach(function(w,I){w.forEach(function($){h.call(v,$,I,this)},this)},this)},t.na=function(){Bt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let I=0;I<v.length;I++){const $=h[I];for(let J=0;J<$.length;J++)w.push(v[I])}return w},t.V=function(h){Bt(this);let v=[];if(typeof h=="string")_o(this,h)&&(v=v.concat(this.g.get(Vn(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)v=v.concat(h[w])}return v},t.set=function(h,v){return Bt(this),this.i=null,h=Vn(this,h),_o(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function or(h,v,w){vo(h,v),0<w.length&&(h.i=null,h.g.set(Vn(h,v),b(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var I=v[w];const J=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var $=J;ce[I]!==""&&($+="="+encodeURIComponent(String(ce[I]))),h.push($)}}return this.i=h.join("&")};function Vn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function eh(h,v){v&&!h.j&&(Bt(h),h.i=null,h.g.forEach(function(w,I){var $=I.toLowerCase();I!=$&&(vo(this,I),or(this,$,w))},h)),h.j=v}function $l(h,v){const w=new $r;if(f.Image){const I=new Image;I.onload=A(wn,w,"TestLoadImage: loaded",!0,v,I),I.onerror=A(wn,w,"TestLoadImage: error",!1,v,I),I.onabort=A(wn,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=A(wn,w,"TestLoadImage: timeout",!1,v,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function th(h,v){const w=new $r,I=new AbortController,$=setTimeout(()=>{I.abort(),wn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(J=>{clearTimeout($),J.ok?wn(w,"TestPingServer: ok",!0,v):wn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),wn(w,"TestPingServer: error",!1,v)})}function wn(h,v,w,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(w)}catch{}}function pi(){this.g=new ym}function Yl(h,v,w){const I=w||"";try{po(h,function($,J){let ce=$;p($)&&(ce=Yn($)),v.push(I+J+"="+encodeURIComponent(ce))})}catch($){throw v.push(I+"type="+encodeURIComponent("_badmap")),$}}function Vi(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Vi,Pl),Vi.prototype.g=function(){return new kn(this.l,this.j)},Vi.prototype.i=(function(h){return function(){return h}})({});function kn(h,v){Pt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(kn,Pt),t=kn.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,es(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||f).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;To(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function To(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ki(this):es(this),this.readyState==3&&To(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ki(this))},t.Qa=function(h){this.g&&(this.response=h,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(h){h.readyState=4,h.l=null,h.j=null,h.v=null,es(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function es(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ha(h){let v="";return Y(h,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function ts(h,v,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=ha(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):Fe(h,v,w))}function nt(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(nt,Pt);var sn=/^https?$/i,lr=["POST","PUT"];t=nt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?Yc(this.o):Yc(Di),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){fa(this,J);return}if(h=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)w.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())w.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),$=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(lr,v,void 0))||I||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ce]of w)this.g.setRequestHeader(J,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eo(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){fa(this,J)}};function fa(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,ns(h),is(h)}function ns(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,jt(this,"complete"),jt(this,"abort"),is(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nh(this):this.bb())},t.bb=function(){nh(this)};function nh(h){if(h.h&&typeof c<"u"&&(!h.v[1]||yn(h)!=4||h.Z()!=2)){if(h.u&&yn(h)==4)$c(h.Ea,0,h);else if(jt(h,"readystatechange"),yn(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var I;if(I=ce===0){var $=String(h.D).match(ql)[1]||null;!$&&f.self&&f.self.location&&($=f.self.location.protocol.slice(0,-1)),I=!sn.test($?$.toLowerCase():"")}w=I}if(w)jt(h,"complete"),jt(h,"success");else{h.m=6;try{var J=2<yn(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",ns(h)}}finally{is(h)}}}}function is(h,v){if(h.g){Eo(h);const w=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||jt(h,"ready");try{w.onreadystatechange=I}catch{}}}function Eo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function yn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),mn(v)}};function da(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ih(h){const v={};h=(h.g&&2<=yn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(L(h[I]))continue;var w=B(h[I]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=v[$]||[];v[$]=J,J.push(w)}R(v,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function rh(h){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,h),this.cb=ma("retryDelaySeedMs",1e4,h),this.Wa=ma("forwardChannelMaxRetries",2,h),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Fl(h&&h.concurrentRequestLimit),this.Da=new pi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rh.prototype,t.la=8,t.G=1,t.connect=function(h,v,w,I){$t(0),this.W=h,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=hh(this,null,this.W),wo(this)};function Ql(h){if(sh(h),h.G==3){var v=h.U++,w=gt(h.I);if(Fe(w,"SID",h.K),Fe(w,"RID",v),Fe(w,"TYPE","terminate"),pa(h,w),v=new Ni(h,h.j,v),v.L=2,v.v=ca(gt(w)),w=!1,f.navigator&&f.navigator.sendBeacon)try{w=f.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&f.Image&&(new Image().src=v.v,w=!0),w||(v.g=fh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),mi(v)}Jl(h)}function rs(h){h.g&&(Zl(h),h.g.cancel(),h.g=null)}function sh(h){rs(h),h.u&&(f.clearTimeout(h.u),h.u=null),ss(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function wo(h){if(!Hl(h.h)&&!h.s){h.s=!0;var v=h.Ga;oe||De(),fe||(oe(),fe=!0),Ie.add(v,h),h.B=0}}function bm(h,v){return Wc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Kr(E(h.Ga,h,v),ch(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new Ni(this,this.j,h);let J=this.o;if(this.S&&(J?(J=S(J),U(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Xl(this,$,v),w=gt(this.I),Fe(w,"RID",h),Fe(w,"CVER",22),this.D&&Fe(w,"X-HTTP-Session-Id",this.D),pa(this,w),J&&(this.O?v="headers="+encodeURIComponent(String(ha(J)))+"&"+v:this.m&&ts(w,this.m,J)),Wr(this.h,$),this.Ua&&Fe(w,"TYPE","init"),this.P?(Fe(w,"$req",v),Fe(w,"SID","null"),$.T=!0,oa($,w,null)):oa($,w,v),this.G=2}}else this.G==3&&(h?ah(this,h):this.i.length==0||Hl(this.h)||ah(this))};function ah(h,v){var w;v?w=v.l:w=h.U++;const I=gt(h.I);Fe(I,"SID",h.K),Fe(I,"RID",w),Fe(I,"AID",h.T),pa(h,I),h.m&&h.o&&ts(I,h.m,h.o),w=new Ni(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Xl(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wr(h.h,w),oa(w,I,v)}function pa(h,v){h.H&&Y(h.H,function(w,I){Fe(v,I,w)}),h.l&&po({},function(w,I){Fe(v,I,w)})}function Xl(h,v,w){w=Math.min(h.i.length,w);var I=h.l?E(h.l.Na,h.l,h):null;e:{var $=h.i;let J=-1;for(;;){const ce=["count="+w];J==-1?0<w?(J=$[0].g,ce.push("ofs="+J)):J=0:ce.push("ofs="+J);let Ke=!0;for(let xt=0;xt<w;xt++){let Ne=$[xt].g;const zt=$[xt].map;if(Ne-=J,0>Ne)J=Math.max(0,$[xt].g-100),Ke=!1;else try{Yl(zt,ce,"req"+Ne+"_")}catch{I&&I(zt)}}if(Ke){I=ce.join("&");break e}}}return h=h.i.splice(0,w),v.D=h,I}function oh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;oe||De(),fe||(oe(),fe=!0),Ie.add(v,h),h.v=0}}function Wl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Kr(E(h.Fa,h),ch(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Kr(E(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),rs(this),lh(this))};function Zl(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function lh(h){h.g=new Ni(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=gt(h.qa);Fe(v,"RID","rpc"),Fe(v,"SID",h.K),Fe(v,"AID",h.T),Fe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Fe(v,"TO",h.ja),Fe(v,"TYPE","xmlhttp"),pa(h,v),h.m&&h.o&&ts(v,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=ca(gt(v)),w.m=null,w.P=!0,rr(w,h)}t.Za=function(){this.C!=null&&(this.C=null,rs(this),Wl(this),$t(19))};function ss(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function uh(h,v){var w=null;if(h.g==v){ss(h),Zl(h),h.g=null;var I=2}else if(Xr(h.h,v))w=v.D,Xn(h.h,v),I=1;else return;if(h.G!=0){if(v.o)if(I==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var $=h.B;I=fo(),jt(I,new Ul(I,w)),wo(h)}else oh(h);else if($=v.s,$==3||$==0&&0<v.X||!(I==1&&bm(h,v)||I==2&&Wl(h)))switch(w&&0<w.length&&(v=h.h,v.i=v.i.concat(w)),$){case 1:ur(h,5);break;case 4:ur(h,10);break;case 3:ur(h,6);break;default:ur(h,2)}}}function ch(h,v){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*v}function ur(h,v){if(h.j.info("Error code "+v),v==2){var w=E(h.fb,h),I=h.Xa;const $=!I;I=new ar(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Zr(I,"https"),ca(I),$?$l(I.toString(),w):th(I.toString(),w)}else $t(2);h.G=0,h.l&&h.l.sa(v),Jl(h),sh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Jl(h){if(h.G=0,h.ka=[],h.l){const v=gn(h.h);(v.length!=0||h.i.length!=0)&&(x(h.ka,v),x(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function hh(h,v,w){var I=w instanceof ar?gt(w):new ar(w);if(I.g!="")v&&(I.g=v+"."+I.g),ua(I,I.s);else{var $=f.location;I=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var J=new ar(null);I&&Zr(J,I),v&&(J.g=v),$&&ua(J,$),w&&(J.l=w),I=J}return w=h.D,v=h.ya,w&&v&&Fe(I,w,v),Fe(I,"VER",h.la),pa(h,I),I}function fh(h,v,w){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new nt(new Vi({eb:w})):new nt(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}t=dh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bo(){}bo.prototype.g=function(h,v){return new vn(h,v)};function vn(h,v){Pt.call(this),this.g=new rh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!L(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!L(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new as(this)}D(vn,Pt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Ql(this.g)},vn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Yn(h),h=w);v.i.push(new vm(v.Ya++,h)),v.G==3&&wo(v)},vn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,vn.aa.N.call(this)};function mh(h){Hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}D(mh,Hr);function ph(){di.call(this),this.status=1}D(ph,di);function as(h){this.g=h}D(as,dh),as.prototype.ua=function(){jt(this.g,"a")},as.prototype.ta=function(h){jt(this.g,new mh(h))},as.prototype.sa=function(h){jt(this.g,new ph)},as.prototype.ra=function(){jt(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,lR=function(){return new bo},oR=function(){return fo()},aR=Qn,yy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Hf=pt,Yt.COMPLETE="complete",sR=Yt,aa.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,zu=aa,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,rR=nt}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const db="@firebase/firestore",mb="4.8.0";class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let xl="11.10.0";const Qa=new dv("@firebase/firestore");function el(){return Qa.logLevel}function de(t,...e){if(Qa.logLevel<=Ue.DEBUG){const n=e.map(Rv);Qa.debug(`Firestore (${xl}): ${t}`,...n)}}function Ur(t,...e){if(Qa.logLevel<=Ue.ERROR){const n=e.map(Rv);Qa.error(`Firestore (${xl}): ${t}`,...n)}}function Fs(t,...e){if(Qa.logLevel<=Ue.WARN){const n=e.map(Rv);Qa.warn(`Firestore (${xl}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uR(t,r,n)}function uR(t,e,n){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ur(r),new Error(r)}function $e(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||uR(e,a,r)}function Re(t,e){return t}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class cR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class zk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Fk{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let r=this.i;const a=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let l=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mr)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new cR(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class Hk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Hk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const r=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Kk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function hR(){return new TextEncoder}class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Kk(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=e.charAt(a[l]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function vy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),a=e.codePointAt(n);if(r!==a){if(r<128&&a<128)return Me(r,a);{const l=hR(),c=$k(l.encode(gb(t,n)),l.encode(gb(e,n)));return c!==0?c:Me(r,a)}}n+=r>65535?2:1}return Me(t.length,e.length)}function gb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $k(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Me(t[n],e[n]);return Me(t.length,e.length)}function gl(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const yb="__name__";class Bi{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const l=Bi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Me(e.length,n.length)}static compareSegments(e,n){const r=Bi.isNumericId(e),a=Bi.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Bi.extractNumericId(e).compare(Bi.extractNumericId(n)):vy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bs.fromString(e.substring(4,e.length-2))}}class tt extends Bi{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new tt(n)}static emptyPath(){return new tt([])}}const Yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Bi{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return Yk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yb}static keyField(){return new tn([yb])}static fromServerFormat(e){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(tt.fromString(e))}static fromName(e){return new ye(tt.fromString(e).popFirst(5))}static empty(){return new ye(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new tt(e.slice()))}}function fR(t,e,n){if(!n)throw new he(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qk(t,e,n,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vb(t){if(!ye.isDocumentKey(t))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _b(t){if(ye.isDocumentKey(t))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function On(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(t);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Nc(t,e){if(!dR(t))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new he(ne.INVALID_ARGUMENT,n);return!0}const Tb=-62135596800,Eb=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Eb);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tb)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Eb}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:kt("string",st._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lc=-1;function Xk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Hs(a,ye.empty(),e)}function Wk(t){return new Hs(t.readTime,t.key,lc)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(Se.min(),ye.empty(),lc)}static max(){return new Hs(Se.max(),ye.empty(),lc)}}function Zk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Il(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==Jk)throw t;de("LocalStore","Unexpectedly lost primary lease")}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,r)=>{n(e)}))}static reject(e){return new ae(((n,r)=>{r(e)}))}static waitFor(e){return new ae(((n,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&n()}),(d=>r(d)))})),c=!0,l===a&&n()}))}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next((a=>a?ae.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(e,n){return new ae(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next((y=>{c[p]=y,++f,f===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,n){return new ae(((r,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):r()};l()}))}}function tP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(t){return t.name==="IndexedDbTransactionError"}class Ud{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ud.ue=-1;const xv=-1;function jd(t){return t==null}function od(t){return t===0&&1/t==-1/0}function nP(t){return typeof t=="number"&&Number.isInteger(t)&&!od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const mR="";function iP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wb(e)),e=rP(t.get(n),e);return wb(e)}function rP(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case mR:n+="";break;default:n+=l}}return n}function wb(t){return t+mR+""}function bb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class mt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bf(this.root,e,this.comparator,!0)}}class bf{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,r,a,l){this.key=e,this.value=n,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,l){return new en(e??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,a,l){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sb(this.data.getIterator())}getIteratorFrom(e){return new Sb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class Sb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Ut(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gR("Invalid base64 string: "+l):l}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(t){if($e(!!t,39018),typeof t=="string"){let e=0;const n=sP.exec(t);if($e(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gs(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}const yR="server_timestamp",vR="__type__",_R="__previous_value__",TR="__local_write_time__";function Bd(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vR])===null||n===void 0?void 0:n.stringValue)===yR}function zd(t){const e=t.mapValue.fields[_R];return Bd(e)?zd(e):e}function uc(t){const e=qs(t.mapValue.fields[TR].timestampValue);return new st(e.seconds,e.nanos)}class aP{constructor(e,n,r,a,l,c,f,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const ld="(default)";class cc{constructor(e,n){this.projectId=e,this.database=n||ld}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}const ER="__type__",oP="__max__",Sf={mapValue:{}},wR="__vector__",ud="value";function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bd(t)?4:uP(t)?9007199254740991:lP(t)?10:11:we(28295,{value:t})}function Xi(t,e){if(t===e)return!0;const n=Ks(t);if(n!==Ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uc(t).isEqual(uc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=qs(a.timestampValue),f=qs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return Gs(a.bytesValue).isEqual(Gs(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ct(a.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(a.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ct(a.integerValue)===Ct(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ct(a.doubleValue),f=Ct(l.doubleValue);return c===f?od(c)===od(f):isNaN(c)&&isNaN(f)}return!1})(t,e);case 9:return gl(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(bb(c)!==bb(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!Xi(c[d],f[d])))return!1;return!0})(t,e);default:return we(52216,{left:t})}}function hc(t,e){return(t.values||[]).find((n=>Xi(n,e)))!==void 0}function yl(t,e){if(t===e)return 0;const n=Ks(t),r=Ks(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Ct(l.integerValue||l.doubleValue),d=Ct(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(t,e);case 3:return Ab(t.timestampValue,e.timestampValue);case 4:return Ab(uc(t),uc(e));case 5:return vy(t.stringValue,e.stringValue);case 6:return(function(l,c){const f=Gs(l),d=Gs(c);return f.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let p=0;p<f.length&&p<d.length;p++){const y=Me(f[p],d[p]);if(y!==0)return y}return Me(f.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Me(Ct(l.latitude),Ct(c.latitude));return f!==0?f:Me(Ct(l.longitude),Ct(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Rb(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var f,d,p,y;const _=l.fields||{},E=c.fields||{},A=(f=_[ud])===null||f===void 0?void 0:f.arrayValue,D=(d=E[ud])===null||d===void 0?void 0:d.arrayValue,b=Me(((p=A?.values)===null||p===void 0?void 0:p.length)||0,((y=D?.values)===null||y===void 0?void 0:y.length)||0);return b!==0?b:Rb(A,D)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Sf.mapValue&&c===Sf.mapValue)return 0;if(l===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=c.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const E=vy(d[_],y[_]);if(E!==0)return E;const A=yl(f[d[_]],p[y[_]]);if(A!==0)return A}return Me(d.length,y.length)})(t.mapValue,e.mapValue);default:throw we(23264,{le:n})}}function Ab(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=qs(t),r=qs(e),a=Me(n.seconds,r.seconds);return a!==0?a:Me(n.nanos,r.nanos)}function Rb(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=yl(n[a],r[a]);if(l)return l}return Me(n.length,r.length)}function vl(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=qs(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Gs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=_y(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${_y(n.fields[c])}`;return a+"}"})(t.mapValue):we(61005,{value:t})}function qf(t){switch(Ks(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(t);return e?16+qf(e):16;case 5:return 2*t.stringValue.length;case 6:return Gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+qf(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return Js(r.fields,((l,c)=>{a+=l.length+qf(c)})),a})(t.mapValue);default:throw we(13486,{value:t})}}function cd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function Cb(t){return!!t&&"nullValue"in t}function xb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gf(t){return!!t&&"mapValue"in t}function lP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ER])===null||n===void 0?void 0:n.stringValue)===wR}function Wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Wu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oP}class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(n)}setAll(e){let n=tn.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,r,a),r={},a=[],n=f.popLast()}c?r[f.lastSegment()]=Wu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(e){const n=this.field(e.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Gf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){Js(n,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Nn(Wu(this.value))}}function bR(t){const e=[];return Js(t.fields,((n,r)=>{const a=new tn([n]);if(Gf(r)){const l=bR(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Hn(e)}class cn{constructor(e,n,r,a,l,c,f){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new cn(e,0,Se.min(),Se.min(),Se.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,a){return new cn(e,1,n,Se.min(),r,a,0)}static newNoDocument(e,n){return new cn(e,2,n,Se.min(),Se.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Se.min(),Se.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _l{constructor(e,n){this.position=e,this.inclusive=n}}function Ib(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(c.referenceValue),n.key):r=yl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Db(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}class fc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class SR{}class Vt extends SR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fP(e,n,r):n==="array-contains"?new pP(e,r):n==="in"?new gP(e,r):n==="not-in"?new yP(e,r):n==="array-contains-any"?new vP(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dP(e,r):new mP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yl(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends SR{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Si(e,n)}matches(e){return AR(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AR(t){return t.op==="and"}function RR(t){return hP(t)&&AR(t)}function hP(t){for(const e of t.filters)if(e instanceof Si)return!1;return!0}function Ey(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+vl(t.value);if(RR(t))return t.filters.map((e=>Ey(e))).join(",");{const e=t.filters.map((n=>Ey(n))).join(",");return`${t.op}(${e})`}}function CR(t,e){return t instanceof Vt?(function(r,a){return a instanceof Vt&&r.op===a.op&&r.field.isEqual(a.field)&&Xi(r.value,a.value)})(t,e):t instanceof Si?(function(r,a){return a instanceof Si&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&CR(c,a.filters[f])),!0):!1})(t,e):void we(19439)}function xR(t){return t instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${vl(n.value)}`})(t):t instanceof Si?(function(n){return n.op.toString()+" {"+n.getFilters().map(xR).join(" ,")+"}"})(t):"Filter"}class fP extends Vt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class dP extends Vt{constructor(e,n){super(e,"in",n),this.keys=IR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mP extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=IR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function IR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ye.fromName(r.referenceValue)))}class pP extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&hc(n.arrayValue,this.value)}}class gP extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hc(this.value.arrayValue,n)}}class yP extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hc(this.value.arrayValue,n)}}class vP extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hc(this.value.arrayValue,r)))}}class _P{constructor(e,n=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function Nb(t,e=null,n=[],r=[],a=null,l=null,c=null){return new _P(t,e,n,r,a,l,c)}function Dv(t){const e=Re(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Ey(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vl(r))).join(",")),e.Pe=n}return e.Pe}function Nv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Db(t.startAt,e.startAt)&&Db(t.endAt,e.endAt)}function wy(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ro{constructor(e,n=null,r=[],a=[],l=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function TP(t,e,n,r,a,l,c,f){return new ro(t,e,n,r,a,l,c,f)}function Fd(t){return new ro(t)}function Mb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mv(t){return t.collectionGroup!==null}function dl(t){const e=Re(t);if(e.Te===null){e.Te=[];const n=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Ut(tn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Te.push(new fc(l,r))})),n.has(tn.keyField().canonicalString())||e.Te.push(new fc(tn.keyField(),r))}return e.Te}function Hi(t){const e=Re(t);return e.Ie||(e.Ie=EP(e,dl(t))),e.Ie}function EP(t,e){if(t.limitType==="F")return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new fc(a.field,l)}));const n=t.endAt?new _l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _l(t.startAt.position,t.startAt.inclusive):null;return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function by(t,e){const n=t.filters.concat([e]);return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hd(t,e,n){return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hd(t,e){return Nv(Hi(t),Hi(e))&&t.limitType===e.limitType}function DR(t){return`${Dv(Hi(t))}|lt:${t.limitType}`}function tl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>xR(a))).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>vl(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>vl(a))).join(",")),`Target(${r})`})(Hi(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,a){for(const l of dl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p<=0:p<0})(r.startAt,dl(r),a)||r.endAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p>=0:p>0})(r.endAt,dl(r),a))})(t,e)}function wP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NR(t){return(e,n)=>{let r=!1;for(const a of dl(t)){const l=bP(a,e,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function bP(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(l,c,f){const d=c.data.field(l),p=f.data.field(l);return d!==null&&p!==null?yl(d,p):we(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((n,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}const SP=new mt(ye.comparator);function jr(){return SP}const MR=new mt(ye.comparator);function Fu(...t){let e=MR;for(const n of t)e=e.insert(n.key,n);return e}function OR(t){let e=MR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ua(){return Zu()}function VR(){return Zu()}function Zu(){return new so((t=>t.toString()),((t,e)=>t.isEqual(e)))}const AP=new mt(ye.comparator),RP=new Ut(ye.comparator);function je(...t){let e=RP;for(const n of t)e=e.add(n);return e}const CP=new Ut(Me);function xP(){return CP}function Ov(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function kR(t){return{integerValue:""+t}}function IP(t,e){return nP(e)?kR(e):Ov(t,e)}class Gd{constructor(){this._=void 0}}function DP(t,e,n){return t instanceof dc?(function(a,l){const c={fields:{[vR]:{stringValue:yR},[TR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Bd(l)&&(l=zd(l)),l&&(c.fields[_R]=l),{mapValue:c}})(n,e):t instanceof mc?LR(t,e):t instanceof pc?UR(t,e):(function(a,l){const c=PR(a,l),f=Ob(c)+Ob(a.Ee);return Ty(c)&&Ty(a.Ee)?kR(f):Ov(a.serializer,f)})(t,e)}function NP(t,e,n){return t instanceof mc?LR(t,e):t instanceof pc?UR(t,e):n}function PR(t,e){return t instanceof fd?(function(r){return Ty(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class dc extends Gd{}class mc extends Gd{constructor(e){super(),this.elements=e}}function LR(t,e){const n=jR(e);for(const r of t.elements)n.some((a=>Xi(a,r)))||n.push(r);return{arrayValue:{values:n}}}class pc extends Gd{constructor(e){super(),this.elements=e}}function UR(t,e){let n=jR(e);for(const r of t.elements)n=n.filter((a=>!Xi(a,r)));return{arrayValue:{values:n}}}class fd extends Gd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ob(t){return Ct(t.integerValue||t.doubleValue)}function jR(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class MP{constructor(e,n){this.field=e,this.transform=n}}function OP(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof mc&&a instanceof mc||r instanceof pc&&a instanceof pc?gl(r.elements,a.elements,Xi):r instanceof fd&&a instanceof fd?Xi(r.Ee,a.Ee):r instanceof dc&&a instanceof dc})(t.transform,e.transform)}class VP{constructor(e,n){this.version=e,this.transformResults=n}}class ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kd{}function BR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vv(t.key,ci.none()):new Mc(t.key,t.data,ci.none());{const n=t.data,r=Nn.empty();let a=new Ut(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ea(t.key,r,new Hn(a.toArray()),ci.none())}}function kP(t,e,n){t instanceof Mc?(function(a,l,c){const f=a.value.clone(),d=kb(a.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):t instanceof ea?(function(a,l,c){if(!Kf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=kb(a.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(zR(a)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Ju(t,e,n,r){return t instanceof Mc?(function(l,c,f,d){if(!Kf(l.precondition,c))return f;const p=l.value.clone(),y=Pb(l.fieldTransforms,d,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof ea?(function(l,c,f,d){if(!Kf(l.precondition,c))return f;const p=Pb(l.fieldTransforms,d,c),y=c.data;return y.setAll(zR(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(l,c,f){return Kf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(t,e,n)}function PP(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),l=PR(r.transform,a||null);l!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,l))}return n||null}function Vb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&gl(r,a,((l,c)=>OP(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mc extends Kd{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ea extends Kd{constructor(e,n,r,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function kb(t,e,n){const r=new Map;$e(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,NP(c,f,n[a]))}return r}function Pb(t,e,n){const r=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);r.set(a.field,DP(l,c,e))}return r}class Vv extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UP{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&kP(l,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VR();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=n.has(a.key)?null:f;const d=BR(c,f);d!==null&&r.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,((n,r)=>Vb(n,r)))&&gl(this.baseMutations,e.baseMutations,((n,r)=>Vb(n,r)))}}class kv{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){$e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return AP})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new kv(e,n,r,a)}}class jP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BP{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ot,ze;function zP(t){switch(t){case ne.OK:return we(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function FR(t){if(t===void 0)return Ur("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Ot.OK:return ne.OK;case Ot.CANCELLED:return ne.CANCELLED;case Ot.UNKNOWN:return ne.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ne.INTERNAL;case Ot.UNAVAILABLE:return ne.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ne.NOT_FOUND;case Ot.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ot.ABORTED:return ne.ABORTED;case Ot.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ot.DATA_LOSS:return ne.DATA_LOSS;default:return we(39323,{code:t})}}(ze=Ot||(Ot={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";const FP=new Bs([4294967295,4294967295],0);function Lb(t){const e=hR().encode(t),n=new iR;return n.update(e),new Uint8Array(n.digest())}function Ub(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Bs([n,r],0),new Bs([a,l],0)]}class Pv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hu(`Invalid padding: ${n}`);if(r<0)throw new Hu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Bs.fromNumber(this.fe)}pe(e,n,r){let a=e.add(n.multiply(Bs.fromNumber(r)));return a.compare(FP)===1&&(a=new Bs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Lb(e),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);if(!this.ye(c))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Pv(l,a,n);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.fe===0)return;const n=Lb(e),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $d{constructor(e,n,r,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $d(Se.min(),a,new mt(Me),jr(),je())}}class Oc{constructor(e,n,r,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oc(r,n,je(),je(),je())}}class $f{constructor(e,n,r,a){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=a}}class HR{constructor(e,n){this.targetId=e,this.De=n}}class qR{constructor(e,n,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class jb{constructor(){this.ve=0,this.Ce=Bb(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),n=je(),r=je();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:we(38017,{changeType:l})}})),new Oc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Bb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class HP{constructor(e){this.We=e,this.Ge=new Map,this.ze=jr(),this.je=Af(),this.Je=Af(),this.He=new mt(Me)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,r=e.De.count,a=this.st(n);if(a){const l=a.target;if(wy(l))if(r===0){const c=new ye(l.path);this.Xe(n,c,cn.newNoDocument(c,Se.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const f=this._t(e),d=f?this.ut(f,e,c):1;if(d!==0){this.rt(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,f;try{c=Gs(r).toUint8Array()}catch(d){if(d instanceof gR)return Fs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Pv(c,a,l)}catch(d){return Fs(d instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.fe===0?null:f}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(n,l,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&wy(f.target)){const d=new ye(f.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,cn.newNoDocument(d,e))}l.Ne&&(n.set(c,l.Le()),l.ke())}}));let r=je();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const p=this.st(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const a=new $d(e,n,this.He,this.ze,r);return this.ze=jr(),this.je=Af(),this.Je=Af(),this.He=new mt(Me),a}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jb,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ut(Me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ut(Me),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jb),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Af(){return new mt(ye.comparator)}function Bb(){return new mt(ye.comparator)}const qP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KP={and:"AND",or:"OR"};class $P{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sy(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YP(t,e){return dd(t,e.toTimestamp())}function qi(t){return $e(!!t,49232),Se.fromTimestamp((function(n){const r=qs(n);return new st(r.seconds,r.nanos)})(t))}function Lv(t,e){return Ay(t,e).canonicalString()}function Ay(t,e){const n=(function(a){return new tt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function KR(t){const e=tt.fromString(t);return $e(WR(e),10190,{key:e.toString()}),e}function Ry(t,e){return Lv(t.databaseId,e.path)}function Vg(t,e){const n=KR(e);if(n.get(1)!==t.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(YR(n))}function $R(t,e){return Lv(t.databaseId,e)}function QP(t){const e=KR(t);return e.length===4?tt.emptyPath():YR(e)}function Cy(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YR(t){return $e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zb(t,e,n){return{name:Ry(t,e),fields:n.value.mapValue.fields}}function XP(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:we(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?($e(y===void 0||typeof y=="string",58123),nn.fromBase64String(y||"")):($e(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),nn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?ne.UNKNOWN:FR(p.code);return new he(y,p.message||"")})(c);n=new qR(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Vg(t,r.document.name),l=qi(r.document.updateTime),c=r.document.createTime?qi(r.document.createTime):Se.min(),f=new Nn({mapValue:{fields:r.document.fields}}),d=cn.newFoundDocument(a,l,c,f),p=r.targetIds||[],y=r.removedTargetIds||[];n=new $f(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Vg(t,r.document),l=r.readTime?qi(r.readTime):Se.min(),c=cn.newNoDocument(a,l),f=r.removedTargetIds||[];n=new $f([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Vg(t,r.document),l=r.removedTargetIds||[];n=new $f([],l,a,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BP(a,l),f=r.targetId;n=new HR(f,c)}}return n}function WP(t,e){let n;if(e instanceof Mc)n={update:zb(t,e.key,e.value)};else if(e instanceof Vv)n={delete:Ry(t,e.key)};else if(e instanceof ea)n={update:zb(t,e.key,e.data),updateMask:aL(e.fieldMask)};else{if(!(e instanceof LP))return we(16599,{Rt:e.type});n={verify:Ry(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof dc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof mc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof fd)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw we(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:YP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(t,e.precondition)),n}function ZP(t,e){return t&&t.length>0?($e(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?qi(a.updateTime):qi(l);return c.isEqual(Se.min())&&(c=qi(l)),new VP(c,a.transformResults||[])})(n,e)))):[]}function JP(t,e){return{documents:[$R(t,e.path)]}}function eL(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$R(t,a);const l=(function(p){if(p.length!==0)return XR(Si.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:nl(E.field),direction:iL(E.dir)}})(y)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const f=Sy(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{Vt:n,parent:a}}function tL(t){let e=QP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){$e(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(_){const E=QR(_);return E instanceof Si&&RR(E)?E.getFilters():[E]})(n.where));let c=[];n.orderBy&&(c=(function(_){return _.map((E=>(function(D){return new fc(il(D.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let E;return E=typeof _=="object"?_.value:_,jd(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(_){const E=!!_.before,A=_.values||[];return new _l(A,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const E=!_.before,A=_.values||[];return new _l(A,E)})(n.endAt)),TP(e,a,c,l,f,"F",d,p)}function nL(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=il(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=il(n.unaryFilter.field);return Vt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=il(n.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=il(n.unaryFilter.field);return Vt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Vt.create(il(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Si.create(n.compositeFilter.filters.map((r=>QR(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(t):we(30097,{filter:t})}function iL(t){return qP[t]}function rL(t){return GP[t]}function sL(t){return KP[t]}function nl(t){return{fieldPath:t.canonicalString()}}function il(t){return tn.fromServerFormat(t.fieldPath)}function XR(t){return t instanceof Vt?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NAN"}};if(Cb(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NAN"}};if(Cb(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(n.field),op:rL(n.op),value:n.value}}})(t):t instanceof Si?(function(n){const r=n.getFilters().map((a=>XR(a)));return r.length===1?r[0]:{compositeFilter:{op:sL(n.op),filters:r}}})(t):we(54877,{filter:t})}function aL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function WR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Us{constructor(e,n,r,a,l=Se.min(),c=Se.min(),f=nn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oL{constructor(e){this.gt=e}}function lL(t){const e=tL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hd(e,e.limit,"L"):e}class uL{constructor(){this.Dn=new cL}addToCollectionParentIndex(e,n){return this.Dn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Hs.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class cL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Ut(tt.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(tt.comparator)).toArray()}}const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZR=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(ZR,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Tl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Tl(0)}static ur(){return new Tl(-1)}}const Hb="LruGarbageCollector",hL=1048576;function qb([t,e],[n,r]){const a=Me(t,n);return a===0?Me(e,r):a}class fL{constructor(e){this.Tr=e,this.buffer=new Ut(qb),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(Hb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dl(n)?de(Hb,"Ignoring IndexedDB error during garbage collection: ",n):await Il(n)}await this.Rr(3e5)}))}}class mL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Ud.ue);const r=new fL(n);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Fb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,a,l,c,f,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,n)))).next((_=>(l=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),el()<=Ue.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function pL(t,e){return new mL(t,e)}class gL{constructor(){this.changes=new so((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class vL{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&Ju(r.mutation,a,Hn.empty(),st.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=je()){const a=Ua();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((l=>{let c=Fu();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=Ua();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,je())))}populateOverlays(e,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{n.set(c,f)}))}))}computeViews(e,n,r,a){let l=jr();const c=Zu(),f=(function(){return Zu()})();return n.forEach(((d,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ea)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Ju(y.mutation,p,y.mutation.getFieldMask(),st.now())):c.set(p.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,y)=>c.set(p,y))),n.forEach(((p,y)=>{var _;return f.set(p,new yL(y,(_=c.get(p))!==null&&_!==void 0?_:null))})),f)))}recalculateAndSaveOverlays(e,n){const r=Zu();let a=new mt(((c,f)=>c-f)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const f of c)f.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||Hn.empty();y=f.applyToLocalView(p,y),r.set(d,y);const _=(a.get(f.batchId)||je()).add(d);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,y=d.value,_=VR();y.forEach((E=>{if(!l.has(E)){const A=BR(n.get(E),r.get(E));A!==null&&_.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return ae.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-l.size):ae.resolve(Ua());let f=lc,d=l;return c.next((p=>ae.forEach(p,((y,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(y)?ae.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{d=d.insert(y,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,je()))).next((y=>({batchId:f,changes:OR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((r=>{let a=Fu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const l=n.collectionGroup;let c=Fu();return this.indexManager.getCollectionParents(e,l).next((f=>ae.forEach(f,(d=>{const p=(function(_,E){return new ro(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,a)))).next((c=>{l.forEach(((d,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,cn.newInvalidDocument(y)))}));let f=Fu();return c.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&Ju(y.mutation,p,Hn.empty(),st.now()),qd(n,p)&&(f=f.insert(d,p))})),f}))}}class _L{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:qi(a.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:lL(a.bundledQuery),readTime:qi(a.readTime)}})(n)),ae.resolve()}}class TL{constructor(){this.overlays=new mt(ye.comparator),this.kr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ua();return ae.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,l)=>{this.wt(e,n,l)})),ae.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const a=Ua(),l=n.length+1,c=new ye(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>r&&a.set(d.getKey(),d)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let l=new mt(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Ua(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=Ua(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return ae.resolve(f)}wt(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jP(n,r));let l=this.kr.get(n);l===void 0&&(l=je(),this.kr.set(n,l)),this.kr.set(n,l.add(r.key))}}class EL{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}class Uv{constructor(){this.qr=new Ut(qt.Qr),this.$r=new Ut(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new qt(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new ye(new tt([])),r=new qt(n,e),a=new qt(n,e+1),l=[];return this.$r.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ye(new tt([])),r=new qt(n,e),a=new qt(n,e+1);let l=je();return this.$r.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new qt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ye.comparator(e.key,n.key)||Me(e.Hr,n.Hr)}static Ur(e,n){return Me(e.Hr,n.Hr)||ye.comparator(e.key,n.key)}}class wL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ut(qt.Qr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UP(l,n,r,a);this.mutationQueue.push(c);for(const f of a)this.Yr=this.Yr.add(new qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,n){return ae.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.Xr(r),l=a<0?0:a;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?xv:this.er-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),a=new qt(n,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Me);return n.forEach((a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),ae.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const c=new qt(new ye(l),0);let f=new Ut(Me);return this.Yr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Hr)),!0)}),c),ae.resolve(this.ei(f))}ei(e){const n=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){$e(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ae.forEach(n.mutations,(a=>{const l=new qt(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new qt(n,0),a=this.Yr.firstAfterOrEqual(r);return ae.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bL{constructor(e){this.ni=e,this.docs=(function(){return new mt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))})),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let l=jr();const c=n.path,f=new ye(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Zk(Wk(y),r)<=0||(a.has(y.key)||qd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,n,r,a){we(9500)}ri(e,n){return ae.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new SL(this)}getSize(e){return ae.resolve(this.size)}}class SL extends gL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),ae.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class AL{constructor(e){this.persistence=e,this.ii=new so((n=>Dv(n)),Nv),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new Uv,this.targetCount=0,this._i=Tl.ar()}forEachTarget(e,n){return this.ii.forEach(((r,a)=>n(a))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ae.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Tl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.hr(n),ae.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let a=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ae.waitFor(l).next((()=>a))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ae.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.oi.containsKey(n))}}class JR{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ud(0),this.ci=!1,this.ci=!0,this.li=new EL,this.referenceDelegate=e(this),this.hi=new AL(this),this.indexManager=new uL,this.remoteDocumentCache=(function(a){return new bL(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new oL(n),this.Ti=new _L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new wL(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const a=new RL(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,n){return ae.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class RL extends eP{constructor(e){super(),this.currentSequenceNumber=e}}class jv{constructor(e){this.persistence=e,this.Ai=new Uv,this.Ri=null}static Vi(e){return new jv(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.mi,(r=>{const a=ye.fromPath(r);return this.fi(e,a).next((l=>{l||n.removeEntry(a,Se.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ae.or([()=>ae.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class md{constructor(e,n){this.persistence=e,this.gi=new so((r=>iP(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=pL(this,n)}static Vi(e,n){return new md(e,n)}Ii(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return ae.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((l=>l?ae.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(c=>this.Sr(e,c,n).next((f=>{f||(r++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ae.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qf(e.data.value)),n}Sr(e,n,r){return ae.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return ae.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bv{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=a}static Es(e,n){let r=je(),a=je();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Bv(e,n.fromCache,r,a)}}class CL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return SM()?8:tP(dn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,a){const l={result:null};return this.ps(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,n,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new CL;return this.ws(e,n,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,n,c,f.size)}))})).next((()=>l.result))}Ss(e,n,r,a){return r.documentReadCount<this.Vs?(el()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(el()<=Ue.DEBUG&&de("QueryEngine","Query:",tl(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(el()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(n))):ae.resolve())}ps(e,n){if(Mb(n))return ae.resolve(null);let r=Hi(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=hd(n,null,"F"),r=Hi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=je(...l);return this.gs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.bs(n,f);return this.Ds(n,p,c,d.readTime)?this.ps(e,hd(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ys(e,n,r,a){return Mb(n)||a.isEqual(Se.min())?ae.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(n,l);return this.Ds(n,c,r,a)?ae.resolve(null):(el()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),tl(n)),this.vs(e,c,n,Xk(a,lc)).next((f=>f)))}))}bs(e,n){let r=new Ut(NR(e));return n.forEach(((a,l)=>{qd(e,l)&&(r=r.add(l))})),r}Ds(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,n,r){return el()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",tl(n)),this.gs.getDocumentsMatchingQuery(e,n,Hs.min(),r)}vs(e,n,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const zv="LocalStore",IL=3e8;class DL{constructor(e,n,r,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new mt(Me),this.Ms=new so((l=>Dv(l)),Nv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function NL(t,e,n,r){return new DL(t,e,n,r)}async function eC(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let d=je();for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((p=>({Bs:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function ML(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=n.Os.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,y){const _=p.batch,E=_.keys();let A=ae.resolve();return E.forEach((D=>{A=A.next((()=>y.getEntry(d,D))).next((b=>{const x=p.docVersions.get(D);$e(x!==null,48541),b.version.compareTo(x)<0&&(_.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),y.addEntry(b)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(d,_)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=je();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function tC(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function OL(t,e){const n=Re(t),r=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const f=[];e.targetChanges.forEach(((y,_)=>{const E=a.get(_);if(!E)return;f.push(n.hi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>n.hi.addMatchingKeys(l,y.addedDocuments,_))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(nn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(_,A),(function(b,x,V){return b.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=IL?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,A,y)&&f.push(n.hi.updateTargetData(l,A))}));let d=jr(),p=je();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(VL(l,c,e.documentUpdates).next((y=>{d=y.Ls,p=y.ks}))),!r.isEqual(Se.min())){const y=n.hi.getLastRemoteSnapshotVersion(l).next((_=>n.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(y)}return ae.waitFor(f).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Fs=a,l)))}function VL(t,e,n){let r=je(),a=je();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let c=jr();return n.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):de(zv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{Ls:c,ks:a}}))}function kL(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function PL(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.hi.getTargetData(r,e).next((l=>l?(a=l,ae.resolve(a)):n.hi.allocateTargetId(r).next((c=>(a=new Us(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function xy(t,e,n){const r=Re(t),a=r.Fs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Dl(c))throw c;de(zv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function Gb(t,e,n){const r=Re(t);let a=Se.min(),l=je();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,y){const _=Re(d),E=_.Ms.get(y);return E!==void 0?ae.resolve(_.Fs.get(E)):_.hi.getTargetData(p,y)})(r,c,Hi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?a:Se.min(),n?l:je()))).next((f=>(LL(r,wP(e),f),{documents:f,qs:l})))))}function LL(t,e,n){let r=t.xs.get(e)||Se.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.xs.set(e,r)}class Kb{constructor(){this.activeTargetIds=xP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UL{constructor(){this.Fo=new Kb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Kb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jL{xo(e){}shutdown(){}}const $b="ConnectivityMonitor";class Yb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de($b,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de($b,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Rf=null;function Iy(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}const kg="RestConnection",BL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===ld?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,n,r,a,l){const c=Iy(),f=this.Go(e,n.toUriEncodedString());de(kg,`Sending RPC '${e}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,a,l);const{host:p}=new URL(f),y=Zs(p);return this.jo(e,f,d,r,y).then((_=>(de(kg,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Fs(kg,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",r),_}))}Jo(e,n,r,a,l,c){return this.Wo(e,n,r,a,l)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Go(e,n){const r=BL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}class FL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const on="WebChannelConnection";class HL extends zL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,a,l){const c=Iy();return new Promise(((f,d)=>{const p=new rR;p.setWithCredentials(!0),p.listenOnce(sR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Hf.NO_ERROR:const _=p.getResponseJson();de(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Hf.TIMEOUT:de(on,`RPC '${e}' ${c} timed out`),d(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const E=p.getStatus();if(de(on,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const b=(function(V){const L=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(L)>=0?L:ne.UNKNOWN})(D.status);d(new he(b,D.message))}else d(new he(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new he(ne.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{de(on,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);de(on,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,r,15)}))}P_(e,n,r){const a=Iy(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lR(),f=oR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=l.join("");de(on,`Creating RPC '${e}' stream ${a}: ${y}`,d);const _=c.createWebChannel(y,d);this.T_(_);let E=!1,A=!1;const D=new FL({Ho:x=>{A?de(on,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(E||(de(on,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),de(on,`RPC '${e}' stream ${a} sending:`,x),_.send(x))},Yo:()=>_.close()}),b=(x,V,L)=>{x.listen(V,(k=>{try{L(k)}catch(K){setTimeout((()=>{throw K}),0)}}))};return b(_,zu.EventType.OPEN,(()=>{A||(de(on,`RPC '${e}' stream ${a} transport opened.`),D.s_())})),b(_,zu.EventType.CLOSE,(()=>{A||(A=!0,de(on,`RPC '${e}' stream ${a} transport closed`),D.__(),this.I_(_))})),b(_,zu.EventType.ERROR,(x=>{A||(A=!0,Fs(on,`RPC '${e}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),D.__(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),b(_,zu.EventType.MESSAGE,(x=>{var V;if(!A){const L=x.data[0];$e(!!L,16349);const k=L,K=k?.error||((V=k[0])===null||V===void 0?void 0:V.error);if(K){de(on,`RPC '${e}' stream ${a} received error:`,K);const q=K.status;let Y=(function(N){const U=Ot[N];if(U!==void 0)return FR(U)})(q),R=K.message;Y===void 0&&(Y=ne.INTERNAL,R="Unknown error status: "+q+" with message "+K.message),A=!0,D.__(new he(Y,R)),_.close()}else de(on,`RPC '${e}' stream ${a} received:`,L),D.a_(L)}})),b(f,aR.STAT_EVENT,(x=>{x.stat===yy.PROXY?de(on,`RPC '${e}' stream ${a} detected buffering proxy`):x.stat===yy.NOPROXY&&de(on,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Pg(){return typeof document<"u"?document:null}function Yd(t){return new $P(t,!0)}class nC{constructor(e,n,r=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-r);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Qb="PersistentStream";class iC{constructor(e,n,r,a,l,c,f,d){this.Fi=e,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===n&&this.W_(r,a)}),(r=>{e((()=>{const a=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return de(Qb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(de(Qb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qL extends iC{constructor(e,n,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=XP(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?qi(c.readTime):Se.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Cy(this.serializer),n.addTarget=(function(l,c){let f;const d=c.target;if(f=wy(d)?{documents:JP(l,d)}:{query:eL(l,d).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=GR(l,c.resumeToken);const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Se.min())>0){f.readTime=dd(l,c.snapshotVersion.toTimestamp());const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=nL(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.k_(n)}}class GL extends iC{constructor(e,n,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=ZP(e.writeResults,e.commitTime),r=qi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Cy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>WP(this.serializer,r)))};this.k_(n)}}class KL{}class $L extends KL{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Ay(n,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())}))}Jo(e,n,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(e,Ay(n,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class YL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ur(n),this._a=!1):de("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Xa="RemoteStore";class QL{constructor(e,n,r,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{ao(this)&&(de(Xa,"Restarting streams for network reachability change."),await(async function(d){const p=Re(d);p.Ia.add(4),await Vc(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Qd(p)})(this))}))})),this.Aa=new YL(r,a)}}async function Qd(t){if(ao(t))for(const e of t.da)await e(!0)}async function Vc(t){for(const e of t.da)await e(!1)}function rC(t,e){const n=Re(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Gv(n)?qv(n):Nl(n).x_()&&Hv(n,e))}function Fv(t,e){const n=Re(t),r=Nl(n);n.Ta.delete(e),r.x_()&&sC(n,e),n.Ta.size===0&&(r.x_()?r.B_():ao(n)&&n.Aa.set("Unknown"))}function Hv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).H_(e)}function sC(t,e){t.Ra.$e(e),Nl(t).Y_(e)}function qv(t){t.Ra=new HP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.Aa.aa()}function Gv(t){return ao(t)&&!Nl(t).M_()&&t.Ta.size>0}function ao(t){return Re(t).Ia.size===0}function aC(t){t.Ra=void 0}async function XL(t){t.Aa.set("Online")}async function WL(t){t.Ta.forEach(((e,n)=>{Hv(t,e)}))}async function ZL(t,e){aC(t),Gv(t)?(t.Aa.la(e),qv(t)):t.Aa.set("Unknown")}async function JL(t,e,n){if(t.Aa.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ta.delete(f),a.Ra.removeTarget(f))})(t,e)}catch(r){de(Xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pd(t,r)}else if(e instanceof $f?t.Ra.Ye(e):e instanceof HR?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Se.min()))try{const r=await tC(t.localStore);n.compareTo(r)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ta.get(p);y&&l.Ta.set(p,y.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,p)=>{const y=l.Ta.get(d);if(!y)return;l.Ta.set(d,y.withResumeToken(nn.EMPTY_BYTE_STRING,y.snapshotVersion)),sC(l,d);const _=new Us(y.target,d,p,y.sequenceNumber);Hv(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(r){de(Xa,"Failed to raise snapshot:",r),await pd(t,r)}}async function pd(t,e,n){if(!Dl(e))throw e;t.Ia.add(1),await Vc(t),t.Aa.set("Offline"),n||(n=()=>tC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{de(Xa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Qd(t)}))}function oC(t,e){return e().catch((n=>pd(t,n,e)))}async function Xd(t){const e=Re(t),n=$s(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:xv;for(;e4(e);)try{const a=await kL(e.localStore,r);if(a===null){e.Pa.length===0&&n.B_();break}r=a.batchId,t4(e,a)}catch(a){await pd(e,a)}lC(e)&&uC(e)}function e4(t){return ao(t)&&t.Pa.length<10}function t4(t,e){t.Pa.push(e);const n=$s(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function lC(t){return ao(t)&&!$s(t).M_()&&t.Pa.length>0}function uC(t){$s(t).start()}async function n4(t){$s(t).na()}async function i4(t){const e=$s(t);for(const n of t.Pa)e.X_(n.mutations)}async function r4(t,e,n){const r=t.Pa.shift(),a=kv.from(r,e,n);await oC(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Xd(t)}async function s4(t,e){e&&$s(t).Z_&&await(async function(r,a){if((function(c){return zP(c)&&c!==ne.ABORTED})(a.code)){const l=r.Pa.shift();$s(r).N_(),await oC(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Xd(r)}})(t,e),lC(t)&&uC(t)}async function Xb(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),de(Xa,"RemoteStore received new credentials");const r=ao(n);n.Ia.add(3),await Vc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Qd(n)}async function a4(t,e){const n=Re(t);e?(n.Ia.delete(2),await Qd(n)):e||(n.Ia.add(2),await Vc(n),n.Aa.set("Unknown"))}function Nl(t){return t.Va||(t.Va=(function(n,r,a){const l=Re(n);return l.ia(),new qL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:XL.bind(null,t),e_:WL.bind(null,t),n_:ZL.bind(null,t),J_:JL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Gv(t)?qv(t):t.Aa.set("Unknown")):(await t.Va.stop(),aC(t))}))),t.Va}function $s(t){return t.ma||(t.ma=(function(n,r,a){const l=Re(n);return l.ia(),new GL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:n4.bind(null,t),n_:s4.bind(null,t),ea:i4.bind(null,t),ta:r4.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Xd(t)):(await t.ma.stop(),t.Pa.length>0&&(de(Xa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}class Kv{constructor(e,n,r,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,l){const c=Date.now()+r,f=new Kv(e,n,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),Dl(t))return new he(ne.UNAVAILABLE,`${e}: ${t}`);throw t}class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Wb{constructor(){this.fa=new mt(ye.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class El{constructor(e,n,r,a,l,c,f,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,a,l){const c=[];return n.forEach((f=>{c.push({type:0,doc:f})})),new El(e,n,ml.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class o4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class l4{constructor(){this.queries=Zb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const a=Re(n),l=a.queries;a.queries=Zb(),l.forEach(((c,f)=>{for(const d of f.wa)d.onError(r)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function Zb(){return new so((t=>DR(t)),Hd)}async function Yv(t,e){const n=Re(t);let r=3;const a=e.query;let l=n.queries.get(a);l?!l.Sa()&&e.ba()&&(r=2):(l=new o4,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await n.onListen(a,!0);break;case 1:l.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const f=$v(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(f)}n.queries.set(a,l),l.wa.push(e),e.va(n.onlineState),l.ya&&e.Ca(l.ya)&&Xv(n)}async function Qv(t,e){const n=Re(t),r=e.query;let a=3;const l=n.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u4(t,e){const n=Re(t);let r=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const f of c.wa)f.Ca(a)&&(r=!0);c.ya=a}}r&&Xv(n)}function c4(t,e,n){const r=Re(t),a=r.queries.get(e);if(a)for(const l of a.wa)l.onError(n);r.queries.delete(e)}function Xv(t){t.Da.forEach((e=>{e.next()}))}var Dy,Jb;(Jb=Dy||(Dy={})).Fa="default",Jb.Cache="cache";class Wv{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new El(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Dy.Cache}}class cC{constructor(e){this.key=e}}class hC{constructor(e){this.key=e}}class h4{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=NR(e),this.eu=new ml(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Wb,a=n?n.eu:this.eu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,_)=>{const E=a.get(y),A=qd(this.query,_)?_:null,D=!!E&&this.mutatedKeys.has(E.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;E&&A?E.data.isEqual(A.data)?D!==b&&(r.track({type:3,doc:A}),x=!0):this.iu(E,A)||(r.track({type:2,doc:A}),x=!0,(d&&this.Xa(A,d)>0||p&&this.Xa(A,p)<0)&&(f=!0)):!E&&A?(r.track({type:0,doc:A}),x=!0):E&&!A&&(r.track({type:1,doc:E}),x=!0,(d||p)&&(f=!0)),x&&(A?(c=c.add(A),l=b?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:f,mutatedKeys:l}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((y,_)=>(function(A,D){const b=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:x})}};return b(A)-b(D)})(y.type,_.type)||this.Xa(y.doc,_.doc))),this.su(r),a=a!=null&&a;const f=n&&!a?this.ou():[],d=this.Za.size===0&&this.current&&!a?1:0,p=d!==this.Ya;return this.Ya=d,c.length!==0||p?{snapshot:new El(this.query,e.eu,l,c,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Wb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new hC(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new cC(r))})),n}uu(e){this.Ha=e.qs,this.Za=je();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return El.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zv="SyncEngine";class f4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class d4{constructor(e){this.key=e,this.lu=!1}}class m4{constructor(e,n,r,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new so((f=>DR(f)),Hd),this.Tu=new Map,this.Iu=new Set,this.du=new mt(ye.comparator),this.Eu=new Map,this.Au=new Uv,this.Ru={},this.Vu=new Map,this.mu=Tl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function p4(t,e,n=!0){const r=yC(t);let a;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await fC(r,e,n,!0),a}async function g4(t,e){const n=yC(t);await fC(n,e,!0,!1)}async function fC(t,e,n,r){const a=await PL(t.localStore,Hi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let f;return r&&(f=await y4(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&rC(t.remoteStore,a),f}async function y4(t,e,n,r,a){t.gu=(_,E,A)=>(async function(b,x,V,L){let k=x.view.nu(V);k.Ds&&(k=await Gb(b.localStore,x.query,!1).then((({documents:R})=>x.view.nu(R,k))));const K=L&&L.targetChanges.get(x.targetId),q=L&&L.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(k,b.isPrimaryClient,K,q);return tS(b,x.targetId,Y._u),Y.snapshot})(t,_,E,A);const l=await Gb(t.localStore,e,!0),c=new h4(e,l.qs),f=c.nu(l.documents),d=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),p=c.applyChanges(f,t.isPrimaryClient,d);tS(t,n,p._u);const y=new f4(e,n,c);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),p.snapshot}async function v4(t,e,n){const r=Re(t),a=r.Pu.get(e),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((c=>!Hd(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await xy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Fv(r.remoteStore,a.targetId),Ny(r,a.targetId)})).catch(Il)):(Ny(r,a.targetId),await xy(r.localStore,a.targetId,!0))}async function _4(t,e){const n=Re(t),r=n.Pu.get(e),a=n.Tu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fv(n.remoteStore,r.targetId))}async function T4(t,e,n){const r=C4(t);try{const a=await(function(c,f){const d=Re(c),p=st.now(),y=f.reduce(((A,D)=>A.add(D.key)),je());let _,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=jr(),b=je();return d.Os.getEntries(A,y).next((x=>{D=x,D.forEach(((V,L)=>{L.isValidDocument()||(b=b.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,D))).next((x=>{_=x;const V=[];for(const L of f){const k=PP(L,_.get(L.key).overlayedDocument);k!=null&&V.push(new ea(L.key,k,bR(k.value.mapValue),ci.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,V,f)})).next((x=>{E=x;const V=x.applyToLocalDocumentSet(_,b);return d.documentOverlayCache.saveOverlays(A,x.batchId,V)}))})).then((()=>({batchId:E.batchId,changes:OR(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,d){let p=c.Ru[c.currentUser.toKey()];p||(p=new mt(Me)),p=p.insert(f,d),c.Ru[c.currentUser.toKey()]=p})(r,a.batchId,n),await kc(r,a.changes),await Xd(r.remoteStore)}catch(a){const l=$v(a,"Failed to persist write");n.reject(l)}}async function dC(t,e){const n=Re(t);try{const r=await OL(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Eu.get(l);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?$e(c.lu,14607):a.removedDocuments.size>0&&($e(c.lu,42227),c.lu=!1))})),await kc(n,r,e)}catch(r){await Il(r)}}function eS(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Pu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const d=Re(c);d.onlineState=f;let p=!1;d.queries.forEach(((y,_)=>{for(const E of _.wa)E.va(f)&&(p=!0)})),p&&Xv(d)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E4(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Eu.get(e),l=a&&a.key;if(l){let c=new mt(ye.comparator);c=c.insert(l,cn.newNoDocument(l,Se.min()));const f=je().add(l),d=new $d(Se.min(),new Map,new mt(Me),c,f);await dC(r,d),r.du=r.du.remove(l),r.Eu.delete(e),Jv(r)}else await xy(r.localStore,e,!1).then((()=>Ny(r,e,n))).catch(Il)}async function w4(t,e){const n=Re(t),r=e.batch.batchId;try{const a=await ML(n.localStore,e);pC(n,r,null),mC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,a)}catch(a){await Il(a)}}async function b4(t,e,n){const r=Re(t);try{const a=await(function(c,f){const d=Re(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,f).next((_=>($e(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);pC(r,e,n),mC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kc(r,a)}catch(a){await Il(a)}}function mC(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function pC(t,e,n){const r=Re(t);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function Ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||gC(t,r)}))}function gC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Jv(t))}function tS(t,e,n){for(const r of n)r instanceof cC?(t.Au.addReference(r.key,e),S4(t,r)):r instanceof hC?(de(Zv,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||gC(t,r.key)):we(19791,{yu:r})}function S4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(de(Zv,"New document in limbo: "+n),t.Iu.add(r),Jv(t))}function Jv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ye(tt.fromString(e)),r=t.mu.next();t.Eu.set(r,new d4(n)),t.du=t.du.insert(n,r),rC(t.remoteStore,new Us(Hi(Fd(n.path)),r,"TargetPurposeLimboResolution",Ud.ue))}}async function kc(t,e,n){const r=Re(t),a=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((f,d)=>{c.push(r.gu(d,e,n).then((p=>{var y;if((p||n)&&r.isPrimaryClient){const _=p?!p.fromCache:(y=n?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){a.push(p);const _=Bv.Es(d.targetId,p);l.push(_)}})))})),await Promise.all(c),r.hu.J_(a),await(async function(d,p){const y=Re(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ae.forEach(p,(E=>ae.forEach(E.Is,(A=>y.persistence.referenceDelegate.addReference(_,E.targetId,A))).next((()=>ae.forEach(E.ds,(A=>y.persistence.referenceDelegate.removeReference(_,E.targetId,A)))))))))}catch(_){if(!Dl(_))throw _;de(zv,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const A=y.Fs.get(E),D=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(D);y.Fs=y.Fs.insert(E,b)}}})(r.localStore,l))}async function A4(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){de(Zv,"User change. New user:",e.toKey());const r=await eC(n.localStore,e);n.currentUser=e,(function(l,c){l.Vu.forEach((f=>{f.forEach((d=>{d.reject(new he(ne.CANCELLED,c))}))})),l.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kc(n,r.Bs)}}function R4(t,e){const n=Re(t),r=n.Eu.get(e);if(r&&r.lu)return je().add(r.key);{let a=je();const l=n.Tu.get(e);if(!l)return a;for(const c of l){const f=n.Pu.get(c);a=a.unionWith(f.view.tu)}return a}}function yC(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E4.bind(null,e),e.hu.J_=u4.bind(null,e.eventManager),e.hu.pu=c4.bind(null,e.eventManager),e}function C4(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return NL(this.persistence,new xL,e.initialUser,this.serializer)}Du(e){return new JR(jv.Vi,this.serializer)}bu(e){return new UL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class x4 extends gd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){$e(this.persistence.referenceDelegate instanceof md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dL(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new JR((r=>md.Vi(r,n)),this.serializer)}}class My{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A4.bind(null,this.syncEngine),await a4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new l4})()}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),r=(function(l){return new HL(l)})(e.databaseInfo);return(function(l,c,f,d){return new $L(l,c,f,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,l,c,f){return new QL(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>eS(this.syncEngine,n,0)),(function(){return Yb.C()?new Yb:new jL})())}createSyncEngine(e,n){return(function(a,l,c,f,d,p,y){const _=new m4(a,l,c,f,d,p);return y&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const l=Re(a);de(Xa,"RemoteStore shutting down."),l.Ia.add(5),await Vc(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}My.provider={build:()=>new My};class e0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ys="FirestoreClient";class I4{constructor(e,n,r,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{de(Ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(de(Ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$v(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress(),de(Ys,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await eC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{Fs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Fs("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),t._offlineComponents=e}async function nS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await D4(t);de(Ys,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Xb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>Xb(e.remoteStore,a))),t._onlineComponents=e}async function D4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Ys,"Using user provided OfflineComponentProvider");try{await Lg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await Lg(t,new gd)}}else de(Ys,"Using default OfflineComponentProvider"),await Lg(t,new x4(void 0));return t._offlineComponents}async function vC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Ys,"Using user provided OnlineComponentProvider"),await nS(t,t._uninitializedComponentsProvider._online)):(de(Ys,"Using default OnlineComponentProvider"),await nS(t,new My))),t._onlineComponents}function N4(t){return vC(t).then((e=>e.syncEngine))}async function yd(t){const e=await vC(t),n=e.eventManager;return n.onListen=p4.bind(null,e.syncEngine),n.onUnlisten=v4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=g4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_4.bind(null,e.syncEngine),n}function M4(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new e0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_)));const A=E.docs.has(f);!A&&E.fromCache?p.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(Fd(f.path),y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await yd(t),t.asyncQueue,e,n,r))),r.promise}function O4(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new e0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_))),E.fromCache&&d.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(f,y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await yd(t),t.asyncQueue,e,n,r))),r.promise}function _C(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const iS=new Map;const TC="firestore.googleapis.com",rS=!0;class sS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TC,this.ssl=rS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hL)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_C((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Bk;switch(r.type){case"firstParty":return new qk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=iS.get(n);r&&(de("ComponentProvider","Removing Datastore"),iS.delete(n),r.terminate())})(this),Promise.resolve()}}function V4(t,e,n,r={}){var a;t=On(t,Wd);const l=Zs(e),c=t._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;l&&(hv(`https://${d}`),fv("Firestore",!0)),c.host!==TC&&c.host!==d&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:d,ssl:l,emulatorOptions:r});if(!$a(p,f)&&(t._setSettings(p),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=un.MOCK_USER;else{y=_1(r.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(E)}t._authCredentials=new zk(new cR(y,_))}}class Zi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Nc(n,Tt._jsonSchema))return new Tt(e,r||null,new ye(tt.fromString(n.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:kt("string",Tt._jsonSchemaVersion),referencePath:kt("string")};class zs extends Zi{constructor(e,n,r){super(e,n,Fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ye(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function Ti(t,e,...n){if(t=ot(t),fR("collection","path",e),t instanceof Wd){const r=tt.fromString(e,...n);return _b(r),new zs(t,null,r)}{if(!(t instanceof Tt||t instanceof zs))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return _b(r),new zs(t.firestore,null,r)}}function Dn(t,e,...n){if(t=ot(t),arguments.length===1&&(e=Cv.newId()),fR("doc","path",e),t instanceof Wd){const r=tt.fromString(e,...n);return vb(r),new Tt(t,null,new ye(r))}{if(!(t instanceof Tt||t instanceof zs))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return vb(r),new Tt(t.firestore,t instanceof zs?t.converter:null,new ye(r))}}const aS="AsyncQueue";class oS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nC(this,"async_queue_retry"),this.oc=()=>{const r=Pg();r&&de(aS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Pg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Pg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Mr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Dl(e))throw e;de(aS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Ur("INTERNAL UNHANDLED ERROR: ",lS(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=Kv.createAndSchedule(this,e,n,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&we(47125,{hc:lS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function lS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function uS(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class Br extends Wd{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new oS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oS(e),this._firestoreClient=void 0,await e}}}function k4(t,e){const n=typeof t=="object"?t:Od(),r=typeof t=="string"?t:ld,a=no(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=g1("firestore");l&&V4(a,...l)}return a}function Zd(t){if(t._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||P4(t),t._firestoreClient}function P4(t){var e,n,r;const a=t._freezeSettings(),l=(function(f,d,p,y){return new aP(f,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,_C(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new I4(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(f){const d=f?._online.build();return{_offline:f?._offline.build(d),_online:d}})(t._componentsProvider))}class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(nn.fromBase64String(e))}catch(n){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ui(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nc(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:kt("string",ui._jsonSchemaVersion),bytes:kt("string")};class Jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class em{constructor(e){this._methodName=e}}class Gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Nc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:kt("string",Gi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};class Ki{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nc(e,Ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ki(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:kt("string",Ki._jsonSchemaVersion),vectorValues:kt("object")};const L4=/^__.*__$/;class U4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ea(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}class EC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ea(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:t})}}class t0{constructor(e,n,r,a,l,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return vd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wC(this.Ec)&&L4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class j4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yd(e)}Dc(e,n,r,a=!1){return new t0({Ec:e,methodName:n,bc:r,path:tn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(t){const e=t._freezeSettings(),n=Yd(t._databaseId);return new j4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bC(t,e,n,r,a,l={}){const c=t.Dc(l.merge||l.mergeFields?2:0,e,n,a);i0("Data must be an object, but it was:",c,r);const f=AC(r,c);let d,p;if(l.merge)d=new Hn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const E=Oy(e,_,n);if(!c.contains(E))throw new he(ne.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CC(y,E)||y.push(E)}d=new Hn(y),p=c.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=c.fieldTransforms;return new U4(new Nn(f),d,p)}class tm extends em{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tm}}class n0 extends em{_toFieldTransform(e){return new MP(e.path,new dc)}isEqual(e){return e instanceof n0}}function B4(t,e,n,r){const a=t.Dc(1,e,n);i0("Data must be an object, but it was:",a,r);const l=[],c=Nn.empty();Js(r,((d,p)=>{const y=r0(e,d,n);p=ot(p);const _=a.gc(y);if(p instanceof tm)l.push(y);else{const E=Lc(p,_);E!=null&&(l.push(y),c.set(y,E))}}));const f=new Hn(l);return new EC(c,f,a.fieldTransforms)}function z4(t,e,n,r,a,l){const c=t.Dc(1,e,n),f=[Oy(e,r,n)],d=[a];if(l.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Oy(e,l[E])),d.push(l[E+1]);const p=[],y=Nn.empty();for(let E=f.length-1;E>=0;--E)if(!CC(p,f[E])){const A=f[E];let D=d[E];D=ot(D);const b=c.gc(A);if(D instanceof tm)p.push(A);else{const x=Lc(D,b);x!=null&&(p.push(A),y.set(A,x))}}const _=new Hn(p);return new EC(y,_,c.fieldTransforms)}function SC(t,e,n,r=!1){return Lc(n,t.Dc(r?4:3,e))}function Lc(t,e){if(RC(t=ot(t)))return i0("Unsupported field value:",e,t),AC(t,e);if(t instanceof em)return(function(r,a){if(!wC(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let d=Lc(f,a.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(t,e)}return(function(r,a){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=st.fromDate(r);return{timestampValue:dd(a.serializer,l)}}if(r instanceof st){const l=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dd(a.serializer,l)}}if(r instanceof Gi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ui)return{bytesValue:GR(a.serializer,r._byteString)};if(r instanceof Tt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ki)return(function(c,f){return{mapValue:{fields:{[ER]:{stringValue:wR},[ud]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.wc("VectorValues must only contain numeric values.");return Ov(f.serializer,p)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${Ld(r)}`)})(t,e)}function AC(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,((r,a)=>{const l=Lc(a,e.Vc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function RC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Gi||t instanceof ui||t instanceof Tt||t instanceof em||t instanceof Ki)}function i0(t,e,n){if(!RC(n)||!dR(n)){const r=Ld(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Oy(t,e,n){if((e=ot(e))instanceof Jd)return e._internalPath;if(typeof e=="string")return r0(t,e);throw vd("Field path arguments must be of type string or ",t,!1,void 0,n)}const F4=new RegExp("[~\\*/\\[\\]]");function r0(t,e,n){if(e.search(F4)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jd(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vd(t,e,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${a}`),d+=")"),new he(ne.INVALID_ARGUMENT,f+t+d)}function CC(t,e){return t.some((n=>n.isEqual(e)))}class s0{constructor(e,n,r,a,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H4 extends s0{data(){return super.data()}}function nm(t,e){return typeof e=="string"?r0(t,e):e instanceof Jd?e._internalPath:e._delegate._internalPath}function xC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class im extends a0{}function Pa(t,e,...n){let r=[];e instanceof a0&&r.push(e),r=r.concat(n),(function(l){const c=l.filter((d=>d instanceof jc)).length,f=l.filter((d=>d instanceof Uc)).length;if(c>1||c>0&&f>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class Uc extends im{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uc(e,n,r)}_apply(e){const n=this._parse(e);return IC(e._query,n),new Zi(e.firestore,e.converter,by(e._query,n))}_parse(e){const n=Pc(e.firestore);return(function(l,c,f,d,p,y,_){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){fS(_,y);const D=[];for(const b of _)D.push(hS(d,l,b));E={arrayValue:{values:D}}}else E=hS(d,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||fS(_,y),E=SC(f,c,_,y==="in"||y==="not-in");return Vt.create(p,y,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ns(t,e,n){const r=e,a=nm("where",t);return Uc._create(a,r,n)}class jc extends a0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jc(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const d of f)IC(c,d),c=by(c,d)})(e._query,n),new Zi(e.firestore,e.converter,by(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function q4(...t){return t.forEach((e=>$4("or",e))),jc._create("or",t)}class o0 extends im{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new o0(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(l,c)})(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new ro(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function _d(t,e="asc"){const n=e,r=nm("orderBy",t);return o0._create(r,n)}class l0 extends im{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){return new Zi(e.firestore,e.converter,hd(e._query,this._limit,this._limitType))}}function cS(t){return l0._create("limit",t,"F")}class u0 extends im{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=K4(e,this.type,this._docOrFields,this._inclusive);return new Zi(e.firestore,e.converter,(function(a,l){return new ro(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,n))}}function G4(...t){return u0._create("startAfter",t,!1)}function K4(t,e,n,r){if(n[0]=ot(n[0]),n[0]instanceof s0)return(function(l,c,f,d,p){if(!d)throw new he(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const _ of dl(l))if(_.field.isKeyField())y.push(cd(c,d.key));else{const E=d.data.field(_.field);if(Bd(E))throw new he(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=_.field.canonicalString();throw new he(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new _l(y,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=Pc(t.firestore);return(function(c,f,d,p,y,_){const E=c.explicitOrderBy;if(y.length>E.length)throw new he(ne.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let D=0;D<y.length;D++){const b=y[D];if(E[D].field.isKeyField()){if(typeof b!="string")throw new he(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof b}`);if(!Mv(c)&&b.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${b}' contains a slash.`);const x=c.path.child(tt.fromString(b));if(!ye.isDocumentKey(x))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const V=new ye(x);A.push(cd(f,V))}else{const x=SC(d,p,b);A.push(x)}}return new _l(A,_)})(t._query,t.firestore._databaseId,a,e,n,r)}}function hS(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&n.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tt.fromString(n));if(!ye.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cd(t,new ye(r))}if(n instanceof Tt)return cd(t,n._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function fS(t,e){if(!Array.isArray(t)||t.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IC(t,e){const n=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $4(t,e){if(!(e instanceof Uc||e instanceof jc))throw new he(ne.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Y4{convertValue(e,n="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Js(e,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(e){var n,r,a;const l=(a=(r=(n=e.fields)===null||n===void 0?void 0:n[ud].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((c=>Ct(c.doubleValue)));return new Ki(l)}convertGeoPoint(e){return new Gi(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){const n=qs(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);$e(WR(r),9688,{name:e});const a=new cc(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(n)||Ur(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function DC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fa extends s0{constructor(e,n,r,a,l,c){super(e,n,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fa._jsonSchema={type:kt("string",Fa._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Yf extends Fa{data(e={}){return super.data(e)}}class Ha{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new qu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Yf(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const d=new Yf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new qu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new Yf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new qu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:Q4(f.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}function gc(t){t=On(t,Tt);const e=On(t.firestore,Br);return M4(Zd(e),t._key).then((n=>NC(e,t,n)))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:kt("string",Ha._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class c0 extends Y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Gu(t){t=On(t,Zi);const e=On(t.firestore,Br),n=Zd(e),r=new c0(e);return xC(t._query),O4(n,t._query).then((a=>new Ha(e,r,t,a)))}function Vy(t,e,n){t=On(t,Tt);const r=On(t.firestore,Br),a=DC(t.converter,e,n);return rm(r,[bC(Pc(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ci.none())])}function ky(t,e,n,...r){t=On(t,Tt);const a=On(t.firestore,Br),l=Pc(a);let c;return c=typeof(e=ot(e))=="string"||e instanceof Jd?z4(l,"updateDoc",t._key,e,n,r):B4(l,"updateDoc",t._key,e),rm(a,[c.toMutation(t._key,ci.exists(!0))])}function Ug(t){return rm(On(t.firestore,Br),[new Vv(t._key,ci.none())])}function Td(t,e){const n=On(t.firestore,Br),r=Dn(t),a=DC(t.converter,e);return rm(n,[bC(Pc(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,ci.exists(!1))]).then((()=>r))}function h0(t,...e){var n,r,a;t=ot(t);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||uS(e[c])||(l=e[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(uS(e[c])){const _=e[c];e[c]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[c+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[c+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let d,p,y;if(t instanceof Tt)p=On(t.firestore,Br),y=Fd(t._key.path),d={next:_=>{e[c]&&e[c](NC(p,t,_))},error:e[c+1],complete:e[c+2]};else{const _=On(t,Zi);p=On(_.firestore,Br),y=_._query;const E=new c0(p);d={next:A=>{e[c]&&e[c](new Ha(p,E,_,A))},error:e[c+1],complete:e[c+2]},xC(t._query)}return(function(E,A,D,b){const x=new e0(b),V=new Wv(A,x,D);return E.asyncQueue.enqueueAndForget((async()=>Yv(await yd(E),V))),()=>{x.Ou(),E.asyncQueue.enqueueAndForget((async()=>Qv(await yd(E),V)))}})(Zd(p),y,f,d)}function rm(t,e){return(function(r,a){const l=new Mr;return r.asyncQueue.enqueueAndForget((async()=>T4(await N4(r),a,l))),l.promise})(Zd(t),e)}function NC(t,e,n){const r=n.docs.get(e._key),a=new c0(t);return new Fa(t,a,e._key,r,new qu(n.hasPendingWrites,n.fromCache),e.converter)}function yc(){return new n0("serverTimestamp")}(function(e,n=!0){(function(a){xl=a})(io),bi(new hi("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new Br(new Fk(r.getProvider("auth-internal")),new Gk(c,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(p.options.projectId,y)})(c,a),c);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Mn(db,mb,e),Mn(db,mb,"esm2017")})();const MC="firebasestorage.googleapis.com",OC="storageBucket",X4=120*1e3,W4=600*1e3;class wt extends Ri{constructor(e,n,r=0){super(jg(e),`Firebase Storage: ${n} (${jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function jg(t){return"storage/"+t}function f0(){const t="An unknown error occurred, please check the error payload for server response.";return new wt(Et.UNKNOWN,t)}function Z4(t){return new wt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function J4(t){return new wt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(Et.UNAUTHENTICATED,t)}function t3(){return new wt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n3(t){return new wt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i3(){return new wt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r3(){return new wt(Et.CANCELED,"User canceled the upload/download.")}function s3(t){return new wt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function a3(t){return new wt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function o3(){return new wt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OC+"' property when initializing the app?")}function l3(){return new wt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u3(){return new wt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c3(t){return new wt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Py(t){return new wt(Et.INVALID_ARGUMENT,t)}function VC(){return new wt(Et.APP_DELETED,"The Firebase app was deleted.")}function h3(t){return new wt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ec(t,e){return new wt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uu(t){throw new wt(Et.INTERNAL_ERROR,"Internal error: "+t)}class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw a3(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),d={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${_}/${y}/b/${a}/o${E}`,"i"),D={bucket:1,path:3},b=n===MC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",V=new RegExp(`^https?://${b}/${a}/${x}`,"i"),k=[{regex:f,indices:d,postModify:l},{regex:A,indices:D,postModify:p},{regex:V,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<k.length;K++){const q=k[K],Y=q.regex.exec(e);if(Y){const R=Y[q.indices.bucket];let S=Y[q.indices.path];S||(S=""),r=new qn(R,S),q.postModify(r);break}}if(r==null)throw s3(e);return r}}class f3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function d3(t,e,n){let r=1,a=null,l=null,c=!1,f=0;function d(){return f===2}let p=!1;function y(...x){p||(p=!0,e.apply(null,x))}function _(x){a=setTimeout(()=>{a=null,t(A,d())},x)}function E(){l&&clearTimeout(l)}function A(x,...V){if(p){E();return}if(x){E(),y.call(null,x,...V);return}if(d()||c){E(),y.call(null,x,...V);return}r<64&&(r*=2);let k;f===1?(f=2,k=0):k=(r+Math.random())*1e3,_(k)}let D=!1;function b(x){D||(D=!0,E(),!p&&(a!==null?(x||(f=2),clearTimeout(a),_(0)):x||(f=1)))}return _(0),l=setTimeout(()=>{c=!0,b(!0)},n),b}function m3(t){t(!1)}function p3(t){return t!==void 0}function g3(t){return typeof t=="object"&&!Array.isArray(t)}function d0(t){return typeof t=="string"||t instanceof String}function dS(t){return m0()&&t instanceof Blob}function m0(){return typeof Blob<"u"}function mS(t,e,n,r){if(r<e)throw Py(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Py(`Invalid value for '${t}'. Expected ${n} or less.`)}function p0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function kC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var qa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qa||(qa={}));function y3(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}class v3{constructor(e,n,r,a,l,c,f,d,p,y,_,E=!0,A=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=_,this.retry=E,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,b)=>{this.resolve_=D,this.reject_=b,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new Cf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const d=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===qa.NO_ERROR,d=l.getStatus();if(!f||y3(d,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===qa.ABORT;r(!1,new Cf(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new Cf(p,l))})},n=(r,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(f,f.getResponse());p3(d)?l(d):l()}catch(d){c(d)}else if(f!==null){const d=f0();d.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,d)):c(d)}else if(a.canceled){const d=this.appDelete_?VC():r3();c(d)}else{const d=i3();c(d)}};this.canceled_?n(!1,new Cf(!1,null,!0)):this.backoffId_=d3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function T3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function w3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b3(t,e,n,r,a,l,c=!0,f=!1){const d=kC(t.urlParams),p=t.url+d,y=Object.assign({},t.headers);return E3(y,e),_3(y,n),T3(y,l),w3(y,r),new v3(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,f)}function S3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A3(...t){const e=S3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(m0())return new Blob(t);throw new wt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function R3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function C3(t){if(typeof atob>"u")throw c3("base-64");return atob(t)}const zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bg{constructor(e,n){this.data=e,this.contentType=n||null}}function x3(t,e){switch(t){case zi.RAW:return new Bg(PC(e));case zi.BASE64:case zi.BASE64URL:return new Bg(LC(t,e));case zi.DATA_URL:return new Bg(D3(e),N3(e))}throw f0()}function PC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=t.charCodeAt(++n);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function I3(t){let e;try{e=decodeURIComponent(t)}catch{throw ec(zi.DATA_URL,"Malformed data URL.")}return PC(e)}function LC(t,e){switch(t){case zi.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw ec(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zi.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw ec(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=C3(e)}catch(a){throw a.message.includes("polyfill")?a:ec(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class UC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ec(zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=M3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D3(t){const e=new UC(t);return e.base64?LC(zi.BASE64,e.rest):I3(e.rest)}function N3(t){return new UC(t).contentType}function M3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Ls{constructor(e,n){let r=0,a="";dS(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(dS(this.data_)){const r=this.data_,a=R3(r,e,n);return a===null?null:new Ls(a)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ls(r,!0)}}static getBlob(...e){if(m0()){const n=e.map(r=>r instanceof Ls?r.data_:r);return new Ls(A3.apply(null,n))}else{const n=e.map(c=>d0(c)?x3(zi.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let l=0;return n.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new Ls(a,!0)}}uploadData(){return this.data_}}function jC(t){let e;try{e=JSON.parse(t)}catch{return null}return g3(e)?e:null}function O3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function V3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function BC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function k3(t,e){return e}class Tn{constructor(e,n,r,a){this.server=e,this.local=n||e,this.writable=!!r,this.xform=a||k3}}let xf=null;function P3(t){return!d0(t)||t.length<2?t:BC(t)}function zC(){if(xf)return xf;const t=[];t.push(new Tn("bucket")),t.push(new Tn("generation")),t.push(new Tn("metageneration")),t.push(new Tn("name","fullPath",!0));function e(l,c){return P3(c)}const n=new Tn("name");n.xform=e,t.push(n);function r(l,c){return c!==void 0?Number(c):c}const a=new Tn("size");return a.xform=r,t.push(a),t.push(new Tn("timeCreated")),t.push(new Tn("updated")),t.push(new Tn("md5Hash",null,!0)),t.push(new Tn("cacheControl",null,!0)),t.push(new Tn("contentDisposition",null,!0)),t.push(new Tn("contentEncoding",null,!0)),t.push(new Tn("contentLanguage",null,!0)),t.push(new Tn("contentType",null,!0)),t.push(new Tn("metadata","customMetadata",!0)),xf=t,xf}function L3(t,e){function n(){const r=t.bucket,a=t.fullPath,l=new qn(r,a);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function U3(t,e,n){const r={};r.type="file";const a=n.length;for(let l=0;l<a;l++){const c=n[l];r[c.local]=c.xform(r,e[c.server])}return L3(r,t),r}function FC(t,e,n){const r=jC(e);return r===null?null:U3(t,r,n)}function j3(t,e,n,r){const a=jC(e);if(a===null||!d0(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=t.bucket,_=t.fullPath,E="/b/"+c(y)+"/o/"+c(_),A=p0(E,n,r),D=kC({alt:"media",token:p});return A+D})[0]}function B3(t,e){const n={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class HC{constructor(e,n,r,a){this.url=e,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qC(t){if(!t)throw f0()}function z3(t,e){function n(r,a){const l=FC(t,a,e);return qC(l!==null),l}return n}function F3(t,e){function n(r,a){const l=FC(t,a,e);return qC(l!==null),j3(l,a,t.host,t._protocol)}return n}function GC(t){function e(n,r){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=t3():a=e3():n.getStatus()===402?a=J4(t.bucket):n.getStatus()===403?a=n3(t.path):a=r,a.status=n.getStatus(),a.serverResponse=r.serverResponse,a}return e}function H3(t){const e=GC(t);function n(r,a){let l=e(r,a);return r.getStatus()===404&&(l=Z4(t.path)),l.serverResponse=a.serverResponse,l}return n}function q3(t,e,n){const r=e.fullServerUrl(),a=p0(r,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,f=new HC(a,l,F3(t,n),c);return f.errorHandler=H3(e),f}function G3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function K3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=G3(null,e)),r}function $3(t,e,n,r,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let k="";for(let K=0;K<2;K++)k=k+Math.random().toString().slice(2);return k}const d=f();c["Content-Type"]="multipart/related; boundary="+d;const p=K3(e,r,a),y=B3(p,n),_="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+d+"--",A=Ls.getBlob(_,r,E);if(A===null)throw l3();const D={name:p.fullPath},b=p0(l,t.host,t._protocol),x="POST",V=t.maxUploadRetryTime,L=new HC(b,x,z3(t,n),V);return L.urlParams=D,L.headers=c,L.body=A.uploadData(),L.errorHandler=GC(e),L}class Y3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,a,l){if(this.sent_)throw Uu("cannot .send() more than once");if(Zs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q3 extends Y3{initXhr(){this.xhr_.responseType="text"}}function KC(){return new Q3}class Wa{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wa(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BC(this._location.path)}get storage(){return this._service}get parent(){const e=O3(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new Wa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h3(e)}}function X3(t,e,n){t._throwIfRoot("uploadBytes");const r=$3(t.storage,t._location,zC(),new Ls(e,!0),n);return t.storage.makeRequestWithTokens(r,KC).then(a=>({metadata:a,ref:t}))}function W3(t){t._throwIfRoot("getDownloadURL");const e=q3(t.storage,t._location,zC());return t.storage.makeRequestWithTokens(e,KC).then(n=>{if(n===null)throw u3();return n})}function Z3(t,e){const n=V3(t._location.path,e),r=new qn(t._location.bucket,n);return new Wa(t.storage,r)}function J3(t){return/^[A-Za-z]+:\/\//.test(t)}function e6(t,e){return new Wa(t,e)}function $C(t,e){if(t instanceof g0){const n=t;if(n._bucket==null)throw o3();const r=new Wa(n,n._bucket);return e!=null?$C(r,e):r}else return e!==void 0?Z3(t,e):t}function t6(t,e){if(e&&J3(e)){if(t instanceof g0)return e6(t,e);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(t,e)}function pS(t,e){const n=e?.[OC];return n==null?null:qn.makeFromBucketSpec(n,t)}function n6(t,e,n,r={}){t.host=`${e}:${n}`;const a=Zs(e);a&&(hv(`https://${t.host}/b`),fv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(t._overrideAuthToken=typeof l=="string"?l:_1(l,t.app.options.projectId))}class g0{constructor(e,n,r,a,l,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=MC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X4,this._maxUploadRetryTime=W4,this._requests=new Set,a!=null?this._bucket=qn.makeFromBucketSpec(a,this._host):this._bucket=pS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=pS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wa(this,e)}_makeRequest(e,n,r,a,l=!0){if(this._deleted)return new f3(VC());{const c=b3(e,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const gS="@firebase/storage",yS="0.13.14";const YC="storage";function QC(t,e,n){return t=ot(t),X3(t,e,n)}function XC(t){return t=ot(t),W3(t)}function WC(t,e){return t=ot(t),t6(t,e)}function i6(t=Od(),e){t=ot(t);const r=no(t,YC).getImmediate({identifier:e}),a=g1("storage");return a&&r6(r,...a),r}function r6(t,e,n,r={}){n6(t,e,n,r)}function s6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new g0(n,r,a,e,io)}function a6(){bi(new hi(YC,s6,"PUBLIC").setMultipleInstances(!0)),Mn(gS,yS,""),Mn(gS,yS,"esm2017")}a6();var o6="firebase",l6="11.10.0";Mn(o6,l6,"app");const ZC="@firebase/installations",y0="0.6.18";const JC=1e4,e2=`w:${y0}`,t2="FIS_v2",u6="https://firebaseinstallations.googleapis.com/v1",c6=3600*1e3,h6="installations",f6="Installations";const d6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Za=new to(h6,f6,d6);function n2(t){return t instanceof Ri&&t.code.includes("request-failed")}function i2({projectId:t}){return`${u6}/projects/${t}/installations`}function r2(t){return{token:t.token,requestStatus:2,expiresIn:p6(t.expiresIn),creationTime:Date.now()}}async function s2(t,e){const r=(await e.json()).error;return Za.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function a2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function m6(t,{refreshToken:e}){const n=a2(t);return n.append("Authorization",g6(e)),n}async function o2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function p6(t){return Number(t.replace("s","000"))}function g6(t){return`${t2} ${t}`}async function y6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=i2(t),a=a2(t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:n,authVersion:t2,appId:t.appId,sdkVersion:e2},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await o2(()=>fetch(r,f));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:r2(p.authToken)}}else throw await s2("Create Installation",d)}function l2(t){return new Promise(e=>{setTimeout(e,t)})}function v6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const _6=/^[cdef][\w-]{21}$/,Ly="";function T6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=E6(t);return _6.test(n)?n:Ly}catch{return Ly}}function E6(t){return v6(t).substr(0,22)}function sm(t){return`${t.appName}!${t.appId}`}const u2=new Map;function c2(t,e){const n=sm(t);h2(n,e),w6(n,e)}function h2(t,e){const n=u2.get(t);if(n)for(const r of n)r(e)}function w6(t,e){const n=b6();n&&n.postMessage({key:t,fid:e}),S6()}let ja=null;function b6(){return!ja&&"BroadcastChannel"in self&&(ja=new BroadcastChannel("[Firebase] FID Change"),ja.onmessage=t=>{h2(t.data.key,t.data.fid)}),ja}function S6(){u2.size===0&&ja&&(ja.close(),ja=null)}const A6="firebase-installations-database",R6=1,Ja="firebase-installations-store";let zg=null;function v0(){return zg||(zg=Md(A6,R6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ja)}}})),zg}async function Ed(t,e){const n=sm(t),a=(await v0()).transaction(Ja,"readwrite"),l=a.objectStore(Ja),c=await l.get(n);return await l.put(e,n),await a.done,(!c||c.fid!==e.fid)&&c2(t,e.fid),e}async function f2(t){const e=sm(t),r=(await v0()).transaction(Ja,"readwrite");await r.objectStore(Ja).delete(e),await r.done}async function am(t,e){const n=sm(t),a=(await v0()).transaction(Ja,"readwrite"),l=a.objectStore(Ja),c=await l.get(n),f=e(c);return f===void 0?await l.delete(n):await l.put(f,n),await a.done,f&&(!c||c.fid!==f.fid)&&c2(t,f.fid),f}async function _0(t){let e;const n=await am(t.appConfig,r=>{const a=C6(r),l=x6(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===Ly?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function C6(t){const e=t||{fid:T6(),registrationStatus:0};return d2(e)}function x6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Za.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=I6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:D6(t)}:{installationEntry:e}}async function I6(t,e){try{const n=await y6(t,e);return Ed(t.appConfig,n)}catch(n){throw n2(n)&&n.customData.serverCode===409?await f2(t.appConfig):await Ed(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function D6(t){let e=await vS(t.appConfig);for(;e.registrationStatus===1;)await l2(100),e=await vS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _0(t);return r||n}return e}function vS(t){return am(t,e=>{if(!e)throw Za.create("installation-not-found");return d2(e)})}function d2(t){return N6(t)?{fid:t.fid,registrationStatus:0}:t}function N6(t){return t.registrationStatus===1&&t.registrationTime+JC<Date.now()}async function M6({appConfig:t,heartbeatServiceProvider:e},n){const r=O6(t,n),a=m6(t,n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:e2,appId:t.appId}},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await o2(()=>fetch(r,f));if(d.ok){const p=await d.json();return r2(p)}else throw await s2("Generate Auth Token",d)}function O6(t,{fid:e}){return`${i2(t)}/${e}/authTokens:generate`}async function T0(t,e=!1){let n;const r=await am(t.appConfig,l=>{if(!m2(l))throw Za.create("not-registered");const c=l.authToken;if(!e&&P6(c))return l;if(c.requestStatus===1)return n=V6(t,e),l;{if(!navigator.onLine)throw Za.create("app-offline");const f=U6(l);return n=k6(t,f),f}});return n?await n:r.authToken}async function V6(t,e){let n=await _S(t.appConfig);for(;n.authToken.requestStatus===1;)await l2(100),n=await _S(t.appConfig);const r=n.authToken;return r.requestStatus===0?T0(t,e):r}function _S(t){return am(t,e=>{if(!m2(e))throw Za.create("not-registered");const n=e.authToken;return j6(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function k6(t,e){try{const n=await M6(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ed(t.appConfig,r),n}catch(n){if(n2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await f2(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ed(t.appConfig,r)}throw n}}function m2(t){return t!==void 0&&t.registrationStatus===2}function P6(t){return t.requestStatus===2&&!L6(t)}function L6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+c6}function U6(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function j6(t){return t.requestStatus===1&&t.requestTime+JC<Date.now()}async function B6(t){const e=t,{installationEntry:n,registrationPromise:r}=await _0(e);return r?r.catch(console.error):T0(e).catch(console.error),n.fid}async function z6(t,e=!1){const n=t;return await F6(n),(await T0(n,e)).token}async function F6(t){const{registrationPromise:e}=await _0(t);e&&await e}function H6(t){if(!t||!t.options)throw Fg("App Configuration");if(!t.name)throw Fg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fg(t){return Za.create("missing-app-config-values",{valueName:t})}const p2="installations",q6="installations-internal",G6=t=>{const e=t.getProvider("app").getImmediate(),n=H6(e),r=no(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},K6=t=>{const e=t.getProvider("app").getImmediate(),n=no(e,p2).getImmediate();return{getId:()=>B6(n),getToken:a=>z6(n,a)}};function $6(){bi(new hi(p2,G6,"PUBLIC")),bi(new hi(q6,K6,"PRIVATE"))}$6();Mn(ZC,y0);Mn(ZC,y0,"esm2017");const Y6="/firebase-messaging-sw.js",Q6="/firebase-cloud-messaging-push-scope",g2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",X6="https://fcmregistrations.googleapis.com/v1",y2="google.c.a.c_id",W6="google.c.a.c_l",Z6="google.c.a.ts",J6="google.c.a.e",TS=1e4;var ES;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ES||(ES={}));var vc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(vc||(vc={}));function Rr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function e5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),a=new Uint8Array(r.length);for(let l=0;l<r.length;++l)a[l]=r.charCodeAt(l);return a}const Hg="fcm_token_details_db",t5=5,wS="fcm_token_object_Store";async function n5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Hg))return null;let e=null;return(await Md(Hg,t5,{upgrade:async(r,a,l,c)=>{var f;if(a<2||!r.objectStoreNames.contains(wS))return;const d=c.objectStore(wS),p=await d.index("fcmSenderId").get(t);if(await d.clear(),!!p){if(a===2){const y=p;if(!y.auth||!y.p256dh||!y.endpoint)return;e={token:y.fcmToken,createTime:(f=y.createTime)!==null&&f!==void 0?f:Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Rr(y.vapidKey)}}}else if(a===3){const y=p;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Rr(y.auth),p256dh:Rr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Rr(y.vapidKey)}}}else if(a===4){const y=p;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Rr(y.auth),p256dh:Rr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Rr(y.vapidKey)}}}}}})).close(),await xg(Hg),await xg("fcm_vapid_details_db"),await xg("undefined"),i5(e)?e:null}function i5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const r5="firebase-messaging-database",s5=1,_c="firebase-messaging-store";let qg=null;function v2(){return qg||(qg=Md(r5,s5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_c)}}})),qg}async function a5(t){const e=_2(t),r=await(await v2()).transaction(_c).objectStore(_c).get(e);if(r)return r;{const a=await n5(t.appConfig.senderId);if(a)return await E0(t,a),a}}async function E0(t,e){const n=_2(t),a=(await v2()).transaction(_c,"readwrite");return await a.objectStore(_c).put(e,n),await a.done,e}function _2({appConfig:t}){return t.appId}const o5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},fn=new to("messaging","Messaging",o5);async function l5(t,e){const n=await b0(t),r=T2(e),a={method:"POST",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(w0(t.appConfig),a)).json()}catch(c){throw fn.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-subscribe-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-subscribe-no-token");return l.token}async function u5(t,e){const n=await b0(t),r=T2(e.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(`${w0(t.appConfig)}/${e.token}`,a)).json()}catch(c){throw fn.create("token-update-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-update-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-update-no-token");return l.token}async function c5(t,e){const r={method:"DELETE",headers:await b0(t)};try{const l=await(await fetch(`${w0(t.appConfig)}/${e}`,r)).json();if(l.error){const c=l.error.message;throw fn.create("token-unsubscribe-failed",{errorInfo:c})}}catch(a){throw fn.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function w0({projectId:t}){return`${X6}/projects/${t}/registrations`}async function b0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function T2({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const a={web:{endpoint:n,auth:e,p256dh:t}};return r!==g2&&(a.web.applicationPubKey=r),a}const h5=10080*60*1e3;async function f5(t){const e=await m5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Rr(e.getKey("auth")),p256dh:Rr(e.getKey("p256dh"))},r=await a5(t.firebaseDependencies);if(r){if(p5(r.subscriptionOptions,n))return Date.now()>=r.createTime+h5?d5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await c5(t.firebaseDependencies,r.token)}catch(a){console.warn(a)}return bS(t.firebaseDependencies,n)}else return bS(t.firebaseDependencies,n)}async function d5(t,e){try{const n=await u5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await E0(t.firebaseDependencies,r),n}catch(n){throw n}}async function bS(t,e){const r={token:await l5(t,e),createTime:Date.now(),subscriptionOptions:e};return await E0(t,r),r.token}async function m5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e5(e)})}function p5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,a=e.auth===t.auth,l=e.p256dh===t.p256dh;return n&&r&&a&&l}function SS(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return g5(e,t),y5(e,t),v5(e,t),e}function g5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const a=e.notification.image;a&&(t.notification.image=a);const l=e.notification.icon;l&&(t.notification.icon=l)}function y5(t,e){e.data&&(t.data=e.data)}function v5(t,e){var n,r,a,l,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const f=(a=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&a!==void 0?a:(l=e.notification)===null||l===void 0?void 0:l.click_action;f&&(t.fcmOptions.link=f);const d=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;d&&(t.fcmOptions.analyticsLabel=d)}function _5(t){return typeof t=="object"&&!!t&&y2 in t}function T5(t){if(!t||!t.options)throw Gg("App Configuration Object");if(!t.name)throw Gg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Gg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Gg(t){return fn.create("missing-app-config-values",{valueName:t})}class E5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=T5(e);this.firebaseDependencies={app:e,appConfig:a,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function w5(t){try{t.swRegistration=await navigator.serviceWorker.register(Y6,{scope:Q6}),t.swRegistration.update().catch(()=>{}),await b5(t.swRegistration)}catch(e){throw fn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function b5(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${TS} ms`)),TS),a=t.installing||t.waiting;t.active?(clearTimeout(r),e()):a?a.onstatechange=l=>{var c;((c=l.target)===null||c===void 0?void 0:c.state)==="activated"&&(a.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}async function S5(t,e){if(!e&&!t.swRegistration&&await w5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");t.swRegistration=e}}async function A5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=g2)}async function R5(t,e){if(!navigator)throw fn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw fn.create("permission-blocked");return await A5(t,e?.vapidKey),await S5(t,e?.serviceWorkerRegistration),f5(t)}async function C5(t,e,n){const r=x5(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[y2],message_name:n[W6],message_time:n[Z6],message_device_time:Math.floor(Date.now()/1e3)})}function x5(t){switch(t){case vc.NOTIFICATION_CLICKED:return"notification_open";case vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function I5(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===vc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(SS(n)):t.onMessageHandler.next(SS(n)));const r=n.data;_5(r)&&r[J6]==="1"&&await C5(t,n.messageType,r)}const AS="@firebase/messaging",RS="0.12.22";const D5=t=>{const e=new E5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>I5(e,n)),e},N5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>R5(e,r)}};function M5(){bi(new hi("messaging",D5,"PUBLIC")),bi(new hi("messaging-internal",N5,"PRIVATE")),Mn(AS,RS),Mn(AS,RS,"esm2017")}async function E2(){try{await E1()}catch{return!1}return typeof window<"u"&&T1()&&AM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function O5(t,e){if(!navigator)throw fn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function V5(t=Od()){return E2().then(e=>{if(!e)throw fn.create("unsupported-browser")},e=>{throw fn.create("indexed-db-unsupported")}),no(ot(t),"messaging").getImmediate()}function k5(t,e){return t=ot(t),O5(t,e)}M5();const P5={apiKey:"AIzaSyAIl4vWF73TBXAyI7G_Fw9sxtD63innGag",authDomain:"photo-collage-app-9e42d.firebaseapp.com",projectId:"photo-collage-app-9e42d",storageBucket:"photo-collage-app-9e42d.firebasestorage.app",messagingSenderId:"82565536571",appId:"1:82565536571:web:de4bd1ddc0a4b8ea6bb51e",measurementId:"G-P3Y1KYM0P9"},If=["codethathat@gmail.com","marsha.o.y@gmail.com"],om=S1(P5),ju=Uk(om),w2=new Cr;w2.setCustomParameters({prompt:"select_account"});const ut=k4(om),b2=i6(om),L5=async()=>await E2()?V5(om):null,S2=M.createContext(null);function Bc(){const t=M.useContext(S2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function U5({children:t}){const[e,n]=M.useState(null),[r,a]=M.useState(null),[l,c]=M.useState(!0),[f,d]=M.useState(null),p=e?.email?If.includes(e.email):!1;M.useEffect(()=>CV(ju,async b=>{if(n(b),b&&b.email&&If.includes(b.email)){let x;try{const L=await gc(Dn(ut,"duoboard_users",b.uid));L.exists()&&(x=L.data().customPhotoURL)}catch(L){console.error("Error fetching user document:",L)}const V={uid:b.uid,email:b.email,displayName:b.displayName||"Anonymous",photoURL:b.photoURL||"",customPhotoURL:x,lastSeen:yc()};try{await Vy(Dn(ut,"duoboard_users",b.uid),V,{merge:!0}),a(V),d(null)}catch(L){console.error("Error updating user document:",L),d("Failed to update user profile")}}else b&&b.email&&!If.includes(b.email)?(d("Your email is not authorized to use this app."),a(null),await Mg(ju)):(a(null),d(null));c(!1)}),[]);const A={user:r,firebaseUser:e,loading:l,error:f,signInWithGoogle:async()=>{c(!0),d(null);try{const D=await $V(ju,w2);D.user.email&&!If.includes(D.user.email)&&(d("Your email is not authorized to use this app."),await Mg(ju))}catch(D){console.error("Sign in error:",D),D.code==="auth/popup-closed-by-user"?d("Sign-in was cancelled."):d("Failed to sign in. Please try again.")}finally{c(!1)}},signOut:async()=>{try{await Mg(ju),a(null),d(null)}catch(D){console.error("Sign out error:",D),d("Failed to sign out. Please try again.")}},uploadAvatar:async D=>{if(!r){d("You must be signed in to upload an avatar.");return}try{const b=WC(b2,`duoboard_avatars/${r.uid}`);await QC(b,D);const x=await XC(b);await Vy(Dn(ut,"duoboard_users",r.uid),{customPhotoURL:x},{merge:!0}),a(V=>V?{...V,customPhotoURL:x}:null)}catch(b){throw console.error("Error uploading avatar:",b),d("Failed to upload avatar. Please try again."),b}},isWhitelisted:p};return O.jsx(S2.Provider,{value:A,children:t})}const S0=M.createContext({});function A0(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const lm=M.createContext(null),R0=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class j5 extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B5({children:t,isPresent:e}){const n=M.useId(),r=M.useRef(null),a=M.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=M.useContext(R0);return M.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:p}=a.current;if(e||!r.current||!c||!f)return;r.current.dataset.motionPopId=n;const y=document.createElement("style");return l&&(y.nonce=l),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),O.jsx(j5,{isPresent:e,childRef:r,sizeRef:a,children:M.cloneElement(t,{ref:r})})}const z5=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c})=>{const f=A0(F5),d=M.useId(),p=M.useCallback(_=>{f.set(_,!0);for(const E of f.values())if(!E)return;r&&r()},[f,r]),y=M.useMemo(()=>({id:d,initial:e,isPresent:n,custom:a,onExitComplete:p,register:_=>(f.set(_,!1),()=>f.delete(_))}),l?[Math.random(),p]:[n,p]);return M.useMemo(()=>{f.forEach((_,E)=>f.set(E,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=O.jsx(B5,{isPresent:n,children:t})),O.jsx(lm.Provider,{value:y,children:t})};function F5(){return new Map}function A2(t=!0){const e=M.useContext(lm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=e,l=M.useId();M.useEffect(()=>{t&&a(l)},[t]);const c=M.useCallback(()=>t&&r&&r(l),[l,r,t]);return!n&&r?[!1,c]:[!0]}const Df=t=>t.key||"";function CS(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const C0=typeof window<"u",R2=C0?M.useLayoutEffect:M.useEffect,Ga=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1})=>{const[f,d]=A2(c),p=M.useMemo(()=>CS(t),[t]),y=c&&!f?[]:p.map(Df),_=M.useRef(!0),E=M.useRef(p),A=A0(()=>new Map),[D,b]=M.useState(p),[x,V]=M.useState(p);R2(()=>{_.current=!1,E.current=p;for(let K=0;K<x.length;K++){const q=Df(x[K]);y.includes(q)?A.delete(q):A.get(q)!==!0&&A.set(q,!1)}},[x,y.length,y.join("-")]);const L=[];if(p!==D){let K=[...p];for(let q=0;q<x.length;q++){const Y=x[q],R=Df(Y);y.includes(R)||(K.splice(q,0,Y),L.push(Y))}l==="wait"&&L.length&&(K=L),V(CS(K)),b(p);return}const{forceRender:k}=M.useContext(S0);return O.jsx(O.Fragment,{children:x.map(K=>{const q=Df(K),Y=c&&!f?!1:p===x||y.includes(q),R=()=>{if(A.has(q))A.set(q,!0);else return;let S=!0;A.forEach(N=>{N||(S=!1)}),S&&(k?.(),V(E.current),c&&d?.(),r&&r())};return O.jsx(z5,{isPresent:Y,initial:!_.current||n?void 0:!1,custom:Y?void 0:e,presenceAffectsLayout:a,mode:l,onExitComplete:Y?void 0:R,children:K},q)})})},Gn=t=>t;let C2=Gn;function x0(t){let e;return()=>(e===void 0&&(e=t()),e)}const wl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Or=t=>t*1e3,Vr=t=>t/1e3,H5={useManualTiming:!1};function q5(t){let e=new Set,n=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){l.has(p)&&(d.schedule(p),t()),p(c)}const d={schedule:(p,y=!1,_=!1)=>{const A=_&&r?e:n;return y&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,r){a=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,a&&(a=!1,d.process(p))}};return d}const Nf=["read","resolveKeyframes","update","preRender","render","postRender"],G5=40;function x2(t,e){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=Nf.reduce((V,L)=>(V[L]=q5(l),V),{}),{read:f,resolveKeyframes:d,update:p,preRender:y,render:_,postRender:E}=c,A=()=>{const V=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(V-a.timestamp,G5),1),a.timestamp=V,a.isProcessing=!0,f.process(a),d.process(a),p.process(a),y.process(a),_.process(a),E.process(a),a.isProcessing=!1,n&&e&&(r=!1,t(A))},D=()=>{n=!0,r=!0,a.isProcessing||t(A)};return{schedule:Nf.reduce((V,L)=>{const k=c[L];return V[L]=(K,q=!1,Y=!1)=>(n||D(),k.schedule(K,q,Y)),V},{}),cancel:V=>{for(let L=0;L<Nf.length;L++)c[Nf[L]].cancel(V)},state:a,steps:c}}const{schedule:at,cancel:Qs,state:Jt,steps:Kg}=x2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gn,!0),I2=M.createContext({strict:!1}),xS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const t in xS)bl[t]={isEnabled:e=>xS[t].some(n=>!!e[n])};function K5(t){for(const e in t)bl[e]={...bl[e],...t[e]}}const $5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$5.has(t)}let D2=t=>!wd(t);function Y5(t){t&&(D2=e=>e.startsWith("on")?!wd(e):t(e))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function Q5(t,e,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(D2(a)||n===!0&&wd(a)||!e&&!wd(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function X5(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const um=M.createContext({});function Tc(t){return typeof t=="string"||Array.isArray(t)}function cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const I0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D0=["initial",...I0];function hm(t){return cm(t.animate)||D0.some(e=>Tc(t[e]))}function N2(t){return!!(hm(t)||t.variants)}function W5(t,e){if(hm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tc(n)?n:void 0,animate:Tc(r)?r:void 0}}return t.inherit!==!1?e:{}}function Z5(t){const{initial:e,animate:n}=W5(t,M.useContext(um));return M.useMemo(()=>({initial:e,animate:n}),[IS(e),IS(n)])}function IS(t){return Array.isArray(t)?t.join(" "):t}const J5=Symbol.for("motionComponentSymbol");function rl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eU(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rl(n)&&(n.current=r))},[e])}const N0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tU="framerAppearId",M2="data-"+N0(tU),{schedule:M0}=x2(queueMicrotask,!1),O2=M.createContext({});function nU(t,e,n,r,a){var l,c;const{visualElement:f}=M.useContext(um),d=M.useContext(I2),p=M.useContext(lm),y=M.useContext(R0).reducedMotion,_=M.useRef(null);r=r||d.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:f,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const E=_.current,A=M.useContext(O2);E&&!E.projection&&a&&(E.type==="html"||E.type==="svg")&&iU(_.current,n,a,A);const D=M.useRef(!1);M.useInsertionEffect(()=>{E&&D.current&&E.update(n,p)});const b=n[M2],x=M.useRef(!!b&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,b))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,b)));return R2(()=>{E&&(D.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),M0.render(E.render),x.current&&E.animationState&&E.animationState.animateChanges())}),M.useEffect(()=>{E&&(!x.current&&E.animationState&&E.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,b)}),x.current=!1))}),E}function iU(t,e,n,r){const{layoutId:a,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:V2(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||f&&rl(f),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:p})}function V2(t){if(t)return t.options.allowProjection!==!1?t.projection:V2(t.parent)}function rU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:a}){var l,c;t&&K5(t);function f(p,y){let _;const E={...M.useContext(R0),...p,layoutId:sU(p)},{isStatic:A}=E,D=Z5(p),b=r(p,A);if(!A&&C0){aU();const x=oU(E);_=x.MeasureLayout,D.visualElement=nU(a,b,E,e,x.ProjectionNode)}return O.jsxs(um.Provider,{value:D,children:[_&&D.visualElement?O.jsx(_,{visualElement:D.visualElement,...E}):null,n(a,p,eU(b,D.visualElement,y),b,A,D.visualElement)]})}f.displayName=`motion.${typeof a=="string"?a:`create(${(c=(l=a.displayName)!==null&&l!==void 0?l:a.name)!==null&&c!==void 0?c:""})`}`;const d=M.forwardRef(f);return d[J5]=a,d}function sU({layoutId:t}){const e=M.useContext(S0).id;return e&&t!==void 0?e+"-"+t:t}function aU(t,e){M.useContext(I2).strict}function oU(t){const{drag:e,layout:n}=bl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const lU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O0(t){return typeof t!="string"||t.includes("-")?!1:!!(lU.indexOf(t)>-1||/[A-Z]/u.test(t))}function DS(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function V0(t,e,n,r){if(typeof e=="function"){const[a,l]=DS(r);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=DS(r);e=e(n!==void 0?n:t.custom,a,l)}return e}const Uy=t=>Array.isArray(t),uU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),cU=t=>Uy(t)?t[t.length-1]||0:t,hn=t=>!!(t&&t.getVelocity);function Qf(t){const e=hn(t)?t.get():t;return uU(e)?e.toValue():e}function hU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,a,l){const c={latestValues:fU(r,a,l,t),renderState:e()};return n&&(c.onMount=f=>n({props:r,current:f,...c}),c.onUpdate=f=>n(f)),c}const k2=t=>(e,n)=>{const r=M.useContext(um),a=M.useContext(lm),l=()=>hU(t,e,r,a);return n?l():A0(l)};function fU(t,e,n,r){const a={},l=r(t,{});for(const E in l)a[E]=Qf(l[E]);let{initial:c,animate:f}=t;const d=hm(t),p=N2(t);e&&p&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const _=y?f:c;if(_&&typeof _!="boolean"&&!cm(_)){const E=Array.isArray(_)?_:[_];for(let A=0;A<E.length;A++){const D=V0(t,E[A]);if(D){const{transitionEnd:b,transition:x,...V}=D;for(const L in V){let k=V[L];if(Array.isArray(k)){const K=y?k.length-1:0;k=k[K]}k!==null&&(a[L]=k)}for(const L in b)a[L]=b[L]}}}return a}const Ml=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oo=new Set(Ml),P2=t=>e=>typeof e=="string"&&e.startsWith(t),L2=P2("--"),dU=P2("var(--"),k0=t=>dU(t)?mU.test(t.split("/*")[0].trim()):!1,mU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,U2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zr=(t,e,n)=>n>e?e:n<t?t:n,Ol={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ec={...Ol,transform:t=>zr(0,1,t)},Mf={...Ol,default:1},zc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Os=zc("deg"),$i=zc("%"),Te=zc("px"),pU=zc("vh"),gU=zc("vw"),NS={...$i,parse:t=>$i.parse(t)/100,transform:t=>$i.transform(t*100)},yU={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,backgroundPositionX:Te,backgroundPositionY:Te},vU={rotate:Os,rotateX:Os,rotateY:Os,rotateZ:Os,scale:Mf,scaleX:Mf,scaleY:Mf,scaleZ:Mf,skew:Os,skewX:Os,skewY:Os,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Ec,originX:NS,originY:NS,originZ:Te},MS={...Ol,transform:Math.round},P0={...yU,...vU,zIndex:MS,size:Te,fillOpacity:Ec,strokeOpacity:Ec,numOctaves:MS},_U={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TU=Ml.length;function EU(t,e,n){let r="",a=!0;for(let l=0;l<TU;l++){const c=Ml[l],f=t[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const p=U2(f,P0[c]);if(!d){a=!1;const y=_U[c]||c;r+=`${y}(${p}) `}n&&(e[c]=p)}}return r=r.trim(),n?r=n(e,a?"":r):a&&(r="none"),r}function L0(t,e,n){const{style:r,vars:a,transformOrigin:l}=t;let c=!1,f=!1;for(const d in e){const p=e[d];if(oo.has(d)){c=!0;continue}else if(L2(d)){a[d]=p;continue}else{const y=U2(p,P0[d]);d.startsWith("origin")?(f=!0,l[d]=y):r[d]=y}}if(e.transform||(c||n?r.transform=EU(e,t.transform,n):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:y=0}=l;r.transformOrigin=`${d} ${p} ${y}`}}const wU={offset:"stroke-dashoffset",array:"stroke-dasharray"},bU={offset:"strokeDashoffset",array:"strokeDasharray"};function SU(t,e,n=1,r=0,a=!0){t.pathLength=1;const l=a?wU:bU;t[l.offset]=Te.transform(-r);const c=Te.transform(e),f=Te.transform(n);t[l.array]=`${c} ${f}`}function OS(t,e,n){return typeof t=="string"?t:Te.transform(e+n*t)}function AU(t,e,n){const r=OS(e,t.x,t.width),a=OS(n,t.y,t.height);return`${r} ${a}`}function U0(t,{attrX:e,attrY:n,attrScale:r,originX:a,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:d=0,...p},y,_){if(L0(t,p,_),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:A,dimensions:D}=t;E.transform&&(D&&(A.transform=E.transform),delete E.transform),D&&(a!==void 0||l!==void 0||A.transform)&&(A.transformOrigin=AU(D,a!==void 0?a:.5,l!==void 0?l:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),r!==void 0&&(E.scale=r),c!==void 0&&SU(E,c,f,d,!1)}const j0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),j2=()=>({...j0(),attrs:{}}),B0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function B2(t,{style:e,vars:n},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const l in n)t.style.setProperty(l,n[l])}const z2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F2(t,e,n,r){B2(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(z2.has(a)?a:N0(a),e.attrs[a])}const bd={};function RU(t){Object.assign(bd,t)}function H2(t,{layout:e,layoutId:n}){return oo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bd[t]||t==="opacity")}function z0(t,e,n){var r;const{style:a}=t,l={};for(const c in a)(hn(a[c])||e.style&&hn(e.style[c])||H2(c,t)||((r=n?.getValue(c))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(l[c]=a[c]);return l}function q2(t,e,n){const r=z0(t,e,n);for(const a in t)if(hn(t[a])||hn(e[a])){const l=Ml.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[l]=t[a]}return r}function CU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const VS=["x","y","width","height","cx","cy","r"],xU={useVisualState:k2({scrapeMotionValuesFromProps:q2,createRenderState:j2,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:a})=>{if(!n)return;let l=!!t.drag;if(!l){for(const f in a)if(oo.has(f)){l=!0;break}}if(!l)return;let c=!e;if(e)for(let f=0;f<VS.length;f++){const d=VS[f];t[d]!==e[d]&&(c=!0)}c&&at.read(()=>{CU(n,r),at.render(()=>{U0(r,a,B0(n.tagName),t.transformTemplate),F2(n,r)})})}})},IU={useVisualState:k2({scrapeMotionValuesFromProps:z0,createRenderState:j0})};function G2(t,e,n){for(const r in e)!hn(e[r])&&!H2(r,n)&&(t[r]=e[r])}function DU({transformTemplate:t},e){return M.useMemo(()=>{const n=j0();return L0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function NU(t,e){const n=t.style||{},r={};return G2(r,n,t),Object.assign(r,DU(t,e)),r}function MU(t,e){const n={},r=NU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function OU(t,e,n,r){const a=M.useMemo(()=>{const l=j2();return U0(l,e,B0(r),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};G2(l,t.style,t),a.style={...l,...a.style}}return a}function VU(t=!1){return(n,r,a,{latestValues:l},c)=>{const d=(O0(n)?OU:MU)(r,l,c,n),p=Q5(r,typeof n=="string",t),y=n!==M.Fragment?{...p,...d,ref:a}:{},{children:_}=r,E=M.useMemo(()=>hn(_)?_.get():_,[_]);return M.createElement(n,{...y,children:E})}}function kU(t,e){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...O0(r)?xU:IU,preloadedFeatures:t,useRender:VU(a),createVisualElement:e,Component:r};return rU(c)}}function K2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function fm(t,e,n){const r=t.getProps();return V0(r,e,n!==void 0?n:r.custom,t)}const PU=x0(()=>window.ScrollTimeline!==void 0);class LU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(a=>{if(PU()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{r.forEach((a,l)=>{a&&a(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class UU extends LU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function F0(t,e){return t?t[e]||t.default||t:void 0}const jy=2e4;function $2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<jy;)e+=n,r=t.next(e);return e>=jy?1/0:e}function H0(t){return typeof t=="function"}function kS(t,e){t.timeline=e,t.onfinish=null}const q0=t=>Array.isArray(t)&&typeof t[0]=="number",jU={linearEasing:void 0};function BU(t,e){const n=x0(t);return()=>{var r;return(r=jU[e])!==null&&r!==void 0?r:n()}}const Sd=BU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Y2=(t,e,n=10)=>{let r="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)r+=t(wl(0,a-1,l))+", ";return`linear(${r.substring(0,r.length-2)})`};function Q2(t){return!!(typeof t=="function"&&Sd()||!t||typeof t=="string"&&(t in By||Sd())||q0(t)||Array.isArray(t)&&t.every(Q2))}const Ku=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,By={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ku([0,.65,.55,1]),circOut:Ku([.55,0,1,.45]),backIn:Ku([.31,.01,.66,-.59]),backOut:Ku([.33,1.53,.69,.99])};function X2(t,e){if(t)return typeof t=="function"&&Sd()?Y2(t,e):q0(t)?Ku(t):Array.isArray(t)?t.map(n=>X2(n,e)||By.easeOut):By[t]}const _i={x:!1,y:!1};function W2(){return _i.x||_i.y}function zU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const l=(r=void 0)!==null&&r!==void 0?r:a.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}function Z2(t,e){const n=zU(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[n,a,()=>r.abort()]}function PS(t){return e=>{e.pointerType==="touch"||W2()||t(e)}}function FU(t,e,n={}){const[r,a,l]=Z2(t,n),c=PS(f=>{const{target:d}=f,p=e(f);if(typeof p!="function"||!d)return;const y=PS(_=>{p(_),d.removeEventListener("pointerleave",y)});d.addEventListener("pointerleave",y,a)});return r.forEach(f=>{f.addEventListener("pointerenter",c,a)}),l}const J2=(t,e)=>e?t===e?!0:J2(t,e.parentElement):!1,G0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qU(t){return HU.has(t.tagName)||t.tabIndex!==-1}const $u=new WeakSet;function LS(t){return e=>{e.key==="Enter"&&t(e)}}function $g(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const GU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=LS(()=>{if($u.has(n))return;$g(n,"down");const a=LS(()=>{$g(n,"up")}),l=()=>$g(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function US(t){return G0(t)&&!W2()}function KU(t,e,n={}){const[r,a,l]=Z2(t,n),c=f=>{const d=f.currentTarget;if(!US(f)||$u.has(d))return;$u.add(d);const p=e(f),y=(A,D)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",E),!(!US(A)||!$u.has(d))&&($u.delete(d),typeof p=="function"&&p(A,{success:D}))},_=A=>{y(A,n.useGlobalTarget||J2(d,A.target))},E=A=>{y(A,!1)};window.addEventListener("pointerup",_,a),window.addEventListener("pointercancel",E,a)};return r.forEach(f=>{!qU(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(n.useGlobalTarget?window:f).addEventListener("pointerdown",c,a),f.addEventListener("focus",p=>GU(p,a),a)}),l}function $U(t){return t==="x"||t==="y"?_i[t]?null:(_i[t]=!0,()=>{_i[t]=!1}):_i.x||_i.y?null:(_i.x=_i.y=!0,()=>{_i.x=_i.y=!1})}const ex=new Set(["width","height","top","left","right","bottom",...Ml]);let Xf;function YU(){Xf=void 0}const Yi={now:()=>(Xf===void 0&&Yi.set(Jt.isProcessing||H5.useManualTiming?Jt.timestamp:performance.now()),Xf),set:t=>{Xf=t,queueMicrotask(YU)}};function K0(t,e){t.indexOf(e)===-1&&t.push(e)}function $0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Y0{constructor(){this.subscriptions=[]}add(e){return K0(this.subscriptions,e),()=>$0(this.subscriptions,e)}notify(e,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,r);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tx(t,e){return e?t*(1e3/e):0}const jS=30,QU=t=>!isNaN(parseFloat(t));class XU{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{const l=Yi.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Y0);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jS);return tx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wc(t,e){return new XU(t,e)}function WU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,wc(n))}function ZU(t,e){const n=fm(t,e);let{transitionEnd:r={},transition:a={},...l}=n||{};l={...l,...r};for(const c in l){const f=cU(l[c]);WU(t,c,f)}}function JU(t){return!!(hn(t)&&t.add)}function zy(t,e){const n=t.getValue("willChange");if(JU(n))return n.add(e)}function nx(t){return t.props[M2]}const ix=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ej=1e-7,tj=12;function nj(t,e,n,r,a){let l,c,f=0;do c=e+(n-e)/2,l=ix(c,r,a)-t,l>0?n=c:e=c;while(Math.abs(l)>ej&&++f<tj);return c}function Fc(t,e,n,r){if(t===e&&n===r)return Gn;const a=l=>nj(l,0,1,t,n);return l=>l===0||l===1?l:ix(a(l),e,r)}const rx=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sx=t=>e=>1-t(1-e),ax=Fc(.33,1.53,.69,.99),Q0=sx(ax),ox=rx(Q0),lx=t=>(t*=2)<1?.5*Q0(t):.5*(2-Math.pow(2,-10*(t-1))),X0=t=>1-Math.sin(Math.acos(t)),ux=sx(X0),cx=rx(X0),hx=t=>/^0[^.\s]+$/u.test(t);function ij(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hx(t):!0}const tc=t=>Math.round(t*1e5)/1e5,W0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rj(t){return t==null}const sj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Z0=(t,e)=>n=>!!(typeof n=="string"&&sj.test(n)&&n.startsWith(t)||e&&!rj(n)&&Object.prototype.hasOwnProperty.call(n,e)),fx=(t,e,n)=>r=>{if(typeof r!="string")return r;const[a,l,c,f]=r.match(W0);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},aj=t=>zr(0,255,t),Yg={...Ol,transform:t=>Math.round(aj(t))},Ba={test:Z0("rgb","red"),parse:fx("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Yg.transform(t)+", "+Yg.transform(e)+", "+Yg.transform(n)+", "+tc(Ec.transform(r))+")"};function oj(t){let e="",n="",r="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Fy={test:Z0("#"),parse:oj,transform:Ba.transform},sl={test:Z0("hsl","hue"),parse:fx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+$i.transform(tc(e))+", "+$i.transform(tc(n))+", "+tc(Ec.transform(r))+")"},ln={test:t=>Ba.test(t)||Fy.test(t)||sl.test(t),parse:t=>Ba.test(t)?Ba.parse(t):sl.test(t)?sl.parse(t):Fy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ba.transform(t):sl.transform(t)},lj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(W0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lj))===null||n===void 0?void 0:n.length)||0)>0}const dx="number",mx="color",cj="var",hj="var(",BS="${}",fj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},a=[];let l=0;const f=e.replace(fj,d=>(ln.test(d)?(r.color.push(l),a.push(mx),n.push(ln.parse(d))):d.startsWith(hj)?(r.var.push(l),a.push(cj),n.push(d)):(r.number.push(l),a.push(dx),n.push(parseFloat(d))),++l,BS)).split(BS);return{values:n,split:f,indexes:r,types:a}}function px(t){return bc(t).values}function gx(t){const{split:e,types:n}=bc(t),r=e.length;return a=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],a[c]!==void 0){const f=n[c];f===dx?l+=tc(a[c]):f===mx?l+=ln.transform(a[c]):l+=a[c]}return l}}const dj=t=>typeof t=="number"?0:t;function mj(t){const e=px(t);return gx(t)(e.map(dj))}const Xs={test:uj,parse:px,createTransformer:gx,getAnimatableNone:mj},pj=new Set(["brightness","contrast","saturate","opacity"]);function gj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(W0)||[];if(!r)return t;const a=n.replace(r,"");let l=pj.has(e)?1:0;return r!==n&&(l*=100),e+"("+l+a+")"}const yj=/\b([a-z-]*)\(.*?\)/gu,Hy={...Xs,getAnimatableNone:t=>{const e=t.match(yj);return e?e.map(gj).join(" "):t}},vj={...P0,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:Hy,WebkitFilter:Hy},J0=t=>vj[t];function yx(t,e){let n=J0(t);return n!==Hy&&(n=Xs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const _j=new Set(["auto","none","0"]);function Tj(t,e,n){let r=0,a;for(;r<t.length&&!a;){const l=t[r];typeof l=="string"&&!_j.has(l)&&bc(l).values.length&&(a=t[r]),r++}if(a&&n)for(const l of e)t[l]=yx(n,a)}const zS=t=>t===Ol||t===Te,FS=(t,e)=>parseFloat(t.split(", ")[e]),HS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/u);if(a)return FS(a[1],e);{const l=r.match(/^matrix\((.+)\)$/u);return l?FS(l[1],t):0}},Ej=new Set(["x","y","z"]),wj=Ml.filter(t=>!Ej.has(t));function bj(t){const e=[];return wj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:HS(4,13),y:HS(5,14)};Sl.translateX=Sl.x;Sl.translateY=Sl.y;const Ka=new Set;let qy=!1,Gy=!1;function vx(){if(Gy){const t=Array.from(Ka).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const a=bj(r);a.length&&(n.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([l,c])=>{var f;(f=r.getValue(l))===null||f===void 0||f.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gy=!1,qy=!1,Ka.forEach(t=>t.complete()),Ka.clear()}function _x(){Ka.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gy=!0)})}function Sj(){_x(),vx()}class e_{constructor(e,n,r,a,l,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ka.add(this),qy||(qy=!0,at.read(_x),at.resolveKeyframes(vx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:a}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const c=a?.get(),f=e[e.length-1];if(c!==void 0)e[0]=c;else if(r&&n){const d=r.readValue(n,f);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=f),a&&c===void 0&&a.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ka.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ka.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Tx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Aj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rj(t){const e=Aj.exec(t);if(!e)return[,];const[,n,r,a]=e;return[`--${n??r}`,a]}function Ex(t,e,n=1){const[r,a]=Rj(t);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return Tx(c)?parseFloat(c):c}return k0(a)?Ex(a,e,n+1):a}const wx=t=>e=>e.test(t),Cj={test:t=>t==="auto",parse:t=>t},bx=[Ol,Te,$i,Os,gU,pU,Cj],qS=t=>bx.find(wx(t));class Sx extends e_{constructor(e,n,r,a,l){super(e,n,r,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),k0(p))){const y=Ex(p,n.current);y!==void 0&&(e[d]=y),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!ex.has(r)||e.length!==2)return;const[a,l]=e,c=qS(a),f=qS(l);if(c!==f)if(zS(c)&&zS(f))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let a=0;a<e.length;a++)ij(e[a])&&r.push(a);r.length&&Tj(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const l=n.getValue(r);l&&l.jump(this.measuredOrigin,!1);const c=a.length-1,f=a[c];a[c]=Sl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,p])=>{n.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const GS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xs.test(t)||t==="0")&&!t.startsWith("url("));function xj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Ij(t,e,n,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=GS(a,e),f=GS(l,e);return!c||!f?!1:xj(t)||(n==="spring"||H0(n))&&r}const Dj=t=>t!==null;function dm(t,{repeat:e,repeatType:n="loop"},r){const a=t.filter(Dj),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Nj=40;class Ax{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yi.now(),this.options={autoplay:e,delay:n,type:r,repeat:a,repeatDelay:l,repeatType:c,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Nj?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Sj(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Yi.now(),this.hasAttemptedResolve=!0;const{name:r,type:a,velocity:l,delay:c,onComplete:f,onUpdate:d,isGenerator:p}=this.options;if(!p&&!Ij(e,r,a,l))if(c)this.options.duration=0;else{d&&d(dm(e,this.options,n)),f&&f(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const dt=(t,e,n)=>t+(e-t)*n;function Qg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Mj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const f=n<.5?n*(1+e):n+e-n*e,d=2*n-f;a=Qg(d,f,t+1/3),l=Qg(d,f,t),c=Qg(d,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Ad(t,e){return n=>n>0?e:t}const Xg=(t,e,n)=>{const r=t*t,a=n*(e*e-r)+r;return a<0?0:Math.sqrt(a)},Oj=[Fy,Ba,sl],Vj=t=>Oj.find(e=>e.test(t));function KS(t){const e=Vj(t);if(!e)return!1;let n=e.parse(t);return e===sl&&(n=Mj(n)),n}const $S=(t,e)=>{const n=KS(t),r=KS(e);if(!n||!r)return Ad(t,e);const a={...n};return l=>(a.red=Xg(n.red,r.red,l),a.green=Xg(n.green,r.green,l),a.blue=Xg(n.blue,r.blue,l),a.alpha=dt(n.alpha,r.alpha,l),Ba.transform(a))},kj=(t,e)=>n=>e(t(n)),Hc=(...t)=>t.reduce(kj),Ky=new Set(["none","hidden"]);function Pj(t,e){return Ky.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Lj(t,e){return n=>dt(t,e,n)}function t_(t){return typeof t=="number"?Lj:typeof t=="string"?k0(t)?Ad:ln.test(t)?$S:Bj:Array.isArray(t)?Rx:typeof t=="object"?ln.test(t)?$S:Uj:Ad}function Rx(t,e){const n=[...t],r=n.length,a=t.map((l,c)=>t_(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)n[c]=a[c](l);return n}}function Uj(t,e){const n={...t,...e},r={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(r[a]=t_(t[a])(t[a],e[a]));return a=>{for(const l in r)n[l]=r[l](a);return n}}function jj(t,e){var n;const r=[],a={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const c=e.types[l],f=t.indexes[c][a[c]],d=(n=t.values[f])!==null&&n!==void 0?n:0;r[l]=d,a[c]++}return r}const Bj=(t,e)=>{const n=Xs.createTransformer(e),r=bc(t),a=bc(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Ky.has(t)&&!a.values.length||Ky.has(e)&&!r.values.length?Pj(t,e):Hc(Rx(jj(r,a),a.values),n):Ad(t,e)};function Cx(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?dt(t,e,n):t_(t)(t,e)}const zj=5;function xx(t,e,n){const r=Math.max(e-zj,0);return tx(n-t(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wg=.001;function Fj({duration:t=_t.duration,bounce:e=_t.bounce,velocity:n=_t.velocity,mass:r=_t.mass}){let a,l,c=1-e;c=zr(_t.minDamping,_t.maxDamping,c),t=zr(_t.minDuration,_t.maxDuration,Vr(t)),c<1?(a=p=>{const y=p*c,_=y*t,E=y-n,A=$y(p,c),D=Math.exp(-_);return Wg-E/A*D},l=p=>{const _=p*c*t,E=_*n+n,A=Math.pow(c,2)*Math.pow(p,2)*t,D=Math.exp(-_),b=$y(Math.pow(p,2),c);return(-a(p)+Wg>0?-1:1)*((E-A)*D)/b}):(a=p=>{const y=Math.exp(-p*t),_=(p-n)*t+1;return-Wg+y*_},l=p=>{const y=Math.exp(-p*t),_=(n-p)*(t*t);return y*_});const f=5/t,d=qj(a,l,f);if(t=Or(t),isNaN(d))return{stiffness:_t.stiffness,damping:_t.damping,duration:t};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:c*2*Math.sqrt(r*p),duration:t}}}const Hj=12;function qj(t,e,n){let r=n;for(let a=1;a<Hj;a++)r=r-t(r)/e(r);return r}function $y(t,e){return t*Math.sqrt(1-e*e)}const Gj=["duration","bounce"],Kj=["stiffness","damping","mass"];function YS(t,e){return e.some(n=>t[n]!==void 0)}function $j(t){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...t};if(!YS(t,Kj)&&YS(t,Gj))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,l=2*zr(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:_t.mass,stiffness:a,damping:l}}else{const n=Fj(t);e={...e,...n,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function Ix(t=_t.visualDuration,e=_t.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],f={done:!1,value:l},{stiffness:d,damping:p,mass:y,duration:_,velocity:E,isResolvedFromDuration:A}=$j({...n,velocity:-Vr(n.velocity||0)}),D=E||0,b=p/(2*Math.sqrt(d*y)),x=c-l,V=Vr(Math.sqrt(d/y)),L=Math.abs(x)<5;r||(r=L?_t.restSpeed.granular:_t.restSpeed.default),a||(a=L?_t.restDelta.granular:_t.restDelta.default);let k;if(b<1){const q=$y(V,b);k=Y=>{const R=Math.exp(-b*V*Y);return c-R*((D+b*V*x)/q*Math.sin(q*Y)+x*Math.cos(q*Y))}}else if(b===1)k=q=>c-Math.exp(-V*q)*(x+(D+V*x)*q);else{const q=V*Math.sqrt(b*b-1);k=Y=>{const R=Math.exp(-b*V*Y),S=Math.min(q*Y,300);return c-R*((D+b*V*x)*Math.sinh(S)+q*x*Math.cosh(S))/q}}const K={calculatedDuration:A&&_||null,next:q=>{const Y=k(q);if(A)f.done=q>=_;else{let R=0;b<1&&(R=q===0?Or(D):xx(k,q,Y));const S=Math.abs(R)<=r,N=Math.abs(c-Y)<=a;f.done=S&&N}return f.value=f.done?c:Y,f},toString:()=>{const q=Math.min($2(K),jy),Y=Y2(R=>K.next(q*R).value,q,30);return q+"ms "+Y}};return K}function QS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:d,restDelta:p=.5,restSpeed:y}){const _=t[0],E={done:!1,value:_},A=S=>f!==void 0&&S<f||d!==void 0&&S>d,D=S=>f===void 0?d:d===void 0||Math.abs(f-S)<Math.abs(d-S)?f:d;let b=n*e;const x=_+b,V=c===void 0?x:c(x);V!==x&&(b=V-_);const L=S=>-b*Math.exp(-S/r),k=S=>V+L(S),K=S=>{const N=L(S),U=k(S);E.done=Math.abs(N)<=p,E.value=E.done?V:U};let q,Y;const R=S=>{A(E.value)&&(q=S,Y=Ix({keyframes:[E.value,D(E.value)],velocity:xx(k,S,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return R(0),{calculatedDuration:null,next:S=>{let N=!1;return!Y&&q===void 0&&(N=!0,K(S),R(S)),q!==void 0&&S>=q?Y.next(S-q):(!N&&K(S),E)}}}const Yj=Fc(.42,0,1,1),Qj=Fc(0,0,.58,1),Dx=Fc(.42,0,.58,1),Xj=t=>Array.isArray(t)&&typeof t[0]!="number",Wj={linear:Gn,easeIn:Yj,easeInOut:Dx,easeOut:Qj,circIn:X0,circInOut:cx,circOut:ux,backIn:Q0,backInOut:ox,backOut:ax,anticipate:lx},XS=t=>{if(q0(t)){C2(t.length===4);const[e,n,r,a]=t;return Fc(e,n,r,a)}else if(typeof t=="string")return Wj[t];return t};function Zj(t,e,n){const r=[],a=n||Cx,l=t.length-1;for(let c=0;c<l;c++){let f=a(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Gn:e;f=Hc(d,f)}r.push(f)}return r}function Jj(t,e,{clamp:n=!0,ease:r,mixer:a}={}){const l=t.length;if(C2(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=Zj(e,r,a),d=f.length,p=y=>{if(c&&y<t[0])return e[0];let _=0;if(d>1)for(;_<t.length-2&&!(y<t[_+1]);_++);const E=wl(t[_],t[_+1],y);return f[_](E)};return n?y=>p(zr(t[0],t[l-1],y)):p}function e9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const a=wl(0,e,r);t.push(dt(n,1,a))}}function t9(t){const e=[0];return e9(e,t.length-1),e}function n9(t,e){return t.map(n=>n*e)}function i9(t,e){return t.map(()=>e||Dx).splice(0,t.length-1)}function Rd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const a=Xj(r)?r.map(XS):XS(r),l={done:!1,value:e[0]},c=n9(n&&n.length===e.length?n:t9(e),t),f=Jj(c,e,{ease:Array.isArray(a)?a:i9(e,a)});return{calculatedDuration:t,next:d=>(l.value=f(d),l.done=d>=t,l)}}const r9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>Qs(e),now:()=>Jt.isProcessing?Jt.timestamp:Yi.now()}},s9={decay:QS,inertia:QS,tween:Rd,keyframes:Rd,spring:Ix},a9=t=>t/100;class n_ extends Ax{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:a,keyframes:l}=this.options,c=a?.KeyframeResolver||e_,f=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new c(l,f,n,r,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=this.options,f=H0(n)?n:s9[n]||Rd;let d,p;f!==Rd&&typeof e[0]!="number"&&(d=Hc(a9,Cx(e[0],e[1])),e=[0,100]);const y=f({...this.options,keyframes:e});l==="mirror"&&(p=f({...this.options,keyframes:[...e].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=$2(y));const{calculatedDuration:_}=y,E=_+a,A=E*(r+1)-a;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:_,resolvedDuration:E,totalDuration:A}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:a,generator:l,mirroredGenerator:c,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:p,totalDuration:y,resolvedDuration:_}=r;if(this.startTime===null)return l.next(0);const{delay:E,repeat:A,repeatType:D,repeatDelay:b,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const V=this.currentTime-E*(this.speed>=0?1:-1),L=this.speed>=0?V<0:V>y;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let k=this.currentTime,K=l;if(A){const S=Math.min(this.currentTime,y)/_;let N=Math.floor(S),U=S%1;!U&&S>=1&&(U=1),U===1&&N--,N=Math.min(N,A+1),!!(N%2)&&(D==="reverse"?(U=1-U,b&&(U-=b/_)):D==="mirror"&&(K=c)),k=zr(0,1,U)*_}const q=L?{done:!1,value:d[0]}:K.next(k);f&&(q.value=f(q.value));let{done:Y}=q;!L&&p!==null&&(Y=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return R&&a!==void 0&&(q.value=dm(d,this.options,a)),x&&x(q.value),R&&this.finish(),q}get duration(){const{resolved:e}=this;return e?Vr(e.calculatedDuration):0}get time(){return Vr(this.currentTime)}set time(e){e=Or(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=r9,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const o9=new Set(["opacity","clipPath","filter","transform"]);function l9(t,e,n,{delay:r=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:f="easeInOut",times:d}={}){const p={[e]:n};d&&(p.offset=d);const y=X2(f,a);return Array.isArray(y)&&(p.easing=y),t.animate(p,{delay:r,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const u9=x0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cd=10,c9=2e4;function h9(t){return H0(t.type)||t.type==="spring"||!Q2(t.ease)}function f9(t,e){const n=new n_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const a=[];let l=0;for(;!r.done&&l<c9;)r=n.sample(l),a.push(r.value),l+=Cd;return{times:void 0,keyframes:a,duration:l-Cd,ease:"linear"}}const Nx={anticipate:lx,backInOut:ox,circInOut:cx};function d9(t){return t in Nx}class WS extends Ax{constructor(e){super(e);const{name:n,motionValue:r,element:a,keyframes:l}=this.options;this.resolver=new Sx(l,(c,f)=>this.onKeyframesResolved(c,f),n,r,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:a,ease:l,type:c,motionValue:f,name:d,startTime:p}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof l=="string"&&Sd()&&d9(l)&&(l=Nx[l]),h9(this.options)){const{onComplete:_,onUpdate:E,motionValue:A,element:D,...b}=this.options,x=f9(e,b);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,a=x.times,l=x.ease,c="keyframes"}const y=l9(f.owner.current,d,e,{...this.options,duration:r,times:a,ease:l});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(kS(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:_}=this.options;f.set(dm(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:a,type:c,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Vr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Vr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Or(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Gn;const{animation:r}=n;kS(r,e)}return Gn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:a,type:l,ease:c,times:f}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:_,element:E,...A}=this.options,D=new n_({...A,keyframes:r,duration:a,type:l,ease:c,times:f,isGenerator:!0}),b=Or(this.time);p.setWithVelocity(D.sample(b-Cd).value,D.sample(b).value,Cd)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:a,repeatType:l,damping:c,type:f}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=n.owner.getProps();return u9()&&r&&o9.has(r)&&!d&&!p&&!a&&l!=="mirror"&&c!==0&&f!=="inertia"}}const m9={type:"spring",stiffness:500,damping:25,restSpeed:10},p9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),g9={type:"keyframes",duration:.8},y9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v9=(t,{keyframes:e})=>e.length>2?g9:oo.has(t)?t.startsWith("scale")?p9(e[1]):m9:y9;function _9({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const i_=(t,e,n,r={},a,l)=>c=>{const f=F0(r,t)||{},d=f.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Or(d);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-p,onUpdate:E=>{e.set(E),f.onUpdate&&f.onUpdate(E)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:l?void 0:a};_9(f)||(y={...y,...v9(t,y)}),y.duration&&(y.duration=Or(y.duration)),y.repeatDelay&&(y.repeatDelay=Or(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let _=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(_=!0)),_&&!l&&e.get()!==void 0){const E=dm(y.keyframes,f);if(E!==void 0)return at.update(()=>{y.onUpdate(E),y.onComplete()}),new UU([])}return!l&&WS.supports(y)?new WS(y):new n_(y)};function T9({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Mx(t,e,{delay:n=0,transitionOverride:r,type:a}={}){var l;let{transition:c=t.getDefaultTransition(),transitionEnd:f,...d}=e;r&&(c=r);const p=[],y=a&&t.animationState&&t.animationState.getState()[a];for(const _ in d){const E=t.getValue(_,(l=t.latestValues[_])!==null&&l!==void 0?l:null),A=d[_];if(A===void 0||y&&T9(y,_))continue;const D={delay:n,...F0(c||{},_)};let b=!1;if(window.MotionHandoffAnimation){const V=nx(t);if(V){const L=window.MotionHandoffAnimation(V,_,at);L!==null&&(D.startTime=L,b=!0)}}zy(t,_),E.start(i_(_,E,A,t.shouldReduceMotion&&ex.has(_)?{type:!1}:D,t,b));const x=E.animation;x&&p.push(x)}return f&&Promise.all(p).then(()=>{at.update(()=>{f&&ZU(t,f)})}),p}function Yy(t,e,n={}){var r;const a=fm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(l=n.transitionOverride);const c=a?()=>Promise.all(Mx(t,a,n)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:E}=l;return E9(t,e,y+p,_,E,n)}:()=>Promise.resolve(),{when:d}=l;if(d){const[p,y]=d==="beforeChildren"?[c,f]:[f,c];return p().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function E9(t,e,n=0,r=0,a=1,l){const c=[],f=(t.variantChildren.size-1)*r,d=a===1?(p=0)=>p*r:(p=0)=>f-p*r;return Array.from(t.variantChildren).sort(w9).forEach((p,y)=>{p.notify("AnimationStart",e),c.push(Yy(p,e,{...l,delay:n+d(y)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(c)}function w9(t,e){return t.sortNodePosition(e)}function b9(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(l=>Yy(t,l,n));r=Promise.all(a)}else if(typeof e=="string")r=Yy(t,e,n);else{const a=typeof e=="function"?fm(t,e,n.custom):e;r=Promise.all(Mx(t,a,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const S9=D0.length;function Ox(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ox(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<S9;n++){const r=D0[n],a=t.props[r];(Tc(a)||a===!1)&&(e[r]=a)}return e}const A9=[...I0].reverse(),R9=I0.length;function C9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>b9(t,n,r)))}function x9(t){let e=C9(t),n=ZS(),r=!0;const a=d=>(p,y)=>{var _;const E=fm(t,y,d==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:A,transitionEnd:D,...b}=E;p={...p,...b,...D}}return p};function l(d){e=d(t)}function c(d){const{props:p}=t,y=Ox(t.parent)||{},_=[],E=new Set;let A={},D=1/0;for(let x=0;x<R9;x++){const V=A9[x],L=n[V],k=p[V]!==void 0?p[V]:y[V],K=Tc(k),q=V===d?L.isActive:null;q===!1&&(D=x);let Y=k===y[V]&&k!==p[V]&&K;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),L.protectedKeys={...A},!L.isActive&&q===null||!k&&!L.prevProp||cm(k)||typeof k=="boolean")continue;const R=I9(L.prevProp,k);let S=R||V===d&&L.isActive&&!Y&&K||x>D&&K,N=!1;const U=Array.isArray(k)?k:[k];let B=U.reduce(a(V),{});q===!1&&(B={});const{prevResolvedValues:H={}}=L,P={...H,...B},Xe=oe=>{S=!0,E.has(oe)&&(N=!0,E.delete(oe)),L.needsAnimating[oe]=!0;const fe=t.getValue(oe);fe&&(fe.liveStyle=!1)};for(const oe in P){const fe=B[oe],Ie=H[oe];if(A.hasOwnProperty(oe))continue;let De=!1;Uy(fe)&&Uy(Ie)?De=!K2(fe,Ie):De=fe!==Ie,De?fe!=null?Xe(oe):E.add(oe):fe!==void 0&&E.has(oe)?Xe(oe):L.protectedKeys[oe]=!0}L.prevProp=k,L.prevResolvedValues=B,L.isActive&&(A={...A,...B}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(Y&&R)||N)&&_.push(...U.map(oe=>({animation:oe,options:{type:V}})))}if(E.size){const x={};E.forEach(V=>{const L=t.getBaseTarget(V),k=t.getValue(V);k&&(k.liveStyle=!0),x[V]=L??null}),_.push({animation:x})}let b=!!_.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(_):Promise.resolve()}function f(d,p){var y;if(n[d].isActive===p)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(E=>{var A;return(A=E.animationState)===null||A===void 0?void 0:A.setActive(d,p)}),n[d].isActive=p;const _=c(d);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>n,reset:()=>{n=ZS(),r=!0}}}function I9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!K2(e,t):!1}function Ma(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZS(){return{animate:Ma(!0),whileInView:Ma(),whileHover:Ma(),whileTap:Ma(),whileDrag:Ma(),whileFocus:Ma(),exit:Ma()}}class ta{constructor(e){this.isMounted=!1,this.node=e}update(){}}class D9 extends ta{constructor(e){super(e),e.animationState||(e.animationState=x9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let N9=0;class M9 extends ta{constructor(){super(...arguments),this.id=N9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const O9={animation:{Feature:D9},exit:{Feature:M9}};function Sc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function qc(t){return{point:{x:t.pageX,y:t.pageY}}}const V9=t=>e=>G0(e)&&t(e,qc(e));function nc(t,e,n,r){return Sc(t,e,V9(n),r)}const JS=(t,e)=>Math.abs(t-e);function k9(t,e){const n=JS(t.x,e.x),r=JS(t.y,e.y);return Math.sqrt(n**2+r**2)}class Vx{constructor(e,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jg(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=k9(_.offset,{x:0,y:0})>=3;if(!E&&!A)return;const{point:D}=_,{timestamp:b}=Jt;this.history.push({...D,timestamp:b});const{onStart:x,onMove:V}=this.handlers;E||(x&&x(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zg(E,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:A,onSessionEnd:D,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Jg(_.type==="pointercancel"?this.lastMoveEventInfo:Zg(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(_,x),D&&D(_,x)},!G0(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const c=qc(e),f=Zg(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=Jt;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,Jg(f,this.history)),this.removeListeners=Hc(nc(this.contextWindow,"pointermove",this.handlePointerMove),nc(this.contextWindow,"pointerup",this.handlePointerUp),nc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qs(this.updatePoint)}}function Zg(t,e){return e?{point:e(t.point)}:t}function eA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jg({point:t},e){return{point:t,delta:eA(t,kx(e)),offset:eA(t,P9(e)),velocity:L9(e,.1)}}function P9(t){return t[0]}function kx(t){return t[t.length-1]}function L9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const a=kx(t);for(;n>=0&&(r=t[n],!(a.timestamp-r.timestamp>Or(e)));)n--;if(!r)return{x:0,y:0};const l=Vr(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const Px=1e-4,U9=1-Px,j9=1+Px,Lx=.01,B9=0-Lx,z9=0+Lx;function $n(t){return t.max-t.min}function F9(t,e,n){return Math.abs(t-e)<=n}function tA(t,e,n,r=.5){t.origin=r,t.originPoint=dt(e.min,e.max,t.origin),t.scale=$n(n)/$n(e),t.translate=dt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=U9&&t.scale<=j9||isNaN(t.scale))&&(t.scale=1),(t.translate>=B9&&t.translate<=z9||isNaN(t.translate))&&(t.translate=0)}function ic(t,e,n,r){tA(t.x,e.x,n.x,r?r.originX:void 0),tA(t.y,e.y,n.y,r?r.originY:void 0)}function nA(t,e,n){t.min=n.min+e.min,t.max=t.min+$n(e)}function H9(t,e,n){nA(t.x,e.x,n.x),nA(t.y,e.y,n.y)}function iA(t,e,n){t.min=e.min-n.min,t.max=t.min+$n(e)}function rc(t,e,n){iA(t.x,e.x,n.x),iA(t.y,e.y,n.y)}function q9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?dt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?dt(n,t,r.max):Math.min(t,n)),t}function rA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function G9(t,{top:e,left:n,bottom:r,right:a}){return{x:rA(t.x,n,a),y:rA(t.y,e,r)}}function sA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function K9(t,e){return{x:sA(t.x,e.x),y:sA(t.y,e.y)}}function $9(t,e){let n=.5;const r=$n(t),a=$n(e);return a>r?n=wl(e.min,e.max-r,t.min):r>a&&(n=wl(t.min,t.max-a,e.min)),zr(0,1,n)}function Y9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qy=.35;function Q9(t=Qy){return t===!1?t=0:t===!0&&(t=Qy),{x:aA(t,"left","right"),y:aA(t,"top","bottom")}}function aA(t,e,n){return{min:oA(t,e),max:oA(t,n)}}function oA(t,e){return typeof t=="number"?t:t[e]||0}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),al=()=>({x:lA(),y:lA()}),uA=()=>({min:0,max:0}),Rt=()=>({x:uA(),y:uA()});function oi(t){return[t("x"),t("y")]}function Ux({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function W9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ey(t){return t===void 0||t===1}function Xy({scale:t,scaleX:e,scaleY:n}){return!ey(t)||!ey(e)||!ey(n)}function Va(t){return Xy(t)||jx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function jx(t){return cA(t.x)||cA(t.y)}function cA(t){return t&&t!=="0%"}function xd(t,e,n){const r=t-n,a=e*r;return n+a}function hA(t,e,n,r,a){return a!==void 0&&(t=xd(t,a,r)),xd(t,n,r)+e}function Wy(t,e=0,n=1,r,a){t.min=hA(t.min,e,n,r,a),t.max=hA(t.max,e,n,r,a)}function Bx(t,{x:e,y:n}){Wy(t.x,e.translate,e.scale,e.originPoint),Wy(t.y,n.translate,n.scale,n.originPoint)}const fA=.999999999999,dA=1.0000000000001;function Z9(t,e,n,r=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let f=0;f<a;f++){l=n[f],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ll(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Bx(t,c)),r&&Va(l.latestValues)&&ll(t,l.latestValues))}e.x<dA&&e.x>fA&&(e.x=1),e.y<dA&&e.y>fA&&(e.y=1)}function ol(t,e){t.min=t.min+e,t.max=t.max+e}function mA(t,e,n,r,a=.5){const l=dt(t.min,t.max,a);Wy(t,e,n,l,r)}function ll(t,e){mA(t.x,e.x,e.scaleX,e.scale,e.originX),mA(t.y,e.y,e.scaleY,e.scale,e.originY)}function zx(t,e){return Ux(W9(t.getBoundingClientRect(),e))}function J9(t,e,n){const r=zx(t,n),{scroll:a}=e;return a&&(ol(r.x,a.offset.x),ol(r.y,a.offset.y)),r}const Fx=({current:t})=>t?t.ownerDocument.defaultView:null,eB=new WeakMap;class tB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qc(y).point)},l=(y,_)=>{const{drag:E,dragPropagation:A,onDragStart:D}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$U(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oi(x=>{let V=this.getAxisMotionValue(x).get()||0;if($i.test(V)){const{projection:L}=this.visualElement;if(L&&L.layout){const k=L.layout.layoutBox[x];k&&(V=$n(k)*(parseFloat(V)/100))}}this.originPoint[x]=V}),D&&at.postRender(()=>D(y,_)),zy(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(y,_)=>{const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:D,onDrag:b}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:x}=_;if(A&&this.currentDirection===null){this.currentDirection=nB(x),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,x),this.updateAxis("y",_.point,x),this.visualElement.render(),b&&b(y,_)},f=(y,_)=>this.stop(y,_),d=()=>oi(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Vx(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:Fx(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&at.postRender(()=>l(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:a}=this.getProps();if(!r||!Of(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=q9(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;n&&rl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=G9(a.layoutBox,n):this.constraints=!1,this.elastic=Q9(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&oi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Y9(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rl(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=J9(r,a.root,this.visualElement.getTransformPagePoint());let c=K9(a.layout.layoutBox,l);if(n){const f=n(X9(c));this.hasMutatedConstraints=!!f,f&&(c=Ux(f))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=oi(y=>{if(!Of(y,n,this.currentDirection))return;let _=d&&d[y]||{};c&&(_={min:0,max:0});const E=a?200:1e6,A=a?40:1e7,D={type:"inertia",velocity:r?e[y]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...l,..._};return this.startAxisValueAnimation(y,D)});return Promise.all(p).then(f)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return zy(this.visualElement,e),r.start(i_(e,r,0,n,this.visualElement,!1))}stopAnimation(){oi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){oi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){oi(n=>{const{drag:r}=this.getProps();if(!Of(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[n];l.set(e[n]-dt(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rl(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};oi(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();a[c]=$9({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oi(c=>{if(!Of(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:p}=this.constraints[c];f.set(dt(d,p,a[c]))})}addListeners(){if(!this.visualElement.current)return;eB.set(this.visualElement,this);const e=this.visualElement.current,n=nc(e,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();rl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),at.read(r);const c=Sc(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(oi(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=d[y].translate,_.set(_.get()+d[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=Qy,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Of(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function nB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iB extends ta{constructor(e){super(e),this.removeGroupControls=Gn,this.removeListeners=Gn,this.controls=new tB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const pA=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class rB extends ta{constructor(){super(...arguments),this.removePointerDownListener=Gn}onPointerDown(e){this.session=new Vx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Fx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:pA(e),onStart:pA(n),onMove:r,onEnd:(l,c)=>{delete this.session,a&&at.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=nc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Te.test(t))t=parseFloat(t);else return t;const n=gA(t,e.target.x),r=gA(t,e.target.y);return`${n}% ${r}%`}},sB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,a=Xs.parse(t);if(a.length>5)return r;const l=Xs.createTransformer(t),c=typeof a[0]!="number"?1:0,f=n.x.scale*e.x,d=n.y.scale*e.y;a[0+c]/=f,a[1+c]/=d;const p=dt(f,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=p),typeof a[3+c]=="number"&&(a[3+c]/=p),l(a)}};class aB extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=e;RU(oB),l&&(n.group&&n.group.add(l),r&&r.register&&a&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Wf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:a,isPresent:l}=this.props,c=r.projection;return c&&(c.isPresent=l,a||e.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||at.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),M0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Hx(t){const[e,n]=A2(),r=M.useContext(S0);return O.jsx(aB,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(O2),isPresent:e,safeToRemove:n})}const oB={borderRadius:{...Bu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bu,borderTopRightRadius:Bu,borderBottomLeftRadius:Bu,borderBottomRightRadius:Bu,boxShadow:sB};function lB(t,e,n){const r=hn(t)?t:wc(t);return r.start(i_("",r,e,n)),r.animation}function uB(t){return t instanceof SVGElement&&t.tagName!=="svg"}const cB=(t,e)=>t.depth-e.depth;class hB{constructor(){this.children=[],this.isDirty=!1}add(e){K0(this.children,e),this.isDirty=!0}remove(e){$0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cB),this.isDirty=!1,this.children.forEach(e)}}function fB(t,e){const n=Yi.now(),r=({timestamp:a})=>{const l=a-n;l>=e&&(Qs(r),t(l-e))};return at.read(r,!0),()=>Qs(r)}const qx=["TopLeft","TopRight","BottomLeft","BottomRight"],dB=qx.length,yA=t=>typeof t=="string"?parseFloat(t):t,vA=t=>typeof t=="number"||Te.test(t);function mB(t,e,n,r,a,l){a?(t.opacity=dt(0,n.opacity!==void 0?n.opacity:1,pB(r)),t.opacityExit=dt(e.opacity!==void 0?e.opacity:1,0,gB(r))):l&&(t.opacity=dt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<dB;c++){const f=`border${qx[c]}Radius`;let d=_A(e,f),p=_A(n,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||vA(d)===vA(p)?(t[f]=Math.max(dt(yA(d),yA(p),r),0),($i.test(p)||$i.test(d))&&(t[f]+="%")):t[f]=p}(e.rotate||n.rotate)&&(t.rotate=dt(e.rotate||0,n.rotate||0,r))}function _A(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pB=Gx(0,.5,ux),gB=Gx(.5,.95,Gn);function Gx(t,e,n){return r=>r<t?0:r>e?1:n(wl(t,e,r))}function TA(t,e){t.min=e.min,t.max=e.max}function ai(t,e){TA(t.x,e.x),TA(t.y,e.y)}function EA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wA(t,e,n,r,a){return t-=e,t=xd(t,1/n,r),a!==void 0&&(t=xd(t,1/a,r)),t}function yB(t,e=0,n=1,r=.5,a,l=t,c=t){if($i.test(e)&&(e=parseFloat(e),e=dt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=dt(l.min,l.max,r);t===l&&(f-=e),t.min=wA(t.min,e,n,f,a),t.max=wA(t.max,e,n,f,a)}function bA(t,e,[n,r,a],l,c){yB(t,e[n],e[r],e[a],e.scale,l,c)}const vB=["x","scaleX","originX"],_B=["y","scaleY","originY"];function SA(t,e,n,r){bA(t.x,e,vB,n?n.x:void 0,r?r.x:void 0),bA(t.y,e,_B,n?n.y:void 0,r?r.y:void 0)}function AA(t){return t.translate===0&&t.scale===1}function Kx(t){return AA(t.x)&&AA(t.y)}function RA(t,e){return t.min===e.min&&t.max===e.max}function TB(t,e){return RA(t.x,e.x)&&RA(t.y,e.y)}function CA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $x(t,e){return CA(t.x,e.x)&&CA(t.y,e.y)}function xA(t){return $n(t.x)/$n(t.y)}function IA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class EB{constructor(){this.members=[]}add(e){K0(this.members,e),e.scheduleRender()}remove(e){if($0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wB(t,e,n){let r="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=n?.z||0;if((a||l||c)&&(r=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:_,rotateY:E,skewX:A,skewY:D}=n;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),_&&(r+=`rotateX(${_}deg) `),E&&(r+=`rotateY(${E}deg) `),A&&(r+=`skewX(${A}deg) `),D&&(r+=`skewY(${D}deg) `)}const f=t.x.scale*e.x,d=t.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const ka={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yu=typeof window<"u"&&window.MotionDebug!==void 0,ty=["","X","Y","Z"],bB={visibility:"hidden"},DA=1e3;let SB=0;function ny(t,e,n,r){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Yx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nx(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(a||l))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Yx(r)}function Qx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(c={},f=e?.()){this.id=SB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yu&&(ka.totalNodes=ka.resolvedTargetDeltas=ka.recalculatedProjection=0),this.nodes.forEach(CB),this.nodes.forEach(MB),this.nodes.forEach(OB),this.nodes.forEach(xB),Yu&&window.MotionDebug.record(ka)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hB)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Y0),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uB(c),this.instance=c;const{layoutId:d,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(p||d)&&(this.isLayoutDirty=!0),t){let _;const E=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=fB(E,250),Wf.hasAnimatedSinceResize&&(Wf.hasAnimatedSinceResize=!1,this.nodes.forEach(MA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:A,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||y.getDefaultTransition()||UB,{onLayoutAnimationStart:x,onLayoutAnimationComplete:V}=y.getProps(),L=!this.targetLayout||!$x(this.targetLayout,D)||A,k=!E&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||E&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,k);const K={...F0(b,"layout"),onPlay:x,onComplete:V};(y.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K)}else E||MA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VB),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NA);return}this.isUpdating||this.nodes.forEach(DB),this.isUpdating=!1,this.nodes.forEach(NB),this.nodes.forEach(AB),this.nodes.forEach(RB),this.clearAllSnapshots();const f=Yi.now();Jt.delta=zr(0,1e3/60,f-Jt.timestamp),Jt.timestamp=f,Jt.isProcessing=!0,Kg.update.process(Jt),Kg.preRender.process(Jt),Kg.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,M0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IB),this.sharedNodes.forEach(kB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!Kx(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&(f||Va(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),jB(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:f}=this.options;if(!f)return Rt();const d=f.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(BB))){const{scroll:y}=this.root;y&&(ol(d.x,y.offset.x),ol(d.y,y.offset.y))}return d}removeElementScroll(c){var f;const d=Rt();if(ai(d,c),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:_,options:E}=y;y!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&ai(d,c),ol(d.x,_.offset.x),ol(d.y,_.offset.y))}return d}applyTransform(c,f=!1){const d=Rt();ai(d,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&ll(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Va(y.latestValues)&&ll(d,y.latestValues)}return Va(this.latestValues)&&ll(d,this.latestValues),d}removeTransform(c){const f=Rt();ai(f,c);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Va(p.latestValues))continue;Xy(p.latestValues)&&p.updateSnapshot();const y=Rt(),_=p.measurePageBox();ai(y,_),SA(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Va(this.latestValues)&&SA(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),rc(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rt(),this.targetWithTransforms=Rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),Bx(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),rc(this.relativeTargetOrigin,this.target,A.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yu&&ka.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xy(this.parent.latestValues)||jx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(p=!1),p)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;ai(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;Z9(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=Rt());const{target:D}=f;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EA(this.prevProjectionDelta.x,this.projectionDelta.x),EA(this.prevProjectionDelta.y,this.projectionDelta.y)),ic(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!IA(this.projectionDelta.x,this.prevProjectionDelta.x)||!IA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Yu&&ka.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=al(),this.projectionDelta=al(),this.projectionDeltaWithTransform=al()}setAnimationOrigin(c,f=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},_=al();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const E=Rt(),A=d?d.source:void 0,D=this.layout?this.layout.source:void 0,b=A!==D,x=this.getStack(),V=!x||x.members.length<=1,L=!!(b&&!V&&this.options.crossfade===!0&&!this.path.some(LB));this.animationProgress=0;let k;this.mixTargetDelta=K=>{const q=K/1e3;OA(_.x,c.x,q),OA(_.y,c.y,q),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rc(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PB(this.relativeTarget,this.relativeTargetOrigin,E,q),k&&TB(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Rt()),ai(k,this.relativeTarget)),b&&(this.animationValues=y,mB(y,p,this.latestValues,q,L,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{Wf.hasAnimatedSinceResize=!0,this.currentAnimation=lB(0,DA,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:y}=c;if(!(!f||!d||!p)){if(this!==c&&this.layout&&p&&Xx(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Rt();const _=$n(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+_;const E=$n(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+E}ai(f,d),ll(f,y),ic(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new EB),this.sharedNodes.get(c).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&ny("z",c,p,this.animationValues);for(let y=0;y<ty.length;y++)ny(`rotate${ty[y]}`,c,p,this.animationValues),ny(`skew${ty[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}getProjectionStyles(c){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bB;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Qf(c?.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Qf(c?.pointerEvents)||""),this.hasProjected&&!Va(this.latestValues)&&(b.transform=y?y({},""):"none",this.hasProjected=!1),b}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=wB(this.projectionDeltaWithTransform,this.treeScale,E),y&&(p.transform=y(E,p.transform));const{x:A,y:D}=this.projectionDelta;p.transformOrigin=`${A.origin*100}% ${D.origin*100}% 0`,_.animationValues?p.opacity=_===this?(d=(f=E.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const b in bd){if(E[b]===void 0)continue;const{correct:x,applyTo:V}=bd[b],L=p.transform==="none"?E[b]:x(E[b],_);if(V){const k=V.length;for(let K=0;K<k;K++)p[V[K]]=L}else p[b]=L}return this.options.layoutId&&(p.pointerEvents=_===this?Qf(c?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(NA),this.root.sharedNodes.clear()}}}function AB(t){t.updateLayout()}function RB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:l}=t.options,c=n.source!==t.layout.source;l==="size"?oi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=$n(E);E.min=r[_].min,E.max=E.min+A}):Xx(l,n.layoutBox,r)&&oi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=$n(r[_]);E.max=E.min+A,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+A)});const f=al();ic(f,r,n.layoutBox);const d=al();c?ic(d,t.applyTransform(a,!0),n.measuredBox):ic(d,r,n.layoutBox);const p=!Kx(f);let y=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:A}=_;if(E&&A){const D=Rt();rc(D,n.layoutBox,E.layoutBox);const b=Rt();rc(b,r,A.layoutBox),$x(D,b)||(y=!0),_.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=D,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:p,hasRelativeTargetChanged:y})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CB(t){Yu&&ka.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IB(t){t.clearSnapshot()}function NA(t){t.clearMeasurements()}function DB(t){t.isLayoutDirty=!1}function NB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function MA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function MB(t){t.resolveTargetDelta()}function OB(t){t.calcProjection()}function VB(t){t.resetSkewAndRotation()}function kB(t){t.removeLeadSnapshot()}function OA(t,e,n){t.translate=dt(e.translate,0,n),t.scale=dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function VA(t,e,n,r){t.min=dt(e.min,n.min,r),t.max=dt(e.max,n.max,r)}function PB(t,e,n,r){VA(t.x,e.x,n.x,r),VA(t.y,e.y,n.y,r)}function LB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const UB={duration:.45,ease:[.4,0,.1,1]},kA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PA=kA("applewebkit/")&&!kA("chrome/")?Math.round:Gn;function LA(t){t.min=PA(t.min),t.max=PA(t.max)}function jB(t){LA(t.x),LA(t.y)}function Xx(t,e,n){return t==="position"||t==="preserve-aspect"&&!F9(xA(e),xA(n),.2)}function BB(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const zB=Qx({attachResizeListener:(t,e)=>Sc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iy={current:void 0},Wx=Qx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!iy.current){const t=new zB({});t.mount(window),t.setOptions({layoutScroll:!0}),iy.current=t}return iy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FB={pan:{Feature:rB},drag:{Feature:iB,ProjectionNode:Wx,MeasureLayout:Hx}};function UA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=r[a];l&&at.postRender(()=>l(e,qc(e)))}class HB extends ta{mount(){const{current:e}=this.node;e&&(this.unmount=FU(e,n=>(UA(this.node,n,"Start"),r=>UA(this.node,r,"End"))))}unmount(){}}class qB extends ta{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hc(Sc(this.node.current,"focus",()=>this.onFocus()),Sc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jA(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=r[a];l&&at.postRender(()=>l(e,qc(e)))}class GB extends ta{mount(){const{current:e}=this.node;e&&(this.unmount=KU(e,n=>(jA(this.node,n,"Start"),(r,{success:a})=>jA(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zy=new WeakMap,ry=new WeakMap,KB=t=>{const e=Zy.get(t.target);e&&e(t)},$B=t=>{t.forEach(KB)};function YB({root:t,...e}){const n=t||document;ry.has(n)||ry.set(n,{});const r=ry.get(n),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver($B,{root:t,...e})),r[a]}function QB(t,e,n){const r=YB(e);return Zy.set(t,n),r.observe(t),()=>{Zy.delete(t),r.unobserve(t)}}const XB={some:0,all:1};class WB extends ta{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:XB[a]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),E=p?y:_;E&&E(d)};return QB(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZB(e,n))&&this.startObserver()}unmount(){}}function ZB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const JB={inView:{Feature:WB},tap:{Feature:GB},focus:{Feature:qB},hover:{Feature:HB}},ez={layout:{ProjectionNode:Wx,MeasureLayout:Hx}},Jy={current:null},Zx={current:!1};function tz(){if(Zx.current=!0,!!C0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jy.current=t.matches;t.addListener(e),e()}else Jy.current=!1}const nz=[...bx,ln,Xs],iz=t=>nz.find(wx(t)),BA=new WeakMap;function rz(t,e,n){for(const r in e){const a=e[r],l=n[r];if(hn(a))t.addValue(r,a);else if(hn(l))t.addValue(r,wc(a,{owner:t}));else if(l!==a)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(r);t.addValue(r,wc(c!==void 0?c:a,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Yi.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,at.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:y}=c;this.onUpdate=y,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=hm(n),this.isVariantNode=N2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in E){const D=E[A];d[A]!==void 0&&hn(D)&&D.set(d[A],!1)}}mount(e){this.current=e,BA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Zx.current||tz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BA.delete(this.current),this.projection&&this.projection.unmount(),Qs(this.notifyUpdate),Qs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=oo.has(e),a=n.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bl){const n=bl[e];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zA.length;r++){const a=zA[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=rz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=wc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(Tx(a)||hx(a))?a=parseFloat(a):!iz(a)&&Xs.test(n)&&(a=yx(e,n)),this.setBaseTarget(e,hn(a)?a.get():a)),hn(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const c=V0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);c&&(a=c[e])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!hn(l)?l:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Y0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Jx extends sz{constructor(){super(...arguments),this.KeyframeResolver=Sx}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function az(t){return window.getComputedStyle(t)}class oz extends Jx{constructor(){super(...arguments),this.type="html",this.renderInstance=B2}readValueFromInstance(e,n){if(oo.has(n)){const r=J0(n);return r&&r.default||0}else{const r=az(e),a=(L2(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return zx(e,n)}build(e,n,r){L0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return z0(e,n,r)}}class lz extends Jx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(oo.has(n)){const r=J0(n);return r&&r.default||0}return n=z2.has(n)?n:N0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return q2(e,n,r)}build(e,n,r){U0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,a){F2(e,n,r,a)}mount(e){this.isSVGTag=B0(e.tagName),super.mount(e)}}const uz=(t,e)=>O0(t)?new lz(e):new oz(e,{allowProjection:t!==M.Fragment}),cz=kU({...O9,...JB,...FB,...ez},uz),En=X5(cz);function hz(){const{signInWithGoogle:t,loading:e,error:n}=Bc();return O.jsx("div",{className:"min-h-full flex flex-col items-center justify-center px-4 bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:O.jsxs(En.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-sm",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsx(En.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2,damping:15},className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),O.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CMail"})]}),n&&O.jsx(En.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:O.jsx("p",{className:"text-sm text-red-600 text-center",children:n})}),O.jsx(En.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,disabled:e,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-shadow disabled:opacity-50 disabled:cursor-not-allowed",children:e?O.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs(O.Fragment,{children:[O.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[O.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),O.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),O.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),O.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),O.jsx("span",{className:"text-gray-700 font-medium",children:"Sign in with Google"})]})})]})})}const Vf=50,Zo="duoboard_messages";function fz(t){const[e,n]=M.useState([]),[r,a]=M.useState(!0),[l,c]=M.useState(!1),[f,d]=M.useState(!0),[p,y]=M.useState(null),_=M.useRef(null),E=M.useRef(null),A=M.useCallback(async k=>{const K=k.filter(S=>S.replyTo).map(S=>S.replyTo);if(K.length===0)return k.map(S=>({...S,replyToMessage:null}));const q=[...new Set(K)],Y=await Promise.all(q.map(S=>gc(Dn(ut,Zo,S)))),R=new Map;return Y.forEach(S=>{S.exists()&&R.set(S.id,{id:S.id,...S.data()})}),k.map(S=>({...S,replyToMessage:S.replyTo&&R.get(S.replyTo)||null}))},[]);M.useEffect(()=>{if(!t){a(!1);return}a(!0),y(null);const k=Ti(ut,Zo),K=Pa(k,_d("timestamp","desc"),cS(Vf));return h0(K,async Y=>{try{const R=[];let S=null;Y.forEach(U=>{R.push({id:U.id,...U.data()}),S=U}),R.length>0&&!E.current&&(E.current=R[0].timestamp),_.current=S,d(R.length===Vf);const N=await A(R);n(N.reverse()),a(!1)}catch(R){console.error("Error fetching messages:",R),y("Failed to load messages"),a(!1)}},Y=>{console.error("Snapshot error:",Y),y("Failed to connect to messages"),a(!1)})},[t,A]);const D=M.useCallback(async()=>{if(!(!t||l||!f||!_.current)){c(!0);try{const k=Ti(ut,Zo),K=Pa(k,_d("timestamp","desc"),G4(_.current),cS(Vf)),q=await Gu(K),Y=[];let R=null;if(q.forEach(S=>{Y.push({id:S.id,...S.data()}),R=S}),R&&(_.current=R),d(Y.length===Vf),Y.length>0){const S=await A(Y);n(N=>[...S.reverse(),...N])}}catch(k){console.error("Error loading more messages:",k),y("Failed to load more messages")}finally{c(!1)}}},[t,l,f,A]),b=M.useCallback(async(k,K)=>{if(!(!t||!k.trim()))try{const q={senderId:t,content:k.trim(),imageUrl:null,timestamp:yc(),replyTo:K||null,likes:{}};await Td(Ti(ut,Zo),q)}catch(q){throw console.error("Error sending message:",q),new Error("Failed to send message")}},[t]),x=M.useCallback(async(k,K)=>{if(t)try{const Y=await(await fetch(k.dataUrl)).blob(),R=`duoboard_drawings/${t}_${Date.now()}.png`,S=WC(b2,R);await QC(S,Y);const N=await XC(S),U={senderId:t,content:null,imageUrl:N,timestamp:yc(),replyTo:K||null,likes:{}};await Td(Ti(ut,Zo),U)}catch(q){throw console.error("Error sending drawing:",q),new Error("Failed to send drawing")}},[t]),V=M.useCallback(async k=>{if(t)try{const K=Dn(ut,Zo,k),q=await gc(K);if(!q.exists())return;const R={...q.data().likes||{}};R[t]?delete R[t]:R[t]=!0,await ky(K,{likes:R}),n(S=>S.map(N=>N.id===k?{...N,likes:R}:N))}catch(K){console.error("Error toggling like:",K)}},[t]),L=M.useCallback(k=>e.find(K=>K.id===k),[e]);return{messages:e,loading:r,loadingMore:l,hasMore:f,error:p,loadMore:D,sendMessage:b,sendDrawing:x,toggleLike:V,getMessageById:L}}const kf="duoboard_lists",Ms="duoboard_listItems",dz="duoboard_messages";function mz(t){const[e,n]=M.useState([]),[r,a]=M.useState(!0),[l,c]=M.useState(null);M.useEffect(()=>{if(!t){a(!1);return}a(!0);const D=Ti(ut,kf),b=Pa(D,q4(Ns("visibility","==","public"),Ns("ownerId","==",t)),_d("createdAt","desc"));return h0(b,V=>{const L=[];V.forEach(k=>{L.push({id:k.id,...k.data()})}),n(L),a(!1)},V=>{console.error("Error fetching lists:",V),c("Failed to load lists"),a(!1)})},[t]);const f=M.useCallback(async(D,b,x,V)=>{if(!t)return null;try{const L={name:D,ownerId:t,visibility:b,type:x,emoji:V||"",createdAt:yc()};return(await Td(Ti(ut,kf),L)).id}catch(L){throw console.error("Error creating list:",L),new Error("Failed to create list")}},[t]),d=M.useCallback(async(D,b)=>{if(t)try{const x=Dn(ut,kf,D);await ky(x,b)}catch(x){throw console.error("Error updating list:",x),new Error("Failed to update list")}},[t]),p=M.useCallback(async D=>{if(t)try{const b=Pa(Ti(ut,Ms),Ns("listId","==",D)),V=(await Gu(b)).docs.map(L=>Ug(Dn(ut,Ms,L.id)));await Promise.all(V),await Ug(Dn(ut,kf,D))}catch(b){throw console.error("Error deleting list:",b),new Error("Failed to delete list")}},[t]),y=M.useCallback(async(D,b)=>{if(t)try{const x=Pa(Ti(ut,Ms),Ns("listId","==",D),Ns("messageId","==",b));if(!(await Gu(x)).empty)return;const L={listId:D,messageId:b,addedAt:yc(),completed:!1};await Td(Ti(ut,Ms),L)}catch(x){throw console.error("Error adding message to list:",x),new Error("Failed to add to list")}},[t]),_=M.useCallback(async(D,b)=>{if(t)try{const x=Pa(Ti(ut,Ms),Ns("listId","==",D),Ns("messageId","==",b)),L=(await Gu(x)).docs.map(k=>Ug(Dn(ut,Ms,k.id)));await Promise.all(L)}catch(x){throw console.error("Error removing from list:",x),new Error("Failed to remove from list")}},[t]),E=M.useCallback(async D=>{if(t)try{const b=Dn(ut,Ms,D),x=await gc(b);if(x.exists()){const V=x.data().completed||!1;await ky(b,{completed:!V})}}catch(b){throw console.error("Error toggling item completion:",b),new Error("Failed to update item")}},[t]),A=M.useCallback(async D=>{try{const b=Pa(Ti(ut,Ms),Ns("listId","==",D),_d("addedAt","desc")),x=await Gu(b),V=[];x.forEach(Y=>{V.push({id:Y.id,...Y.data()})});const k=V.map(Y=>Y.messageId).map(Y=>gc(Dn(ut,dz,Y))),K=await Promise.all(k),q=new Map;return K.forEach(Y=>{Y.exists()&&q.set(Y.id,{id:Y.id,...Y.data()})}),V.map(Y=>({...Y,message:q.get(Y.messageId)||null}))}catch(b){throw console.error("Error fetching list items:",b),new Error("Failed to load list items")}},[]);return{lists:e,loading:r,error:l,createList:f,updateList:d,deleteList:p,addMessageToList:y,removeFromList:_,toggleItemCompleted:E,getListItems:A}}function pz({userId:t}){const[e,n]=M.useState("default"),[r,a]=M.useState(null),[l,c]=M.useState(!1),[f,d]=M.useState(null),[p,y]=M.useState(null);M.useEffect(()=>{(async()=>{if(!("Notification"in window)){n("unsupported");return}n(Notification.permission);const A=await L5();y(A)})()},[]),M.useEffect(()=>{if(!p)return;const E=k5(p,A=>{if(console.log("Foreground message received:",A),Notification.permission==="granted"&&A.notification){const{title:D,body:b}=A.notification;new Notification(D||"New Message",{body:b||"You have a new message",icon:"./icons/icon-192.svg",tag:"cmail-foreground"})}});return()=>E()},[p]),M.useEffect(()=>{t&&r&&Vy(Dn(ut,"duoboard_users",t),{fcmToken:r},{merge:!0}).catch(E=>{console.error("Error saving FCM token:",E)})},[t,r]);const _=M.useCallback(async()=>{if(!p){d("Push notifications are not supported in this browser");return}{d("VAPID key not configured. See Firebase Console > Cloud Messaging.");return}},[p]);return{permission:e,token:r,loading:l,error:f,requestPermission:_}}function gz({title:t="CMail",showProfile:e=!0,onListsClick:n}){const{user:r,signOut:a,uploadAvatar:l}=Bc(),c=M.useRef(null),{permission:f,loading:d,requestPermission:p}=pz({userId:r?.uid}),y=()=>{c.current?.click()},_=async A=>{const D=A.target.files?.[0];if(D)try{await l(D)}catch{}c.current&&(c.current.value="")},E=r?.customPhotoURL||r?.photoURL;return O.jsxs("header",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200 safe-area-top",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[e&&O.jsxs("button",{onClick:y,className:"relative w-8 h-8 rounded-full overflow-hidden group","aria-label":"Change profile photo",children:[E?O.jsx("img",{src:E,alt:r?.displayName,className:"w-8 h-8 rounded-full object-cover"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.displayName?.[0]||"?"}),O.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),O.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:_,className:"hidden"})]}),O.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:t})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[f!=="unsupported"&&O.jsx("button",{onClick:f!=="granted"?p:void 0,disabled:d||f==="denied",className:`p-2 rounded-full transition-colors ${f==="granted"?"text-indigo-600":f==="denied"?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked":"Enable notifications",title:f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked - check browser settings":"Click to enable notifications",children:d?O.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:f==="granted"?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}),f==="denied"&&O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364L5.636 5.636"})]})}),n&&O.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"View lists",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),O.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Sign out",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}function yz({onDoubleTap:t,delay:e=300}){const n=M.useRef(0);return M.useCallback(()=>{const a=Date.now(),l=a-n.current;l>0&&l<e?(t(),n.current=0):n.current=a},[t,e])}function vz({onSwipeRight:t,onSwipeLeft:e,threshold:n=80}){const r=M.useRef(0),[a,l]=M.useState({swiping:!1,offset:0}),c=M.useCallback(p=>{r.current=p.touches[0].clientX,l({swiping:!0,offset:0})},[]),f=M.useCallback(p=>{if(!a.swiping)return;const _=p.touches[0].clientX-r.current;_>0&&t?l({swiping:!0,offset:Math.min(_,n*1.5)}):_<0&&e&&l({swiping:!0,offset:Math.max(_,-n*1.5)})},[a.swiping,n,t,e]),d=M.useCallback(()=>{const p=a.offset;p>n&&t?t():p<-n&&e&&e(),l({swiping:!1,offset:0})},[a.offset,n,t,e]);return{handlers:{onTouchStart:c,onTouchMove:f,onTouchEnd:d},swipeState:a}}function _z({message:t,isOwn:e,senderPhoto:n,senderName:r,onDoubleTap:a,onSwipeReply:l,onSwipeAddToList:c,showLikeAnimation:f,currentUserId:d,onNavigateToMessage:p}){const y=yz({onDoubleTap:a}),{handlers:_,swipeState:E}=vz({onSwipeRight:l,onSwipeLeft:c}),A=t.likes&&Object.keys(t.likes).length>0,D=t.likes?.[d],b=t.likes?Object.keys(t.likes).length:0,x=V=>V?(V.toDate?V.toDate():new Date(V)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"";return O.jsxs(En.div,{className:`flex items-end gap-2 mb-3 ${e?"flex-row-reverse":""}`,style:{transform:`translateX(${E.offset}px)`,transition:E.swiping?"none":"transform 0.2s ease-out"},..._,children:[O.jsx(Ga,{children:E.offset>40&&O.jsx(En.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute left-0 flex items-center justify-center w-10 h-10 bg-indigo-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})}),O.jsx(Ga,{children:E.offset<-40&&O.jsx(En.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute right-0 flex items-center justify-center w-10 h-10 bg-green-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})}),!e&&O.jsx("div",{className:"flex-shrink-0 w-8 h-8",children:n?O.jsx("img",{src:n,alt:r||"User",className:"w-8 h-8 rounded-full"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.[0]||"?"})}),O.jsxs("div",{className:`relative max-w-[75%] ${e?"items-end":"items-start"}`,onClick:y,children:[t.replyToMessage&&O.jsxs("button",{onClick:V=>{V.stopPropagation(),p?.(t.replyTo)},className:`block mb-1 p-2 text-xs bg-gray-100 rounded-lg border-l-2 border-indigo-400 max-w-full truncate text-left ${e?"ml-auto":""}`,children:[O.jsx("span",{className:"text-gray-500",children:"Replying to: "}),O.jsx("span",{className:"text-gray-700",children:t.replyToMessage.content||"(drawing)"})]}),O.jsxs("div",{className:`relative rounded-2xl px-4 py-2 ${e?"bg-indigo-600 text-white rounded-br-md":"bg-white border border-gray-200 text-gray-900 rounded-bl-md"}`,children:[t.imageUrl&&O.jsx("img",{src:t.imageUrl,alt:"Drawing",className:"max-w-full rounded-lg mb-1",style:{maxHeight:"200px"}}),t.content&&O.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:t.content}),O.jsx(Ga,{children:f&&O.jsx(En.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})}),A&&!f&&O.jsxs("div",{className:`absolute -bottom-2 ${e?"left-2":"right-2"} flex items-center gap-0.5 bg-white rounded-full px-1.5 py-0.5 shadow-sm border border-gray-100`,children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-3.5 h-3.5 ${D?"text-red-500":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),b>1&&O.jsx("span",{className:"text-xs text-gray-600",children:b})]})]}),O.jsx("p",{className:`mt-1 text-xs text-gray-400 ${e?"text-right":"text-left"}`,children:x(t.timestamp)})]})]})}function Tz({onSend:t,onDrawClick:e,replyingTo:n,onCancelReply:r,disabled:a}){const[l,c]=M.useState(""),f=M.useRef(null);M.useEffect(()=>{n&&f.current&&f.current.focus()},[n]);const d=y=>{y.preventDefault(),l.trim()&&!a&&(t(l.trim()),c(""))},p=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),d(y))};return O.jsxs("div",{className:"border-t border-gray-200 bg-white safe-area-bottom",children:[O.jsx(Ga,{children:n&&O.jsx(En.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:O.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200",children:[O.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[O.jsx("div",{className:"w-1 h-8 bg-indigo-500 rounded-full"}),O.jsxs("div",{className:"min-w-0",children:[O.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Replying"}),O.jsx("p",{className:"text-sm text-gray-600 truncate",children:n.content||"(drawing)"})]})]}),O.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})}),O.jsxs("form",{onSubmit:d,className:"flex items-end gap-2 p-3",children:[O.jsx("button",{type:"button",onClick:e,disabled:a,className:"flex-shrink-0 p-2.5 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors disabled:opacity-50","aria-label":"Open drawing canvas",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("textarea",{ref:f,value:l,onChange:y=>c(y.target.value),onKeyDown:p,placeholder:"Message...",disabled:a,rows:1,className:"w-full px-4 py-2.5 bg-gray-100 rounded-2xl resize-none text-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white disabled:opacity-50 transition-colors",style:{maxHeight:"120px",minHeight:"44px"}})}),O.jsx("button",{type:"submit",disabled:!l.trim()||a,className:"flex-shrink-0 p-2.5 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:hover:bg-indigo-600","aria-label":"Send message",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ev.apply(null,arguments)}function FA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tv(t,e){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tv(t,e)}function Ez(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tv(t,e)}var HA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wz(t,e){return!!(t===e||HA(t)&&HA(e))}function bz(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!wz(t[n],e[n]))return!1;return!0}function sy(t,e){e===void 0&&(e=bz);var n,r=[],a,l=!1;function c(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return l&&n===this&&e(f,r)||(a=t.apply(this,f),l=!0,n=this,r=f),a}return c}var Sz=typeof performance=="object"&&typeof performance.now=="function",qA=Sz?function(){return performance.now()}:function(){return Date.now()};function GA(t){cancelAnimationFrame(t.id)}function Az(t,e){var n=qA();function r(){qA()-n>=e?t.call(null):a.id=requestAnimationFrame(r)}var a={id:requestAnimationFrame(r)};return a}var ay=-1;function KA(t){if(t===void 0&&(t=!1),ay===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),ay=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ay}var Jo=null;function $A(t){if(t===void 0&&(t=!1),Jo===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Jo="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Jo="negative":Jo="positive-ascending"),document.body.removeChild(e),Jo}return Jo}var Rz=150,Cz=function(e,n){return e};function xz(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,a=t.getItemSize,l=t.getOffsetForIndexAndAlignment,c=t.getStartIndexForOffset,f=t.getStopIndexForStartIndex,d=t.initInstanceProps,p=t.shouldResetStyleCacheOnItemSizeChange,y=t.validateProps;return e=(function(_){Ez(E,_);function E(D){var b;return b=_.call(this,D)||this,b._instanceProps=d(b.props,FA(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:FA(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=sy(function(x,V,L,k){return b.props.onItemsRendered({overscanStartIndex:x,overscanStopIndex:V,visibleStartIndex:L,visibleStopIndex:k})}),b._callOnScroll=void 0,b._callOnScroll=sy(function(x,V,L){return b.props.onScroll({scrollDirection:x,scrollOffset:V,scrollUpdateWasRequested:L})}),b._getItemStyle=void 0,b._getItemStyle=function(x){var V=b.props,L=V.direction,k=V.itemSize,K=V.layout,q=b._getItemStyleCache(p&&k,p&&K,p&&L),Y;if(q.hasOwnProperty(x))Y=q[x];else{var R=n(b.props,x,b._instanceProps),S=a(b.props,x,b._instanceProps),N=L==="horizontal"||K==="horizontal",U=L==="rtl",B=N?R:0;q[x]=Y={position:"absolute",left:U?void 0:B,right:U?B:void 0,top:N?0:R,height:N?"100%":S,width:N?S:"100%"}}return Y},b._getItemStyleCache=void 0,b._getItemStyleCache=sy(function(x,V,L){return{}}),b._onScrollHorizontal=function(x){var V=x.currentTarget,L=V.clientWidth,k=V.scrollLeft,K=V.scrollWidth;b.setState(function(q){if(q.scrollOffset===k)return null;var Y=b.props.direction,R=k;if(Y==="rtl")switch($A()){case"negative":R=-k;break;case"positive-descending":R=K-L-k;break}return R=Math.max(0,Math.min(R,K-L)),{isScrolling:!0,scrollDirection:q.scrollOffset<R?"forward":"backward",scrollOffset:R,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(x){var V=x.currentTarget,L=V.clientHeight,k=V.scrollHeight,K=V.scrollTop;b.setState(function(q){if(q.scrollOffset===K)return null;var Y=Math.max(0,Math.min(K,k-L));return{isScrolling:!0,scrollDirection:q.scrollOffset<Y?"forward":"backward",scrollOffset:Y,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(x){var V=b.props.outerRef;b._outerRef=x,typeof V=="function"?V(x):V!=null&&typeof V=="object"&&V.hasOwnProperty("current")&&(V.current=x)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&GA(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=Az(b._resetIsScrolling,Rz)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}E.getDerivedStateFromProps=function(b,x){return Iz(b,x),y(b),null};var A=E.prototype;return A.scrollTo=function(b){b=Math.max(0,b),this.setState(function(x){return x.scrollOffset===b?null:{scrollDirection:x.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(b,x){x===void 0&&(x="auto");var V=this.props,L=V.itemCount,k=V.layout,K=this.state.scrollOffset;b=Math.max(0,Math.min(b,L-1));var q=0;if(this._outerRef){var Y=this._outerRef;k==="vertical"?q=Y.scrollWidth>Y.clientWidth?KA():0:q=Y.scrollHeight>Y.clientHeight?KA():0}this.scrollTo(l(this.props,b,x,K,this._instanceProps,q))},A.componentDidMount=function(){var b=this.props,x=b.direction,V=b.initialScrollOffset,L=b.layout;if(typeof V=="number"&&this._outerRef!=null){var k=this._outerRef;x==="horizontal"||L==="horizontal"?k.scrollLeft=V:k.scrollTop=V}this._callPropsCallbacks()},A.componentDidUpdate=function(){var b=this.props,x=b.direction,V=b.layout,L=this.state,k=L.scrollOffset,K=L.scrollUpdateWasRequested;if(K&&this._outerRef!=null){var q=this._outerRef;if(x==="horizontal"||V==="horizontal")if(x==="rtl")switch($A()){case"negative":q.scrollLeft=-k;break;case"positive-ascending":q.scrollLeft=k;break;default:var Y=q.clientWidth,R=q.scrollWidth;q.scrollLeft=R-Y-k;break}else q.scrollLeft=k;else q.scrollTop=k}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&GA(this._resetIsScrollingTimeoutId)},A.render=function(){var b=this.props,x=b.children,V=b.className,L=b.direction,k=b.height,K=b.innerRef,q=b.innerElementType,Y=b.innerTagName,R=b.itemCount,S=b.itemData,N=b.itemKey,U=N===void 0?Cz:N,B=b.layout,H=b.outerElementType,P=b.outerTagName,Xe=b.style,ht=b.useIsScrolling,ee=b.width,oe=this.state.isScrolling,fe=L==="horizontal"||B==="horizontal",Ie=fe?this._onScrollHorizontal:this._onScrollVertical,De=this._getRangeToRender(),F=De[0],ie=De[1],le=[];if(R>0)for(var ue=F;ue<=ie;ue++)le.push(M.createElement(x,{data:S,key:U(ue,S),index:ue,isScrolling:ht?oe:void 0,style:this._getItemStyle(ue)}));var ge=r(this.props,this._instanceProps);return M.createElement(H||P||"div",{className:V,onScroll:Ie,ref:this._outerRefSetter,style:ev({position:"relative",height:k,width:ee,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:L},Xe)},M.createElement(q||Y||"div",{children:le,ref:K,style:{height:fe?"100%":ge,pointerEvents:oe?"none":void 0,width:fe?ge:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var x=this._getRangeToRender(),V=x[0],L=x[1],k=x[2],K=x[3];this._callOnItemsRendered(V,L,k,K)}}if(typeof this.props.onScroll=="function"){var q=this.state,Y=q.scrollDirection,R=q.scrollOffset,S=q.scrollUpdateWasRequested;this._callOnScroll(Y,R,S)}},A._getRangeToRender=function(){var b=this.props,x=b.itemCount,V=b.overscanCount,L=this.state,k=L.isScrolling,K=L.scrollDirection,q=L.scrollOffset;if(x===0)return[0,0,0,0];var Y=c(this.props,q,this._instanceProps),R=f(this.props,Y,q,this._instanceProps),S=!k||K==="backward"?Math.max(1,V):1,N=!k||K==="forward"?Math.max(1,V):1;return[Math.max(0,Y-S),Math.max(0,Math.min(x-1,R+N)),Y,R]},E})(M.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Iz=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},Dz=50,ul=function(e,n,r){var a=e,l=a.itemSize,c=r.itemMetadataMap,f=r.lastMeasuredIndex;if(n>f){var d=0;if(f>=0){var p=c[f];d=p.offset+p.size}for(var y=f+1;y<=n;y++){var _=l(y);c[y]={offset:d,size:_},d+=_}r.lastMeasuredIndex=n}return c[n]},Nz=function(e,n,r){var a=n.itemMetadataMap,l=n.lastMeasuredIndex,c=l>0?a[l].offset:0;return c>=r?eI(e,n,l,0,r):Mz(e,n,Math.max(0,l),r)},eI=function(e,n,r,a,l){for(;a<=r;){var c=a+Math.floor((r-a)/2),f=ul(e,c,n).offset;if(f===l)return c;f<l?a=c+1:f>l&&(r=c-1)}return a>0?a-1:0},Mz=function(e,n,r,a){for(var l=e.itemCount,c=1;r<l&&ul(e,r,n).offset<a;)r+=c,c*=2;return eI(e,n,Math.min(r,l-1),Math.floor(r/2),a)},YA=function(e,n){var r=e.itemCount,a=n.itemMetadataMap,l=n.estimatedItemSize,c=n.lastMeasuredIndex,f=0;if(c>=r&&(c=r-1),c>=0){var d=a[c];f=d.offset+d.size}var p=r-c-1,y=p*l;return f+y},Oz=xz({getItemOffset:function(e,n,r){return ul(e,n,r).offset},getItemSize:function(e,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:YA,getOffsetForIndexAndAlignment:function(e,n,r,a,l,c){var f=e.direction,d=e.height,p=e.layout,y=e.width,_=f==="horizontal"||p==="horizontal",E=_?y:d,A=ul(e,n,l),D=YA(e,l),b=Math.max(0,Math.min(D-E,A.offset)),x=Math.max(0,A.offset-E+A.size+c);switch(r==="smart"&&(a>=x-E&&a<=b+E?r="auto":r="center"),r){case"start":return b;case"end":return x;case"center":return Math.round(x+(b-x)/2);case"auto":default:return a>=x&&a<=b?a:a<x?x:b}},getStartIndexForOffset:function(e,n,r){return Nz(e,r,n)},getStopIndexForStartIndex:function(e,n,r,a){for(var l=e.direction,c=e.height,f=e.itemCount,d=e.layout,p=e.width,y=l==="horizontal"||d==="horizontal",_=y?p:c,E=ul(e,n,a),A=r+_,D=E.offset+E.size,b=n;b<f-1&&D<A;)b++,D+=ul(e,b,a).size;return b},initInstanceProps:function(e,n){var r=e,a=r.estimatedItemSize,l={itemMetadataMap:{},estimatedItemSize:a||Dz,lastMeasuredIndex:-1};return n.resetAfterIndex=function(c,f){f===void 0&&(f=!0),l.lastMeasuredIndex=Math.min(l.lastMeasuredIndex,c-1),n._getItemStyleCache(-1),f&&n.forceUpdate()},l},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});const QA=80;function Vz({messages:t,currentUser:e,otherUser:n,onDoubleTap:r,onSwipeReply:a,onSwipeAddToList:l,likeAnimatingMessageId:c,loading:f,loadingMore:d,hasMore:p,onLoadMore:y,scrollToMessageId:_,onScrollToMessageComplete:E}){const A=M.useRef(null),D=M.useRef(null),b=M.useRef({}),[x,V]=M.useState(0);M.useEffect(()=>{const R=()=>{D.current&&V(D.current.clientHeight)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),M.useEffect(()=>{A.current&&t.length>0&&!_&&A.current.scrollToItem(t.length-1,"end")},[t.length,_]),M.useEffect(()=>{if(_&&A.current){const R=t.findIndex(S=>S.id===_);R!==-1&&(A.current.scrollToItem(R,"center"),E?.())}},[_,t,E]);const L=M.useCallback(R=>b.current[R]||QA,[]),k=M.useCallback((R,S)=>{b.current[R]!==S&&(b.current[R]=S,A.current?.resetAfterIndex(R))},[]),K=M.useCallback(({scrollOffset:R})=>{R<100&&p&&!d&&y()},[p,d,y]),q=M.useCallback(R=>R===e.uid?{photo:e.customPhotoURL||e.photoURL,name:e.displayName}:{photo:n?.customPhotoURL||n?.photoURL,name:n?.displayName},[e,n]),Y=M.useCallback(({index:R,style:S})=>{const N=t[R],U=N.senderId===e.uid,B=q(N.senderId);return O.jsx("div",{style:S,className:"px-3",children:O.jsx(kz,{index:R,onHeightChange:k,children:O.jsx(_z,{message:N,isOwn:U,senderPhoto:B.photo,senderName:B.name,onDoubleTap:()=>r(N.id),onSwipeReply:()=>a(N),onSwipeAddToList:()=>l(N),showLikeAnimation:c===N.id,currentUserId:e.uid,onNavigateToMessage:H=>{const P=t.findIndex(Xe=>Xe.id===H);P!==-1&&A.current?.scrollToItem(P,"center")}})})})},[t,e,q,r,a,l,c,k]);return f?O.jsx("div",{className:"flex-1 flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):t.length===0?O.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[O.jsx("div",{className:"w-16 h-16 mb-4 bg-indigo-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),O.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No messages yet"}),O.jsx("p",{className:"text-sm text-gray-500",children:"Send a message or drawing to get started!"})]}):O.jsxs("div",{ref:D,className:"flex-1 overflow-hidden",children:[d&&O.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex justify-center py-2 bg-gradient-to-b from-gray-50 to-transparent",children:O.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"})}),x>0&&O.jsx(Oz,{ref:A,height:x,width:"100%",itemCount:t.length,itemSize:L,onScroll:K,estimatedItemSize:QA,className:"scrollbar-hide",children:Y})]})}function kz({index:t,onHeightChange:e,children:n}){const r=M.useRef(null);return M.useEffect(()=>{if(r.current){const a=r.current.getBoundingClientRect().height;e(t,a+12)}},[t,e,n]),O.jsx("div",{ref:r,children:n})}function Pz({isOpen:t,onClose:e,onSend:n}){const r=M.useRef(null),[a,l]=M.useState(!1),[c,f]=M.useState(!1),d=M.useRef(null),p=300,y=200,_=3,E="#1f2937";M.useEffect(()=>{if(t&&r.current){const k=r.current.getContext("2d");k&&(k.fillStyle="#ffffff",k.fillRect(0,0,p,y),k.lineCap="round",k.lineJoin="round",k.lineWidth=_,k.strokeStyle=E),f(!1)}},[t]);const A=M.useCallback(k=>{const K=r.current;if(!K)return{x:0,y:0};const q=K.getBoundingClientRect(),Y=K.width/q.width,R=K.height/q.height;let S,N;return"touches"in k?(S=k.touches[0].clientX,N=k.touches[0].clientY):(S=k.clientX,N=k.clientY),{x:(S-q.left)*Y,y:(N-q.top)*R}},[]),D=M.useCallback(k=>{k.preventDefault();const K=A(k);d.current=K,l(!0);const q=r.current?.getContext("2d");q&&(q.beginPath(),q.moveTo(K.x,K.y),q.lineTo(K.x,K.y),q.stroke(),f(!0))},[A]),b=M.useCallback(k=>{if(!a||!d.current)return;k.preventDefault();const K=A(k),q=r.current?.getContext("2d");q&&(q.beginPath(),q.moveTo(d.current.x,d.current.y),q.lineTo(K.x,K.y),q.stroke()),d.current=K,f(!0)},[a,A]),x=M.useCallback(()=>{l(!1),d.current=null},[]),V=M.useCallback(()=>{const k=r.current?.getContext("2d");k&&(k.fillStyle="#ffffff",k.fillRect(0,0,p,y),k.strokeStyle=E),f(!1)},[]),L=M.useCallback(()=>{if(!r.current||!c)return;const k=r.current.toDataURL("image/png");n({dataUrl:k,width:p,height:y}),V(),e()},[c,n,e,V]);return O.jsx(Ga,{children:t&&O.jsx(En.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e,children:O.jsxs(En.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-sm w-full",onClick:k=>k.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Draw"}),O.jsx("button",{onClick:e,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"p-4",children:O.jsxs("div",{className:"relative bg-gray-50 rounded-xl overflow-hidden border-2 border-dashed border-gray-200",children:[O.jsx("canvas",{ref:r,width:p,height:y,className:"w-full touch-none cursor-crosshair",style:{aspectRatio:`${p}/${y}`},onTouchStart:D,onTouchMove:b,onTouchEnd:x,onMouseDown:D,onMouseMove:b,onMouseUp:x,onMouseLeave:x}),!c&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("p",{className:"text-gray-400 text-sm",children:"Draw something!"})})]})}),O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-gray-50",children:[O.jsx("button",{onClick:V,disabled:!c,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),O.jsxs("button",{onClick:L,disabled:!c,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[O.jsx("span",{children:"Send"}),O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})]})]})})})}function Lz({isOpen:t,message:e,lists:n,currentUserId:r,onClose:a,onSelectList:l,onCreateList:c}){const[f,d]=M.useState(!1),[p,y]=M.useState(""),[_,E]=M.useState("public"),[A,D]=M.useState("collection"),[b,x]=M.useState(""),[V,L]=M.useState(!1),k=async()=>{if(p.trim()){L(!0);try{const Y=await c(p.trim(),_,A,b);Y&&l(Y),K()}catch(Y){console.error("Failed to create list:",Y)}finally{L(!1)}}},K=()=>{d(!1),y(""),E("public"),D("collection"),x("")},q=()=>{K(),a()};return O.jsx(Ga,{children:t&&e&&O.jsx(En.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:q,children:O.jsxs(En.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg max-h-[70vh] overflow-hidden",onClick:Y=>Y.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f?"Create New List":"Save to List"}),O.jsx("button",{onClick:q,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:O.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.content||(e.imageUrl?"(drawing)":"")})}),f?O.jsxs("div",{className:"p-4 space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:b,onChange:Y=>{const R=Y.target.value;if(R.length===0)x("");else{const S=[...R];x(S[S.length-1])}},placeholder:"",className:"w-14 h-14 text-2xl text-center border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),O.jsx("span",{className:"text-sm text-gray-500",children:"Type or paste any emoji"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),O.jsx("input",{type:"text",value:p,onChange:Y=>y(Y.target.value),placeholder:"List name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoFocus:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>D("collection"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="collection"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Collection"}),O.jsx("button",{onClick:()=>D("checklist"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="checklist"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Checklist"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>E("public"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${_==="public"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Shared"}),O.jsxs("button",{onClick:()=>E("private"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors flex items-center justify-center gap-1 ${_==="private"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Private",O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]})]})]}),O.jsxs("div",{className:"flex gap-2 pt-2",children:[O.jsx("button",{onClick:K,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),O.jsx("button",{onClick:k,disabled:!p.trim()||V,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50",children:V?"Creating...":"Create & Add"})]})]}):O.jsxs("div",{className:"overflow-y-auto max-h-[50vh]",children:[n.map(Y=>{const R=Y.visibility==="private",S=Y.ownerId===r;return O.jsxs("button",{onClick:()=>l(Y.id),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[O.jsx("span",{className:"text-xl",children:Y.emoji||""}),O.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:Y.name}),R&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Y.type==="checklist"&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})]},Y.id)}),O.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left border-t border-gray-200",children:[O.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),O.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"Create New List"})]})]})]})})})}function Uz({isOpen:t,lists:e,currentUserId:n,onClose:r,onGetListItems:a,onToggleCompleted:l,onRemoveFromList:c,onDeleteList:f,onNavigateToMessage:d}){const[p,y]=M.useState(null),[_,E]=M.useState([]),[A,D]=M.useState(!1),[b,x]=M.useState(null);M.useEffect(()=>{p&&(D(!0),a(p.id).then(E).catch(console.error).finally(()=>D(!1)))},[p,a]);const V=M.useCallback(async R=>{if(await l(R),p){const S=await a(p.id);E(S)}},[p,l,a]),L=M.useCallback(async R=>{if(!p)return;await c(p.id,R);const S=await a(p.id);E(S)},[p,c,a]),k=M.useCallback(async R=>{await f(R),y(null),x(null)},[f]),K=M.useCallback(R=>{d(R),r()},[d,r]),q=M.useCallback(()=>{y(null),E([]),x(null),r()},[r]),Y=R=>R?(R.toDate?R.toDate():new Date(R)).toLocaleDateString([],{month:"short",day:"numeric"}):"";return O.jsx(Ga,{children:t&&O.jsx(En.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:q,children:O.jsxs(En.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg h-[85vh] overflow-hidden flex flex-col",onClick:R=>R.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 flex-shrink-0",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[p&&O.jsx("button",{onClick:()=>{y(null),E([])},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p?O.jsxs("span",{className:"flex items-center gap-2",children:[O.jsx("span",{children:p.emoji||""}),O.jsx("span",{children:p.name})]}):"Lists"})]}),O.jsx("button",{onClick:q,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto",children:p?A?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):_.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No items yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press messages to add them here"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>O.jsxs("div",{className:"flex items-start gap-3 px-4 py-3",children:[p.type==="checklist"&&O.jsx("button",{onClick:()=>V(R.id),className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${R.completed?"bg-indigo-600 border-indigo-600":"border-gray-300 hover:border-indigo-400"}`,children:R.completed&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),O.jsxs("button",{onClick:()=>R.message&&K(R.messageId),className:`flex-1 text-left min-w-0 ${R.completed?"opacity-50":""}`,children:[O.jsx("p",{className:`text-sm text-gray-900 ${R.completed?"line-through":""}`,children:R.message?.content||(R.message?.imageUrl?"(drawing)":"Deleted message")}),O.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Added ",Y(R.addedAt)]})]}),O.jsx("button",{onClick:()=>L(R.messageId),className:"flex-shrink-0 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},R.id))}):e.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No lists yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press a message to create your first list"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:e.map(R=>{const S=R.ownerId===n,N=R.visibility==="private";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>y(R),className:"flex-1 flex items-center gap-3 text-left min-w-0",children:[O.jsx("span",{className:"text-xl",children:R.emoji||""}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name}),N&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),O.jsx("p",{className:"text-xs text-gray-400",children:R.type==="checklist"?"Checklist":"Collection"})]})]}),S&&O.jsx(O.Fragment,{children:b===R.id?O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{onClick:()=>x(null),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),O.jsx("button",{onClick:()=>k(R.id),className:"px-2 py-1 text-xs text-white bg-red-500 hover:bg-red-600 rounded",children:"Delete"})]}):O.jsx("button",{onClick:()=>x(R.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)})})})]})})})}function jz(){const{user:t}=Bc(),{messages:e,loading:n,loadingMore:r,hasMore:a,loadMore:l,sendMessage:c,sendDrawing:f,toggleLike:d}=fz(t?.uid),{lists:p,createList:y,addMessageToList:_,removeFromList:E,deleteList:A,toggleItemCompleted:D,getListItems:b}=mz(t?.uid),[x,V]=M.useState(null),[L,k]=M.useState(!1),[K,q]=M.useState(!1),[Y,R]=M.useState(!1),[S,N]=M.useState(null),[U,B]=M.useState(null),[H,P]=M.useState(null),[Xe,ht]=M.useState(null);M.useEffect(()=>{if(!t||e.length===0)return;const ue=e.find(Ee=>Ee.senderId!==t.uid)?.senderId;return ue?h0(Dn(ut,"duoboard_users",ue),Ee=>{Ee.exists()&&V({uid:Ee.id,...Ee.data()})},Ee=>console.error("Error fetching other user:",Ee)):void 0},[t,e]);const ee=M.useCallback(async ue=>{try{await c(ue,S?.id),N(null)}catch(ge){console.error("Failed to send message:",ge)}},[c,S]),oe=M.useCallback(async ue=>{try{await f(ue,S?.id),N(null)}catch(ge){console.error("Failed to send drawing:",ge)}},[f,S]),fe=M.useCallback(async ue=>{P(ue),await d(ue),setTimeout(()=>P(null),600)},[d]),Ie=M.useCallback(ue=>{N(ue)},[]),De=M.useCallback(ue=>{B(ue),q(!0)},[]),F=M.useCallback(async ue=>{U&&(await _(ue,U.id),q(!1),B(null))},[U,_]),ie=M.useCallback(async(ue,ge,Ee,Oe)=>y(ue,ge,Ee,Oe),[y]),le=M.useCallback(ue=>{ht(ue),R(!1)},[]);return t?O.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[O.jsx(gz,{onListsClick:()=>R(!0)}),O.jsx(Vz,{messages:e,currentUser:t,otherUser:x,onDoubleTap:fe,onSwipeReply:Ie,onSwipeAddToList:De,likeAnimatingMessageId:H,loading:n,loadingMore:r,hasMore:a,onLoadMore:l,scrollToMessageId:Xe,onScrollToMessageComplete:()=>ht(null)}),O.jsx(Tz,{onSend:ee,onDrawClick:()=>k(!0),replyingTo:S,onCancelReply:()=>N(null)}),O.jsx(Pz,{isOpen:L,onClose:()=>k(!1),onSend:oe}),O.jsx(Lz,{isOpen:K,message:U,lists:p,currentUserId:t.uid,onClose:()=>{q(!1),B(null)},onSelectList:F,onCreateList:ie}),O.jsx(Uz,{isOpen:Y,lists:p,currentUserId:t.uid,onClose:()=>R(!1),onGetListItems:b,onToggleCompleted:D,onRemoveFromList:E,onDeleteList:A,onNavigateToMessage:le})]}):null}function Bz({children:t}){const{user:e,loading:n}=Bc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e?O.jsx(O.Fragment,{children:t}):O.jsx(lv,{to:"/login",replace:!0})}function zz({children:t}){const{user:e,loading:n}=Bc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e?O.jsx(lv,{to:"/",replace:!0}):O.jsx(O.Fragment,{children:t})}function Fz(){return O.jsxs(xN,{children:[O.jsx(Pf,{path:"/login",element:O.jsx(zz,{children:O.jsx(hz,{})})}),O.jsx(Pf,{path:"/",element:O.jsx(Bz,{children:O.jsx(jz,{})})}),O.jsx(Pf,{path:"*",element:O.jsx(lv,{to:"/",replace:!0})})]})}function Hz(){return O.jsx(WN,{children:O.jsx(U5,{children:O.jsx("div",{className:"h-full",children:O.jsx(Fz,{})})})})}LD.createRoot(document.getElementById("root")).render(O.jsx(M.StrictMode,{children:O.jsx(Hz,{})}));
